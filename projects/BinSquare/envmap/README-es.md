<p align="center">
  <img src="https://raw.githubusercontent.com/BinSquare/envmap/main/./logo.svg" alt="logotipo de envmap" width="280">
</p>

<p align="center">
  <a href="https://github.com/binsquare/envmap/stargazers">
    <img src="https://img.shields.io/github/stars/binsquare/envmap?style=social" alt="Estrellas en GitHub">
  </a>
  <a href="https://github.com/binsquare/envmap/actions/workflows/release.yml">
    <img src="https://img.shields.io/github/actions/workflow/status/binsquare/envmap/release.yml?branch=main&event=push&label=release" alt="Estado del flujo de trabajo de lanzamiento">
  </a>
  <a href="https://pkg.go.dev/github.com/binsquare/envmap">
    <img src="https://pkg.go.dev/badge/github.com/binsquare/envmap" alt="Referencia del paquete Go">
  </a>
  <a href="https://goreportcard.com/report/github.com/binsquare/envmap">
    <img src="https://goreportcard.com/badge/github.com/binsquare/envmap" alt="Tarjeta de reporte Go">
  </a>
  <a href="https://github.com/binsquare/envmap/blob/main/LICENSE">
    <img src="https://img.shields.io/github/license/binsquare/envmap" alt="Licencia: Apache-2.0">
  </a>
</p>

# envmap

`envmap` es un gestor local de variables de entorno que te ayuda a:

1.  Mantener las variables de entorno locales sincronizadas con los almacenes de secretos remotos, por proyecto.
2.  Convierte el archivo `.env` en un artefacto efímero, para mantener a los proveedores de secretos como la fuente de verdad. Es decir, "envmap --sync" para producir un archivo `.env` recién actualizado.
3.  Incluye metadatos en cada clave almacenada para informar cuándo esas claves fueron modificadas/creadas por última vez con el fin de realizar rotaciones rutinarias.
4.  Potencialmente mejor seguridad ya que no estás obligado a almacenar secretos en un archivo `.env` en texto plano.
5.  Se ejecuta completamente local y es de código abierto para auditorías.

### ¿Para quién es esto?

- Ingenieros que trabajan con múltiples variantes de `.env` como `.env.prod, .env.dev, .env.staging`. Esto te ayudará a consolidar y cambiar de entorno con un solo comando. Aquí hay un ejemplo de ese flujo de trabajo: 

```
(base) binsquare@mac.lan:~/Documents/envMap (main*) $ ./envmap sync --env prod
Wrote .env (1 secrets)
(base) binsquare@mac.lan:~/Documents/envMap (main*) $ cat .env
# generated by envmap sync 2025-12-01T07:49:20Z
testkey=apishofih123
(base) binsquare@mac.lan:~/Documents/envMap (main*) $ ./envmap sync --env dev
Wrote .env (1 secrets)
(base) binsquare@mac.lan:~/Documents/envMap (main*) $ cat .env
# generated by envmap sync 2025-12-01T07:50:07Z
testkey=test123
```
- Los ingenieros que trabajan con una larga lista de variables de entorno solo quieren una herramienta que les ayude a gestionarlas y que aumente la velocidad de desarrollo asegurando que tienen metadatos  
- Los ingenieros que trabajan en múltiples proyectos quieren consolidar y rastrear las variables ENV de forma global.  

## Instalación  

### Opción 1: Herramientas de Go  


```sh
go install github.com/binsquare/envmap@latest
```

### Opción 2: Binario precompilado (bash)

```sh
# install into /usr/local/bin (requires sudo)
curl -sSfL "https://github.com/binsquare/envmap/releases/latest/download/envmap_$(uname -s)_$(uname -m).tar.gz" \
  | sudo tar -xz -C /usr/local/bin envmap

# or install into ~/.local/bin (no sudo; ensure it's on PATH)
mkdir -p ~/.local/bin
curl -sSfL "https://github.com/binsquare/envmap/releases/latest/download/envmap_$(uname -s)_$(uname -m).tar.gz" \
  | tar -xz -C ~/.local/bin envmap

# (optional) verify checksum (adjust path if using ~/.local/bin)
curl -sSfL "https://github.com/binsquare/envmap/releases/latest/download/envmap_$(uname -s)_$(uname -m).tar.gz.sha256" \
  | sha256sum --check -
```

Si usas la opción `~/.local/bin`, asegúrate de que tu shell la cargue (la mayoría de los shells modernos ya lo hacen; de lo contrario, añade `export PATH="$HOME/.local/bin:$PATH"` a tu perfil).

Reinicia el shell (o recarga el perfil) y ejecuta `envmap --help` para verificar.

## Inicio rápido (proveedor local)

```sh
# 1. Generate encryption key (writes to ~/.envmap/key)
envmap keygen

# 2. Configure global provider (wizard; runs keygen if needed)
envmap init --global

# 3. Create project config (wizard)
envmap init

# 4. Add secrets
envmap set --env dev DATABASE_URL --prompt
envmap set --env dev STRIPE_KEY --prompt

# 5. Inspect/export/run
envmap get --env dev --all
eval $(envmap export --env dev)
envmap run --env dev -- npm start
```

Prefiera los asistentes, pero se admite la configuración manual. Use rutas absolutas (Go no expande `~` ni `${HOME}`).

<details>
<summary>Referencia de configuración manual</summary>

### Configuración global (`~/.envmap/config.yaml`)

```yaml
providers:
  local-dev:
    type: local-file
    path: /Users/<you>/.envmap/secrets.db
    encryption:
      key_file: /Users/<you>/.envmap/key
```

### Configuración del proyecto (`.envmap.yaml`)

```yaml
project: demo
default_env: dev
envs:
  dev:
    provider: local-dev
    prefix: demo/dev/
```

</details>

## Uso

- `envmap run [--env <nombre>] -- <comando>` – obtener secretos y ejecutar el comando con ellos inyectados como variables de entorno (el disco nunca los ve).
- `envmap export [--env <nombre>] [--format plain|json]` – salida adecuada para `eval`, direnv o herramientas.
- `envmap get --env <nombre> CLAVE [--raw]` – leer secretos individuales.
- `envmap get --env <nombre> --all [--raw] [--global]` – listar todos los secretos (enmascarados por defecto); `--global` itera todos los entornos.
- `envmap set --env <nombre> CLAVE (--prompt | --file RUTA)` – escribir/actualizar secretos sin historial de shell.
- `envmap import RUTA --env <nombre> [--delete]` – ingresar archivos `.env` existentes.
- `envmap sync --env <nombre> [--out .env] [--merge] [--keep-local] [--force] [--backup=false]` – escribir un archivo .env desde los secretos del proveedor. El proveedor gana por defecto; merge conserva claves locales adicionales; keep-local preserva valores locales en conflicto; backup escribe primero .bak.
- `envmap sync --env <nombre> --check` – reportar desviaciones entre el proveedor y .env sin escribir.
- `envmap keygen [-o RUTA]` – crear una clave de 256 bits para el proveedor local.
- `envmap validate` – confirmar que `.envmap.yaml` y la configuración global referencian proveedores definidos.
- `envmap init` / `envmap init --global` – configuración interactiva de proyecto/global.

### Uso con direnv

```sh
# .envrc
eval "$(envmap export --env dev)"
```

Luego ejecuta `direnv allow`. Cada vez que entres al directorio, direnv volverá a ejecutar `envmap export` y llenará el shell con secretos frescos sin tocar el disco.

## Configuración

### Configuración global (`~/.envmap/config.yaml`)

```yaml
providers:
  aws-dev:
    type: aws-ssm
    region: us-west-2
    profile: dev # optional, uses default credential chain

  vault-prod:
    type: vault
    address: https://vault.internal:8200
    mount: secret # default: secret

  local:
    type: local-file
    path: ~/.envmap/secrets.db
    encryption:
      key_file: ~/.envmap/key # must be chmod 600
      # or: key_env: ENVMAP_KEY
```

### Configuración del proyecto (`.envmap.yaml`)

```yaml
project: myapp
default_env: dev

envs:
  dev:
    provider: aws-dev
    path_prefix: /myapp/dev/

  staging:
    provider: aws-dev
    path_prefix: /myapp/staging/

  local:
    provider: local
    prefix: myapp/
```

## Proveedores integrados (WIP)

| Tipo                 | Autenticación              | Notas                                                    |
| -------------------- | -------------------------- | -------------------------------------------------------- |
| `aws-ssm`            | IAM (perfil/env/instancia) | Requiere `path_prefix`. Usa SecureString.                |
| `aws-secretsmanager` | IAM                        | Nombres completos de secretos. Secretos JSON expandidos a `nombre/clave`. |
| `gcp-secretmanager`  | ADC o cuenta de servicio   | Lee la última versión. Añade versión al escribir.        |
| `vault`              | Token (env/config)         | KV v2. Ruta de montaje y espacio de nombres configurable.|
| `onepassword`        | Servidor Connect           | Requiere `connect_host`. Elementos coinciden por título. |
| `doppler`            | Token de servicio          | Solo lectura; escrituras requieren Doppler CLI.          |
| `local-file`         | AES-256-GCM                | Clave desde archivo (0600) o variable de entorno. Para desarrollo local. |

## Modelo de Seguridad

- Los secretos nunca tocan disco durante la operación normal. (a menos que elijas usar localstore para almacenar todas tus variables de entorno)
- Solo tenemos `set --prompt` y `set --file` para evitar guardar secretos en el historial del shell.
- Los valores están enmascarados por defecto en la salida de `env` y `get`

## Contribuciones

Se aceptan contribuciones y reportes de errores—abre un issue o envía un PR si encuentras un error.

## Licencia

Licenciado bajo la Licencia Apache, Versión 2.0. Consulta [LICENSE](./LICENSE) para más detalles.


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2026-01-21

---