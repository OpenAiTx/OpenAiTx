<p align="center">
  <img src="https://raw.githubusercontent.com/BinSquare/envmap/main/./logo.svg" alt="envmap logo" width="280">
</p>

<p align="center">
  <a href="https://github.com/binsquare/envmap/stargazers">
    <img src="https://img.shields.io/github/stars/binsquare/envmap?style=social" alt="GitHub stars">
  </a>
  <a href="https://github.com/binsquare/envmap/actions/workflows/release.yml">
    <img src="https://img.shields.io/github/actions/workflow/status/binsquare/envmap/release.yml?branch=main&event=push&label=release" alt="Release workflow status">
  </a>
  <a href="https://pkg.go.dev/github.com/binsquare/envmap">
    <img src="https://pkg.go.dev/badge/github.com/binsquare/envmap" alt="Go pkg Reference">
  </a>
  <a href="https://goreportcard.com/report/github.com/binsquare/envmap">
    <img src="https://goreportcard.com/badge/github.com/binsquare/envmap" alt="Go Report Card">
  </a>
  <a href="https://github.com/binsquare/envmap/blob/main/LICENSE">
    <img src="https://img.shields.io/github/license/binsquare/envmap" alt="License: Apache-2.0">
  </a>
</p>

# envmap

`envmap`은 프로젝트별로 로컬 환경 변수를 원격 비밀 저장소와 동기화하는 데 도움을 주는 로컬 환경 관리자입니다.

1.  프로젝트별로 로컬 환경 변수를 원격 비밀 저장소와 동기화 상태로 유지합니다.
2.  `.env` 파일을 일시적인 아티팩트로 만들어 비밀 공급자를 진실의 원천으로 유지합니다. 즉, "envmap --sync" 명령어로 새로 업데이트된 `.env` 파일을 생성합니다.
3.  각 키에 대한 메타데이터를 포함하여 키가 마지막으로 변경/생성된 시점을 알려주어 정기적인 교체 작업에 도움을 줍니다.
4.  평문 `.env` 파일에 비밀을 저장하는 데 얽매이지 않기 때문에 보안이 향상될 수 있습니다.
5.  완전히 로컬에서 실행되며 감사가 가능한 오픈소스입니다.

### 대상 사용자

- `.env.prod`, `.env.dev`, `.env.staging`과 같은 여러 `.env` 변형을 사용하는 엔지니어. 이 도구는 단일 명령어로 환경을 통합하고 전환하는 데 도움을 줍니다. 다음은 그 작업 흐름의 예입니다: 

```
(base) binsquare@mac.lan:~/Documents/envMap (main*) $ ./envmap sync --env prod
Wrote .env (1 secrets)
(base) binsquare@mac.lan:~/Documents/envMap (main*) $ cat .env
# generated by envmap sync 2025-12-01T07:49:20Z
testkey=apishofih123
(base) binsquare@mac.lan:~/Documents/envMap (main*) $ ./envmap sync --env dev
Wrote .env (1 secrets)
(base) binsquare@mac.lan:~/Documents/envMap (main*) $ cat .env
# generated by envmap sync 2025-12-01T07:50:07Z
testkey=test123
```
- 긴 환경 변수 목록을 다루는 엔지니어는 메타데이터를 보장하여 개발 속도를 높여주는 관리 도구를 원합니다.  
- 여러 프로젝트에서 작업하는 엔지니어는 전역적으로 환경 변수를 통합하고 추적하기를 원합니다.  

## 설치  

### 옵션 1: Go 툴체인  


```sh
go install github.com/binsquare/envmap@latest
```

### 옵션 2: 미리 빌드된 바이너리 (bash)

```sh
# install into /usr/local/bin (requires sudo)
curl -sSfL "https://github.com/binsquare/envmap/releases/latest/download/envmap_$(uname -s)_$(uname -m).tar.gz" \
  | sudo tar -xz -C /usr/local/bin envmap

# or install into ~/.local/bin (no sudo; ensure it's on PATH)
mkdir -p ~/.local/bin
curl -sSfL "https://github.com/binsquare/envmap/releases/latest/download/envmap_$(uname -s)_$(uname -m).tar.gz" \
  | tar -xz -C ~/.local/bin envmap

# (optional) verify checksum (adjust path if using ~/.local/bin)
curl -sSfL "https://github.com/binsquare/envmap/releases/latest/download/envmap_$(uname -s)_$(uname -m).tar.gz.sha256" \
  | sha256sum --check -
```
만약 `~/.local/bin` 옵션을 사용한다면, 셸이 이를 불러오는지 확인하세요 (대부분의 최신 셸은 이미 불러옵니다; 그렇지 않으면 `export PATH="$HOME/.local/bin:$PATH"`를 프로필에 추가하세요).

셸을 재시작하거나 (또는 프로필을 다시 불러온 후) `envmap --help`를 실행하여 확인하세요.

## 빠른 시작 (로컬 프로바이더)


```sh
# 1. Generate encryption key (writes to ~/.envmap/key)
envmap keygen

# 2. Configure global provider (wizard; runs keygen if needed)
envmap init --global

# 3. Create project config (wizard)
envmap init

# 4. Add secrets
envmap set --env dev DATABASE_URL --prompt
envmap set --env dev STRIPE_KEY --prompt

# 5. Inspect/export/run
envmap get --env dev --all
eval $(envmap export --env dev)
envmap run --env dev -- npm start
```
마법사를 선호하지만 수동 구성이 지원됩니다. 절대 경로를 사용하세요(Go는 `~` 또는 `${HOME}`을 확장하지 않습니다).

<details>
<summary>수동 구성 참조</summary>

### 전역 구성 (`~/.envmap/config.yaml`)


```yaml
providers:
  local-dev:
    type: local-file
    path: /Users/<you>/.envmap/secrets.db
    encryption:
      key_file: /Users/<you>/.envmap/key
```

### 프로젝트 구성 (`.envmap.yaml`)

```yaml
project: demo
default_env: dev
envs:
  dev:
    provider: local-dev
    prefix: demo/dev/
```
</details>

## 사용법

- `envmap run [--env <name>] -- <command>` – 시크릿을 가져와 환경 변수로 주입하여 명령어를 실행합니다 (디스크에는 절대 저장되지 않음).
- `envmap export [--env <name>] [--format plain|json]` – `eval`, direnv 또는 도구에 적합한 출력.
- `envmap get --env <name> KEY [--raw]` – 개별 시크릿 읽기.
- `envmap get --env <name> --all [--raw] [--global]` – 모든 시크릿 나열 (기본적으로 마스킹됨); `--global`은 모든 환경 반복.
- `envmap set --env <name> KEY (--prompt | --file PATH)` – 쉘 기록 없이 시크릿 쓰기/업데이트.
- `envmap import PATH --env <name> [--delete]` – 기존 `.env` 파일 가져오기.
- `envmap sync --env <name> [--out .env] [--merge] [--keep-local] [--force] [--backup=false]` – 공급자 시크릿으로 .env 파일 작성. 기본적으로 공급자 우선; merge는 로컬 전용 키 유지; keep-local은 충돌 시 로컬 값 보존; backup은 먼저 .bak 작성.
- `envmap sync --env <name> --check` – 쓰지 않고 공급자와 .env 간 차이 보고.
- `envmap keygen [-o PATH]` – 로컬 공급자용 256비트 키 생성.
- `envmap validate` – `.envmap.yaml`과 전역 설정이 정의된 공급자를 참조하는지 확인.
- `envmap init` / `envmap init --global` – 대화형 프로젝트/전역 설정.

### direnv와 함께 사용하기


```sh
# .envrc
eval "$(envmap export --env dev)"
```

그런 다음 `direnv allow`를 실행합니다. 디렉터리에 들어갈 때마다 direnv는 `envmap export`를 다시 실행하고 디스크에 접근하지 않고도 셸에 최신 비밀 정보를 채웁니다.

## 구성

### 전역 설정 (`~/.envmap/config.yaml`)

```yaml
providers:
  aws-dev:
    type: aws-ssm
    region: us-west-2
    profile: dev # optional, uses default credential chain

  vault-prod:
    type: vault
    address: https://vault.internal:8200
    mount: secret # default: secret

  local:
    type: local-file
    path: ~/.envmap/secrets.db
    encryption:
      key_file: ~/.envmap/key # must be chmod 600
      # or: key_env: ENVMAP_KEY
```

### 프로젝트 구성 (`.envmap.yaml`)

```yaml
project: myapp
default_env: dev

envs:
  dev:
    provider: aws-dev
    path_prefix: /myapp/dev/

  staging:
    provider: aws-dev
    path_prefix: /myapp/staging/

  local:
    provider: local
    prefix: myapp/
```

## 내장 제공자 (작업 중)

| 유형                  | 인증                       | 비고                                                    |
| -------------------- | -------------------------- | ------------------------------------------------------- |
| `aws-ssm`            | IAM (프로파일/환경/인스턴스) | `path_prefix` 필요. SecureString 사용.                  |
| `aws-secretsmanager` | IAM                        | 전체 비밀 이름. JSON 비밀은 `name/key`로 확장됨.        |
| `gcp-secretmanager`  | ADC 또는 서비스 계정        | 최신 버전 읽기. 쓰기 시 버전 추가.                       |
| `vault`              | 토큰 (환경/설정)            | KV v2. 마운트 경로 및 네임스페이스 구성 가능.            |
| `onepassword`        | Connect 서버               | `connect_host` 필요. 제목으로 항목 매칭.                |
| `doppler`            | 서비스 토큰                | 읽기 전용; 쓰기는 Doppler CLI 필요.                      |
| `local-file`         | AES-256-GCM                | 파일(0600) 또는 환경 변수에서 키. 로컬 개발용.           |

## 보안 모델

- 정상 작동 중에는 비밀이 디스크에 절대 저장되지 않음. (모든 환경 변수를 저장하기 위해 localstore 사용 선택 시 제외)
- 비밀을 쉘 히스토리에 저장하지 않도록 `set --prompt`와 `set --file`만 사용.
- 기본적으로 `env` 및 `get` 출력에서 값이 마스킹됨

## 기여

기여 및 버그 보고 환영—버그 발견 시 이슈를 열거나 PR 제출.

## 라이선스

Apache 라이선스 버전 2.0에 따라 라이선스가 부여됨. 자세한 내용은 [LICENSE](./LICENSE) 참조.


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2026-01-21

---