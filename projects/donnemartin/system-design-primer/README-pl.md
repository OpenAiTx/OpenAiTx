*[English](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/README.md) ∙ [日本語](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/README-ja.md) ∙ [简体中文](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/README-zh-Hans.md) ∙ [繁體中文](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/README-zh-TW.md) | [العَرَبِيَّة‎](https://github.com/donnemartin/system-design-primer/issues/170) ∙ [বাংলা](https://github.com/donnemartin/system-design-primer/issues/220) ∙ [Português do Brasil](https://github.com/donnemartin/system-design-primer/issues/40) ∙ [Deutsch](https://github.com/donnemartin/system-design-primer/issues/186) ∙ [ελληνικά](https://github.com/donnemartin/system-design-primer/issues/130) ∙ [עברית](https://github.com/donnemartin/system-design-primer/issues/272) ∙ [Italiano](https://github.com/donnemartin/system-design-primer/issues/104) ∙ [한국어](https://github.com/donnemartin/system-design-primer/issues/102) ∙ [فارسی](https://github.com/donnemartin/system-design-primer/issues/110) ∙ [Polski](https://github.com/donnemartin/system-design-primer/issues/68) ∙ [русский язык](https://github.com/donnemartin/system-design-primer/issues/87) ∙ [Español](https://github.com/donnemartin/system-design-primer/issues/136) ∙ [ภาษาไทย](https://github.com/donnemartin/system-design-primer/issues/187) ∙ [Türkçe](https://github.com/donnemartin/system-design-primer/issues/39) ∙ [tiếng Việt](https://github.com/donnemartin/system-design-primer/issues/127) ∙ [Français](https://github.com/donnemartin/system-design-primer/issues/250) | [Add Translation](https://github.com/donnemartin/system-design-primer/issues/28)*

**Pomóż [przetłumaczyć](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/TRANSLATIONS.md) ten przewodnik!**

# The System Design Primer

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/jj3A5N8.png">
  <br/>
</p>

## Motywacja

> Naucz się projektować systemy na dużą skalę.
>
> Przygotuj się do rozmowy rekrutacyjnej z zakresu projektowania systemów.

### Naucz się projektować systemy na dużą skalę

Nauka projektowania skalowalnych systemów pomoże Ci stać się lepszym inżynierem.

Projektowanie systemów to szeroki temat. Istnieje **ogromna ilość zasobów rozproszonych po całym internecie** na temat zasad projektowania systemów.

To repozytorium to **zorganizowana kolekcja** zasobów, które pomogą Ci nauczyć się budować systemy na dużą skalę.

### Ucz się od społeczności open source

To jest stale aktualizowany projekt open source.

[Wkłady](#contributing) są mile widziane!

### Przygotuj się do rozmowy rekrutacyjnej z zakresu projektowania systemów

Oprócz rozmów technicznych z zakresu kodowania, projektowanie systemów jest **wymaganym elementem** **procesu rekrutacyjnego** w wielu firmach technologicznych.

**Ćwicz popularne pytania rekrutacyjne z projektowania systemów** i **porównuj** swoje odpowiedzi z **przykładowymi rozwiązaniami**: dyskusje, kod oraz diagramy.

Dodatkowe tematy do przygotowania do rozmowy rekrutacyjnej:

* [Przewodnik do nauki](#study-guide)
* [Jak podejść do pytania z projektowania systemów na rozmowie](#how-to-approach-a-system-design-interview-question)
* [Pytania z zakresu projektowania systemów, **z rozwiązaniami**](#system-design-interview-questions-with-solutions)
* [Pytania z zakresu projektowania obiektowego, **z rozwiązaniami**](#object-oriented-design-interview-questions-with-solutions)
* [Dodatkowe pytania z zakresu projektowania systemów](#additional-system-design-interview-questions)

## Fiszki Anki

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/zdCAkB3.png">
  <br/>
</p>

Dostarczone [talii fiszek Anki](https://apps.ankiweb.net/) używają powtarzania rozłożonego w czasie, aby pomóc Ci zapamiętać kluczowe pojęcia z projektowania systemów.

* [Talia projektowania systemów](https://github.com/donnemartin/system-design-primer/tree/master/resources/flash_cards/System%20Design.apkg)
* [Talia ćwiczeń z projektowania systemów](https://github.com/donnemartin/system-design-primer/tree/master/resources/flash_cards/System%20Design%20Exercises.apkg)
* [Talia ćwiczeń z projektowania obiektowego](https://github.com/donnemartin/system-design-primer/tree/master/resources/flash_cards/OO%20Design.apkg)

Świetne do nauki w podróży.

### Zasób programistyczny: Interaktywne wyzwania programistyczne

Szukasz zasobów, które pomogą Ci przygotować się do [**rozmowy rekrutacyjnej z kodowania**](https://github.com/donnemartin/interactive-coding-challenges)?

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/b4YtAEN.png">
  <br/>
</p>

Zobacz repozytorium siostrzane [**Interaktywne wyzwania programistyczne**](https://github.com/donnemartin/interactive-coding-challenges), które zawiera dodatkową talię Anki:

* [Talia kodowania](https://github.com/donnemartin/interactive-coding-challenges/tree/master/anki_cards/Coding.apkg)

## Współtworzenie

> Ucz się od społeczności.

Zachęcamy do zgłaszania pull requestów, aby pomóc:

* Poprawić błędy
* Ulepszyć sekcje
* Dodaj nowe sekcje
* [Tłumacz](https://github.com/donnemartin/system-design-primer/issues/28)

Treści wymagające dopracowania są umieszczone [w trakcie rozwoju](#under-development).

Przejrzyj [Wytyczne dotyczące współtworzenia](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/CONTRIBUTING.md).

## Indeks tematów dotyczących projektowania systemów

> Podsumowania różnych tematów związanych z projektowaniem systemów, w tym zalety i wady.  **Wszystko jest kompromisem**.
>
> Każda sekcja zawiera linki do bardziej szczegółowych materiałów.

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/jrUBAF7.png">
  <br/>
</p>

* [Tematy projektowania systemów: zacznij tutaj](#system-design-topics-start-here)
    * [Krok 1: Przejrzyj wykład wideo o skalowalności](#step-1-review-the-scalability-video-lecture)
    * [Krok 2: Przejrzyj artykuł o skalowalności](#step-2-review-the-scalability-article)
    * [Następne kroki](#next-steps)
* [Wydajność vs skalowalność](#performance-vs-scalability)
* [Opóźnienie vs przepustowość](#latency-vs-throughput)
* [Dostępność vs spójność](#availability-vs-consistency)
    * [Teoria CAP](#cap-theorem)
        * [CP - spójność i tolerancja podziału](#cp---consistency-and-partition-tolerance)
        * [AP - dostępność i tolerancja podziału](#ap---availability-and-partition-tolerance)
* [Wzorce spójności](#consistency-patterns)
    * [Słaba spójność](#weak-consistency)
    * [Ostateczna spójność](#eventual-consistency)
    * [Silna spójność](#strong-consistency)
* [Wzorce dostępności](#availability-patterns)
    * [Fail-over](#fail-over)
    * [Replikacja](#replication)
    * [Dostępność w liczbach](#availability-in-numbers)
* [System nazw domenowych](#domain-name-system)
* [Sieć dostarczania treści](#content-delivery-network)
    * [Push CDN-y](#push-cdns)
    * [Pull CDN-y](#pull-cdns)
* [Load balancer](#load-balancer)
    * [Aktywny-pasywny](#active-passive)
    * [Aktywny-aktywny](#active-active)
    * [Równoważenie obciążenia warstwy 4](#layer-4-load-balancing)
    * [Równoważenie obciążenia warstwy 7](#layer-7-load-balancing)
    * [Skalowanie horyzontalne](#horizontal-scaling)
* [Reverse proxy (serwer WWW)](#reverse-proxy-web-server)
    * [Load balancer vs reverse proxy](#load-balancer-vs-reverse-proxy)
* [Warstwa aplikacji](#application-layer)
    * [Mikrousługi](#microservices)
    * [Odkrywanie usług](#service-discovery)
* [Baza danych](#database)
    * [Relacyjny system zarządzania bazą danych (RDBMS)](#relational-database-management-system-rdbms)
        * [Replikacja master-slave](#master-slave-replication)
        * [Replikacja master-master](#master-master-replication)
        * [Federacja](#federation)
        * [Sharding (dzielenie danych)](#sharding)
        * [Denormalizacja](#denormalization)
        * [Optymalizacja SQL](#sql-tuning)
    * [NoSQL](#nosql)
        * [Magazyn klucz-wartość](#key-value-store)
        * [Magazyn dokumentów](#document-store)
        * [Magazyn szerokokolumnowy](#wide-column-store)
        * [Baza danych grafowa](#graph-database)
    * [SQL czy NoSQL](#sql-or-nosql)
* [Cache](#cache)
    * [Cache po stronie klienta](#client-caching)
    * [Cache CDN](#cdn-caching)
    * [Cache serwera WWW](#web-server-caching)
    * [Cache bazy danych](#database-caching)
    * [Cache aplikacji](#application-caching)
    * [Cache na poziomie zapytań do bazy](#caching-at-the-database-query-level)
    * [Cache na poziomie obiektów](#caching-at-the-object-level)
    * [Kiedy aktualizować cache](#when-to-update-the-cache)
        * [Cache-aside](#cache-aside)
        * [Write-through](#write-through)
        * [Write-behind (write-back)](#write-behind-write-back)
        * [Refresh-ahead](#refresh-ahead)
* [Asynchroniczność](#asynchronism)
    * [Kolejki wiadomości](#message-queues)
    * [Kolejki zadań](#kolejki-zadań)
    * [Ciśnienie zwrotne](#ciśnienie-zwrotne)
* [Komunikacja](#komunikacja)
    * [Protokół sterowania transmisją (TCP)](#protokół-sterowania-transmisją-tcp)
    * [Protokół datagramów użytkownika (UDP)](#protokół-datagramów-użytkownika-udp)
    * [Zdalne wywołanie procedury (RPC)](#zdalne-wywołanie-procedury-rpc)
    * [Reprezentacyjny transfer stanu (REST)](#reprezentacyjny-transfer-stanu-rest)
* [Bezpieczeństwo](#bezpieczeństwo)
* [Aneks](#aneksy)
    * [Tabela potęg dwójki](#tabela-potęg-dwójki)
    * [Liczby opóźnień, które każdy programista powinien znać](#liczby-opóźnień-które-każdy-programista-powinien-znać)
    * [Dodatkowe pytania do rozmów o projektowaniu systemów](#dodatkowe-pytania-do-rozmów-o-projektowaniu-systemów)
    * [Architektury rzeczywiste](#architektury-rzeczywiste)
    * [Architektury firm](#architektury-firm)
    * [Firmowe blogi inżynierskie](#firmowe-blogi-inżynierskie)
* [W trakcie rozwoju](#w-trakcie-rozwoju)
* [Podziękowania](#podziękowania)
* [Informacje kontaktowe](#informacje-kontaktowe)
* [Licencja](#licencja)

## Przewodnik do nauki

> Zalecane tematy do przeglądu w zależności od terminu rozmowy kwalifikacyjnej (krótki, średni, długi).

![Imgur](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/OfVllex.png)

**P: Czy na rozmowę kwalifikacyjną muszę znać wszystko z tej listy?**

**O: Nie, nie musisz znać wszystkiego, aby przygotować się do rozmowy kwalifikacyjnej**.

O co zostaniesz zapytany na rozmowie zależy od takich czynników jak:

* Jakie masz doświadczenie
* Jakie masz techniczne przygotowanie
* Na jakie stanowiska aplikujesz
* Do jakich firm aplikujesz
* Szczęście

Od bardziej doświadczonych kandydatów zazwyczaj oczekuje się większej wiedzy o projektowaniu systemów.  Architekci lub liderzy zespołów mogą być zobowiązani do szerszej wiedzy niż pojedynczy członkowie zespołu.  Najlepsze firmy technologiczne prawdopodobnie przeprowadzą jedną lub więcej rund rozmów o projektowaniu systemów.

Zacznij szeroko i pogłęb się w kilku obszarach. Pomaga znać podstawy różnych kluczowych zagadnień z zakresu projektowania systemów. Dostosuj poniższy przewodnik do swojego harmonogramu, doświadczenia, stanowisk na które aplikujesz oraz firm, z którymi masz rozmowy.

* **Krótki harmonogram** – Skup się na **szerokości** zagadnień związanych z projektowaniem systemów. Ćwicz rozwiązując **kilka** pytań z rozmów kwalifikacyjnych.
* **Średni harmonogram** – Skup się na **szerokości** i **pewnej głębokości** zagadnień z projektowania systemów. Ćwicz rozwiązując **wiele** pytań z rozmów kwalifikacyjnych.
* **Długi harmonogram** – Skup się na **szerokości** i **większej głębokości** zagadnień z projektowania systemów. Ćwicz rozwiązując **większość** pytań z rozmów kwalifikacyjnych.

| | Krótki | Średni | Długi |
|---|---|---|---|
| Przeczytaj [Tematy projektowania systemów](#index-of-system-design-topics), aby uzyskać szerokie zrozumienie działania systemów | :+1: | :+1: | :+1: |
| Przeczytaj kilka artykułów z [Blogów inżynierskich firm](#company-engineering-blogs), do których aplikujesz | :+1: | :+1: | :+1: |
| Przejrzyj kilka [Architektur rzeczywistych systemów](#real-world-architectures) | :+1: | :+1: | :+1: |
| Przejrzyj [Jak podejść do pytania z projektowania systemu](#how-to-approach-a-system-design-interview-question) | :+1: | :+1: | :+1: |
| Przećwicz [Pytania z rozmów z projektowania systemów wraz z rozwiązaniami](#system-design-interview-questions-with-solutions) | Kilka | Wiele | Większość |
| Przećwicz [Pytania z rozmów z projektowania obiektowego wraz z rozwiązaniami](#object-oriented-design-interview-questions-with-solutions) | Kilka | Wiele | Większość |
| Przejrzyj [Dodatkowe pytania z rozmów o projektowaniu systemów](#additional-system-design-interview-questions) | Kilka | Wiele | Większość |

## Jak podejść do pytania z projektowania systemu

> Jak zmierzyć się z pytaniem na rozmowie o projektowaniu systemu.

Rozmowa z projektowania systemu to **otwarta dyskusja**. Oczekuje się, że to Ty ją poprowadzisz.

Możesz skorzystać z poniższych kroków, aby poprowadzić rozmowę. Aby utrwalić ten proces, przejdź sekcję [Pytania z rozmów z projektowania systemów wraz z rozwiązaniami](#system-design-interview-questions-with-solutions) korzystając z tych kroków.

### Krok 1: Określ przypadki użycia, ograniczenia i założenia

Zbierz wymagania i określ zakres problemu. Zadawaj pytania, aby wyjaśnić przypadki użycia i ograniczenia. Omów założenia.

* Kto będzie z tego korzystał?
* Jak będą z tego korzystać?
* Ilu będzie użytkowników?
* Co robi system?
* Jakie są wejścia i wyjścia systemu?
* Ile danych spodziewamy się obsłużyć?
* Ilu żądań na sekundę się spodziewamy?
* Jaki jest oczekiwany stosunek odczytów do zapisów?

### Krok 2: Stwórz projekt na wysokim poziomie

Przedstaw projekt na wysokim poziomie ze wszystkimi istotnymi komponentami.

* Naszkicuj główne komponenty i połączenia
* Uzasadnij swoje pomysły

### Krok 3: Zaprojektuj główne komponenty

Przejdź do szczegółów każdego kluczowego komponentu. Na przykład, jeśli poproszono Cię o [zaprojektowanie usługi skracania URL](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/pastebin/README.md), omów:

* Generowanie i przechowywanie skrótu pełnego adresu URL
    * [MD5](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/pastebin/README.md) oraz [Base62](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/pastebin/README.md)
    * Kolizje skrótów
    * SQL czy NoSQL
    * Schemat bazy danych
* Tłumaczenie skróconego URL na pełny adres URL
    * Wyszukiwanie w bazie danych
* Projektowanie API i obiektowe

### Krok 4: Skalowanie projektu

Zidentyfikuj i rozwiąż wąskie gardła, biorąc pod uwagę ograniczenia. Na przykład, czy potrzebujesz poniższych rozwiązań, aby rozwiązać problemy ze skalowalnością?

* Load balancer
* Skalowanie horyzontalne
* Cache'owanie
* Sharding bazy danych

Omów potencjalne rozwiązania i kompromisy. Wszystko jest kompromisem. Rozwiązuj wąskie gardła, wykorzystując [zasady projektowania skalowalnych systemów](#index-of-system-design-topics).

### Szacowania „na szybko”

Możesz zostać poproszony o wykonanie szacowań ręcznych. Zajrzyj do [Aneksu](#appendix), gdzie znajdziesz następujące materiały:

* [Używaj szacowań „na szybko”](http://highscalability.com/blog/2011/1/26/google-pro-tip-use-back-of-the-envelope-calculations-to-choo.html)
* [Tabela potęg dwójki](#powers-of-two-table)
* [Liczby opóźnień, które każdy programista powinien znać](#latency-numbers-every-programmer-should-know)

### Źródła i dalsza lektura

Zapoznaj się z poniższymi linkami, aby lepiej zrozumieć, czego się spodziewać:

* [Jak zdać rozmowę kwalifikacyjną z projektowania systemów](https://www.palantir.com/2011/10/how-to-rock-a-systems-design-interview/)
* [Rozmowa kwalifikacyjna z projektowania systemów](http://www.hiredintech.com/system-design)
* [Wprowadzenie do architektury i rozmów kwalifikacyjnych z projektowania systemów](https://www.youtube.com/watch?v=ZgdS0EUmn70)
* [Szablon projektowania systemu](https://leetcode.com/discuss/career/229177/My-System-Design-Template)

## Pytania z rozmów kwalifikacyjnych z projektowania systemów wraz z rozwiązaniami

> Typowe pytania z rozmów kwalifikacyjnych z projektowania systemów wraz z przykładami dyskusji, kodem i diagramami.
>
> Rozwiązania powiązane z zawartością w folderze `solutions/`.

| Pytanie | |
|---|---|
| Zaprojektuj Pastebin.com (lub Bit.ly) | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/pastebin/README.md) |
| Zaprojektuj linię czasu i wyszukiwanie na Twitterze (lub Facebook feed i wyszukiwanie) | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/twitter/README.md) |
| Zaprojektuj crawler internetowy | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/web_crawler/README.md) |
| Zaprojektuj Mint.com | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/mint/README.md) |
| Zaprojektuj struktury danych dla sieci społecznościowej | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/social_graph/README.md) |
| Zaprojektuj magazyn klucz-wartość dla wyszukiwarki | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/query_cache/README.md) |
| Zaprojektuj funkcję rankingów sprzedaży według kategorii Amazon | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/sales_rank/README.md) |
| Zaprojektuj system skalujący się do milionów użytkowników na AWS | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/scaling_aws/README.md) |
| Dodaj pytanie z projektowania systemu | [Współtwórz](#contributing) |

### Zaprojektuj Pastebin.com (lub Bit.ly)

[Zobacz ćwiczenie i rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/pastebin/README.md)

![Imgur](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/4edXG0T.png)

### Zaprojektuj linię czasu i wyszukiwanie na Twitterze (lub Facebook feed i wyszukiwanie)

[Zobacz ćwiczenie i rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/twitter/README.md)

![Imgur](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/jrUBAF7.png)

### Zaprojektuj crawler internetowy

[Zobacz ćwiczenie i rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/web_crawler/README.md)

![Imgur](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/bWxPtQA.png)

### Design Mint.com

[View exercise and solution](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/mint/README.md)

![Imgur](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/V5q57vU.png)

### Design the data structures for a social network

[View exercise and solution](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/social_graph/README.md)

![Imgur](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/cdCv5g7.png)

### Design a key-value store for a search engine

[View exercise and solution](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/query_cache/README.md)

![Imgur](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/4j99mhe.png)

### Design Amazon's sales ranking by category feature

[View exercise and solution](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/sales_rank/README.md)

![Imgur](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/MzExP06.png)

### Design a system that scales to millions of users on AWS

[View exercise and solution](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/system_design/scaling_aws/README.md)

![Imgur](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/jj3A5N8.png)

## Object-oriented design interview questions with solutions

> Common object-oriented design interview questions with sample discussions, code, and diagrams.
>
> Solutions linked to content in the `solutions/` folder.

>**Note: This section is under development**

| Question | |
|---|---|
| Zaprojektuj tablicę mieszającą (hash map) | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/object_oriented_design/hash_table/hash_map.ipynb)  |
| Zaprojektuj pamięć podręczną najmniej używanych danych (LRU cache) | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/object_oriented_design/lru_cache/lru_cache.ipynb)  |
| Zaprojektuj centrum obsługi połączeń | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/object_oriented_design/call_center/call_center.ipynb)  |
| Zaprojektuj talię kart | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/object_oriented_design/deck_of_cards/deck_of_cards.ipynb)  |
| Zaprojektuj parking | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/object_oriented_design/parking_lot/parking_lot.ipynb)  |
| Zaprojektuj serwer czatu | [Rozwiązanie](https://raw.githubusercontent.com/donnemartin/system-design-primer/master/solutions/object_oriented_design/online_chat/online_chat.ipynb)  |
| Zaprojektuj tablicę cykliczną | [Wnieś swój wkład](#contributing)  |
| Dodaj pytanie z zakresu projektowania obiektowego | [Wnieś swój wkład](#contributing) |

## Tematy projektowania systemów: zacznij tutaj

Nowy w projektowaniu systemów?

Najpierw musisz mieć podstawową wiedzę na temat powszechnych zasad, dowiedzieć się czym są, jak się ich używa oraz poznać ich zalety i wady.

### Krok 1: Zapoznaj się z wykładem wideo o skalowalności

[Wykład o skalowalności na Harvardzie](https://www.youtube.com/watch?v=-W9F__D3oY4)

* Poruszane tematy:
    * Skalowanie wertykalne
    * Skalowanie horyzontalne
    * Buforowanie (Caching)
    * Równoważenie obciążenia (Load balancing)
    * Replikacja bazy danych
    * Partycjonowanie bazy danych

### Krok 2: Zapoznaj się z artykułem o skalowalności

[Skalowalność](https://web.archive.org/web/20221030091841/http://www.lecloud.net/tagged/scalability/chrono)

* Poruszane tematy:
    * [Klonowanie](https://web.archive.org/web/20220530193911/https://www.lecloud.net/post/7295452622/scalability-for-dummies-part-1-clones)
    * [Bazy danych](https://web.archive.org/web/20220602114024/https://www.lecloud.net/post/7994751381/scalability-for-dummies-part-2-database)
    * [Bufory](https://web.archive.org/web/20230126233752/https://www.lecloud.net/post/9246290032/scalability-for-dummies-part-3-cache)
    * [Asynchroniczność](https://web.archive.org/web/20220926171507/https://www.lecloud.net/post/9699762917/scalability-for-dummies-part-4-asynchronism)

### Kolejne kroki

Następnie przyjrzymy się kompromisom na wysokim poziomie:

* **Wydajność** vs **skalowalność**
* **Opóźnienie** vs **przepustowość**
* **Dostępność** vs **spójność**

Pamiętaj, że **wszystko jest kompromisem**.

Potem przejdziemy do bardziej szczegółowych tematów, takich jak DNS, CDN i load balancery.

## Wydajność vs skalowalność

Usługa jest **skalowalna**, jeśli powoduje wzrost **wydajności** proporcjonalny do dodanych zasobów. Zazwyczaj zwiększenie wydajności oznacza obsługę większej liczby jednostek pracy, ale może też oznaczać obsługę większych jednostek pracy, np. gdy rosną zbiory danych.<sup><a href=http://www.allthingsdistributed.com/2006/03/a_word_on_scalability.html>1</a></sup>

Inny sposób spojrzenia na wydajność vs skalowalność:

* Jeśli masz problem z **wydajnością**, Twój system jest wolny dla pojedynczego użytkownika.
* Jeśli masz problem ze **skalowalnością**, Twój system jest szybki dla pojedynczego użytkownika, ale wolny przy dużym obciążeniu.

### Źródła i dalsza lektura

* [A word on scalability](http://www.allthingsdistributed.com/2006/03/a_word_on_scalability.html)
* [Scalability, availability, stability, patterns](http://www.slideshare.net/jboner/scalability-availability-stability-patterns/)

## Opóźnienie vs przepustowość

**Opóźnienie** to czas potrzebny na wykonanie jakiejś akcji lub uzyskanie wyniku.

**Przepustowość** to liczba takich akcji lub wyników w jednostce czasu.

Zasadniczo należy dążyć do **maksymalnej przepustowości** przy **akceptowalnym opóźnieniu**.

### Źródła i dalsza lektura

* [Understanding latency vs throughput](https://community.cadence.com/cadence_blogs_8/b/fv/posts/understanding-latency-vs-throughput)

## Dostępność vs spójność

### Twierdzenie CAP

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/bgLMI2u.png">
  <br/>
  <i><a href=http://robertgreiner.com/2014/08/cap-theorem-revisited>Źródło: CAP theorem revisited</a></i>
</p>

W rozproszonym systemie komputerowym można zapewnić tylko dwie z poniższych gwarancji:

* **Spójność (Consistency)** – Każdy odczyt otrzymuje najnowszy zapis lub błąd
* **Dostępność (Availability)** – Każde żądanie otrzymuje odpowiedź, bez gwarancji, że zawiera najnowszą wersję informacji
* **Odporność na podziały (Partition Tolerance)** – System działa mimo dowolnych podziałów spowodowanych awariami sieci

*Sieci nie są niezawodne, więc trzeba zapewnić odporność na podziały. Konieczny będzie kompromis programistyczny pomiędzy spójnością a dostępnością.*

#### CP – spójność i odporność na podziały

Oczekiwanie na odpowiedź od podzielonego węzła może skutkować błędem przekroczenia czasu oczekiwania. CP jest dobrym wyborem, jeśli wymagania biznesowe wymagają atomowych odczytów i zapisów.

#### AP – dostępność i odporność na podziały

Odpowiedzi zwracają najłatwiej dostępną wersję danych na dowolnym węźle, która może nie być najnowsza. Zapisy mogą wymagać czasu na propagację po rozwiązaniu podziału.

AP jest dobrym wyborem, jeśli wymagania biznesowe dopuszczają [ostateczną spójność](#eventual-consistency) lub gdy system musi działać mimo błędów zewnętrznych.

### Źródła i dalsza lektura

* [CAP theorem revisited](http://robertgreiner.com/2014/08/cap-theorem-revisited/)
* [Wprowadzenie do twierdzenia CAP prostym językiem](http://ksat.me/a-plain-english-introduction-to-cap-theorem)
* [CAP FAQ](https://github.com/henryr/cap-faq)
* [Twierdzenie CAP](https://www.youtube.com/watch?v=k-Yaq8AHlFA)

## Wzorce spójności

Przy wielu kopiach tych samych danych musimy zdecydować, jak je synchronizować, aby klienci mieli spójny widok danych. Przypomnijmy definicję spójności z [twierdzenia CAP](#cap-theorem) – Każdy odczyt otrzymuje najnowszy zapis lub błąd.

### Słaba spójność (Weak consistency)

Po zapisie odczyty mogą go widzieć lub nie. Stosuje się podejście „najlepszych starań”.

To podejście występuje w systemach takich jak memcached. Słaba spójność sprawdza się w zastosowaniach czasu rzeczywistego, takich jak VoIP, czat wideo i gry wieloosobowe w czasie rzeczywistym. Na przykład, jeśli podczas rozmowy telefonicznej utracisz zasięg na kilka sekund, po odzyskaniu połączenia nie usłyszysz tego, co zostało powiedziane podczas utraty połączenia.

### Spójność ostateczna

Po zapisie, odczyty ostatecznie go zobaczą (zazwyczaj w ciągu milisekund). Dane są replikowane asynchronicznie.

To podejście jest stosowane w systemach takich jak DNS i poczta elektroniczna. Spójność ostateczna dobrze sprawdza się w systemach o wysokiej dostępności.

### Spójność silna

Po zapisie, odczyty go zobaczą. Dane są replikowane synchronicznie.

To podejście jest stosowane w systemach plików i relacyjnych bazach danych (RDBMS). Spójność silna dobrze sprawdza się w systemach wymagających transakcji.

### Źródło(ła) i dalsza lektura

* [Transakcje między centrami danych](http://snarfed.org/transactions_across_datacenters_io.html)

## Wzorce dostępności

Istnieją dwa komplementarne wzorce wspierające wysoką dostępność: **przełączanie awaryjne** i **replikacja**.

### Przełączanie awaryjne

#### Aktywny-pasywny

W przełączaniu awaryjnym aktywny-pasywny, między serwerem aktywnym a pasywnym (w trybie gotowości) są wysyłane sygnały kontrolne (heartbeat). Jeśli sygnał zostanie przerwany, serwer pasywny przejmuje adres IP aktywnego i wznawia usługę.

Długość przestoju zależy od tego, czy serwer pasywny działa już w trybie „gorącej” gotowości, czy musi uruchomić się z „zimnej” gotowości. Tylko serwer aktywny obsługuje ruch.

Przełączanie awaryjne aktywny-pasywny może być również nazywane przełączaniem awaryjnym master-slave.

#### Aktywny-aktywny

W przełączaniu aktywny-aktywny oba serwery obsługują ruch, rozkładając obciążenie między sobą.

Jeśli serwery są dostępne publicznie, DNS musi znać publiczne adresy IP obu serwerów. Jeśli serwery są dostępne wewnętrznie, logika aplikacji musi znać oba serwery.

Przełączanie awaryjne aktywny-aktywny może być również nazywane przełączaniem awaryjnym master-master.

### Wada(y): przełączanie awaryjne

* Fail-over wymaga dodatkowego sprzętu oraz zwiększa złożoność systemu.
* Istnieje ryzyko utraty danych, jeśli aktywny system ulegnie awarii zanim nowo zapisane dane zostaną zreplikowane do pasywnego.

### Replikacja

#### Master-slave i master-master

Ten temat jest szczegółowo omówiony w sekcji [Baza danych](#database):

* [Replikacja master-slave](#master-slave-replication)
* [Replikacja master-master](#master-master-replication)

### Dostępność w liczbach

Dostępność jest często wyrażana jako procent czasu działania (lub przestoju), w którym usługa jest dostępna. Dostępność zwykle mierzy się liczbą dziewiątek--usługa o dostępności 99,99% jest określana jako mająca cztery dziewiątki.

#### 99,9% dostępności - trzy dziewiątki

| Okres                | Akceptowalny czas przestoju|
|----------------------|----------------------------|
| Przestój rocznie     | 8h 45min 57s               |
| Przestój miesięcznie | 43m 49,7s                  |
| Przestój tygodniowo  | 10m 4,8s                   |
| Przestój dziennie    | 1m 26,4s                   |

#### 99,99% dostępności - cztery dziewiątki

| Okres                | Akceptowalny czas przestoju|
|----------------------|----------------------------|
| Przestój rocznie     | 52min 35,7s                |
| Przestój miesięcznie | 4m 23s                     |
| Przestój tygodniowo  | 1m 5s                      |
| Przestój dziennie    | 8,6s                       |

#### Dostępność równoległa vs sekwencyjna

Jeśli usługa składa się z kilku komponentów podatnych na awarie, całkowita dostępność zależy od tego, czy komponenty są połączone sekwencyjnie czy równolegle.

###### Sekwencyjnie
Ogólna dostępność maleje, gdy dwa komponenty o dostępności < 100% są połączone szeregowo:


```
Availability (Total) = Availability (Foo) * Availability (Bar)
```

Jeśli zarówno `Foo`, jak i `Bar` miałyby dostępność na poziomie 99,9%, ich łączna dostępność w sekwencji wynosiłaby 99,8%.

###### Równolegle

Całkowita dostępność wzrasta, gdy dwa komponenty o dostępności < 100% są połączone równolegle:

```
Availability (Total) = 1 - (1 - Availability (Foo)) * (1 - Availability (Bar))
```
Jeśli zarówno `Foo`, jak i `Bar` miałyby dostępność na poziomie 99,9%, ich łączna dostępność w trybie równoległym wynosiłaby 99,9999%.

## System nazw domenowych

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/IOyLj4i.jpg">
  <br/>
  <i><a href=http://www.slideshare.net/srikrupa5/dns-security-presentation-issa>Źródło: Prezentacja o bezpieczeństwie DNS</a></i>
</p>

System nazw domenowych (DNS) tłumaczy nazwę domeny, taką jak www.example.com, na adres IP.

DNS jest hierarchiczny, z kilkoma autorytatywnymi serwerami na najwyższym poziomie. Twój router lub dostawca internetu (ISP) dostarcza informacje o tym, z jakim(i) serwerem(i) DNS się łączyć podczas wyszukiwania. Niższe poziomy serwerów DNS przechowują w pamięci podręcznej mapowania, które mogą się zdezaktualizować z powodu opóźnień propagacji DNS. Wyniki DNS mogą być również buforowane przez Twoją przeglądarkę lub system operacyjny przez określony czas, ustalany przez parametr [time to live (TTL)](https://en.wikipedia.org/wiki/Time_to_live).

* **Rekord NS (name server)** - Określa serwery DNS dla Twojej domeny/poddomeny.
* **Rekord MX (mail exchange)** - Określa serwery pocztowe do odbierania wiadomości.
* **Rekord A (address)** - Wskazuje nazwę na adres IP.
* **CNAME (canonical)** - Wskazuje nazwę na inną nazwę lub `CNAME` (example.com na www.example.com) lub na rekord `A`.

Usługi takie jak [CloudFlare](https://www.cloudflare.com/dns/) i [Route 53](https://aws.amazon.com/route53/) oferują zarządzane usługi DNS. Niektóre usługi DNS mogą kierować ruchem na różne sposoby:

* [Ważony round robin](https://www.jscape.com/blog/load-balancing-algorithms)
    * Zapobiega kierowaniu ruchu na serwery będące w konserwacji
    * Równoważy pomiędzy różnymi rozmiarami klastrów
    * Testy A/B
* [Na podstawie opóźnienia (latency-based)](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy-latency.html)
* [Na podstawie geolokalizacji (geolocation-based)](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy-geo.html)

### Wada(-y): DNS

* Dostęp do serwera DNS wprowadza niewielkie opóźnienie, choć łagodzone przez opisane powyżej buforowanie.
* Zarządzanie serwerem DNS może być skomplikowane i jest zwykle prowadzone przez [rządy, dostawców internetu i duże firmy](http://superuser.com/questions/472695/who-controls-the-dns-servers/472729).
* Usługi DNS były ostatnio celem [ataku DDoS](http://dyn.com/blog/dyn-analysis-summary-of-friday-october-21-attack/), uniemożliwiając użytkownikom dostęp do stron takich jak Twitter bez znajomości adresu(-ów) IP Twittera.

### Źródła i dalsza lektura

* [Architektura DNS](https://technet.microsoft.com/en-us/library/dd197427(v=ws.10).aspx)
* [Wikipedia](https://en.wikipedia.org/wiki/Domain_Name_System)
* [Artykuły o DNS](https://support.dnsimple.com/categories/dns/)


## Sieć dostarczania treści

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/h9TAuGI.jpg">
  <br/>
  <i><a href=https://www.creative-artworks.eu/why-use-a-content-delivery-network-cdn/>Źródło: Dlaczego warto używać CDN</a></i>
</p>

Sieć dostarczania treści (CDN) to globalnie rozproszona sieć serwerów proxy, która udostępnia treści z lokalizacji bliższych użytkownikowi. Zazwyczaj z CDN serwowane są pliki statyczne, takie jak HTML/CSS/JS, zdjęcia i filmy, chociaż niektóre CDN-y, jak Amazon CloudFront, obsługują także treści dynamiczne. Rozwiązanie DNS strony wskaże klientom, z którym serwerem się połączyć.

Serwowanie treści z CDN znacząco poprawia wydajność na dwa sposoby:

* Użytkownicy otrzymują treści z centrów danych bliższych sobie
* Twoje serwery nie muszą obsługiwać żądań spełnianych przez CDN

### Push CDN

Push CDN otrzymuje nowe treści za każdym razem, gdy nastąpią zmiany na Twoim serwerze. Bierzesz pełną odpowiedzialność za dostarczanie treści, przesyłając je bezpośrednio do CDN i przepisując adresy URL tak, aby wskazywały na CDN. Możesz skonfigurować, kiedy treść wygasa i kiedy jest aktualizowana. Treść jest przesyłana tylko gdy jest nowa lub zmieniona, minimalizując ruch, ale maksymalizując zużycie miejsca.

Strony z niewielkim ruchem lub takie, których treść rzadko się zmienia, dobrze współpracują z Push CDN. Treść jest umieszczana na CDN tylko raz, zamiast być ponownie pobieraną w regularnych odstępach czasu.

### Pull CDN

Pull CDN pobiera nowe treści z Twojego serwera, gdy pierwszy użytkownik zażąda tej treści. Pozostawiasz treść na swoim serwerze i przepisujesz adresy URL, aby wskazywały na CDN. Powoduje to wolniejsze żądanie, dopóki treść nie zostanie zapisana w pamięci podręcznej CDN.

Parametr [time-to-live (TTL)](https://en.wikipedia.org/wiki/Time_to_live) określa, jak długo treść jest przechowywana w pamięci podręcznej. Pull CDN minimalizuje wykorzystanie przestrzeni na CDN, ale może generować zbędny ruch, jeśli pliki wygasną i zostaną pobrane, zanim rzeczywiście się zmienią.

Strony z dużym ruchem dobrze współpracują z Pull CDN, ponieważ ruch jest równomierniej rozłożony, a na CDN pozostaje tylko niedawno żądana treść.

### Wady: CDN

* Koszty CDN mogą być znaczące w zależności od ruchu, chociaż należy je porównać z dodatkowymi kosztami, które poniósłbyś nie używając CDN.
* Treść może być nieaktualna, jeśli zostanie zaktualizowana przed wygaśnięciem TTL.
* CDN wymaga zmiany adresów URL dla treści statycznych, aby wskazywały na CDN.

### Źródła i dalsza lektura

* [Globalnie rozproszona dostawa treści](https://figshare.com/articles/Globally_distributed_content_delivery/6605972)
* [Różnice pomiędzy Push a Pull CDN](http://www.travelblogadvice.com/technical/the-differences-between-push-and-pull-cdns/)
* [Wikipedia](https://pl.wikipedia.org/wiki/Sieć_dostarczania_treści)

## Load balancer

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/h81n9iK.png">
  <br/>
  <i><a href=http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html>Źródło: Wzorce projektowe skalowalnych systemów</a></i>
</p>

Load balancery rozdzielają przychodzące żądania klientów na zasoby obliczeniowe, takie jak serwery aplikacyjne i bazy danych. W każdym przypadku load balancer zwraca odpowiedź z zasobu obliczeniowego do odpowiedniego klienta. Load balancery są skuteczne w:

* Zapobieganiu kierowania żądań do niezdrowych serwerów
* Zapobieganiu przeciążaniu zasobów
* Pomaganiu w eliminacji pojedynczego punktu awarii

Load balancery mogą być implementowane sprzętowo (drogo) lub programowo, np. za pomocą HAProxy.

Dodatkowe korzyści obejmują:

* **Zakończenie SSL** – Odszyfrowywanie przychodzących żądań i szyfrowanie odpowiedzi serwera, aby serwery backendowe nie musiały wykonywać tych potencjalnie kosztownych operacji
    * Usuwa konieczność instalowania [certyfikatów X.509](https://pl.wikipedia.org/wiki/X.509) na każdym serwerze
* **Utrzymanie sesji** – Wystawianie ciasteczek i kierowanie żądań konkretnego klienta do tej samej instancji, jeśli aplikacje webowe nie śledzą sesji

Aby zabezpieczyć się przed awariami, powszechne jest stosowanie wielu load balancerów, w trybie [active-passive](#active-passive) lub [active-active](#active-active).

Load balancery mogą kierować ruch na podstawie różnych metryk, w tym:

* Losowo
* Najmniej obciążony
* Sesja/ciasteczka
* [Round robin lub weighted round robin](https://www.g33kinfo.com/info/round-robin-vs-weighted-round-robin-lb)
* [Warstwa 4](#layer-4-load-balancing)
* [Warstwa 7](#layer-7-load-balancing)

### Load balancing warstwy 4

Load balancery warstwy 4 analizują informacje na [warstwie transportowej](#communication), aby zdecydować, jak rozdzielić żądania. Zazwyczaj obejmuje to źródłowe i docelowe adresy IP oraz porty w nagłówku, ale nie zawartość pakietu. Load balancery warstwy 4 przekazują pakiety sieciowe do i z serwera nadrzędnego, wykonując [Translację Adresów Sieciowych (NAT)](https://www.nginx.com/resources/glossary/layer-4-load-balancing/).

### Load balancing warstwy 7

Load balancery warstwy 7 analizują [warstwę aplikacji](#communication), aby zdecydować, jak rozdzielić żądania. Może to obejmować zawartość nagłówka, wiadomości i ciasteczek. Load balancery warstwy 7 kończą ruch sieciowy, odczytują wiadomość, podejmują decyzję o rozkładzie obciążenia, a następnie otwierają połączenie z wybranym serwerem. Na przykład, load balancer warstwy 7 może kierować ruch wideo do serwerów hostujących filmy, podczas gdy bardziej wrażliwy ruch związany z rozliczeniami użytkowników przekierowywać na serwery wzmocnione pod względem bezpieczeństwa.

Kosztem elastyczności, load balancing warstwy 4 wymaga mniej czasu i zasobów obliczeniowych niż warstwy 7, chociaż wpływ na wydajność może być minimalny na współczesnym sprzęcie klasy konsumenckiej.

### Skalowanie horyzontalne

Load balancery mogą również pomagać w skalowaniu horyzontalnym, poprawiając wydajność i dostępność. Skalowanie za pomocą maszyn klasy konsumenckiej jest bardziej opłacalne i skutkuje wyższą dostępnością niż rozbudowa pojedynczego serwera na droższym sprzęcie, nazywana **skalowaniem wertykalnym**. Łatwiej jest również zatrudnić specjalistów pracujących na sprzęcie konsumenckim niż do systemów korporacyjnych wymagających specjalizacji.

#### Wada(y): skalowanie horyzontalne

* Skalowanie horyzontalne wprowadza złożoność i wymaga klonowania serwerów
    * Serwery powinny być bezstanowe: nie powinny zawierać żadnych danych użytkowników, takich jak sesje czy zdjęcia profilowe
    * Sesje mogą być przechowywane w centralnym magazynie danych takim jak [baza danych](#database) (SQL, NoSQL) lub trwała [pamięć podręczna](#cache) (Redis, Memcached)
* Serwery niższego szczebla, takie jak cache i bazy danych, muszą obsłużyć więcej jednoczesnych połączeń, gdy serwery wyższego szczebla się skalują

### Wada(y): load balancer

* Load balancer może stać się wąskim gardłem wydajności, jeśli nie ma wystarczających zasobów lub nie jest właściwie skonfigurowany.
* Wprowadzenie load balancera w celu eliminacji pojedynczego punktu awarii powoduje wzrost złożoności.
* Pojedynczy load balancer to pojedynczy punkt awarii, skonfigurowanie wielu load balancerów jeszcze bardziej zwiększa złożoność.

### Źródła i dalsza lektura

* [Architektura NGINX](https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/)
* [Przewodnik po architekturze HAProxy](http://www.haproxy.org/download/1.2/doc/architecture.txt)
* [Skalowalność](https://web.archive.org/web/20220530193911/https://www.lecloud.net/post/7295452622/scalability-for-dummies-part-1-clones)
* [Wikipedia](https://en.wikipedia.org/wiki/Load_balancing_(computing))
* [Load balancing warstwy 4](https://www.nginx.com/resources/glossary/layer-4-load-balancing/)
* [Load balancing warstwy 7](https://www.nginx.com/resources/glossary/layer-7-load-balancing/)
* [Konfiguracja listenera ELB](http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-listener-config.html)

## Reverse proxy (serwer WWW)

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/n41Azff.png">
  <br/>
  <i><a href=https://upload.wikimedia.org/wikipedia/commons/6/67/Reverse_proxy_h2g2bob.svg>Źródło: Wikipedia</a></i>
  <br/>
</p>

Reverse proxy to serwer WWW, który centralizuje usługi wewnętrzne i zapewnia jednolite interfejsy dla użytkowników zewnętrznych. Żądania od klientów są przekazywane do serwera, który może je obsłużyć, zanim reverse proxy zwróci odpowiedź serwera do klienta.

Dodatkowe korzyści obejmują:

* **Zwiększone bezpieczeństwo** – Ukrywanie informacji o serwerach zaplecza, czarna lista IP, ograniczenie liczby połączeń na klienta
* **Zwiększona skalowalność i elastyczność** – Klienci widzą tylko adres IP reverse proxy, co pozwala skalować serwery lub zmieniać ich konfigurację
* **Terminacja SSL** – Odszyfrowywanie przychodzących żądań i szyfrowanie odpowiedzi serwera, dzięki czemu serwery zaplecza nie muszą wykonywać tych kosztownych operacji
    * Usuwa potrzebę instalowania [certyfikatów X.509](https://en.wikipedia.org/wiki/X.509) na każdym serwerze
* **Kompresja** – Kompresowanie odpowiedzi serwera
* **Buforowanie** – Zwracanie odpowiedzi dla buforowanych żądań
* **Treści statyczne** – Bezpośrednie serwowanie treści statycznych
    * HTML/CSS/JS
    * Zdjęcia
    * Filmy
    * Itd.

### Load balancer vs reverse proxy

* Wdrożenie load balancera jest użyteczne, gdy masz wiele serwerów. Często load balancery kierują ruch do zbioru serwerów pełniących tę samą funkcję.
* Reverse proxy mogą być przydatne nawet przy jednym serwerze WWW lub aplikacyjnym, zapewniając opisane wcześniej korzyści.
* Rozwiązania takie jak NGINX i HAProxy mogą obsługiwać zarówno reverse proxy na warstwie 7, jak i load balancing.

### Wady: reverse proxy

* Wprowadzenie reverse proxy powoduje wzrost złożoności.
* Jeden reverse proxy to pojedynczy punkt awarii, a konfiguracja wielu reverse proxy (np. [failover](https://en.wikipedia.org/wiki/Failover)) jeszcze bardziej zwiększa złożoność.

### Źródła i dalsza lektura

* [Reverse proxy vs load balancer](https://www.nginx.com/resources/glossary/reverse-proxy-vs-load-balancer/)
* [Architektura NGINX](https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/)
* [Przewodnik po architekturze HAProxy](http://www.haproxy.org/download/1.2/doc/architecture.txt)
* [Wikipedia](https://en.wikipedia.org/wiki/Reverse_proxy)

## Warstwa aplikacji

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/yB5SYwm.png">
  <br/>
  <i><a href=http://lethain.com/introduction-to-architecting-systems-for-scale/#platform_layer>Źródło: Wprowadzenie do architektury systemów dla skalowalności</a></i>
</p>

Oddzielenie warstwy webowej od warstwy aplikacyjnej (znanej również jako warstwa platformowa) umożliwia skalowanie i konfigurowanie obu warstw niezależnie. Dodanie nowego API powoduje dodanie serwerów aplikacyjnych bez konieczności dodawania dodatkowych serwerów webowych. Zasada **pojedynczej odpowiedzialności** opowiada się za małymi i autonomicznymi usługami współpracującymi ze sobą. Małe zespoły z małymi usługami mogą agresywniej planować szybki wzrost.

Pracownicy w warstwie aplikacyjnej pomagają również umożliwić [asynchroniczność](#asynchronism).

### Mikrousługi

Powiązane z tą dyskusją są [mikrousługi](https://pl.wikipedia.org/wiki/Mikrous%C5%82ugi), które można opisać jako zestaw niezależnie wdrażalnych, małych, modułowych usług. Każda usługa działa jako unikalny proces i komunikuje się przez dobrze zdefiniowany, lekki mechanizm, aby realizować cel biznesowy. <sup><a href=https://smartbear.com/learn/api-design/what-are-microservices>1</a></sup>

Pinterest, na przykład, może posiadać następujące mikrousługi: profil użytkownika, obserwujący, kanał, wyszukiwarka, przesyłanie zdjęć itd.

### Odkrywanie usług

Systemy takie jak [Consul](https://www.consul.io/docs/index.html), [Etcd](https://coreos.com/etcd/docs/latest), oraz [Zookeeper](http://www.slideshare.net/sauravhaloi/introduction-to-apache-zookeeper) mogą pomagać usługom odnajdywać się nawzajem poprzez śledzenie zarejestrowanych nazw, adresów i portów. [Kontrole zdrowia](https://www.consul.io/intro/getting-started/checks.html) pomagają weryfikować integralność usług i często są wykonywane przy użyciu punktu końcowego [HTTP](#hypertext-transfer-protocol-http). Zarówno Consul jak i Etcd posiadają wbudowany [magazyn klucz-wartość](#key-value-store), który może być użyteczny do przechowywania wartości konfiguracyjnych i innych współdzielonych danych.

### Wady: warstwa aplikacyjna

* Dodanie warstwy aplikacyjnej z luźno powiązanymi usługami wymaga innego podejścia pod względem architektury, operacji i procesu (w porównaniu do systemu monolitycznego).
* Mikrousługi mogą zwiększyć złożoność wdrożeń i operacji.

### Źródła i dalsza lektura

* [Wprowadzenie do architektury systemów dla skalowalności](http://lethain.com/introduction-to-architecting-systems-for-scale)
* [Rozwiązanie rozmowy kwalifikacyjnej z projektowania systemów](http://www.puncsky.com/blog/2016-02-13-crack-the-system-design-interview)
* [Architektura zorientowana na usługi](https://pl.wikipedia.org/wiki/Architektura_zorientowana_na_us%C5%82ugi)
* [Wprowadzenie do Zookeeper](http://www.slideshare.net/sauravhaloi/introduction-to-apache-zookeeper)
* [Co musisz wiedzieć o budowaniu mikrousług](https://cloudncode.wordpress.com/2016/07/22/msa-getting-started/)

## Baza danych

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/Xkm5CXz.png">
  <br/>
  <i><a href=https://www.youtube.com/watch?v=kKjm4ehYiMs>Źródło: Skalowanie do pierwszych 10 milionów użytkowników</a></i>
</p>

### Relacyjny system zarządzania bazą danych (RDBMS)

Relacyjna baza danych, taka jak SQL, to zbiór danych zorganizowanych w tabelach.

**ACID** to zbiór właściwości [transakcji](https://en.wikipedia.org/wiki/Database_transaction) relacyjnych baz danych.

* **Atomowość** - Każda transakcja jest wykonywana w całości lub wcale
* **Spójność** - Każda transakcja przenosi bazę danych ze stanu prawidłowego do innego stanu prawidłowego
* **Izolacja** - Wykonywanie transakcji równolegle daje taki sam rezultat jak ich wykonywanie pojedynczo
* **Trwałość** - Po zatwierdzeniu transakcji pozostaje ona trwała

Istnieje wiele technik skalowania relacyjnych baz danych: **replikacja master-slave**, **replikacja master-master**, **federacja**, **sharding**, **denormalizacja** oraz **optymalizacja SQL**.

#### Replikacja master-slave

Master obsługuje operacje odczytu i zapisu, replikując zapisy do jednego lub więcej slave’ów, które obsługują tylko odczyty. Slave’y mogą replikować się do kolejnych slave’ów w strukturze drzewiastej. Jeśli master przestanie działać, system może nadal działać w trybie tylko do odczytu, aż slave zostanie awansowany na mastera lub zostanie utworzony nowy master.

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/C9ioGtn.png">
  <br/>
  <i><a href=http://www.slideshare.net/jboner/scalability-availability-stability-patterns/>Źródło: Skalowalność, dostępność, stabilność, wzorce</a></i>
</p>

##### Wada(y): replikacja master-slave

* Potrzebna jest dodatkowa logika do awansowania slave’a na mastera.
* Zobacz [Wada(y): replikacja](#disadvantages-replication) dla punktów dotyczących **zarówno** master-slave, jak i master-master.

#### Replikacja master-master

Oba master’y obsługują odczyty i zapisy oraz koordynują się nawzajem przy zapisach. Jeśli którykolwiek z master’ów przestanie działać, system może nadal obsługiwać zarówno odczyty, jak i zapisy.

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/krAHLGg.png">
  <br/>
  <i><a href=http://www.slideshare.net/jboner/scalability-availability-stability-patterns/>Źródło: Skalowalność, dostępność, stabilność, wzorce</a></i>
</p>

##### Wada(y): replikacja master-master

* Potrzebny będzie load balancer lub konieczne będą zmiany w logice aplikacji, aby określić gdzie zapisywać.
* Większość systemów master-master jest albo luźno spójna (naruszając ACID), albo charakteryzuje się zwiększoną latencją zapisu z powodu synchronizacji.
* Rozwiązywanie konfliktów staje się coraz ważniejsze wraz ze wzrostem liczby węzłów zapisujących oraz zwiększającymi się opóźnieniami.
* Zobacz [Wady: replikacja](#disadvantages-replication) dla punktów dotyczących **zarówno** master-slave, jak i master-master.

##### Wady: replikacja

* Istnieje ryzyko utraty danych, jeśli master ulegnie awarii zanim nowe dane zostaną zreplikowane na inne węzły.
* Zapisy są odtwarzane na replikach do odczytu. Jeśli występuje dużo zapisów, repliki do odczytu mogą zostać przeciążone odtwarzaniem zapisów i nie będą w stanie realizować tylu odczytów.
* Im więcej replik do odczytu, tym więcej trzeba replikować, co prowadzi do większych opóźnień replikacji.
* W niektórych systemach zapis na masterze może uruchamiać wiele wątków zapisujących równolegle, podczas gdy repliki do odczytu obsługują tylko zapisy sekwencyjne przy użyciu pojedynczego wątku.
* Replikacja wymaga dodatkowego sprzętu i wprowadza dodatkową złożoność.

##### Źródła i dalsza lektura: replikacja

* [Skalowalność, dostępność, stabilność, wzorce](http://www.slideshare.net/jboner/scalability-availability-stability-patterns/)
* [Replikacja multi-master](https://en.wikipedia.org/wiki/Multi-master_replication)

#### Federacja

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/U3qV33e.png">
  <br/>
  <i><a href=https://www.youtube.com/watch?v=kKjm4ehYiMs>Źródło: Skalowanie do pierwszych 10 milionów użytkowników</a></i>
</p>

Federacja (lub partycjonowanie funkcjonalne) dzieli bazy danych według funkcji. Na przykład zamiast pojedynczej, monolitycznej bazy danych, możesz mieć trzy bazy: **fora**, **użytkownicy** i **produkty**, co skutkuje mniejszym ruchem odczytu i zapisu dla każdej bazy, a tym samym mniejszym opóźnieniem replikacji. Mniejsze bazy danych pozwalają na przechowywanie większej ilości danych w pamięci, co z kolei prowadzi do większej liczby trafień w cache dzięki poprawionej lokalności. Brak centralnego mastera serializującego zapisy umożliwia wykonywanie zapisów równolegle, zwiększając przepustowość.

##### Wady: federacja

* Federacja nie jest skuteczna, jeśli Twój schemat wymaga ogromnych funkcji lub tabel.
* Należy zaktualizować logikę aplikacji, aby określić, z której bazy odczytywać i do której zapisywać.
* Łączenie danych z dwóch baz danych jest bardziej złożone przy użyciu [linku serwera](http://stackoverflow.com/questions/5145637/querying-data-by-joining-two-tables-in-two-database-on-different-servers).
* Federacja wymaga dodatkowego sprzętu i wprowadza dodatkową złożoność.

##### Źródła i dalsza lektura: federacja

* [Skalowanie do pierwszych 10 milionów użytkowników](https://www.youtube.com/watch?v=kKjm4ehYiMs)

#### Sharding

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/wU8x5Id.png">
  <br/>
  <i><a href=http://www.slideshare.net/jboner/scalability-availability-stability-patterns/>Źródło: Skalowalność, dostępność, stabilność, wzorce</a></i>
</p>

Sharding (dzielenie na fragmenty) rozprowadza dane pomiędzy różne bazy danych, tak że każda baza może zarządzać tylko podzbiorem danych. Na przykładzie bazy użytkowników, gdy liczba użytkowników rośnie, do klastra dodawane są kolejne shard'y.

Podobnie jak zalety [federacji](#federation), sharding powoduje mniejszy ruch odczytu i zapisu, mniej replikacji i więcej trafień do cache. Zmniejsza się również rozmiar indeksu, co generalnie poprawia wydajność przez szybsze zapytania. Jeśli jeden shard przestanie działać, pozostałe nadal funkcjonują, choć warto wdrożyć jakąś formę replikacji, by uniknąć utraty danych. Podobnie jak w federacji, nie ma jednego centralnego mastera serializującego zapisy, co pozwala na równoległe zapisy i większą przepustowość.

Typowe metody dzielenia tabeli użytkowników to np. według pierwszej litery nazwiska lub lokalizacji geograficznej użytkownika.

##### Wady: sharding

* Trzeba zaktualizować logikę aplikacji, by działała z shardami, co może skutkować złożonymi zapytaniami SQL.
* Rozkład danych w shardzie może być nierównomierny. Przykładowo, grupa aktywnych użytkowników na jednym shardzie może generować większe obciążenie niż na innych.
    * Równoważenie obciążenia dodaje dodatkową złożoność. Funkcja shardingowa oparta na [spójnym haszowaniu](http://www.paperplanes.de/2011/12/9/the-magic-of-consistent-hashing.html) może zmniejszyć ilość przesyłanych danych.
* Łączenie danych z wielu shardów jest bardziej skomplikowane.
* Sharding wymaga więcej sprzętu i większej złożoności.

##### Źródła i dalsza lektura: sharding

* [The coming of the shard](http://highscalability.com/blog/2009/8/6/an-unorthodox-approach-to-database-design-the-coming-of-the.html)
* [Architektura shardowanych baz danych](https://pl.wikipedia.org/wiki/Sharding_(architektura_bazy_danych))
* [Spójne haszowanie](http://www.paperplanes.de/2011/12/9/the-magic-of-consistent-hashing.html)

#### Denormalizacja

Denormalizacja stara się poprawić wydajność odczytu kosztem wydajności zapisu. Redundantne kopie danych zapisywane są w wielu tabelach, by uniknąć kosztownych połączeń (joinów). Niektóre systemy RDBMS, jak [PostgreSQL](https://pl.wikipedia.org/wiki/PostgreSQL) czy Oracle wspierają [widoki materializowane](https://pl.wikipedia.org/wiki/Widok_materializowany), które zajmują się przechowywaniem redundantnych informacji i utrzymywaniem ich spójności.

Gdy dane zostaną rozproszone za pomocą takich technik jak [federacja](#federation) i [sharding](#sharding), zarządzanie joinami pomiędzy centrami danych staje się jeszcze bardziej złożone. Denormalizacja może obejść potrzebę takich skomplikowanych joinów.

W większości systemów odczyty znacznie przewyższają zapisy, nawet w stosunku 100:1 czy 1000:1. Odczyt wymagający złożonego połączenia bazodanowego może być bardzo kosztowny, zajmując znaczną część czasu na operacje dyskowe.

##### Wady: denormalizacja

* Dane są duplikowane.
* Ograniczenia mogą pomóc utrzymać redundantne kopie informacji w synchronizacji, co zwiększa złożoność projektu bazy danych.
* Denormalizowana baza danych pod dużym obciążeniem zapisu może działać gorzej niż jej znormalizowany odpowiednik.

###### Źródła i dalsza lektura: denormalizacja

* [Denormalizacja](https://pl.wikipedia.org/wiki/Denormalizacja)

#### Optymalizacja SQL

Optymalizacja SQL to szeroki temat, do którego powstało wiele [książek](https://www.amazon.com/s/ref=nb_sb_noss_2?url=search-alias%3Daps&field-keywords=sql+tuning) jako źródło referencyjne.

Ważne jest, aby przeprowadzać **benchmarking** i **profilowanie**, aby symulować oraz wykrywać wąskie gardła.

* **Benchmark** - Symulacja sytuacji wysokiego obciążenia za pomocą narzędzi takich jak [ab](http://httpd.apache.org/docs/2.2/programs/ab.html).
* **Profilowanie** - Włączenie narzędzi takich jak [slow query log](http://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html), aby śledzić problemy z wydajnością.

Benchmarking i profilowanie mogą wskazać następujące optymalizacje.

##### Uściślij schemat

* MySQL zapisuje dane na dysku w blokach sąsiadujących dla szybkiego dostępu.
* Używaj `CHAR` zamiast `VARCHAR` dla pól o stałej długości.
    * `CHAR` pozwala na szybki, losowy dostęp, podczas gdy przy `VARCHAR` trzeba odnaleźć koniec ciągu przed przejściem do następnego.
* Używaj `TEXT` dla dużych bloków tekstu, np. postów na blogu.  `TEXT` pozwala także na wyszukiwania logiczne.  Użycie pola `TEXT` skutkuje zapisaniem wskaźnika na dysku, który wskazuje lokalizację bloku tekstowego.
* Używaj `INT` dla większych liczb do 2^32 czyli 4 miliardów.
* Używaj `DECIMAL` dla wartości walutowych, aby uniknąć błędów reprezentacji zmiennoprzecinkowej.
* Unikaj przechowywania dużych `BLOBS`, przechowuj raczej lokalizację obiektu.
* `VARCHAR(255)` to największa liczba znaków, którą można policzyć w liczbie 8-bitowej, często maksymalizując wykorzystanie bajtu w niektórych RDBMS.
* Ustawiaj ograniczenie `NOT NULL`, gdzie to możliwe, aby [poprawić wydajność wyszukiwania](http://stackoverflow.com/questions/1017239/how-do-null-values-affect-performance-in-a-database-search).

##### Używaj dobrych indeksów

* Kolumny, po których wykonujesz zapytania (`SELECT`, `GROUP BY`, `ORDER BY`, `JOIN`), mogą działać szybciej z indeksami.
* Indeksy są zwykle reprezentowane jako samobalansujące [drzewa B](https://pl.wikipedia.org/wiki/Drzewo_B), które utrzymują dane posortowane i umożliwiają wyszukiwania, dostęp sekwencyjny, wstawianie i usuwanie w czasie logarytmicznym.
* Założenie indeksu może sprawić, że dane będą przechowywane w pamięci, wymagając więcej miejsca.
* Operacje zapisu mogą być wolniejsze, ponieważ indeks też musi być aktualizowany.
* Przy ładowaniu dużych ilości danych czasem szybciej jest wyłączyć indeksy, załadować dane, a następnie odbudować indeksy.

##### Unikaj kosztownych złączeń

* [Denormalizuj](#denormalizacja), gdy wymaga tego wydajność.

##### Partycjonuj tabele

* Podziel tabelę, umieszczając gorące punkty w osobnej tabeli, aby ułatwić jej przechowywanie w pamięci.

##### Dostrój pamięć podręczną zapytań

* W niektórych przypadkach [pamięć podręczna zapytań](https://dev.mysql.com/doc/refman/5.7/en/query-cache.html) może prowadzić do [problemów z wydajnością](https://www.percona.com/blog/2016/10/12/mysql-5-7-performance-tuning-immediately-after-installation/).

##### Źródła i dalsza lektura: optymalizacja SQL

* [Porady dotyczące optymalizacji zapytań MySQL](http://aiddroid.com/10-tips-optimizing-mysql-queries-dont-suck/)
* [Dlaczego VARCHAR(255) jest tak często używany?](http://stackoverflow.com/questions/1217466/is-there-a-good-reason-i-see-varchar255-used-so-often-as-opposed-to-another-l)
* [Jak wartości null wpływają na wydajność?](http://stackoverflow.com/questions/1017239/how-do-null-values-affect-performance-in-a-database-search)
* [Log wolnych zapytań](http://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html)

### NoSQL

NoSQL to zbiór elementów danych reprezentowanych jako **magazyn klucz-wartość**, **magazyn dokumentów**, **magazyn szerokich kolumn** lub **baza danych grafowa**. Dane są zdenormalizowane, a łączenia zwykle wykonywane są w kodzie aplikacji. Większość baz NoSQL nie oferuje prawdziwych transakcji ACID i preferuje [spójność ostateczną](#eventual-consistency).

**BASE** jest często używany do opisu właściwości baz danych NoSQL. W porównaniu z [Teorią CAP](#cap-theorem), BASE wybiera dostępność ponad spójność.

* **Podstawowo dostępny** – system gwarantuje dostępność.
* **Stan miękki** – stan systemu może zmieniać się z czasem, nawet bez wejścia.
* **Spójność ostateczna** – system stanie się spójny w pewnym okresie, pod warunkiem że nie otrzyma nowych danych w tym czasie.

Oprócz wyboru między [SQL a NoSQL](#sql-or-nosql), warto zrozumieć, który typ bazy NoSQL najlepiej pasuje do Twojego przypadku użycia. W kolejnej sekcji omówimy **magazyny klucz-wartość**, **magazyny dokumentów**, **magazyny szerokich kolumn** oraz **bazy danych grafowe**.

#### Magazyn klucz-wartość

> Abstrakcja: tablica mieszająca

Magazyn klucz-wartość zazwyczaj umożliwia odczyty i zapisy w czasie O(1) i często jest oparty na pamięci RAM lub SSD. Magazyny danych mogą utrzymywać klucze w [porządku leksykograficznym](https://en.wikipedia.org/wiki/Lexicographical_order), co pozwala na efektywne pobieranie zakresów kluczy. Magazyny klucz-wartość mogą pozwalać na przechowywanie metadanych wraz z wartością.

Magazyny klucz-wartość zapewniają wysoką wydajność i są często używane dla prostych modeli danych lub szybko zmieniających się danych, takich jak warstwa pamięci podręcznej w pamięci operacyjnej. Ponieważ oferują tylko ograniczony zestaw operacji, złożoność jest przenoszona do warstwy aplikacji, jeśli wymagane są dodatkowe operacje.

Magazyn klucz-wartość jest podstawą dla bardziej złożonych systemów, takich jak magazyn dokumentów, a w niektórych przypadkach baza danych grafowa.

##### Źródła i dalsza lektura: magazyn klucz-wartość

* [Baza danych klucz-wartość](https://en.wikipedia.org/wiki/Key-value_database)
* [Wady magazynów klucz-wartość](http://stackoverflow.com/questions/4056093/what-are-the-disadvantages-of-using-a-key-value-table-over-nullable-columns-or)
* [Architektura Redis](http://qnimate.com/overview-of-redis-architecture/)
* [Architektura Memcached](https://adayinthelifeof.nl/2011/02/06/memcache-internals/)

#### Magazyn dokumentów

> Abstrakcja: magazyn klucz-wartość z dokumentami przechowywanymi jako wartości

Magazyn dokumentów koncentruje się wokół dokumentów (XML, JSON, binarne itd.), gdzie dokument przechowuje wszystkie informacje dotyczące danego obiektu. Magazyny dokumentów udostępniają API lub język zapytań do wyszukiwania na podstawie wewnętrznej struktury samego dokumentu. *Uwaga, wiele magazynów klucz-wartość zawiera funkcje do pracy z metadanymi wartości, co zaciera granice między tymi dwoma typami magazynowania.*

W zależności od implementacji dokumenty są organizowane według kolekcji, tagów, metadanych lub katalogów. Chociaż dokumenty mogą być organizowane lub grupowane razem, pola w dokumentach mogą się całkowicie różnić od siebie.

Niektóre magazyny dokumentów, takie jak [MongoDB](https://www.mongodb.com/mongodb-architecture) oraz [CouchDB](https://blog.couchdb.org/2016/08/01/couchdb-2-0-architecture/), udostępniają język zbliżony do SQL umożliwiający wykonywanie złożonych zapytań. [DynamoDB](http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/decandia07dynamo.pdf) obsługuje zarówno klucz-wartość, jak i dokumenty.

Magazyny dokumentów oferują wysoką elastyczność i są często używane do pracy z danymi zmieniającymi się okazjonalnie.

##### Źródła i dalsza lektura: magazyn dokumentów

* [Baza danych dokumentowa](https://en.wikipedia.org/wiki/Document-oriented_database)
* [Architektura MongoDB](https://www.mongodb.com/mongodb-architecture)
* [Architektura CouchDB](https://blog.couchdb.org/2016/08/01/couchdb-2-0-architecture/)
* [Architektura Elasticsearch](https://www.elastic.co/blog/found-elasticsearch-from-the-bottom-up)

#### Magazyn szerokokolumnowy

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/n16iOGk.png">
  <br/>
  <i><a href=http://blog.grio.com/2015/11/sql-nosql-a-brief-history.html>Źródło: SQL & NoSQL, krótka historia</a></i>
</p>

> Abstrakcja: zagnieżdżona mapa `ColumnFamily<RowKey, Columns<ColKey, Value, Timestamp>>`

Podstawową jednostką danych magazynu szerokokolumnowego jest kolumna (para nazwa/wartość). Kolumny mogą być grupowane w rodziny kolumn (analogicznie do tabeli SQL). Super-rodziny kolumn dodatkowo grupują rodziny kolumn. Dostęp do każdej kolumny można uzyskać niezależnie za pomocą klucza wiersza, a kolumny o tym samym kluczu wiersza tworzą wiersz. Każda wartość zawiera znacznik czasu do wersjonowania i rozwiązywania konfliktów.

Google wprowadziło [Bigtable](http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/chang06bigtable.pdf) jako pierwszy magazyn szerokokolumnowy, który wpłynął na otwartoźródłowe [HBase](https://www.edureka.co/blog/hbase-architecture/) często używane w ekosystemie Hadoop oraz [Cassandra](http://docs.datastax.com/en/cassandra/3.0/cassandra/architecture/archIntro.html) od Facebooka. Magazyny takie jak BigTable, HBase i Cassandra utrzymują klucze w porządku leksykograficznym, co pozwala na efektywne pobieranie wybranych zakresów kluczy.

Magazyny szerokokolumnowe oferują wysoką dostępność i skalowalność. Często używane są do bardzo dużych zbiorów danych.

##### Źródła i dalsza lektura: magazyn szerokokolumnowy

* [SQL & NoSQL, krótka historia](http://blog.grio.com/2015/11/sql-nosql-a-brief-history.html)
* [Architektura Bigtable](http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/chang06bigtable.pdf)
* [Architektura HBase](https://www.edureka.co/blog/hbase-architecture/)
* [Architektura Cassandry](http://docs.datastax.com/en/cassandra/3.0/cassandra/architecture/archIntro.html)

#### Baza danych grafowa

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/fNcl65g.png">
  <br/>
  <i><a href=https://en.wikipedia.org/wiki/File:GraphDatabase_PropertyGraph.png>Źródło: Baza danych grafowa</a></i>
</p>

> Abstrakcja: graf

W bazie danych grafowej każdy węzeł to rekord, a każda krawędź to relacja między dwoma węzłami. Bazy danych grafowe są zoptymalizowane do reprezentowania złożonych zależności z wieloma kluczami obcymi lub relacjami wiele-do-wielu.

Bazy grafowe oferują wysoką wydajność dla modeli danych z rozbudowanymi relacjami, jak w sieciach społecznościowych. Są stosunkowo nowe i nie są jeszcze szeroko stosowane; może być trudniej znaleźć narzędzia programistyczne i zasoby. Wiele grafów można uzyskać tylko przez [REST API](#representational-state-transfer-rest).

##### Źródła i dalsza lektura: graf

* [Baza danych grafowa](https://en.wikipedia.org/wiki/Graph_database)
* [Neo4j](https://neo4j.com/)
* [FlockDB](https://blog.twitter.com/2010/introducing-flockdb)

#### Źródła i dalsza lektura: NoSQL

* [Wyjaśnienie podstawowej terminologii](http://stackoverflow.com/questions/3342497/explanation-of-base-terminology)
* [Bazy NoSQL - przegląd i wskazówki decyzyjne](https://medium.com/baqend-blog/nosql-databases-a-survey-and-decision-guidance-ea7823a822d#.wskogqenq)
* [Skalowalność](https://web.archive.org/web/20220602114024/https://www.lecloud.net/post/7994751381/scalability-for-dummies-part-2-database)
* [Wprowadzenie do NoSQL](https://www.youtube.com/watch?v=qI_g07C_Q5I)
* [Wzorce NoSQL](http://horicky.blogspot.com/2009/11/nosql-patterns.html)

### SQL czy NoSQL

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/wXGqG5f.png">
  <br/>
  <i><a href=https://www.infoq.com/articles/Transition-RDBMS-NoSQL/>Źródło: Przechodzenie z RDBMS na NoSQL</a></i>
</p>

Powody wyboru **SQL**:

* Dane strukturalne
* Ścisła struktura (schema)
* Dane relacyjne
* Potrzeba złożonych połączeń (joinów)
* Transakcje
* Jasne wzorce skalowania
* Bardziej ugruntowane: deweloperzy, społeczność, kod, narzędzia itd.
* Wyszukiwanie po indeksie jest bardzo szybkie

Powody wyboru **NoSQL**:

* Dane półstrukturalne
* Dynamiczna lub elastyczna struktura
* Dane nierelacyjne
* Brak potrzeby złożonych połączeń
* Przechowywanie wielu TB (lub PB) danych
* Bardzo intensywne obciążenie danych
* Bardzo wysoka przepustowość operacji IOPS

Przykładowe dane dobrze pasujące do NoSQL:

* Szybkie zbieranie danych clickstream oraz logów
* Dane z rankingów lub punktacji
* Tymczasowe dane, np. koszyk zakupowy
* Często odwiedzane ('gorące') tabele
* Tabele z metadanymi lub do wyszukiwania

##### Źródła i dalsza lektura: SQL czy NoSQL

* [Skalowanie do pierwszych 10 milionów użytkowników](https://www.youtube.com/watch?v=kKjm4ehYiMs)
* [SQL vs NoSQL - różnice](https://www.sitepoint.com/sql-vs-nosql-differences/)

## Cache

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/Q6z24La.png">
  <br/>
  <i><a href=http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html>Źródło: Wzorce projektowe skalowalnych systemów</a></i>
</p>

Buforowanie poprawia czas ładowania strony i może zmniejszyć obciążenie serwerów oraz baz danych. W tym modelu dispatcher najpierw sprawdza, czy żądanie zostało już wcześniej wykonane i próbuje znaleźć poprzedni wynik do zwrotu, aby zaoszczędzić faktyczne wykonanie.

Bazy danych często korzystają z równomiernego rozkładu odczytów i zapisów między partycjami. Popularne elementy mogą zaburzać ten rozkład, powodując wąskie gardła. Umieszczenie bufora przed bazą danych może pomóc w absorbowaniu nierównomiernych obciążeń i skoków ruchu.

### Buforowanie po stronie klienta

Bufory mogą być zlokalizowane po stronie klienta (system operacyjny lub przeglądarka), [po stronie serwera](#reverse-proxy-web-server) lub w oddzielnej warstwie bufora.

### Buforowanie CDN

[CDN-y](#content-delivery-network) są uznawane za rodzaj bufora.

### Buforowanie serwera WWW

[Reverse proxy](#reverse-proxy-web-server) oraz bufory takie jak [Varnish](https://www.varnish-cache.org/) mogą obsługiwać bezpośrednio treści statyczne i dynamiczne. Serwery WWW mogą także buforować żądania, zwracając odpowiedzi bez kontaktu z serwerami aplikacji.

### Buforowanie bazy danych

Twoja baza danych zazwyczaj zawiera pewien poziom buforowania w domyślnej konfiguracji, zoptymalizowanej dla ogólnego przypadku użycia. Dostosowanie tych ustawień do konkretnych wzorców użytkowania może dodatkowo zwiększyć wydajność.

### Buforowanie aplikacji

Bufory w pamięci RAM, takie jak Memcached i Redis, to magazyny klucz-wartość pomiędzy aplikacją a magazynem danych. Ponieważ dane przechowywane są w RAM, dostęp do nich jest znacznie szybszy niż w typowych bazach, gdzie dane znajdują się na dysku. RAM jest bardziej ograniczony niż dysk, dlatego algorytmy [inwalidacji bufora](https://en.wikipedia.org/wiki/Cache_algorithms) takie jak [najrzadziej używane (LRU)](https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)) pomagają usuwać „zimne” wpisy i trzymać „gorące” dane w RAM.

Redis oferuje następujące dodatkowe funkcje:

* Opcja trwałości
* Wbudowane struktury danych, takie jak uporządkowane zbiory i listy

Istnieje kilka poziomów buforowania, które dzielą się na dwie ogólne kategorie: **zapytania do bazy danych** i **obiekty**:

* Poziom wiersza
* Poziom zapytania
* W pełni utworzone obiekty serializowalne
* W pełni wyrenderowany HTML

Zazwyczaj należy unikać buforowania na plikach, ponieważ utrudnia to klonowanie i automatyczne skalowanie.

### Buforowanie na poziomie zapytań do bazy danych

Za każdym razem, gdy wykonujesz zapytanie do bazy danych, zhashuj zapytanie jako klucz i zapisz wynik w pamięci podręcznej. To podejście ma problemy z wygasaniem:

* Trudno usunąć zapisany wynik przy złożonych zapytaniach
* Jeśli zmieni się jedna część danych, np. komórka tabeli, trzeba usunąć wszystkie zapytania z bufora, które mogą zawierać zmienioną komórkę

### Buforowanie na poziomie obiektów

Traktuj swoje dane jako obiekt, podobnie jak robisz to w kodzie aplikacji. Niech aplikacja złoży zestaw danych z bazy do instancji klasy lub struktury danych:

* Usuń obiekt z pamięci podręcznej, jeśli jego dane źródłowe się zmieniły
* Pozwala na asynchroniczne przetwarzanie: workerzy składają obiekty, korzystając z najnowszych danych z bufora

Propozycje, co buforować:

* Sesje użytkowników
* W pełni wyrenderowane strony internetowe
* Strumienie aktywności
* Dane grafu użytkownika

### Kiedy aktualizować bufor

Ponieważ można przechowywać ograniczoną ilość danych w pamięci podręcznej, trzeba określić, która strategia aktualizacji bufora najlepiej pasuje do Twojego przypadku użycia.

#### Cache-aside (bufor pośredni)

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/ONjORqk.png">
  <br/>
  <i><a href=http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast>Źródło: From cache to in-memory data grid</a></i>
</p>

Aplikacja odpowiada za odczyt i zapis z/do magazynu. Bufor nie komunikuje się bezpośrednio z magazynem. Aplikacja wykonuje następujące kroki:

* Szuka wpisu w buforze, skutkuje to brakiem w buforze
* Ładuje wpis z bazy danych
* Dodaje wpis do bufora
* Zwraca wpis

```python
def get_user(self, user_id):
    user = cache.get("user.{0}", user_id)
    if user is None:
        user = db.query("SELECT * FROM users WHERE user_id = {0}", user_id)
        if user is not None:
            key = "user.{0}".format(user_id)
            cache.set(key, json.dumps(user))
    return user
```

[Memcached](https://memcached.org/) jest zazwyczaj używany w ten sposób.

Kolejne odczyty danych dodanych do pamięci podręcznej są szybkie. Cache-aside nazywane jest również leniwym ładowaniem. Do pamięci podręcznej trafiają tylko żądane dane, co zapobiega zapełnieniu jej niepotrzebnymi informacjami.

##### Wada(-y): cache-aside

* Każde nietrafienie w pamięć podręczną skutkuje trzema operacjami, co może powodować zauważalne opóźnienie.
* Dane mogą stać się nieaktualne, jeśli zostaną zaktualizowane w bazie danych. Problem ten można ograniczyć, ustawiając czas życia (TTL), który wymusza aktualizację wpisu w pamięci podręcznej, lub stosując write-through.
* Gdy węzeł ulegnie awarii, zostaje zastąpiony nowym, pustym węzłem, co zwiększa opóźnienie.

#### Write-through

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/0vBc0hN.png">
  <br/>
  <i><a href=http://www.slideshare.net/jboner/scalability-availability-stability-patterns/>Źródło: Skalowalność, dostępność, stabilność, wzorce</a></i>
</p>

Aplikacja wykorzystuje pamięć podręczną jako główny magazyn danych, odczytując i zapisując w niej dane, podczas gdy pamięć podręczna odpowiada za odczyt i zapis do bazy danych:

* Aplikacja dodaje/aktualizuje wpis w pamięci podręcznej
* Pamięć podręczna synchronicznie zapisuje wpis do magazynu danych
* Zwraca

Kod aplikacji:

```python
set_user(12345, {"foo":"bar"})
```

Kod pamięci podręcznej:

```python
def set_user(user_id, values):
    user = db.query("UPDATE Users WHERE id = {0}", user_id, values)
    cache.set(user_id, user)
```
Write-through to ogólnie wolna operacja ze względu na operację zapisu, ale kolejne odczyty właśnie zapisanych danych są szybkie. Użytkownicy zazwyczaj są bardziej tolerancyjni na opóźnienia podczas aktualizacji danych niż podczas ich odczytu. Dane w pamięci podręcznej nie są nieaktualne.

##### Wada(y): write-through

* Gdy nowy węzeł zostaje utworzony z powodu awarii lub skalowania, nowy węzeł nie będzie buforować wpisów, dopóki wpis nie zostanie zaktualizowany w bazie danych. Połączenie cache-aside i write-through może złagodzić ten problem.
* Większość zapisanych danych może nigdy nie zostać odczytana, co można zminimalizować poprzez ustawienie TTL.

#### Write-behind (write-back)

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/rgSrvjG.png">
  <br/>
  <i><a href=http://www.slideshare.net/jboner/scalability-availability-stability-patterns/>Źródło: Scalability, availability, stability, patterns</a></i>
</p>

W write-behind aplikacja wykonuje następujące czynności:

* Dodaje/aktualizuje wpis w pamięci podręcznej
* Asynchronicznie zapisuje wpis do magazynu danych, poprawiając wydajność zapisu

##### Wada(y): write-behind

* Może dojść do utraty danych, jeśli pamięć podręczna ulegnie awarii, zanim jej zawartość trafi do magazynu danych.
* Implementacja write-behind jest bardziej złożona niż cache-aside czy write-through.

#### Refresh-ahead

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/kxtjqgE.png">
  <br/>
  <i><a href=http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast>Źródło: From cache to in-memory data grid</a></i>
</p>

Możesz skonfigurować pamięć podręczną, aby automatycznie odświeżała każdy ostatnio używany wpis przed jego wygaśnięciem.

Refresh-ahead może skutkować niższą latencją w porównaniu do read-through, jeśli pamięć podręczna potrafi dokładnie przewidzieć, które elementy będą potrzebne w przyszłości.

##### Wada(y): refresh-ahead


* Nieprawidłowe przewidywanie, które elementy będą potrzebne w przyszłości, może skutkować gorszą wydajnością niż bez mechanizmu odświeżania z wyprzedzeniem.

### Wada(y): cache

* Konieczność utrzymania spójności pomiędzy cache a źródłem prawdy, takim jak baza danych, poprzez [unieważnianie cache](https://pl.wikipedia.org/wiki/Cache_algorithms).
* Unieważnianie cache to trudny problem, istnieje dodatkowa złożoność związana z określeniem, kiedy zaktualizować cache.
* Konieczność wprowadzenia zmian w aplikacji, takich jak dodanie Redis lub memcached.

### Źródło(a) i dalsza lektura

* [Od cache do in-memory data grid](http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast)
* [Wzorce projektowe systemów skalowalnych](http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html)
* [Wprowadzenie do architektury systemów na skalę](http://lethain.com/introduction-to-architecting-systems-for-scale/)
* [Skalowalność, dostępność, stabilność, wzorce](http://www.slideshare.net/jboner/scalability-availability-stability-patterns/)
* [Skalowalność](https://web.archive.org/web/20230126233752/https://www.lecloud.net/post/9246290032/scalability-for-dummies-part-3-cache)
* [Strategie AWS ElastiCache](http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/Strategies.html)
* [Wikipedia](https://pl.wikipedia.org/wiki/Cache_(computing))

## Asynchroniczność

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/54GYsSx.png">
  <br/>
  <i><a href=http://lethain.com/introduction-to-architecting-systems-for-scale/#platform_layer>Źródło: Wprowadzenie do architektury systemów na skalę</a></i>
</p>

Asynchroniczne przepływy pracy pomagają skrócić czas odpowiedzi na kosztowne operacje, które w przeciwnym razie byłyby wykonywane synchronicznie. Mogą również pomóc wykonując czasochłonne zadania z wyprzedzeniem, takie jak okresowa agregacja danych.

### Kolejki wiadomości

Kolejki wiadomości odbierają, przechowują i dostarczają wiadomości. Jeśli operacja jest zbyt wolna, by wykonać ją synchronicznie, można użyć kolejki wiadomości zgodnie z poniższym schematem:

* Aplikacja publikuje zadanie do kolejki, następnie informuje użytkownika o statusie zadania
* Worker odbiera zadanie z kolejki, przetwarza je, a następnie sygnalizuje zakończenie zadania

Użytkownik nie jest blokowany, a zadanie jest przetwarzane w tle. W tym czasie klient może opcjonalnie wykonać drobne przetwarzanie, by sprawiać wrażenie, że zadanie zostało zakończone. Przykładowo, przy publikowaniu tweeta, tweet może zostać natychmiast dodany do Twojej osi czasu, ale może minąć trochę czasu, zanim dotrze do wszystkich Twoich obserwujących.

**[Redis](https://redis.io/)** jest przydatny jako prosty broker wiadomości, ale wiadomości mogą zostać utracone.

**[RabbitMQ](https://www.rabbitmq.com/)** jest popularny, ale wymaga dostosowania się do protokołu 'AMQP' i samodzielnego zarządzania węzłami.
**[Amazon SQS](https://aws.amazon.com/sqs/)** jest usługą hostowaną, ale może charakteryzować się dużym opóźnieniem oraz możliwością dwukrotnego dostarczenia wiadomości.

### Kolejki zadań

Kolejki zadań odbierają zadania wraz z powiązanymi danymi, wykonują je, a następnie dostarczają wyniki. Mogą wspierać harmonogramowanie i są używane do uruchamiania zasobożernych obliczeń w tle.

**[Celery](https://docs.celeryproject.org/en/stable/)** posiada wsparcie dla harmonogramowania i przede wszystkim obsługuje język Python.

### Presja zwrotna

Jeśli kolejki zaczną znacząco rosnąć, ich rozmiar może przekroczyć pojemność pamięci, skutkując nietrafieniami do pamięci podręcznej, odczytami z dysku oraz jeszcze wolniejszym działaniem. [Presja zwrotna](http://mechanical-sympathy.blogspot.com/2012/05/apply-back-pressure-when-overloaded.html) pomaga poprzez ograniczenie rozmiaru kolejki, utrzymując wysoką przepustowość i dobre czasy odpowiedzi dla już oczekujących zadań. Po zapełnieniu kolejki klient otrzymuje informację o zajętości serwera lub kod HTTP 503, by spróbować ponownie później. Klient może powtórzyć żądanie później, na przykład stosując [eksponencjalne opóźnienie](https://en.wikipedia.org/wiki/Exponential_backoff).

### Wada(-y): asynchroniczność

* Przypadki użycia takie jak tanie obliczenia i przepływy danych w czasie rzeczywistym mogą być lepiej obsługiwane przez operacje synchroniczne, gdyż wprowadzenie kolejek dodaje opóźnienia i złożoność.

### Źródła i dalsza lektura

* [It's all a numbers game](https://www.youtube.com/watch?v=1KRYH75wgy4)
* [Applying back pressure when overloaded](http://mechanical-sympathy.blogspot.com/2012/05/apply-back-pressure-when-overloaded.html)
* [Little's law](https://en.wikipedia.org/wiki/Little%27s_law)
* [What is the difference between a message queue and a task queue?](https://www.quora.com/What-is-the-difference-between-a-message-queue-and-a-task-queue-Why-would-a-task-queue-require-a-message-broker-like-RabbitMQ-Redis-Celery-or-IronMQ-to-function)

## Komunikacja

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/5KeocQs.jpg">
  <br/>
  <i><a href=http://www.escotal.com/osilayer.html>Źródło: Model OSI 7 warstw</a></i>
</p>

### Protokół przesyłania hipertekstu (HTTP)

HTTP to metoda kodowania i przesyłania danych między klientem a serwerem. Jest to protokół żądanie/odpowiedź: klient wysyła żądania, a serwer odpowiada odpowiednimi danymi oraz informacją o statusie realizacji żądania. HTTP jest niezależny, pozwala na przekazywanie żądań i odpowiedzi przez wiele pośrednich routerów i serwerów realizujących równoważenie obciążenia, buforowanie, szyfrowanie i kompresję.

Podstawowe żądanie HTTP składa się z czasownika (metody) i zasobu (endpointu). Poniżej przedstawiono typowe czasowniki HTTP:

| Czasownik | Opis | Idempotentny* | Bezpieczny | Buforowalny |


| GET | Odczytuje zasób | Tak | Tak | Tak |
| POST | Tworzy zasób lub uruchamia proces obsługujący dane | Nie | Nie | Tak, jeśli odpowiedź zawiera informację o świeżości |
| PUT | Tworzy lub zastępuje zasób | Tak | Nie | Nie |
| PATCH | Częściowo aktualizuje zasób | Nie | Nie | Tak, jeśli odpowiedź zawiera informację o świeżości |
| DELETE | Usuwa zasób | Tak | Nie | Nie |

*Można wywołać wiele razy bez różnych rezultatów.

HTTP to protokół warstwy aplikacji opierający się na niższych protokołach takich jak **TCP** i **UDP**.

#### Źródło(-a) i dalsza lektura: HTTP

* [Czym jest HTTP?](https://www.nginx.com/resources/glossary/http/)
* [Różnica między HTTP a TCP](https://www.quora.com/What-is-the-difference-between-HTTP-protocol-and-TCP-protocol)
* [Różnica między PUT a PATCH](https://laracasts.com/discuss/channels/general-discussion/whats-the-differences-between-put-and-patch?page=1)

### Protokół kontroli transmisji (TCP)

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/JdAsdvG.jpg">
  <br/>
  <i><a href=http://www.wildbunny.co.uk/blog/2012/10/09/how-to-make-a-multi-player-game-part-1/>Źródło: How to make a multiplayer game</a></i>
</p>

TCP to protokół połączeniowy działający na [sieci IP](https://en.wikipedia.org/wiki/Internet_Protocol). Połączenie jest ustanawiane i kończone za pomocą [handshake](https://en.wikipedia.org/wiki/Handshaking). Wszystkie wysłane pakiety mają gwarancję dotarcia do celu w oryginalnej kolejności i bez uszkodzeń dzięki:

* Numerom sekwencyjnym i [polom sumy kontrolnej](https://en.wikipedia.org/wiki/Transmission_Control_Protocol#Checksum_computation) dla każdego pakietu
* Pakietom [potwierdzenia](https://en.wikipedia.org/wiki/Acknowledgement_(data_networks)) i automatycznemu retransmitowaniu

Jeśli nadawca nie otrzyma poprawnej odpowiedzi, ponownie wysyła pakiety. Jeśli wystąpi wiele przekroczeń czasu, połączenie jest zrywane. TCP implementuje także [kontrolę przepływu](https://en.wikipedia.org/wiki/Flow_control_(data)) oraz [kontrolę przeciążenia](https://en.wikipedia.org/wiki/Network_congestion#Congestion_control). Te gwarancje powodują opóźnienia i generalnie skutkują mniej wydajną transmisją niż UDP.

Aby zapewnić wysoką przepustowość, serwery WWW mogą utrzymywać dużą liczbę otwartych połączeń TCP, co skutkuje dużym zużyciem pamięci. Utrzymywanie wielu otwartych połączeń między wątkami serwera WWW a np. serwerem [memcached](https://memcached.org/) może być kosztowne. [Pule połączeń](https://en.wikipedia.org/wiki/Connection_pool) mogą pomóc, podobnie jak przejście na UDP tam, gdzie to możliwe.

TCP jest przydatny dla aplikacji wymagających wysokiej niezawodności, ale mniej krytycznych czasowo. Przykłady to serwery WWW, informacje z baz danych, SMTP, FTP i SSH.

Użyj TCP zamiast UDP, gdy:

* Potrzebujesz, by wszystkie dane dotarły w całości
* Chcesz automatycznie jak najlepiej wykorzystać przepustowość sieci

### Protokół datagramów użytkownika (UDP)

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/yzDrJtA.jpg">
  <br/>
  <i><a href=http://www.wildbunny.co.uk/blog/2012/10/09/how-to-make-a-multi-player-game-part-1/>Źródło: Jak stworzyć grę wieloosobową</a></i>
</p>

UDP jest bezpołączeniowy. Datagramy (analogiczne do pakietów) są gwarantowane tylko na poziomie pojedynczego datagramu. Datagramy mogą dotrzeć do celu w niewłaściwej kolejności lub wcale. UDP nie obsługuje kontroli przeciążenia. Bez gwarancji oferowanych przez TCP, UDP jest na ogół bardziej wydajny.

UDP umożliwia rozgłaszanie, wysyłając datagramy do wszystkich urządzeń w podsieci. Jest to użyteczne przy [DHCP](https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol), ponieważ klient nie otrzymał jeszcze adresu IP, co uniemożliwia TCP przesyłanie strumieniowe bez adresu IP.

UDP jest mniej niezawodny, ale sprawdza się w zastosowaniach czasu rzeczywistego, takich jak VoIP, czat wideo, streaming i gry wieloosobowe w czasie rzeczywistym.

Użyj UDP zamiast TCP gdy:

* Potrzebujesz najniższych opóźnień
* Późne dane są gorsze niż utrata danych
* Chcesz zaimplementować własną korekcję błędów

#### Źródło(-a) i dalsza lektura: TCP i UDP

* [Sieciowanie dla programowania gier](http://gafferongames.com/networking-for-game-programmers/udp-vs-tcp/)
* [Kluczowe różnice między protokołami TCP i UDP](http://www.cyberciti.biz/faq/key-differences-between-tcp-and-udp-protocols/)
* [Różnica między TCP a UDP](http://stackoverflow.com/questions/5970383/difference-between-tcp-and-udp)
* [Protokół kontroli transmisji](https://en.wikipedia.org/wiki/Transmission_Control_Protocol)
* [Protokół datagramów użytkownika](https://en.wikipedia.org/wiki/User_Datagram_Protocol)
* [Skalowanie memcache w Facebooku](http://www.cs.bu.edu/~jappavoo/jappavoo.github.com/451/papers/memcache-fb.pdf)

### Zdalne wywołanie procedury (RPC)

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/iF4Mkb5.png">
  <br/>
  <i><a href=http://www.puncsky.com/blog/2016-02-13-crack-the-system-design-interview>Źródło: Crack the system design interview</a></i>
</p>

W RPC klient powoduje wykonanie procedury w innym obszarze adresowym, zwykle na zdalnym serwerze. Procedura jest kodowana tak, jakby była lokalnym wywołaniem procedury, ukrywając szczegóły komunikacji z serwerem przed programem klienckim. Zdalne wywołania są zwykle wolniejsze i mniej niezawodne niż lokalne wywołania, dlatego warto odróżniać wywołania RPC od lokalnych. Popularne frameworki RPC to [Protobuf](https://developers.google.com/protocol-buffers/), [Thrift](https://thrift.apache.org/) oraz [Avro](https://avro.apache.org/docs/current/).

RPC jest protokołem żądanie-odpowiedź:

* **Program klienta** - Wywołuje procedurę stub klienta. Parametry są umieszczane na stosie tak jak w przypadku wywołania lokalnej procedury.
* **Procedura stub klienta** - Pakietuje (marshaluje) identyfikator procedury i argumenty do wiadomości żądania.
* **Moduł komunikacji klienta** - System operacyjny przesyła wiadomość od klienta do serwera.
* **Moduł komunikacji serwera** - System operacyjny przekazuje przychodzące pakiety do procedury stub serwera.
* **Procedura stub serwera** - Odpakowuje (unmarshaluje) wyniki, wywołuje procedurę serwera odpowiadającą identyfikatorowi procedury i przekazuje podane argumenty.
* Odpowiedź serwera powtarza powyższe kroki w odwrotnej kolejności.

Przykładowe wywołania RPC:

```
GET /someoperation?data=anId

POST /anotheroperation
{
  "data":"anId";
  "anotherdata": "another value"
}
```

RPC koncentruje się na udostępnianiu zachowań. RPC są często używane ze względów wydajnościowych w komunikacji wewnętrznej, ponieważ można ręcznie dostosować natywne wywołania do własnych przypadków użycia.

Wybierz natywną bibliotekę (czyli SDK), gdy:

* Znasz swoją docelową platformę.
* Chcesz kontrolować dostęp do swojej "logiki".
* Chcesz kontrolować, jak obsługa błędów odbywa się poza twoją biblioteką.
* Wydajność i doświadczenie użytkownika końcowego są twoim głównym priorytetem.

HTTP API zgodne z **REST** są częściej używane jako publiczne API.

#### Wada(y): RPC

* Klienci RPC są silnie powiązani z implementacją usługi.
* Nowe API musi być zdefiniowane dla każdej nowej operacji lub przypadku użycia.
* Debugowanie RPC może być trudne.
* Możesz nie być w stanie wykorzystać istniejących technologii "z pudełka". Na przykład, może być wymagany dodatkowy wysiłek, by zapewnić [poprawne buforowanie wywołań RPC](https://web.archive.org/web/20170608193645/http://etherealbits.com/2012/12/debunking-the-myths-of-rpc-rest/) na serwerach cache, takich jak [Squid](http://www.squid-cache.org/).

### Representational state transfer (REST)

REST to styl architektoniczny wymuszający model klient/serwer, w którym klient operuje na zestawie zasobów zarządzanych przez serwer. Serwer dostarcza reprezentację zasobów i akcje, które mogą manipulować lub pobierać nową reprezentację zasobów. Cała komunikacja musi być bezstanowa i możliwa do buforowania.

RESTful interfejs ma cztery cechy:

* **Identyfikacja zasobów (URI w HTTP)** - używaj tego samego URI niezależnie od operacji.
* **Zmiana przez reprezentacje (czasowniki w HTTP)** - używaj czasowników, nagłówków i ciała żądania.
* **Samoopisujące komunikaty błędów (status response w HTTP)** - używaj kodów statusu, nie wymyślaj koła na nowo.
* **[HATEOAS](http://restcookbook.com/Basics/hateoas/) (interfejs HTML dla HTTP)** - twoja usługa webowa powinna być w pełni dostępna w przeglądarce.

Przykładowe wywołania REST:

```
GET /someresources/anId

PUT /someresources/anId
{"anotherdata": "another value"}
```
REST koncentruje się na udostępnianiu danych. Minimalizuje sprzężenie między klientem a serwerem i jest często używany do publicznych HTTP API. REST stosuje bardziej ogólną i jednolitą metodę udostępniania zasobów poprzez URI, [reprezentację przez nagłówki](https://github.com/for-GET/know-your-http-well/blob/master/headers.md) oraz akcje poprzez czasowniki takie jak GET, POST, PUT, DELETE i PATCH. Jako bezstanowy, REST świetnie nadaje się do skalowania horyzontalnego i partycjonowania.

#### Wada(y): REST

* Ponieważ REST koncentruje się na udostępnianiu danych, może nie być odpowiedni, jeśli zasoby nie są naturalnie zorganizowane lub dostępne w prostej hierarchii. Na przykład zwrócenie wszystkich zaktualizowanych rekordów z ostatniej godziny pasujących do określonego zestawu zdarzeń nie jest łatwo wyrażalne jako ścieżka. W REST prawdopodobnie zostanie to zaimplementowane jako kombinacja ścieżki URI, parametrów zapytania i możliwie ciała żądania.
* REST zazwyczaj opiera się na kilku czasownikach (GET, POST, PUT, DELETE i PATCH), które czasami nie pasują do Twojego przypadku użycia. Na przykład przeniesienie wygasłych dokumentów do folderu archiwum może nie pasować czysto do tych czasowników.
* Pobieranie skomplikowanych zasobów z zagnieżdżonymi hierarchiami wymaga wielu rund pomiędzy klientem a serwerem, aby wyrenderować pojedynczy widok, np. pobranie zawartości wpisu na blogu i komentarzy do tego wpisu. Dla aplikacji mobilnych działających w zmiennych warunkach sieciowych te wielokrotne rundy są bardzo niepożądane.
* Z czasem do odpowiedzi API mogą być dodawane kolejne pola, a starsze klienty będą otrzymywać wszystkie nowe pola danych, nawet te, których nie potrzebują, co prowadzi do zwiększenia rozmiaru ładunku i większych opóźnień.

### Porównanie wywołań RPC i REST

| Operacja | RPC | REST |
|---|---|---|
| Rejestracja | **POST** /signup | **POST** /persons |
| Rezygnacja | **POST** /resign<br/>{<br/>"personid": "1234"<br/>} | **DELETE** /persons/1234 |
| Odczyt osoby | **GET** /readPerson?personid=1234 | **GET** /persons/1234 |
| Odczyt listy przedmiotów osoby | **GET** /readUsersItemsList?personid=1234 | **GET** /persons/1234/items |
| Dodanie przedmiotu do listy osoby | **POST** /addItemToUsersItemsList<br/>{<br/>"personid": "1234";<br/>"itemid": "456"<br/>} | **POST** /persons/1234/items<br/>{<br/>"itemid": "456"<br/>} |
| Aktualizacja przedmiotu | **POST** /modifyItem<br/>{<br/>"itemid": "456";<br/>"key": "value"<br/>} | **PUT** /items/456<br/>{<br/>"key": "value"<br/>} |
| Usunięcie przedmiotu | **POST** /removeItem<br/>{<br/>"itemid": "456"<br/>} | **DELETE** /items/456 |

<p align="center">
  <i><a href=https://apihandyman.io/do-you-really-know-why-you-prefer-rest-over-rpc/>Źródło: Czy naprawdę wiesz, dlaczego preferujesz REST nad RPC</a></i>
</p>

#### Źródło(a) i dalsza lektura: REST i RPC

* [Czy naprawdę wiesz, dlaczego preferujesz REST nad RPC](https://apihandyman.io/do-you-really-know-why-you-prefer-rest-over-rpc/)
* [Kiedy podejścia podobne do RPC są bardziej odpowiednie niż REST?](http://programmers.stackexchange.com/a/181186)
* [REST vs JSON-RPC](http://stackoverflow.com/questions/15056878/rest-vs-json-rpc)
* [Obalanie mitów RPC i REST](https://web.archive.org/web/20170608193645/http://etherealbits.com/2012/12/debunking-the-myths-of-rpc-rest/)
* [Jakie są wady korzystania z REST](https://www.quora.com/What-are-the-drawbacks-of-using-RESTful-APIs)
* [Crack the system design interview](http://www.puncsky.com/blog/2016-02-13-crack-the-system-design-interview)
* [Thrift](https://code.facebook.com/posts/1468950976659943/)
* [Dlaczego REST do użytku wewnętrznego, a nie RPC](http://arstechnica.com/civis/viewtopic.php?t=1190508)

## Bezpieczeństwo

Ta sekcja wymaga aktualizacji. Rozważ [wniesienie wkładu](#contributing)!


Bezpieczeństwo to szeroki temat.  Jeśli nie masz dużego doświadczenia, wykształcenia w zakresie bezpieczeństwa lub nie aplikujesz na stanowisko wymagające wiedzy z zakresu bezpieczeństwa, prawdopodobnie wystarczy Ci znajomość podstaw:

* Szyfruj dane w tranzycie oraz podczas przechowywania.
* Sanityzuj wszystkie dane wejściowe użytkownika lub dowolne parametry wejściowe udostępnione użytkownikowi, aby zapobiec [XSS](https://en.wikipedia.org/wiki/Cross-site_scripting) oraz [SQL injection](https://en.wikipedia.org/wiki/SQL_injection).
* Używaj zapytań parametryzowanych, aby zapobiec SQL injection.
* Stosuj zasadę [najmniejszych uprawnień](https://en.wikipedia.org/wiki/Principle_of_least_privilege).

### Źródła i dalsza lektura

* [Lista kontrolna bezpieczeństwa API](https://github.com/shieldfy/API-Security-Checklist)
* [Przewodnik bezpieczeństwa dla programistów](https://github.com/FallibleInc/security-guide-for-developers)
* [OWASP top ten](https://www.owasp.org/index.php/OWASP_Top_Ten_Cheat_Sheet)

## Dodatek

Czasem zostaniesz poproszony o wykonanie szacunków „na szybko”. Na przykład możesz potrzebować określić, ile czasu zajmie wygenerowanie 100 miniatur obrazów z dysku lub ile pamięci zajmie struktura danych.  **Tabela potęg dwójki** oraz **Liczby opóźnień, które każdy programista powinien znać** to przydatne odniesienia.

### Tabela potęg dwójki

```
Power           Exact Value         Approx Value        Bytes
---------------------------------------------------------------
7                             128
8                             256
10                           1024   1 thousand           1 KB
16                         65,536                       64 KB
20                      1,048,576   1 million            1 MB
30                  1,073,741,824   1 billion            1 GB
32                  4,294,967,296                        4 GB
40              1,099,511,627,776   1 trillion           1 TB
```

#### Źródła i dalsza lektura

* [Potęgi dwójki](https://pl.wikipedia.org/wiki/Pot%C4%99ga_dw%C3%B3jki)

### Liczby opóźnień, które powinien znać każdy programista

```
Latency Comparison Numbers
--------------------------
L1 cache reference                           0.5 ns
Branch mispredict                            5   ns
L2 cache reference                           7   ns                      14x L1 cache
Mutex lock/unlock                           25   ns
Main memory reference                      100   ns                      20x L2 cache, 200x L1 cache
Compress 1K bytes with Zippy            10,000   ns       10 us
Send 1 KB bytes over 1 Gbps network     10,000   ns       10 us
Read 4 KB randomly from SSD*           150,000   ns      150 us          ~1GB/sec SSD
Read 1 MB sequentially from memory     250,000   ns      250 us
Round trip within same datacenter      500,000   ns      500 us
Read 1 MB sequentially from SSD*     1,000,000   ns    1,000 us    1 ms  ~1GB/sec SSD, 4X memory
HDD seek                            10,000,000   ns   10,000 us   10 ms  20x datacenter roundtrip
Read 1 MB sequentially from 1 Gbps  10,000,000   ns   10,000 us   10 ms  40x memory, 10X SSD
Read 1 MB sequentially from HDD     30,000,000   ns   30,000 us   30 ms 120x memory, 30X SSD
Send packet CA->Netherlands->CA    150,000,000   ns  150,000 us  150 ms

Notes
-----
1 ns = 10^-9 seconds
1 us = 10^-6 seconds = 1,000 ns
1 ms = 10^-3 seconds = 1,000 us = 1,000,000 ns
```
Przydatne metryki na podstawie powyższych liczb:

* Odczyt sekwencyjny z HDD z prędkością 30 MB/s
* Odczyt sekwencyjny z Ethernetu 1 Gbps z prędkością 100 MB/s
* Odczyt sekwencyjny z SSD z prędkością 1 GB/s
* Odczyt sekwencyjny z pamięci głównej z prędkością 4 GB/s
* 6-7 podróży dookoła świata na sekundę
* 2 000 podróży w obrębie centrum danych na sekundę

#### Liczby dotyczące opóźnień zobrazowane

![](https://camo.githubusercontent.com/77f72259e1eb58596b564d1ad823af1853bc60a3/687474703a2f2f692e696d6775722e636f6d2f6b307431652e706e67)

#### Źródło(-a) i dalsza lektura

* [Liczby dotyczące opóźnień, które powinien znać każdy programista - 1](https://gist.github.com/jboner/2841832)
* [Liczby dotyczące opóźnień, które powinien znać każdy programista - 2](https://gist.github.com/hellerbarde/2843375)
* [Projekty, lekcje i rady z budowy dużych systemów rozproszonych](http://www.cs.cornell.edu/projects/ladis2009/talks/dean-keynote-ladis2009.pdf)
* [Porady inżynierii oprogramowania z budowy dużych systemów rozproszonych](https://static.googleusercontent.com/media/research.google.com/en//people/jeff/stanford-295-talk.pdf)

### Dodatkowe pytania na rozmowę o projektowaniu systemów

> Typowe pytania na rozmowach o projektowaniu systemów, wraz z odnośnikami do zasobów, jak je rozwiązać.

| Pytanie | Odnośnik(i) |
|---|---|
| Zaprojektuj usługę synchronizacji plików jak Dropbox | [youtube.com](https://www.youtube.com/watch?v=PE4gwstWhmc) |
| Zaprojektuj wyszukiwarkę jak Google | [queue.acm.org](http://queue.acm.org/detail.cfm?id=988407)<br/>[stackexchange.com](http://programmers.stackexchange.com/questions/38324/interview-question-how-would-you-implement-google-search)<br/>[ardendertat.com](http://www.ardendertat.com/2012/01/11/implementing-search-engines/)<br/>[stanford.edu](http://infolab.stanford.edu/~backrub/google.html) |
| Zaprojektuj skalowalnego web crawlera jak Google | [quora.com](https://www.quora.com/How-can-I-build-a-web-crawler-from-scratch) |
| Zaprojektuj Google docs | [code.google.com](https://code.google.com/p/google-mobwrite/)<br/>[neil.fraser.name](https://neil.fraser.name/writing/sync/) |
| Zaprojektuj sklep klucz-wartość jak Redis | [slideshare.net](http://www.slideshare.net/dvirsky/introduction-to-redis) |
| Zaprojektuj system cache jak Memcached | [slideshare.net](http://www.slideshare.net/oemebamo/introduction-to-memcached) |
| Zaprojektuj system rekomendacji jak Amazon | [hulu.com](https://web.archive.org/web/20170406065247/http://tech.hulu.com/blog/2011/09/19/recommendation-system.html)<br/>[ijcai13.org](http://ijcai13.org/files/tutorial_slides/td3.pdf) |
| Zaprojektuj system tinyurl jak Bitly | [n00tc0d3r.blogspot.com](http://n00tc0d3r.blogspot.com/) |
| Zaprojektuj aplikację czatu jak WhatsApp | [highscalability.com](http://highscalability.com/blog/2014/2/26/the-whatsapp-architecture-facebook-bought-for-19-billion.html)
| Zaprojektuj system udostępniania zdjęć jak Instagram | [highscalability.com](http://highscalability.com/flickr-architecture)<br/>[highscalability.com](http://highscalability.com/blog/2011/12/6/instagram-architecture-14-million-users-terabytes-of-photos.html) |
| Zaprojektuj funkcję news feed Facebooka | [quora.com](http://www.quora.com/What-are-best-practices-for-building-something-like-a-News-Feed)<br/>[quora.com](http://www.quora.com/Activity-Streams/What-are-the-scaling-issues-to-keep-in-mind-while-developing-a-social-network-feed)<br/>[slideshare.net](http://www.slideshare.net/danmckinley/etsy-activity-feeds-architecture) |
| Zaprojektuj funkcję timeline Facebooka | [facebook.com](https://www.facebook.com/note.php?note_id=10150468255628920)<br/>[highscalability.com](http://highscalability.com/blog/2012/1/23/facebook-timeline-brought-to-you-by-the-power-of-denormaliza.html) |
| Zaprojektuj funkcję czatu Facebooka | [erlang-factory.com](http://www.erlang-factory.com/upload/presentations/31/EugeneLetuchy-ErlangatFacebook.pdf)<br/>[facebook.com](https://www.facebook.com/note.php?note_id=14218138919&id=9445547199&index=0) |

| Zaprojektuj funkcję wyszukiwania grafu jak na Facebooku | [facebook.com](https://www.facebook.com/notes/facebook-engineering/under-the-hood-building-out-the-infrastructure-for-graph-search/10151347573598920)<br/>[facebook.com](https://www.facebook.com/notes/facebook-engineering/under-the-hood-indexing-and-ranking-in-graph-search/10151361720763920)<br/>[facebook.com](https://www.facebook.com/notes/facebook-engineering/under-the-hood-the-natural-language-interface-of-graph-search/10151432733048920) |
| Zaprojektuj sieć dostarczania treści jak CloudFlare | [figshare.com](https://figshare.com/articles/Globally_distributed_content_delivery/6605972) |
| Zaprojektuj system trendujących tematów jak na Twitterze | [michael-noll.com](http://www.michael-noll.com/blog/2013/01/18/implementing-real-time-trending-topics-in-storm/)<br/>[snikolov .wordpress.com](http://snikolov.wordpress.com/2012/11/14/early-detection-of-twitter-trends/) |
| Zaprojektuj system generowania losowych identyfikatorów | [blog.twitter.com](https://blog.twitter.com/2010/announcing-snowflake)<br/>[github.com](https://github.com/twitter/snowflake/) |
| Zwróć k najczęściej żądanych zapytań w określonym przedziale czasu | [cs.ucsb.edu](https://www.cs.ucsb.edu/sites/default/files/documents/2005-23.pdf)<br/>[wpi.edu](http://davis.wpi.edu/xmdv/docs/EDBT11-diyang.pdf) |
| Zaprojektuj system obsługujący dane z wielu centrów danych | [highscalability.com](http://highscalability.com/blog/2009/8/24/how-google-serves-data-from-multiple-datacenters.html) |
| Zaprojektuj internetową grę karcianą multiplayer | [indieflashblog.com](https://web.archive.org/web/20180929181117/http://www.indieflashblog.com/how-to-create-an-asynchronous-multiplayer-game.html)<br/>[buildnewgames.com](http://buildnewgames.com/real-time-multiplayer/) |
| Zaprojektuj system garbage collection | [stuffwithstuff.com](http://journal.stuffwithstuff.com/2013/12/08/babys-first-garbage-collector/)<br/>[washington.edu](http://courses.cs.washington.edu/courses/csep521/07wi/prj/rick.pdf) |
| Zaprojektuj ogranicznik zapytań API | [https://stripe.com/blog/](https://stripe.com/blog/rate-limiters) |
| Zaprojektuj giełdę (np. NASDAQ lub Binance) | [Jane Street](https://youtu.be/b1e4t2k2KJY)<br/>[Golang Implementation](https://around25.com/blog/building-a-trading-engine-for-a-crypto-exchange/)<br/>[Go Implementation](http://bhomnick.net/building-a-simple-limit-order-in-go/) |
| Dodaj pytanie dotyczące projektowania systemu | [Contribute](#contributing) |

### Architektury rzeczywiste

> Artykuły o tym, jak projektowane są rzeczywiste systemy.

<p align="center">
  <img src="https://raw.githubusercontent.com/donnemartin/system-design-primer/master/images/TcUo2fw.png">
  <br/>
  <i><a href=https://www.infoq.com/presentations/Twitter-Timeline-Scalability>Źródło: Twitter timelines at scale</a></i>
</p>

**Nie skupiaj się na drobnych szczegółach w poniższych artykułach, zamiast tego:**

* Zidentyfikuj wspólne zasady, technologie i wzorce w tych artykułach
* Przeanalizuj jakie problemy rozwiązuje każdy komponent, gdzie działa, a gdzie nie
* Przejrzyj zdobyte doświadczenia

|Typ | System | Źródło(y) |
|---|---|---|
| Przetwarzanie danych | **MapReduce** - Rozproszone przetwarzanie danych od Google | [research.google.com](http://static.googleusercontent.com/media/research.google.com/zh-CN/us/archive/mapreduce-osdi04.pdf) |
| Przetwarzanie danych | **Spark** - Rozproszone przetwarzanie danych od Databricks | [slideshare.net](http://www.slideshare.net/AGrishchenko/apache-spark-architecture) |
| Przetwarzanie danych | **Storm** - Rozproszone przetwarzanie danych od Twittera | [slideshare.net](http://www.slideshare.net/previa/storm-16094009) |
| | | |
| Magazyn danych | **Bigtable** - Rozproszona baza danych kolumnowa od Google | [harvard.edu](http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/chang06bigtable.pdf) |
| Magazyn danych | **HBase** - Otwarta implementacja Bigtable | [slideshare.net](http://www.slideshare.net/alexbaranau/intro-to-hbase) |
| Magazyn danych | **Cassandra** - Rozproszona baza danych kolumnowa od Facebooka | [slideshare.net](http://www.slideshare.net/planetcassandra/cassandra-introduction-features-30103666)
| Magazyn danych | **DynamoDB** - Baza danych dokumentowa od Amazon | [harvard.edu](http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/decandia07dynamo.pdf) |
| Magazyn danych | **MongoDB** - Baza danych dokumentowa | [slideshare.net](http://www.slideshare.net/mdirolf/introduction-to-mongodb) |
| Magazyn danych | **Spanner** - Globalnie rozproszona baza danych od Google | [research.google.com](http://research.google.com/archive/spanner-osdi2012.pdf) |
| Magazyn danych | **Memcached** - rozproszony system buforowania pamięci | [slideshare.net](http://www.slideshare.net/oemebamo/introduction-to-memcached) |
| Magazyn danych | **Redis** - rozproszony system buforowania pamięci z trwałością i typami wartości | [slideshare.net](http://www.slideshare.net/dvirsky/introduction-to-redis) |
| | | |
| System plików | **Google File System (GFS)** - rozproszony system plików | [research.google.com](http://static.googleusercontent.com/media/research.google.com/zh-CN/us/archive/gfs-sosp2003.pdf) |
| System plików | **Hadoop File System (HDFS)** - otwarta implementacja GFS | [apache.org](http://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html) |
| | | |
| Różne | **Chubby** - serwis blokad dla luźno powiązanych systemów rozproszonych od Google | [research.google.com](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/archive/chubby-osdi06.pdf) |
| Różne | **Dapper** - infrastruktura śledzenia systemów rozproszonych | [research.google.com](http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/36356.pdf)
| Różne | **Kafka** - kolejka wiadomości pub/sub od LinkedIn | [slideshare.net](http://www.slideshare.net/mumrah/kafka-talk-tri-hug) |
| Różne | **Zookeeper** - scentralizowana infrastruktura i usługi umożliwiające synchronizację | [slideshare.net](http://www.slideshare.net/sauravhaloi/introduction-to-apache-zookeeper) |
| | Dodaj architekturę | [Contribute](#contributing) |

### Architektury firm

| Firma | Referencje |
|---|---|
| Amazon | [Amazon architecture](http://highscalability.com/amazon-architecture) |
| Cinchcast | [Produkcja 1 500 godzin audio każdego dnia](http://highscalability.com/blog/2012/7/16/cinchcast-architecture-producing-1500-hours-of-audio-every-d.html) |
| DataSift | [Analiza danych w czasie rzeczywistym przy 120 000 tweetów na sekundę](http://highscalability.com/blog/2011/11/29/datasift-architecture-realtime-datamining-at-120000-tweets-p.html) |
| Dropbox | [Jak skalowaliśmy Dropbox](https://www.youtube.com/watch?v=PE4gwstWhmc) |
| ESPN | [Przetwarzanie 100 000 duh nuh nuhs na sekundę](http://highscalability.com/blog/2013/11/4/espns-architecture-at-scale-operating-at-100000-duh-nuh-nuhs.html) |
| Google | [Architektura Google](http://highscalability.com/google-architecture) |
| Instagram | [14 milionów użytkowników, terabajty zdjęć](http://highscalability.com/blog/2011/12/6/instagram-architecture-14-million-users-terabytes-of-photos.html)<br/>[Co napędza Instagram](http://instagram-engineering.tumblr.com/post/13649370142/what-powers-instagram-hundreds-of-instances) |
| Justin.tv | [Architektura transmisji wideo na żywo Justin.TV](http://highscalability.com/blog/2010/3/16/justintvs-live-video-broadcasting-architecture.html) |
| Facebook | [Skalowanie Memcached w Facebooku](https://cs.uwaterloo.ca/~brecht/courses/854-Emerging-2014/readings/key-value/fb-memcached-nsdi-2013.pdf)<br/>[TAO: rozproszony magazyn danych Facebooka dla grafu społecznościowego](https://cs.uwaterloo.ca/~brecht/courses/854-Emerging-2014/readings/data-store/tao-facebook-distributed-datastore-atc-2013.pdf)<br/>[Przechowywanie zdjęć w Facebooku](https://www.usenix.org/legacy/event/osdi10/tech/full_papers/Beaver.pdf)<br/>[Jak Facebook transmituje na żywo do 800 000 jednoczesnych widzów](http://highscalability.com/blog/2016/6/27/how-facebook-live-streams-to-800000-simultaneous-viewers.html) |
| Flickr | [Architektura Flickr](http://highscalability.com/flickr-architecture) |
| Mailbox | [Od 0 do miliona użytkowników w 6 tygodni](http://highscalability.com/blog/2013/6/18/scaling-mailbox-from-0-to-one-million-users-in-6-weeks-and-1.html) |
| Netflix | [360-stopniowy widok całego stosu Netflix](http://highscalability.com/blog/2015/11/9/a-360-degree-view-of-the-entire-netflix-stack.html)<br/>[Netflix: Co się dzieje po naciśnięciu „Play”?](http://highscalability.com/blog/2017/12/11/netflix-what-happens-when-you-press-play.html) |
| Pinterest | [Od 0 do dziesiątek miliardów odsłon miesięcznie](http://highscalability.com/blog/2013/4/15/scaling-pinterest-from-0-to-10s-of-billions-of-page-views-a.html)<br/>[18 milionów odwiedzających, 10x wzrost, 12 pracowników](http://highscalability.com/blog/2012/5/21/pinterest-architecture-update-18-million-visitors-10x-growth.html) |
| Playfish | [50 milionów użytkowników miesięcznie i rośnie](http://highscalability.com/blog/2010/9/21/playfishs-social-gaming-architecture-50-million-monthly-user.html) |
| PlentyOfFish | [Architektura PlentyOfFish](http://highscalability.com/plentyoffish-architecture) |
| Salesforce | [Jak obsługują 1,3 miliarda transakcji dziennie](http://highscalability.com/blog/2013/9/23/salesforce-architecture-how-they-handle-13-billion-transacti.html) |
| Stack Overflow | [Architektura Stack Overflow](http://highscalability.com/blog/2009/8/5/stack-overflow-architecture.html) |
| TripAdvisor | [40 mln odwiedzających, 200 mln dynamicznych odsłon, 30 TB danych](http://highscalability.com/blog/2011/6/27/tripadvisor-architecture-40m-visitors-200m-dynamic-page-view.html) |
| Tumblr | [15 miliardów odsłon miesięcznie](http://highscalability.com/blog/2012/2/13/tumblr-architecture-15-billion-page-views-a-month-and-harder.html) |
| Twitter | [Przyspieszenie Twittera o 10 000 procent](http://highscalability.com/scaling-twitter-making-twitter-10000-percent-faster)<br/>[Przechowywanie 250 milionów tweetów dziennie za pomocą MySQL](http://highscalability.com/blog/2011/12/19/how-twitter-stores-250-million-tweets-a-day-using-mysql.html)<br/>[150 mln aktywnych użytkowników, 300 tys. QPS, 22 MB/s firehose](http://highscalability.com/blog/2013/7/8/the-architecture-twitter-uses-to-deal-with-150m-active-users.html)<br/>[Oś czasu w skali](https://www.infoq.com/presentations/Twitter-Timeline-Scalability)<br/>[Duże i małe dane w Twitterze](https://www.youtube.com/watch?v=5cKTP36HVgI)<br/>[Operacje w Twitterze: skalowanie ponad 100 milionów użytkowników](https://www.youtube.com/watch?v=z8LU0Cj6BOU)<br/>[Jak Twitter obsługuje 3 000 obrazów na sekundę](http://highscalability.com/blog/2016/4/20/how-twitter-handles-3000-images-per-second.html) |
| Uber | [Jak Uber skaluje swój platformę rynku czasu rzeczywistego](http://highscalability.com/blog/2015/9/14/how-uber-scales-their-real-time-market-platform.html)<br/>[Wnioski z skalowania Ubera do 2000 inżynierów, 1000 usług i 8000 repozytoriów Git](http://highscalability.com/blog/2016/10/12/lessons-learned-from-scaling-uber-to-2000-engineers-1000-ser.html) |
| WhatsApp | [Architektura WhatsApp, którą Facebook kupił za 19 miliardów dolarów](http://highscalability.com/blog/2014/2/26/the-whatsapp-architecture-facebook-bought-for-19-billion.html) |
| YouTube | [Skalowalność YouTube](https://www.youtube.com/watch?v=w5WVu624fY8)<br/>[Architektura YouTube](http://highscalability.com/youtube-architecture) |

### Firmowe blogi inżynierskie

> Architektury firm, z którymi prowadzisz rozmowy kwalifikacyjne.
>
> Pytania, z którymi się spotkasz, mogą pochodzić z tej samej dziedziny.

* [Airbnb Engineering](http://nerds.airbnb.com/)
* [Atlassian Developers](https://developer.atlassian.com/blog/)
* [AWS Blog](https://aws.amazon.com/blogs/aws/)
* [Bitly Engineering Blog](http://word.bitly.com/)
* [Box Blogs](https://blog.box.com/blog/category/engineering)
* [Cloudera Developer Blog](http://blog.cloudera.com/)
* [Dropbox Tech Blog](https://tech.dropbox.com/)
* [Engineering at Quora](https://www.quora.com/q/quoraengineering)
* [Ebay Tech Blog](http://www.ebaytechblog.com/)
* [Evernote Tech Blog](https://blog.evernote.com/tech/)
* [Etsy Code as Craft](http://codeascraft.com/)
* [Facebook Engineering](https://www.facebook.com/Engineering)
* [Flickr Code](http://code.flickr.net/)
* [Foursquare Engineering Blog](http://engineering.foursquare.com/)
* [GitHub Engineering Blog](https://github.blog/category/engineering)
* [Google Research Blog](http://googleresearch.blogspot.com/)
* [Groupon Engineering Blog](https://engineering.groupon.com/)
* [Heroku Engineering Blog](https://engineering.heroku.com/)
* [Hubspot Engineering Blog](http://product.hubspot.com/blog/topic/engineering)
* [High Scalability](http://highscalability.com/)
* [Instagram Engineering](http://instagram-engineering.tumblr.com/)
* [Intel Software Blog](https://software.intel.com/en-us/blogs/)
* [Jane Street Tech Blog](https://blogs.janestreet.com/category/ocaml/)
* [LinkedIn Engineering](http://engineering.linkedin.com/blog)
* [Microsoft Engineering](https://engineering.microsoft.com/)
* [Microsoft Python Engineering](https://blogs.msdn.microsoft.com/pythonengineering/)
* [Netflix Tech Blog](http://techblog.netflix.com/)
* [Paypal Developer Blog](https://medium.com/paypal-engineering)
* [Pinterest Engineering Blog](https://medium.com/@Pinterest_Engineering)
* [Reddit Blog](http://www.redditblog.com/)
* [Salesforce Engineering Blog](https://developer.salesforce.com/blogs/engineering/)
* [Slack Engineering Blog](https://slack.engineering/)
* [Spotify Labs](https://labs.spotify.com/)
* [Stripe Engineering Blog](https://stripe.com/blog/engineering)
* [Twilio Engineering Blog](http://www.twilio.com/engineering)
* [Twitter Engineering](https://blog.twitter.com/engineering/)
* [Uber Engineering Blog](http://eng.uber.com/)
* [Yahoo Engineering Blog](http://yahooeng.tumblr.com/)
* [Yelp Engineering Blog](http://engineeringblog.yelp.com/)
* [Zynga Engineering Blog](https://www.zynga.com/blogs/engineering)

#### Źródło(-a) i dalsza lektura

Chcesz dodać bloga? Aby uniknąć powielania pracy, rozważ dodanie bloga swojej firmy do następującego repozytorium:

* [kilimchoi/engineering-blogs](https://github.com/kilimchoi/engineering-blogs)

## W trakcie rozwoju

Chcesz dodać sekcję lub pomóc ukończyć jedną z rozpoczętych? [Wnieś swój wkład](#contributing)!

* Przetwarzanie rozproszone z MapReduce
* Haszowanie konsystentne
* Scatter gather
* [Wnieś swój wkład](#contributing)

## Podziękowania

Podziękowania i źródła są podane w całym repozytorium.

Szczególne podziękowania dla:

* [Hired in tech](http://www.hiredintech.com/system-design/the-system-design-process/)
* [Cracking the coding interview](https://www.amazon.com/dp/0984782850/)
* [High scalability](http://highscalability.com/)
* [checkcheckzz/system-design-interview](https://github.com/checkcheckzz/system-design-interview)
* [shashank88/system_design](https://github.com/shashank88/system_design)
* [mmcgrana/services-engineering](https://github.com/mmcgrana/services-engineering)
* [System design cheat sheet](https://gist.github.com/vasanthk/485d1c25737e8e72759f)
* [A distributed systems reading list](http://dancres.github.io/Pages/)
* [Cracking the system design interview](http://www.puncsky.com/blog/2016-02-13-crack-the-system-design-interview)

## Informacje kontaktowe

Zapraszam do kontaktu w celu omówienia wszelkich problemów, pytań lub uwag.

Moje dane kontaktowe znajdziesz na mojej [stronie GitHub](https://github.com/donnemartin).

## Licencja

*Kod i zasoby w tym repozytorium udostępniam na licencji open source.  Ponieważ jest to moje osobiste repozytorium, licencja na mój kod i zasoby jest udzielana przeze mnie, a nie przez mojego pracodawcę (Facebook).*

    Copyright 2017 Donne Martin

    Creative Commons Attribution 4.0 International License (CC BY 4.0)

    http://creativecommons.org/licenses/by/4.0/


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-08-09

---