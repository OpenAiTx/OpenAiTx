# wmproxy
[![crates.io](https://img.shields.io/crates/v/wmproxy.svg)](https://crates.io/crates/wmproxy)
[![rustc 1.70.0](https://img.shields.io/badge/rust-1.70%2B-orange.svg)](https://img.shields.io/badge/rust-1.70%2B-orange.svg)
[![Released API docs](https://docs.rs/wmproxy/badge.svg)](https://docs.rs/wmproxy)

`wmproxy` —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –Ω–∞ `Rust` —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏: –ø—Ä–æ–∫—Å–∏ http/https, –ø—Ä–æ–∫—Å–∏ socks5, –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏, —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–∫—Å–∏ websocket, –ø–µ—Ä–µ—Å—ã–ª–∫–∞ TCP/UDP –Ω–∞ 4-–º —É—Ä–æ–≤–Ω–µ, –ø—Ä–æ–±—Ä–æ—Å –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å –∏ –¥—Ä.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ & üèÉ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cargo install wmproxy
```

–ò–õ–ò

```bash
git clone https://github.com/tickbh/wmproxy
cd wmproxy
cargo install --path .
```

```docker
docker pull dreamwhat/wmproxy
docker run -p 8090:8090 --name proxy_bash dreamwhat/wmproxy /bin/./wmproxy proxy -b 0.0.0.0:8090
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî 8090, –∞–¥—Ä–µ—Å –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî 127.0.0.1
```bash
# –ó–∞–ø—É—Å–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
wmproxy proxy

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è
wmproxy proxy -b 0.0.0.0:8090 --user wmproxy --pass wmproxy

# –î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã
wmproxy --help

#–ó–∞–ø—É—Å–∫ —Å –ø–æ–º–æ—â—å—é —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
wmproxy config -c config/client.toml
```

##### –ó–∞–ø—É—Å–∫ –≤—Ç–æ—Ä–∏—á–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–∫—Å–∏ –ª–æ–∫–∞–ª—å–Ω–æ
```bash
wmproxy proxy -b 127.0.0.1:8090 -S 127.0.0.1:8091 --ts
```
–∏–ª–∏
```bash
wmproxy config -c config/client.toml
```
–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```toml
[proxy]
# –ê–¥—Ä–µ—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
#server = "127.0.0.1:8091"
bind_addr = "0.0.0.0:8090"
flag = "http https socks5"
# –®–∏—Ñ—Ä–æ–≤–∞—Ç—å –ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º
ts = true
two_way_tls = true
# username = "wmproxy"
# password = "wmproxy"

# –ú–∞—Å—Å–∏–≤ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–±—Ä–æ—Å–∞ –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å

  #–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω localhost –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π 127.0.0.1:8080
[[proxy.mappings]]
name = "web"
mode = "http"
local_addr = "127.0.0.1:8080"
domain = "localhost"

headers = [
  "proxy x-forward-for {client_ip}",
  "proxy + from $url",
  "+ last-modified 'from proxy'",
  "- etag",
]

#–ë–µ–∑—É—Å–ª–æ–≤–Ω–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ TCP-—Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ 127.0.0.1:8080
[[proxy.mappings]]
name = "tcp"
mode = "tcp"
local_addr = "127.0.0.1:8080"
domain = ""
```

–ü–æ—Å–∫–æ–ª—å–∫—É –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Å—ã–ª–∫–∞, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è –Ω–∞ —ç—Ç–æ–º —É–∑–ª–µ –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞. `-S` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∞–¥—Ä–µ—Å –≤—Ç–æ—Ä–∏—á–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏, **–µ—Å–ª–∏ —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä —É–∫–∞–∑–∞–Ω, —Ç–æ —ç—Ç–æ —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏, –∏–Ω–∞—á–µ ‚Äî –∫–æ–Ω–µ—á–Ω—ã–π –ø—Ä–æ–∫—Å–∏.** ```--ts``` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –≤—ã—à–µ—Å—Ç–æ—è—â–µ–º—É –ø—Ä–æ–∫—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ.

2. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–∫—Å–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
```bash
wmproxy proxy --user proxy --pass proxy -b 0.0.0.0:8091 --tc
```
–∏–ª–∏
```bash
wmproxy config -c config/server.toml
```
–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```toml
[proxy]
# IP-–∞–¥—Ä–µ—Å –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏
bind_addr = "127.0.0.1:8091"

# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–∫—Å–∏: 1 ‚Äî http, 2 ‚Äî https, 4 ‚Äî socks5
# flag = "7"
username = "wmproxy"
password = "wmproxy"

# –ê–¥—Ä–µ—Å –ø—Ä–∏–≤—è–∑–∫–∏ http-–ø—Ä–æ–±—Ä–æ—Å–∞ –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å
map_http_bind = "127.0.0.1:8001"
# –ê–¥—Ä–µ—Å –ø—Ä–∏–≤—è–∑–∫–∏ tcp-–ø—Ä–æ–±—Ä–æ—Å–∞ –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å
map_tcp_bind = "127.0.0.1:8002"
# –ê–¥—Ä–µ—Å –ø—Ä–∏–≤—è–∑–∫–∏ https-–ø—Ä–æ–±—Ä–æ—Å–∞ –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å
map_https_bind = "127.0.0.1:8003"
# –ü—É–±–ª–∏—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞, –µ—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
# map_cert = 
# –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞, –µ—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
# map_key =
# –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
two_way_tls = true
# –ü—Ä–∏–Ω–∏–º–∞—Ç—å –ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
tc = true
# –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞: server ‚Äî —Å–µ—Ä–≤–µ—Ä, client ‚Äî –∫–ª–∏–µ–Ω—Ç
mode = "server"
```

```--tc``` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ –ø—Ä–∏—ë–º–µ –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ–∫—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —á–µ—Ä–µ–∑ ```--cert```, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —á–µ—Ä–µ–∑ ```--key```, –¥–æ–º–µ–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —á–µ—Ä–µ–∑ ```--domain```. –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –∑–∞–¥–∞–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.
> –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ –º—ã —É–∂–µ –Ω–µ –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –∑–∞–ø—Ä–æ—Å–∞, —Ç–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–ø—Ä–æ—Å.

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –ø—Ä–æ–∫—Å–∏
> –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–∞ —Ç–∏–ø–∞ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: –µ—Å–ª–∏ ```two_way_tls``` –≤–∫–ª—é—á–µ–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç; –µ—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–¥–∞–Ω—ã ```username``` –∏ ```password```, –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑–∞—Ç—å —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –û–±–∞ —Å–ø–æ—Å–æ–±–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ –∏–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏.
> –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```yaml
proxy:
  two_way_tls: true
  username: wmproxy
  password: wmproxy
```

# üö• –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞
### socks5

- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ IPV6
- [x] –ú–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ `SOCKS5`
  - [x] `NOAUTH`
  - [x] `USERPASS`
- [x] –ö–æ–º–∞–Ω–¥—ã `SOCKS5`
  - [x] `CONNECT`
  - [x] `UDP ASSOCIATE`

### http/https

- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ IPV6

### –ü—Ä–æ–±—Ä–æ—Å –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å

- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Http
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Https
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Tcp

### –û–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏

- [x] –°–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- [x] –ü–∞—Å—Å–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [x] –ê–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [x] –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [x] –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
- [x] –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ TCP –Ω–∞ 4 —É—Ä–æ–≤–Ω–µ
- [x] –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ UDP –Ω–∞ 4 —É—Ä–æ–≤–Ω–µ
- [x] –ö–æ–Ω—Ç—Ä–æ–ª—å —Ç—Ä–∞—Ñ–∏–∫–∞
- [x] –ü–µ—Ä–µ—Å—ã–ª–∫–∞ websocket

### –ë–∞–∑–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- [x] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (limit_req)
- [x] –ò–∑–º–µ–Ω–µ–Ω–∏–µ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–±—Ä–æ—Å–∞ HTTP2 –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ–∫–ª–∏–µ–Ω—Ç–æ–º
- [x] try_paths
- [x] –ü–µ—Ä–µ–≤–æ–¥ tcp –≤ websocket
- [x] –ü–µ—Ä–µ–≤–æ–¥ websocket –≤ tcp


## –ò—Å—Ç–æ—Ä–∏—è Star

[![Star History Chart](https://api.star-history.com/svg?repos=tickbh/wmproxy&type=Date)](https://star-history.com/#tickbh/wmproxy&Date)


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-09

---