{
  "id": 1,
  "origin": "# ofetch\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![License][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\nA better fetch API. Works on node, browser, and workers.\n\n<details>\n  <summary>Spoiler</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ Quick Start\n\nInstall:\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nImport:\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ Works with Node.js\n\nWe use [conditional exports](https://nodejs.org/api/packages.html#packages_conditional_exports) to detect Node.js\nand automatically use [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native). If `globalThis.fetch` is available, will be used instead. To leverage Node.js 17.5.0 experimental native fetch API use [`--experimental-fetch` flag](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch).\n\n## âœ”ï¸ Parsing Response\n\n`ofetch` will smartly parse JSON and native values using [destr](https://github.com/unjs/destr), falling back to the text if it fails to parse.\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\nFor binary content types, `ofetch` will instead return a `Blob` object.\n\nYou can optionally provide a different parser than `destr`, or specify `blob`, `arrayBuffer`, or `text` to force parsing the body with the respective `FetchResponse` method.\n\n```js\n// Use JSON.parse\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// Return text as is\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// Get the blob version of the response\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ JSON Body\n\nIf an object or a class with a `.toJSON()` method is passed to the `body` option, `ofetch` automatically stringifies it.\n\n`ofetch` utilizes `JSON.stringify()` to convert the passed object. Classes without a `.toJSON()` method have to be converted into a string value in advance before being passed to the `body` option.\n\nFor `PUT`, `PATCH`, and `POST` request methods, when a string or object body is set, `ofetch` adds the default `content-type: \"application/json\"` and `accept: \"application/json\"` headers (which you can always override).\n\nAdditionally, `ofetch` supports binary responses with `Buffer`, `ReadableStream`, `Stream`, and [compatible body types](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body). `ofetch` will automatically set the `duplex: \"half\"` option for streaming support!\n\n**Example:**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ Handling Errors\n\n`ofetch` Automatically throws errors when `response.ok` is `false` with a friendly error message and compact stack (hiding internals).\n\nA parsed error body is available with `error.data`. You may also use `FetchError` type.\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\nTo catch error response:\n\n```ts",
  "origin_sha": "7ZgVRDjscms2MJD1r7evPUo8J2Uh+wcg5EpARFSQNtI=",
  "translate": "# ofetch\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![License][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\në” ë‚˜ì€ fetch API. Node, ë¸Œë¼ìš°ì €, ì›Œì»¤ì—ì„œ ë™ì‘í•©ë‹ˆë‹¤.\n\n<details>\n  <summary>Spoiler</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ ë¹ ë¥¸ ì‹œì‘\n\nì„¤ì¹˜:\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nì„í¬íŠ¸:\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ Node.jsì—ì„œ ë™ì‘\n\nNode.jsë¥¼ ê°ì§€í•˜ê³  ìë™ìœ¼ë¡œ [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native)ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ [conditional exports](https://nodejs.org/api/packages.html#packages_conditional_exports)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. `globalThis.fetch`ê°€ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤ë©´, ê·¸ ëŒ€ì‹  ì‚¬ìš©ë©ë‹ˆë‹¤. Node.js 17.5.0ì˜ ì‹¤í—˜ì  ë„¤ì´í‹°ë¸Œ fetch APIë¥¼ í™œìš©í•˜ë ¤ë©´ [`--experimental-fetch` í”Œë˜ê·¸](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch)ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n\n## âœ”ï¸ ì‘ë‹µ íŒŒì‹±\n\n`ofetch`ëŠ” [destr](https://github.com/unjs/destr)ë¥¼ ì‚¬ìš©í•´ JSONê³¼ ë„¤ì´í‹°ë¸Œ ê°’ì„ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ íŒŒì‹±í•˜ë©°, íŒŒì‹±ì— ì‹¤íŒ¨í•  ê²½ìš° í…ìŠ¤íŠ¸ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\në°”ì´ë„ˆë¦¬ ì½˜í…ì¸  íƒ€ì…ì˜ ê²½ìš°, `ofetch`ëŠ” ëŒ€ì‹  `Blob` ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\n\nì›í•œë‹¤ë©´ `destr` ëŒ€ì‹  ë‹¤ë¥¸ íŒŒì„œ(parser)ë¥¼ ì œê³µí•  ìˆ˜ ìˆìœ¼ë©°, ë˜ëŠ” `blob`, `arrayBuffer`, `text`ë¥¼ ì§€ì •í•´ í•´ë‹¹ `FetchResponse` ë©”ì„œë“œë¡œ ë³¸ë¬¸ íŒŒì‹±ì„ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\n// JSON.parse ì‚¬ìš©\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// í…ìŠ¤íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// ì‘ë‹µì˜ blob ë²„ì „ ë°›ê¸°\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ JSON ë³¸ë¬¸\n\nê°ì²´ ë˜ëŠ” `.toJSON()` ë©”ì„œë“œë¥¼ ê°€ì§„ í´ë˜ìŠ¤ê°€ `body` ì˜µì…˜ì— ì „ë‹¬ë˜ë©´, `ofetch`ê°€ ìë™ìœ¼ë¡œ ë¬¸ìì—´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n\n`ofetch`ëŠ” ì „ë‹¬ëœ ê°ì²´ë¥¼ ë³€í™˜í•˜ê¸° ìœ„í•´ `JSON.stringify()`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. `.toJSON()` ë©”ì„œë“œê°€ ì—†ëŠ” í´ë˜ìŠ¤ëŠ” ë¯¸ë¦¬ ë¬¸ìì—´ë¡œ ë³€í™˜í•œ í›„ `body` ì˜µì…˜ì— ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.\n\n`PUT`, `PATCH`, `POST` ìš”ì²­ ë©”ì„œë“œì—ì„œ ë¬¸ìì—´ ë˜ëŠ” ê°ì²´ ë³¸ë¬¸ì´ ì„¤ì •ë˜ë©´, `ofetch`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `content-type: \"application/json\"`ê³¼ `accept: \"application/json\"` í—¤ë”ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤(ì–¸ì œë“ ì§€ ì¬ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤).\n\në˜í•œ, `ofetch`ëŠ” `Buffer`, `ReadableStream`, `Stream`, [í˜¸í™˜ë˜ëŠ” body íƒ€ì…](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body)ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ ì‘ë‹µì„ ì§€ì›í•©ë‹ˆë‹¤. ìŠ¤íŠ¸ë¦¬ë° ì§€ì›ì„ ìœ„í•´ `duplex: \"half\"` ì˜µì…˜ì„ ìë™ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤!\n\n**ì˜ˆì‹œ:**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ ì—ëŸ¬ ì²˜ë¦¬\n\n`ofetch`ëŠ” `response.ok`ê°€ `false`ì¼ ë•Œ ìë™ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ì¹œì ˆí•œ ë©”ì‹œì§€ì™€ ê°„ê²°í•œ ìŠ¤íƒ(ë‚´ë¶€ ì •ë³´ ìˆ¨ê¹€)ê³¼ í•¨ê»˜ ë°œìƒì‹œí‚µë‹ˆë‹¤.\n\níŒŒì‹±ëœ ì—ëŸ¬ ë³¸ë¬¸ì€ `error.data`ë¡œ ì œê³µë©ë‹ˆë‹¤. ë˜í•œ `FetchError` íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\nì—ëŸ¬ ì‘ë‹µì„ ì¡ìœ¼ë ¤ë©´:\n\n```ts",
  "status": "ok"
}