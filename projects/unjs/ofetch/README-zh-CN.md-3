{
  "id": 3,
  "origin": "```js\nawait ofetch(\"/api\", {\n  async onRequestError({ request, options, error }) {\n    // Log error\n    console.log(\"[fetch request error]\", request, error);\n  },\n});\n```\n\n### `onResponse({ request, options, response })`\n\n`onResponse` will be called after `fetch` call and parsing body.\n\n```js\nawait ofetch(\"/api\", {\n  async onResponse({ request, response, options }) {\n    // Log response\n    console.log(\"[fetch response]\", request, response.status, response.body);\n  },\n});\n```\n\n### `onResponseError({ request, options, response })`\n\n`onResponseError` is the same as `onResponse` but will be called when fetch happens but `response.ok` is not `true`.\n\n```js\nawait ofetch(\"/api\", {\n  async onResponseError({ request, response, options }) {\n    // Log error\n    console.log(\n      \"[fetch response error]\",\n      request,\n      response.status,\n      response.body\n    );\n  },\n});\n```\n\n### Passing array of interceptors\n\nIf necessary, it's also possible to pass an array of function that will be called sequentially.\n\n```js\nawait ofetch(\"/api\", {\n  onRequest: [\n    () => {\n      /* Do something */\n    },\n    () => {\n      /* Do something else */\n    },\n  ],\n});\n```\n\n## âœ”ï¸ Create fetch with default options\n\nThis utility is useful if you need to use common options across several fetch calls.\n\n**Note:** Defaults will be cloned at one level and inherited. Be careful about nested options like `headers`.\n\n```js\nconst apiFetch = ofetch.create({ baseURL: \"/api\" });\n\napiFetch(\"/test\"); // Same as ofetch('/test', { baseURL: '/api' })\n```\n\n## ðŸ’¡ Adding headers\n\nBy using `headers` option, `ofetch` adds extra headers in addition to the request default headers:\n\n```js\nawait ofetch(\"/movies\", {\n  headers: {\n    Accept: \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n  },\n});\n```\n\n## ðŸ£ Access to Raw Response\n\nIf you need to access raw response (for headers, etc), you can use `ofetch.raw`:\n\n```js\nconst response = await ofetch.raw(\"/sushi\");\n\n// response._data\n// response.headers\n// ...\n```\n\n## ðŸŒ¿ Using Native Fetch\n\nAs a shortcut, you can use `ofetch.native` that provides native `fetch` API\n\n```js\nconst json = await ofetch.native(\"/sushi\").then((r) => r.json());",
  "origin_sha": "wuvdKqsuOA4W95Ll0BO8zm8DheYXXrOsgdngtydl1A0=",
  "translate": "```js\nawait ofetch(\"/api\", {\n  async onRequestError({ request, options, error }) {\n    // è®°å½•é”™è¯¯\n    console.log(\"[fetch request error]\", request, error);\n  },\n});\n```\n\n### `onResponse({ request, options, response })`\n\n`onResponse` ä¼šåœ¨ `fetch` è°ƒç”¨å¹¶è§£æžå“åº”ä½“åŽè¢«è°ƒç”¨ã€‚\n\n```js\nawait ofetch(\"/api\", {\n  async onResponse({ request, response, options }) {\n    // è®°å½•å“åº”\n    console.log(\"[fetch response]\", request, response.status, response.body);\n  },\n});\n```\n\n### `onResponseError({ request, options, response })`\n\n`onResponseError` ä¸Ž `onResponse` ç±»ä¼¼ï¼Œä½†ä¼šåœ¨ fetch è¯·æ±‚å‘ç”Ÿä¸” `response.ok` ä¸ä¸º `true` æ—¶è¢«è°ƒç”¨ã€‚\n\n```js\nawait ofetch(\"/api\", {\n  async onResponseError({ request, response, options }) {\n    // è®°å½•é”™è¯¯\n    console.log(\n      \"[fetch response error]\",\n      request,\n      response.status,\n      response.body\n    );\n  },\n});\n```\n\n### ä¼ é€’æ‹¦æˆªå™¨æ•°ç»„\n\nå¦‚æœ‰éœ€è¦ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œè¿™äº›å‡½æ•°ä¼šè¢«ä¾æ¬¡è°ƒç”¨ã€‚\n\n```js\nawait ofetch(\"/api\", {\n  onRequest: [\n    () => {\n      /* åšä¸€äº›äº‹æƒ… */\n    },\n    () => {\n      /* åšå…¶ä»–äº‹æƒ… */\n    },\n  ],\n});\n```\n\n## âœ”ï¸ åˆ›å»ºå¸¦é»˜è®¤é€‰é¡¹çš„ fetch\n\nå¦‚æžœä½ éœ€è¦åœ¨å¤šä¸ª fetch è°ƒç”¨ä¸­ä½¿ç”¨é€šç”¨é€‰é¡¹ï¼Œæ­¤å·¥å…·éžå¸¸æœ‰ç”¨ã€‚\n\n**æ³¨æ„ï¼š** é»˜è®¤å€¼ä¼šè¢«æµ…å±‚å…‹éš†å¹¶ç»§æ‰¿ã€‚è¯·æ³¨æ„åƒ `headers` è¿™æ ·çš„åµŒå¥—é€‰é¡¹ã€‚\n\n```js\nconst apiFetch = ofetch.create({ baseURL: \"/api\" });\n\napiFetch(\"/test\"); // ç­‰åŒäºŽ ofetch('/test', { baseURL: '/api' })\n```\n\n## ðŸ’¡ æ·»åŠ è¯·æ±‚å¤´\n\né€šè¿‡ä½¿ç”¨ `headers` é€‰é¡¹ï¼Œ`ofetch` ä¼šåœ¨é»˜è®¤è¯·æ±‚å¤´çš„åŸºç¡€ä¸Šæ·»åŠ é¢å¤–çš„è¯·æ±‚å¤´ï¼š\n\n```js\nawait ofetch(\"/movies\", {\n  headers: {\n    Accept: \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n  },\n});\n```\n\n## ðŸ£ èŽ·å–åŽŸå§‹å“åº”\n\nå¦‚æžœä½ éœ€è¦è®¿é—®åŽŸå§‹å“åº”ï¼ˆä¾‹å¦‚èŽ·å–å“åº”å¤´ç­‰ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ `ofetch.raw`ï¼š\n\n```js\nconst response = await ofetch.raw(\"/sushi\");\n\n// response._data\n// response.headers\n// ...\n```\n\n## ðŸŒ¿ ä½¿ç”¨åŽŸç”Ÿ Fetch\n\nä½œä¸ºå¿«æ·æ–¹å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨æä¾›åŽŸç”Ÿ `fetch` API çš„ `ofetch.native`\n\n```js\nconst json = await ofetch.native(\"/sushi\").then((r) => r.json());\n```",
  "status": "ok"
}