{
  "id": 1,
  "origin": "# ofetch\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![License][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\nA better fetch API. Works on node, browser, and workers.\n\n<details>\n  <summary>Spoiler</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ Quick Start\n\nInstall:\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nImport:\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ Works with Node.js\n\nWe use [conditional exports](https://nodejs.org/api/packages.html#packages_conditional_exports) to detect Node.js\nand automatically use [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native). If `globalThis.fetch` is available, will be used instead. To leverage Node.js 17.5.0 experimental native fetch API use [`--experimental-fetch` flag](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch).\n\n## âœ”ï¸ Parsing Response\n\n`ofetch` will smartly parse JSON and native values using [destr](https://github.com/unjs/destr), falling back to the text if it fails to parse.\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\nFor binary content types, `ofetch` will instead return a `Blob` object.\n\nYou can optionally provide a different parser than `destr`, or specify `blob`, `arrayBuffer`, or `text` to force parsing the body with the respective `FetchResponse` method.\n\n```js\n// Use JSON.parse\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// Return text as is\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// Get the blob version of the response\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ JSON Body\n\nIf an object or a class with a `.toJSON()` method is passed to the `body` option, `ofetch` automatically stringifies it.\n\n`ofetch` utilizes `JSON.stringify()` to convert the passed object. Classes without a `.toJSON()` method have to be converted into a string value in advance before being passed to the `body` option.\n\nFor `PUT`, `PATCH`, and `POST` request methods, when a string or object body is set, `ofetch` adds the default `content-type: \"application/json\"` and `accept: \"application/json\"` headers (which you can always override).\n\nAdditionally, `ofetch` supports binary responses with `Buffer`, `ReadableStream`, `Stream`, and [compatible body types](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body). `ofetch` will automatically set the `duplex: \"half\"` option for streaming support!\n\n**Example:**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ Handling Errors\n\n`ofetch` Automatically throws errors when `response.ok` is `false` with a friendly error message and compact stack (hiding internals).\n\nA parsed error body is available with `error.data`. You may also use `FetchError` type.\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\nTo catch error response:\n\n```ts",
  "origin_sha": "7ZgVRDjscms2MJD1r7evPUo8J2Uh+wcg5EpARFSQNtI=",
  "translate": "# ofetch\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![License][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\nÛŒÚ© API Ø¨Ù‡ØªØ± Ø¨Ø±Ø§ÛŒ fetch. Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± NodeØŒ Ù…Ø±ÙˆØ±Ú¯Ø± Ùˆ WorkerÙ‡Ø§.\n\n<details>\n  <summary>Ø§Ø³Ù¾ÙˆÛŒÙ„Ø±</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ Ø´Ø±ÙˆØ¹ Ø³Ø±ÛŒØ¹\n\nÙ†ØµØ¨:\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nØ§ÛŒÙ…Ù¾ÙˆØ±Øª:\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ Node.js\n\nÙ…Ø§ Ø§Ø² [ØµØ§Ø¯Ø±Ø§Øª Ø´Ø±Ø·ÛŒ](https://nodejs.org/api/packages.html#packages_conditional_exports) Ø¨Ø±Ø§ÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Node.js\nÙˆ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø² [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native) Ø¨Ù‡Ø±Ù‡ Ù…ÛŒâ€ŒØ¨Ø±ÛŒÙ…. Ø§Ú¯Ø± `globalThis.fetch` Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯. Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² API Ø§ØµÙ„ÛŒ fetch Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ Ø¯Ø± Node.js 17.5.0 Ø¨Ù‡ Ø¨Ø§Ù„Ø§ Ø§Ø² ÙÙ„Ú¯ [`--experimental-fetch`](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch) Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.\n\n## âœ”ï¸ ØªØ¬Ø²ÛŒÙ‡ Ù¾Ø§Ø³Ø®\n\n`ofetch` Ø¨Ù‡ ØµÙˆØ±Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² [destr](https://github.com/unjs/destr) Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ JSON Ùˆ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¨ÙˆÙ…ÛŒ Ø±Ø§ ØªØ¬Ø²ÛŒÙ‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø¯Ø± ØµÙˆØ±Øª Ø´Ú©Ø³ØªØŒ Ø¨Ù‡ Ù…ØªÙ† Ø®Ø§Ù… Ø¨Ø§Ø²Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯.\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\nØ¨Ø±Ø§ÛŒ Ø§Ù†ÙˆØ§Ø¹ Ù…Ø­ØªÙˆØ§ÛŒ Ø¨Ø§ÛŒÙ†Ø±ÛŒØŒ `ofetch` Ø¨Ù‡ Ø¬Ø§ÛŒ Ø¢Ù† ÛŒÚ© Ø´ÛŒØ¡ `Blob` Ø¨Ø§Ø²Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.\n\nØ´Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÛŒÚ© parser Ù…ØªÙØ§ÙˆØª Ø¨Ù‡ Ø¬Ø² `destr` Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ù‡ÛŒØ¯ØŒ ÛŒØ§ Ø¨Ø§ ØªØ¹ÛŒÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± `blob`ØŒ `arrayBuffer` ÛŒØ§ `text`ØŒ ØªØ¬Ø²ÛŒÙ‡ Ø¨Ø¯Ù†Ù‡ Ø±Ø§ Ø¨Ø§ Ù…ØªØ¯ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ `FetchResponse` Ø§Ø¬Ø¨Ø§Ø± Ú©Ù†ÛŒØ¯.\n\n```js\n// Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² JSON.parse\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ù…ØªÙ† Ø¨Ù‡ Ù‡Ù…Ø§Ù† ØµÙˆØ±Øª\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// Ø¯Ø±ÛŒØ§ÙØª Ù†Ø³Ø®Ù‡ blob Ø§Ø² Ù¾Ø§Ø³Ø®\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ Ø¨Ø¯Ù†Ù‡ JSON\n\nØ§Ú¯Ø± ÛŒÚ© Ø´ÛŒØ¡ ÛŒØ§ Ú©Ù„Ø§Ø³ÛŒ Ø¨Ø§ Ù…ØªØ¯ `.toJSON()` Ø¨Ù‡ Ú¯Ø²ÛŒÙ†Ù‡ `body` Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯ØŒ `ofetch` Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¢Ù† Ø±Ø§ Ø±Ø´ØªÙ‡â€ŒØ§ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.\n\n`ofetch` Ø§Ø² `JSON.stringify()` Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø´ÛŒØ¡ Ø§Ø±Ø³Ø§Ù„ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù…ØªØ¯ `.toJSON()` Ù†Ø¯Ø§Ø±Ù†Ø¯ Ø¨Ø§ÛŒØ¯ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ú¯Ø²ÛŒÙ†Ù‡ `body` Ø¨Ù‡ ØµÙˆØ±Øª Ø±Ø´ØªÙ‡ ØªØ¨Ø¯ÛŒÙ„ Ø´ÙˆÙ†Ø¯.\n\nØ¨Ø±Ø§ÛŒ Ù…ØªØ¯Ù‡Ø§ÛŒ `PUT`ØŒ `PATCH` Ùˆ `POST`ØŒ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ø¨Ø¯Ù†Ù‡â€ŒØ§ÛŒ Ø§Ø² Ù†ÙˆØ¹ Ø±Ø´ØªÙ‡ ÛŒØ§ Ø´ÛŒØ¡ ØªÙ†Ø¸ÛŒÙ… Ø´ÙˆØ¯ØŒ `ofetch` Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ headerÙ‡Ø§ÛŒ `content-type: \"application/json\"` Ùˆ `accept: \"application/json\"` Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (Ú©Ù‡ Ù‡Ù…ÛŒØ´Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§Ø²Ù†ÙˆÛŒØ³ÛŒ Ú©Ù†ÛŒØ¯).\n\nØ¹Ù„Ø§ÙˆÙ‡ Ø¨Ø± Ø§ÛŒÙ†ØŒ `ofetch` Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ÛŒÙ†Ø±ÛŒ Ø¨Ø§ `Buffer`ØŒ `ReadableStream`ØŒ `Stream` Ùˆ [Ø§Ù†ÙˆØ§Ø¹ Ø¨Ø¯Ù†Ù‡ Ø³Ø§Ø²Ú¯Ø§Ø±](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body) Ø±Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. `ofetch` Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ú¯Ø²ÛŒÙ†Ù‡ `duplex: \"half\"` Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø§Ø³ØªØ±ÛŒÙ… ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯!\n\n**Ù…Ø«Ø§Ù„:**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§\n\n`ofetch` Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ù…Ù‚Ø¯Ø§Ø± `response.ok` Ø¨Ø±Ø§Ø¨Ø± false Ø¨Ø§Ø´Ø¯ØŒ Ø®Ø·Ø§ Ø±Ø§ Ø¨Ø§ ÛŒÚ© Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø±Ù¾Ø³Ù†Ø¯ Ùˆ stack ÙØ´Ø±Ø¯Ù‡ (Ø¨Ø¯ÙˆÙ† Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ø¬Ø²Ø¦ÛŒØ§Øª Ø¯Ø§Ø®Ù„ÛŒ) Ù¾Ø±ØªØ§Ø¨ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.\n\nØ¨Ø¯Ù†Ù‡ Ø®Ø·Ø§ Ø¨Ù‡ ØµÙˆØ±Øª ØªØ¬Ø²ÛŒÙ‡â€ŒØ´Ø¯Ù‡ Ø¨Ø§ `error.data` Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø§Ø³Øª. Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ù†ÙˆØ¹ `FetchError` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\nØ¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† Ù¾Ø§Ø³Ø® Ø®Ø·Ø§:\n\n```ts",
  "status": "ok"
}