{
  "id": 2,
  "origin": "await ofetch(\"/url\").catch((error) => error.data);\n```\n\nTo bypass status error catching you can set `ignoreResponseError` option:\n\n```ts\nawait ofetch(\"/url\", { ignoreResponseError: true });\n```\n\n## ✔️ Auto Retry\n\n`ofetch` Automatically retries the request if an error happens and if the response status code is included in `retryStatusCodes` list:\n\n**Retry status codes:**\n\n- `408` - Request Timeout\n- `409` - Conflict\n- `425` - Too Early ([Experimental](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Early-Data))\n- `429` - Too Many Requests\n- `500` - Internal Server Error\n- `502` - Bad Gateway\n- `503` - Service Unavailable\n- `504` - Gateway Timeout\n\nYou can specify the amount of retry and delay between them using `retry` and `retryDelay` options and also pass a custom array of codes using `retryStatusCodes` option.\n\nThe default for `retry` is `1` retry, except for `POST`, `PUT`, `PATCH`, and `DELETE` methods where `ofetch` does not retry by default to avoid introducing side effects. If you set a custom value for `retry` it will **always retry** for all requests.\n\nThe default for `retryDelay` is `0` ms.\n\n```ts\nawait ofetch(\"http://google.com/404\", {\n  retry: 3,\n  retryDelay: 500, // ms\n  retryStatusCodes: [ 404, 500 ], // response status codes to retry\n});\n```\n\n## ✔️ Timeout\n\nYou can specify `timeout` in milliseconds to automatically abort a request after a timeout (default is disabled).\n\n```ts\nawait ofetch(\"http://google.com/404\", {\n  timeout: 3000, // Timeout after 3 seconds\n});\n```\n\n## ✔️ Type Friendly\n\nThe response can be type assisted:\n\n```ts\nconst article = await ofetch<Article>(`/api/article/${id}`);\n// Auto complete working with article.id\n```\n\n## ✔️ Adding `baseURL`\n\nBy using `baseURL` option, `ofetch` prepends it for trailing/leading slashes and query search params for baseURL using [ufo](https://github.com/unjs/ufo):\n\n```js\nawait ofetch(\"/config\", { baseURL });\n```\n\n## ✔️ Adding Query Search Params\n\nBy using `query` option (or `params` as alias), `ofetch` adds query search params to the URL by preserving the query in the request itself using [ufo](https://github.com/unjs/ufo):\n\n```js\nawait ofetch(\"/movie?lang=en\", { query: { id: 123 } });\n```\n\n## ✔️ Interceptors\n\nProviding async interceptors to hook into lifecycle events of `ofetch` call is possible.\n\nYou might want to use `ofetch.create` to set shared interceptors.\n\n### `onRequest({ request, options })`\n\n`onRequest` is called as soon as `ofetch` is called, allowing you to modify options or do simple logging.\n\n```js\nawait ofetch(\"/api\", {\n  async onRequest({ request, options }) {\n    // Log request\n    console.log(\"[fetch request]\", request, options);\n\n    // Add `?t=1640125211170` to query search params\n    options.query = options.query || {};\n    options.query.t = new Date();\n  },\n});\n```\n\n### `onRequestError({ request, options, error })`\n\n`onRequestError` will be called when the fetch request fails.\n",
  "origin_sha": "FvxzUY8etV4pxTbFCyZca2uKABQrY74XrRyZOCOv2wc=",
  "translate": "await ofetch(\"/url\").catch((error) => error.data);\n```\n\n要繞過狀態錯誤的捕獲，可以設置 `ignoreResponseError` 選項：\n\n```ts\nawait ofetch(\"/url\", { ignoreResponseError: true });\n```\n\n## ✔️ 自動重試\n\n`ofetch` 會在發生錯誤並且響應狀態碼包含於 `retryStatusCodes` 列表時自動重試請求：\n\n**重試狀態碼：**\n\n- `408` - 請求逾時\n- `409` - 衝突\n- `425` - 太早 ([實驗性](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Early-Data))\n- `429` - 請求過多\n- `500` - 內部伺服器錯誤\n- `502` - 錯誤閘道\n- `503` - 服務不可用\n- `504` - 閘道逾時\n\n你可以使用 `retry` 和 `retryDelay` 選項來指定重試次數及延遲時間，也可以透過 `retryStatusCodes` 選項傳入自訂的狀態碼陣列。\n\n`retry` 預設為重試 `1` 次，除了 `POST`、`PUT`、`PATCH` 和 `DELETE` 方法，`ofetch` 預設不會重試，以避免產生副作用。如果你為 `retry` 設定了自訂值，則**所有請求都會執行重試**。\n\n`retryDelay` 預設為 `0` 毫秒。\n\n```ts\nawait ofetch(\"http://google.com/404\", {\n  retry: 3,\n  retryDelay: 500, // 毫秒\n  retryStatusCodes: [ 404, 500 ], // 需重試的響應狀態碼\n});\n```\n\n## ✔️ 逾時設定\n\n你可以指定 `timeout`（毫秒）來在逾時後自動終止請求（預設為停用）。\n\n```ts\nawait ofetch(\"http://google.com/404\", {\n  timeout: 3000, // 3 秒後逾時\n});\n```\n\n## ✔️ 類型友好\n\n響應結果可以支援型別提示：\n\n```ts\nconst article = await ofetch<Article>(`/api/article/${id}`);\n// 可自動完成並使用 article.id\n```\n\n## ✔️ 新增 `baseURL`\n\n透過設定 `baseURL` 選項，`ofetch` 會利用 [ufo](https://github.com/unjs/ufo) 處理斜線與查詢參數，將其加在請求前面：\n\n```js\nawait ofetch(\"/config\", { baseURL });\n```\n\n## ✔️ 新增查詢參數\n\n透過 `query` 選項（或別名 `params`），`ofetch` 會使用 [ufo](https://github.com/unjs/ufo) 保留請求本身的查詢並添加查詢參數至 URL：\n\n```js\nawait ofetch(\"/movie?lang=en\", { query: { id: 123 } });\n```\n\n## ✔️ 攔截器\n\n可以提供非同步攔截器來鉤入 `ofetch` 調用的生命週期事件。\n\n你可以使用 `ofetch.create` 來設置共用攔截器。\n\n### `onRequest({ request, options })`\n\n`onRequest` 會在呼叫 `ofetch` 時立即執行，可用於修改選項或簡單紀錄日誌。\n\n```js\nawait ofetch(\"/api\", {\n  async onRequest({ request, options }) {\n    // 輸出請求日誌\n    console.log(\"[fetch request]\", request, options);\n\n    // 在查詢參數中加入 `?t=1640125211170`\n    options.query = options.query || {};\n    options.query.t = new Date();\n  },\n});\n```\n\n### `onRequestError({ request, options, error })`\n\n當 fetch 請求失敗時，會呼叫 `onRequestError`。",
  "status": "ok"
}