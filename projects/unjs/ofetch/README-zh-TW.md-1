{
  "id": 1,
  "origin": "# ofetch\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![License][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\nA better fetch API. Works on node, browser, and workers.\n\n<details>\n  <summary>Spoiler</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ Quick Start\n\nInstall:\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nImport:\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ Works with Node.js\n\nWe use [conditional exports](https://nodejs.org/api/packages.html#packages_conditional_exports) to detect Node.js\nand automatically use [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native). If `globalThis.fetch` is available, will be used instead. To leverage Node.js 17.5.0 experimental native fetch API use [`--experimental-fetch` flag](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch).\n\n## âœ”ï¸ Parsing Response\n\n`ofetch` will smartly parse JSON and native values using [destr](https://github.com/unjs/destr), falling back to the text if it fails to parse.\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\nFor binary content types, `ofetch` will instead return a `Blob` object.\n\nYou can optionally provide a different parser than `destr`, or specify `blob`, `arrayBuffer`, or `text` to force parsing the body with the respective `FetchResponse` method.\n\n```js\n// Use JSON.parse\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// Return text as is\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// Get the blob version of the response\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ JSON Body\n\nIf an object or a class with a `.toJSON()` method is passed to the `body` option, `ofetch` automatically stringifies it.\n\n`ofetch` utilizes `JSON.stringify()` to convert the passed object. Classes without a `.toJSON()` method have to be converted into a string value in advance before being passed to the `body` option.\n\nFor `PUT`, `PATCH`, and `POST` request methods, when a string or object body is set, `ofetch` adds the default `content-type: \"application/json\"` and `accept: \"application/json\"` headers (which you can always override).\n\nAdditionally, `ofetch` supports binary responses with `Buffer`, `ReadableStream`, `Stream`, and [compatible body types](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body). `ofetch` will automatically set the `duplex: \"half\"` option for streaming support!\n\n**Example:**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ Handling Errors\n\n`ofetch` Automatically throws errors when `response.ok` is `false` with a friendly error message and compact stack (hiding internals).\n\nA parsed error body is available with `error.data`. You may also use `FetchError` type.\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\nTo catch error response:\n\n```ts",
  "origin_sha": "7ZgVRDjscms2MJD1r7evPUo8J2Uh+wcg5EpARFSQNtI=",
  "translate": "# ofetch\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![License][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\nä¸€å€‹æ›´å„ªç§€çš„ fetch APIã€‚å¯åœ¨ Nodeã€ç€è¦½å™¨èˆ‡ workers ç’°å¢ƒé‹è¡Œã€‚\n\n<details>\n  <summary>Spoiler</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ å¿«é€Ÿé–‹å§‹\n\nå®‰è£ï¼š\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nåŒ¯å…¥ï¼š\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ æ”¯æ´ Node.js\n\næˆ‘å€‘ä½¿ç”¨[æ¢ä»¶åŒ¯å‡ºï¼ˆconditional exportsï¼‰](https://nodejs.org/api/packages.html#packages_conditional_exports)ä¾†åµæ¸¬ Node.js\nä¸¦è‡ªå‹•ä½¿ç”¨ [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native)ã€‚å¦‚æœ `globalThis.fetch` å¯ç”¨ï¼Œå‰‡æœƒå„ªå…ˆä½¿ç”¨ã€‚å¦‚éœ€åˆ©ç”¨ Node.js 17.5.0 å¯¦é©—æ€§çš„åŸç”Ÿ fetch APIï¼Œè«‹ä½¿ç”¨ [`--experimental-fetch` æ——æ¨™](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch)ã€‚\n\n## âœ”ï¸ è§£æå›æ‡‰\n\n`ofetch` æœƒæ™ºèƒ½åœ°ä½¿ç”¨ [destr](https://github.com/unjs/destr) è§£æ JSON èˆ‡åŸç”Ÿå€¼ï¼Œè‹¥è§£æå¤±æ•—å‰‡å›å‚³ç´”æ–‡å­—ã€‚\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\né‡å°äºŒé€²ä½å…§å®¹é¡å‹ï¼Œ`ofetch` æœƒå›å‚³ä¸€å€‹ `Blob` ç‰©ä»¶ã€‚\n\nä½ ä¹Ÿå¯ä»¥é¸æ“‡æä¾›ä¸åŒæ–¼ `destr` çš„è§£æå™¨ï¼Œæˆ–æŒ‡å®š `blob`ã€`arrayBuffer`ã€æˆ– `text`ï¼Œå¼·åˆ¶ä»¥å°æ‡‰çš„ `FetchResponse` æ–¹æ³•è§£æå›æ‡‰ä¸»é«”ã€‚\n\n```js\n// ä½¿ç”¨ JSON.parse\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// ç›´æ¥å›å‚³æ–‡å­—å…§å®¹\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// å–å¾—å›æ‡‰çš„ blob ç‰ˆæœ¬\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ JSON ä¸»é«”\n\nè‹¥åœ¨ `body` é¸é …ä¸­å‚³å…¥ç‰©ä»¶æˆ–å¸¶æœ‰ `.toJSON()` æ–¹æ³•çš„é¡åˆ¥ï¼Œ`ofetch` æœƒè‡ªå‹•å°‡å…¶å­—ä¸²åŒ–ã€‚\n\n`ofetch` æœƒä½¿ç”¨ `JSON.stringify()` ä¾†è½‰æ›æ‰€å‚³å…¥çš„ç‰©ä»¶ã€‚æ²’æœ‰ `.toJSON()` æ–¹æ³•çš„é¡åˆ¥éœ€åœ¨å‚³å…¥ `body` å‰å…ˆè½‰ç‚ºå­—ä¸²ã€‚\n\nå°æ–¼ `PUT`ã€`PATCH` èˆ‡ `POST` è«‹æ±‚æ–¹æ³•ï¼Œç•¶è¨­å®šå­—ä¸²æˆ–ç‰©ä»¶ä¸»é«”æ™‚ï¼Œ`ofetch` æœƒè‡ªå‹•æ·»åŠ é è¨­çš„ `content-type: \"application/json\"` å’Œ `accept: \"application/json\"` æ¨™é ­ï¼ˆä½ ä¹Ÿå¯ä»¥è‡ªè¡Œè¦†è“‹ï¼‰ã€‚\n\næ­¤å¤–ï¼Œ`ofetch` æ”¯æ´ä»¥ `Buffer`ã€`ReadableStream`ã€`Stream` åŠ[ç›¸å®¹ä¸»é«”é¡å‹](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body)é€²è¡ŒäºŒé€²ä½å›æ‡‰ã€‚`ofetch` æœƒè‡ªå‹•è¨­å®š `duplex: \"half\"` é¸é …ä»¥æ”¯æ´ä¸²æµï¼\n\n**ç¯„ä¾‹ï¼š**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ éŒ¯èª¤è™•ç†\n\nç•¶ `response.ok` ç‚º `false` æ™‚ï¼Œ`ofetch` æœƒè‡ªå‹•æ‹‹å‡ºéŒ¯èª¤ï¼Œä¸¦å¸¶æœ‰å‹å–„çš„éŒ¯èª¤è¨Šæ¯èˆ‡ç²¾ç°¡å †ç–Šï¼ˆéš±è—å…§éƒ¨ç´°ç¯€ï¼‰ã€‚\n\nå·²è§£æçš„éŒ¯èª¤ä¸»é«”å¯ç”± `error.data` å–å¾—ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `FetchError` é¡å‹ã€‚\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\næ•æ‰éŒ¯èª¤å›æ‡‰è«‹åƒè€ƒï¼š",
  "status": "ok"
}