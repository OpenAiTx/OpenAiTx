{
  "id": 1,
  "origin": "# ofetch\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![License][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\nA better fetch API. Works on node, browser, and workers.\n\n<details>\n  <summary>Spoiler</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ Quick Start\n\nInstall:\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nImport:\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ Works with Node.js\n\nWe use [conditional exports](https://nodejs.org/api/packages.html#packages_conditional_exports) to detect Node.js\nand automatically use [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native). If `globalThis.fetch` is available, will be used instead. To leverage Node.js 17.5.0 experimental native fetch API use [`--experimental-fetch` flag](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch).\n\n## âœ”ï¸ Parsing Response\n\n`ofetch` will smartly parse JSON and native values using [destr](https://github.com/unjs/destr), falling back to the text if it fails to parse.\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\nFor binary content types, `ofetch` will instead return a `Blob` object.\n\nYou can optionally provide a different parser than `destr`, or specify `blob`, `arrayBuffer`, or `text` to force parsing the body with the respective `FetchResponse` method.\n\n```js\n// Use JSON.parse\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// Return text as is\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// Get the blob version of the response\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ JSON Body\n\nIf an object or a class with a `.toJSON()` method is passed to the `body` option, `ofetch` automatically stringifies it.\n\n`ofetch` utilizes `JSON.stringify()` to convert the passed object. Classes without a `.toJSON()` method have to be converted into a string value in advance before being passed to the `body` option.\n\nFor `PUT`, `PATCH`, and `POST` request methods, when a string or object body is set, `ofetch` adds the default `content-type: \"application/json\"` and `accept: \"application/json\"` headers (which you can always override).\n\nAdditionally, `ofetch` supports binary responses with `Buffer`, `ReadableStream`, `Stream`, and [compatible body types](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body). `ofetch` will automatically set the `duplex: \"half\"` option for streaming support!\n\n**Example:**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ Handling Errors\n\n`ofetch` Automatically throws errors when `response.ok` is `false` with a friendly error message and compact stack (hiding internals).\n\nA parsed error body is available with `error.data`. You may also use `FetchError` type.\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\nTo catch error response:\n\n```ts",
  "origin_sha": "7ZgVRDjscms2MJD1r7evPUo8J2Uh+wcg5EpARFSQNtI=",
  "translate": "# ofetch\n\n[![npm ç‰ˆæœ¬][npm-version-src]][npm-version-href]\n[![npm ä¸‹è½½é‡][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![è®¸å¯è¯][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\nä¸€ä¸ªæ›´å¥½çš„ fetch APIã€‚æ”¯æŒ Nodeã€æµè§ˆå™¨å’Œ worker ç¯å¢ƒã€‚\n\n<details>\n  <summary>å‰§é€</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ å¿«é€Ÿå¼€å§‹\n\nå®‰è£…ï¼š\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nå¯¼å…¥ï¼š\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ æ”¯æŒ Node.js\n\næˆ‘ä»¬ä½¿ç”¨[æ¡ä»¶å¯¼å‡º](https://nodejs.org/api/packages.html#packages_conditional_exports)æ¥æ£€æµ‹ Node.jsï¼Œ\nå¹¶è‡ªåŠ¨ä½¿ç”¨ [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native)ã€‚å¦‚æœ `globalThis.fetch` å¯ç”¨ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨ã€‚å¦‚éœ€ä½¿ç”¨ Node.js 17.5.0 çš„å®éªŒæ€§åŸç”Ÿ fetch APIï¼Œè¯·ä½¿ç”¨ [`--experimental-fetch` å‚æ•°](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch)ã€‚\n\n## âœ”ï¸ å“åº”è§£æ\n\n`ofetch` ä¼šæ™ºèƒ½åœ°ä½¿ç”¨ [destr](https://github.com/unjs/destr) è§£æ JSON åŠåŸç”Ÿå€¼ï¼Œå¦‚æœè§£æå¤±è´¥åˆ™å›é€€ä¸ºæ–‡æœ¬ã€‚\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\nå¯¹äºäºŒè¿›åˆ¶å†…å®¹ç±»å‹ï¼Œ`ofetch` ä¼šè¿”å›ä¸€ä¸ª `Blob` å¯¹è±¡ã€‚\n\nä½ å¯ä»¥é€‰æ‹©æä¾›ä¸åŒäº `destr` çš„è§£æå™¨ï¼Œæˆ–é€šè¿‡æŒ‡å®š `blob`ã€`arrayBuffer` æˆ– `text`ï¼Œå¼ºåˆ¶ä½¿ç”¨ç›¸åº”çš„ `FetchResponse` æ–¹æ³•è§£æå“åº”ä½“ã€‚\n\n```js\n// ä½¿ç”¨ JSON.parse\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// åŸæ ·è¿”å›æ–‡æœ¬\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// è·å–å“åº”çš„ blob ç‰ˆæœ¬\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ JSON è¯·æ±‚ä½“\n\nå¦‚æœåœ¨ `body` é€‰é¡¹ä¸­ä¼ å…¥å¯¹è±¡æˆ–å¸¦æœ‰ `.toJSON()` æ–¹æ³•çš„ç±»ï¼Œ`ofetch` ä¼šè‡ªåŠ¨å°†å…¶å­—ç¬¦ä¸²åŒ–ã€‚\n\n`ofetch` åˆ©ç”¨ `JSON.stringify()` å°†ä¼ å…¥çš„å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚æ²¡æœ‰ `.toJSON()` æ–¹æ³•çš„ç±»éœ€åœ¨ä¼ é€’ç»™ `body` é€‰é¡¹å‰æå‰è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚\n\nå¯¹äº `PUT`ã€`PATCH` å’Œ `POST` è¯·æ±‚æ–¹æ³•ï¼Œåœ¨è®¾ç½®å­—ç¬¦ä¸²æˆ–å¯¹è±¡ç±»å‹çš„è¯·æ±‚ä½“æ—¶ï¼Œ`ofetch` ä¼šè‡ªåŠ¨æ·»åŠ é»˜è®¤çš„ `content-type: \"application/json\"` å’Œ `accept: \"application/json\"` å¤´ï¼ˆä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¦†ç›–ï¼‰ã€‚\n\næ­¤å¤–ï¼Œ`ofetch` æ”¯æŒ `Buffer`ã€`ReadableStream`ã€`Stream` åŠ[å…¼å®¹çš„è¯·æ±‚ä½“ç±»å‹](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body)çš„äºŒè¿›åˆ¶å“åº”ã€‚å¯¹äºæµå¼æ”¯æŒï¼Œ`ofetch` ä¼šè‡ªåŠ¨è®¾ç½® `duplex: \"half\"` é€‰é¡¹ï¼\n\n**ç¤ºä¾‹ï¼š**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ é”™è¯¯å¤„ç†\n\nå½“ `response.ok` ä¸º `false` æ—¶ï¼Œ`ofetch` ä¼šè‡ªåŠ¨æŠ›å‡ºé”™è¯¯ï¼Œå¹¶å¸¦æœ‰å‹å¥½çš„é”™è¯¯ä¿¡æ¯å’Œç®€æ´çš„å †æ ˆï¼ˆéšè—å†…éƒ¨ç»†èŠ‚ï¼‰ã€‚\n\nå·²è§£æçš„é”™è¯¯ä½“å¯é€šè¿‡ `error.data` è·å–ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `FetchError` ç±»å‹ã€‚\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\næ•è·é”™è¯¯å“åº”ï¼š\n\n```ts",
  "status": "ok"
}