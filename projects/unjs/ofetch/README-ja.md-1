{
  "id": 1,
  "origin": "# ofetch\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![License][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\nA better fetch API. Works on node, browser, and workers.\n\n<details>\n  <summary>Spoiler</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ Quick Start\n\nInstall:\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nImport:\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ Works with Node.js\n\nWe use [conditional exports](https://nodejs.org/api/packages.html#packages_conditional_exports) to detect Node.js\nand automatically use [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native). If `globalThis.fetch` is available, will be used instead. To leverage Node.js 17.5.0 experimental native fetch API use [`--experimental-fetch` flag](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch).\n\n## âœ”ï¸ Parsing Response\n\n`ofetch` will smartly parse JSON and native values using [destr](https://github.com/unjs/destr), falling back to the text if it fails to parse.\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\nFor binary content types, `ofetch` will instead return a `Blob` object.\n\nYou can optionally provide a different parser than `destr`, or specify `blob`, `arrayBuffer`, or `text` to force parsing the body with the respective `FetchResponse` method.\n\n```js\n// Use JSON.parse\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// Return text as is\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// Get the blob version of the response\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ JSON Body\n\nIf an object or a class with a `.toJSON()` method is passed to the `body` option, `ofetch` automatically stringifies it.\n\n`ofetch` utilizes `JSON.stringify()` to convert the passed object. Classes without a `.toJSON()` method have to be converted into a string value in advance before being passed to the `body` option.\n\nFor `PUT`, `PATCH`, and `POST` request methods, when a string or object body is set, `ofetch` adds the default `content-type: \"application/json\"` and `accept: \"application/json\"` headers (which you can always override).\n\nAdditionally, `ofetch` supports binary responses with `Buffer`, `ReadableStream`, `Stream`, and [compatible body types](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body). `ofetch` will automatically set the `duplex: \"half\"` option for streaming support!\n\n**Example:**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ Handling Errors\n\n`ofetch` Automatically throws errors when `response.ok` is `false` with a friendly error message and compact stack (hiding internals).\n\nA parsed error body is available with `error.data`. You may also use `FetchError` type.\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\nTo catch error response:\n\n```ts",
  "origin_sha": "7ZgVRDjscms2MJD1r7evPUo8J2Uh+wcg5EpARFSQNtI=",
  "translate": "# ofetch\n\n[![npm version][npm-version-src]][npm-version-href]\n[![npm downloads][npm-downloads-src]][npm-downloads-href]\n[![bundle][bundle-src]][bundle-href]\n[![Codecov][codecov-src]][codecov-href]\n[![License][license-src]][license-href]\n[![JSDocs][jsdocs-src]][jsdocs-href]\n\nã‚ˆã‚Šå„ªã‚ŒãŸ fetch APIã€‚Nodeã€ãƒ–ãƒ©ã‚¦ã‚¶ã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã§å‹•ä½œã—ã¾ã™ã€‚\n\n<details>\n  <summary>ãƒã‚¿ãƒãƒ¬</summary>\n  <img src=\"https://media.giphy.com/media/Dn1QRA9hqMcoMz9zVZ/giphy.gif\">\n</details>\n\n## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ\n\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:\n\n```bash\n# npm\nnpm i ofetch\n\n# yarn\nyarn add ofetch\n```\n\nã‚¤ãƒ³ãƒãƒ¼ãƒˆ:\n\n```js\n// ESM / Typescript\nimport { ofetch } from \"ofetch\";\n\n// CommonJS\nconst { ofetch } = require(\"ofetch\");\n```\n\n## âœ”ï¸ Node.js ã§å‹•ä½œ\n\n[æ¡ä»¶ä»˜ãã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ](https://nodejs.org/api/packages.html#packages_conditional_exports)ã‚’ä½¿ç”¨ã—ã¦ Node.js ã‚’æ¤œå‡ºã—ã€è‡ªå‹•çš„ã« [unjs/node-fetch-native](https://github.com/unjs/node-fetch-native) ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚`globalThis.fetch` ãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆã¯ã€ãã¡ã‚‰ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚Node.js 17.5.0 ã®å®Ÿé¨“çš„ãªãƒã‚¤ãƒ†ã‚£ãƒ– fetch API ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ [`--experimental-fetch` ãƒ•ãƒ©ã‚°](https://nodejs.org/dist/latest-v17.x/docs/api/cli.html#--experimental-fetch)ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n\n## âœ”ï¸ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ‘ãƒ¼ã‚¹\n\n`ofetch` ã¯ [destr](https://github.com/unjs/destr) ã‚’ä½¿ç”¨ã—ã¦ã€JSON ã‚„ãƒã‚¤ãƒ†ã‚£ãƒ–å€¤ã‚’ã‚¹ãƒãƒ¼ãƒˆã«ãƒ‘ãƒ¼ã‚¹ã—ã€å¤±æ•—ã—ãŸå ´åˆã¯ãƒ†ã‚­ã‚¹ãƒˆã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã¾ã™ã€‚\n\n```js\nconst { users } = await ofetch(\"/api/users\");\n```\n\nãƒã‚¤ãƒŠãƒªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã®å ´åˆã€`ofetch` ã¯ `Blob` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚\n\nä»»æ„ã§ `destr` ä»¥å¤–ã®ãƒ‘ãƒ¼ã‚µãƒ¼ã‚’æŒ‡å®šã—ãŸã‚Šã€`blob`ã€`arrayBuffer`ã€`text` ã‚’æŒ‡å®šã—ã¦ã€ãã‚Œãã‚Œã® `FetchResponse` ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒœãƒ‡ã‚£ã®ãƒ‘ãƒ¼ã‚¹ã‚’å¼·åˆ¶ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\n```js\n// JSON.parse ã‚’ä½¿ç”¨\nawait ofetch(\"/movie?lang=en\", { parseResponse: JSON.parse });\n\n// ãƒ†ã‚­ã‚¹ãƒˆã‚’ãã®ã¾ã¾è¿”ã™\nawait ofetch(\"/movie?lang=en\", { parseResponse: (txt) => txt });\n\n// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® blob ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—\nawait ofetch(\"/api/generate-image\", { responseType: \"blob\" });\n```\n\n## âœ”ï¸ JSON ãƒœãƒ‡ã‚£\n\n`body` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¾ãŸã¯ `.toJSON()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤ã‚¯ãƒ©ã‚¹ã‚’æ¸¡ã—ãŸå ´åˆã€`ofetch` ã¯è‡ªå‹•çš„ã«æ–‡å­—åˆ—åŒ–ã—ã¾ã™ã€‚\n\n`ofetch` ã¯ `JSON.stringify()` ã‚’åˆ©ç”¨ã—ã¦ã€æ¸¡ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ›ã—ã¾ã™ã€‚`.toJSON()` ãƒ¡ã‚½ãƒƒãƒ‰ã®ãªã„ã‚¯ãƒ©ã‚¹ã¯ã€`body` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«æ¸¡ã™å‰ã«æ–‡å­—åˆ—å€¤ã¸å¤‰æ›ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n\n`PUT`ã€`PATCH`ã€`POST` ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã®å ´åˆã€ãƒœãƒ‡ã‚£ã«æ–‡å­—åˆ—ã¾ãŸã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã¨ã€`ofetch` ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `content-type: \"application/json\"` ãŠã‚ˆã³ `accept: \"application/json\"` ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿½åŠ ã—ã¾ã™ï¼ˆä¸Šæ›¸ãã‚‚å¯èƒ½ã§ã™ï¼‰ã€‚\n\nã•ã‚‰ã«ã€`ofetch` ã¯ `Buffer`ã€`ReadableStream`ã€`Stream`ã€ãŠã‚ˆã³ [å¯¾å¿œã™ã‚‹ãƒœãƒ‡ã‚£ã‚¿ã‚¤ãƒ—](https://developer.mozilla.org/en-US/docs/Web/API/fetch#body)ã§ã®ãƒã‚¤ãƒŠãƒªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œã®ãŸã‚ã€`duplex: \"half\"` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚è‡ªå‹•çš„ã«è¨­å®šã—ã¾ã™ï¼\n\n**ä¾‹:**\n\n```js\nconst { users } = await ofetch(\"/api/users\", {\n  method: \"POST\",\n  body: { some: \"json\" },\n});\n```\n\n## âœ”ï¸ ã‚¨ãƒ©ãƒ¼å‡¦ç†\n\n`ofetch` ã¯ã€`response.ok` ãŒ `false` ã®å ´åˆã€è‡ªå‹•çš„ã«ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ã—ã€åˆ†ã‹ã‚Šã‚„ã™ã„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ç°¡æ½”ãªã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ï¼ˆå†…éƒ¨å‡¦ç†ã‚’éš ã™ï¼‰ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚\n\nãƒ‘ãƒ¼ã‚¹ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒœãƒ‡ã‚£ã¯ `error.data` ã§åˆ©ç”¨ã§ãã¾ã™ã€‚ã¾ãŸã€`FetchError` å‹ã‚‚ä½¿ç”¨å¯èƒ½ã§ã™ã€‚\n\n```ts\nawait ofetch(\"https://google.com/404\");\n// FetchError: [GET] \"https://google/404\": 404 Not Found\n//     at async main (/project/playground.ts:4:3)\n```\n\nã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚­ãƒ£ãƒƒãƒã™ã‚‹ã«ã¯:\n\n```ts",
  "status": "ok"
}