# helm-chartsnap ๐ธ 
[![Go Reference](https://pkg.go.dev/badge/github.com/jlandowner/helm-chartsnap.svg)](https://pkg.go.dev/github.com/jlandowner/helm-chartsnap)
[![Go Report Card](https://goreportcard.com/badge/github.com/jlandowner/helm-chartsnap)](https://goreportcard.com/report/github.com/jlandowner/helm-chartsnap)
[![codecov](https://codecov.io/gh/jlandowner/helm-chartsnap/graph/badge.svg?token=8ARG53CRL7)](https://codecov.io/gh/jlandowner/helm-chartsnap)
[![Workflow Status](https://github.com/jlandowner/helm-chartsnap/actions/workflows/release.yaml/badge.svg)](https://github.com/jlandowner/helm-chartsnap/actions/workflows/release.yaml)
[![CI](https://github.com/jlandowner/helm-chartsnap/actions/workflows/ci.yaml/badge.svg)](https://github.com/jlandowner/helm-chartsnap/actions/workflows/ci.yaml)
[![GitHub Marketplace](https://img.shields.io/badge/Marketplace-Helm%20chartsnap%20action-blue.svg?colorA=24292e&colorB=0366d6&style=flat&longCache=true&logo=github)](https://github.com/marketplace/actions/helm-chartsnap-action)

ุฃุฏุงุฉ ุงุฎุชุจุงุฑ ุงูููุทุงุช (Snapshot) ููุฎุทุทุงุช Helm.

ุงุฌูุจ ุฅููุงููุงุช ุงุฎุชุจุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููููุฉ ููุฎุทุทุงุช Helm ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุฅุนุฏุงุฏ ููุท ุฏุงุฎู ููู `values.yaml`.

![screenshot](https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/docs/screenshot.png)

## ูุธุฑุฉ ุนุงูุฉ
- [ุงูููุฒุงุช ๐](#ุงูููุฒุงุช-)
- [ููุงุฐุง ุงุฎุชุจุงุฑ ุงูููุทุงุชุ ๐ธ](#ููุงุฐุง-ุงุฎุชุจุงุฑ-ุงูููุทุงุช-)
  - [ุงูุฏุงูุน](#ุงูุฏุงูุน)
- [ุงูุชุซุจูุช ๐](#ุงูุชุซุจูุช-)
- [ุงูุงุณุชุฎุฏุงู](#ุงูุงุณุชุฎุฏุงู)
  - [ูุนุงูุฌุฉ ุงูููู ุงูุฏููุงููููุฉ ๐ช](#ูุนุงูุฌุฉ-ุงูููู-ุงูุฏููุงููููุฉ-)
- [ุงูุนุฑุถ ูุงููุณุชุฎุฏููู โจ](#ุงูุนุฑุถ--ูุงููุณุชุฎุฏููู-)


## ุงูููุฒุงุช ๐

* **ุงุฎุชุจุงุฑ ููุทุงุช ุณูู ูุจุฏููู ููุทูุฑู Helm**
  
  - **ูุง ููุฌุฏ ุชูุณูู ููู TestSuite ุฎุงุต ุจุงูุฃุฏุงุฉ:** ุนูู ุนูุณ ุจุนุถ ุงูุฃุฏูุงุช ุงูุชู ุชุชุทูุจ ุฅูุดุงุก TestSuites ูููุตูุฉ ุจุชูุณููุงุช ูููุงุช ูุฎุตุตุฉุ ูุฅู ูุฐู ุงูุฃุฏุงุฉ ูุง ุชุชุทูุจ ุฃู ุชูุณููุงุช ูููุงุช ุฅุถุงููุฉ. ุจุฏูุงู ูู ุฐููุ ููููู ุชุฌููุฒ ูุณุฎ ูุชููุนุฉ ูู ููู `values.yaml` ุงูููุงุณู ููู ุญุงูุฉ ุงุฎุชุจุงุฑ. ูุฐุง ููุบู ุงูุญุงุฌุฉ ูุชุนูู ุชูุณููุงุช ุฌุฏูุฏุฉ ููุจุณูุท ุงูุงุฎุชุจุงุฑ.

* **ูุตูู ุฎุตูุตูุง ููุฎุทุทุงุช Helm**

  - **ูุนุงูุฌุฉ ุงููุฎุฑุฌุงุช ุงูุฏููุงููููุฉ ุงูุชู ุชููุฏูุง ุฏูุงู helm:** ููููู ุชุญุฏูุฏ ุฎุตุงุฆุต ุฅุถุงููุฉ ุฏุงุฎู ููู values.yaml ููู ุญุงูุฉ ุงุฎุชุจุงุฑ ูุชูููุฑ ูุฑููุฉ ูู ุถุจุท ุณููู ุงูุงุฎุชุจุงุฑ. ุนูู ุณุจูู ุงููุซุงูุ ููููู ุงูุชุญูู ูู ุงููุฎุฑุฌุงุช ุงูุชู ูุชู ุฅูุดุงุคูุง ุฏููุงูููููุง ุจูุงุณุทุฉ ุฏูุงู helm ูุซู [randAlphaNum](https://helm.sh/docs/chart_template_guide/function_list/).

* **ุงุฎุชุจุงุฑ ููุทุงุช ูุณุชูุฑ**

  - **[ุฅุฌุฑุงุก GitHub ุฌุงูุฒ](https://github.com/jlandowner/helm-chartsnap-action):** ุฅุฌุฑุงุก GitHub ูููููู ูู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ููุทุงุช ูุณุชูุฑ ููุฎุทุทุงุช Helm ุงููุญููุฉ ุฃู ุงูุจุนูุฏุฉ ูู ุณูุฑ ุนูู CI ุงูุฎุงุต ุจู ุฌุงูุฒ ๐ -> [`helm-chart-action`](https://github.com/jlandowner/helm-chartsnap-action)

## ููุงุฐุง ุงุฎุชุจุงุฑ ุงูููุทุงุชุ ๐ธ

ุฃุนุชูุฏ ุฃู ุงุฎุชุจุงุฑ ุงูููุทุงุชุ ููู ููุฌ ุงุฎุชุจุงุฑ ุดุงุฆุน ูู ุงุฎุชุจุงุฑ ุงูููุจ ุฃู ูุงุฌูุงุช ุงููุณุชุฎุฏู ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช ูุซู Jestุ ูู ุฃูุถู ุทุฑููุฉ ูุงุฎุชุจุงุฑ ูุฎุทุทุงุช Helm. ูููุฑ ุงุฎุชุจุงุฑ ุงูููุทุงุช ุงูุนุฏูุฏ ูู ุงูููุงุฆุฏ:

- **ุงูููุงุฑูุงุช ุงูุจุตุฑูุฉ:** ุชูุดุฆ ุงุฎุชุจุงุฑุงุช ุงูููุทุงุช ูุฎุฑุฌุงุช ุฃุณุงุณูุฉ ุซู ุชูุงุฑููุง ุจูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงููุงุญูุฉ. ูุชูุญ ุฐูู ูุญุตูุง ุจุตุฑููุง ุณููุงู ููุชุบููุฑุงุช ูุงูุงูุญุฏุงุฑุงุช ูู ุฅุฎุฑุงุฌ ูุฎุทุท Helm.

- **ุณูููุฉ ุงูุตูุงูุฉ:** ูุจุณุท ุงุฎุชุจุงุฑ ุงูููุทุงุช ุนูููุฉ ุฅุนุฏุงุฏ ุงูุงุฎุชุจุงุฑุ ููุง ูุฌุนูู ุฃูุซุฑ ุณูููุฉ ูุตูุงูุฉุ ุฎุงุตุฉ ุนูุฏ ุงูุชุนุงูู ูุน ูุฎุทุทุงุช Helm ุงููุนูุฏุฉ. ุงูุฅุฏุฎุงู ููุฎุทุท Helm ูู ูุฒูุฌ ูู ุงูููู. ูุญู ุจุญุงุฌุฉ ููุท ููุญูุงุธ ุนูู ูุฌููุนุงุช ุงูุฅุฏุฎุงู ุงูููุชุฑุถุฉ (=values.yaml)ุ ูููุทุงุชูุง.

- **ุงุฎุชุจุงุฑ ูุณุชูุฑ:** ูู ุฎูุงู ุงูุชูุงุท ููุทุงุช ููุฎุทุท Helm ุจุงุณุชูุฑุงุฑ ูู ุณูุฑ ุนูู CI ุงูุฎุงุต ุจูุ ููููู ููุงุญุธุฉ ุงูุชุบููุฑุงุช ุจุณุฑุนุฉ ูู ุงููุฎุทุท ุจุงููุงูู ูุชุฌูุจ ุงูุงูุญุฏุงุฑุงุช.

ูุฐู ุงููุฒุงูุง ูุง ุชูุชุตุฑ ุนูู ุงููุฎุทุท ุงูุฐู ุฃูุดุฃุชูุ ุจู ุชุดูู ุฃูุถูุง ุงููุฎุทุทุงุช ุงูุฎุงุฑุฌูุฉ ุงูุชู ููุช ุจุชุซุจูุชูุง ุนูู Kubernetes ุฅุฐุง ููุช ูุณุคููุงู ุนู ุงูููุงุณุชุฑ. ุนูุฏ ุชุฑููุฉ ุงูููุงุณุชุฑุ ููููู ููุงุญุธุฉ ุฃู ุชุบููุฑุงุช ูู ุงููุฎุฑุฌุงุช ุงูุชู ุชูุชุฌูุง *ุงูููู* ุงูุฎุงุตุฉ ุจูุ ูููุง ูุงูุช ุตุบูุฑุฉ.

### ุงูุฏุงูุน

ููุงู ุฃุฏูุงุช ุงุฎุชุจุงุฑ Helm ููุฌูุฏุฉ ุชุฏุนู ุงุฎุชุจุงุฑุงุช ุงูููุทุงุช.
- [helm-unittest](https://github.com/helm-unittest/helm-unittest)ุ ุฃุฏุงุฉ ุงุฎุชุจุงุฑ ูุญุฏุงุช ุดุงุฆุนุฉุ ูุฏููุง ุฎูุงุฑ ูุฅุฌุฑุงุก [ุงุฎุชุจุงุฑ ููุทุงุช](https://github.com/helm-unittest/helm-unittest#snapshot-testing).
- [terratest](https://terratest.gruntwork.io/)ุ ุงุฎุชุจุงุฑุงุช ุชููุงุฆูุฉ ูููุฏ ุงูุจููุฉ ุงูุชุญุชูุฉ. ููููู ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช ูุฃููุงุฏ Go ููุฏููุง ููุฒุฉ ูุงุฎุชุจุงุฑ ูุฎุฑุฌุงุช Helm. [ููุงูุฉ](https://blog.gruntwork.io/automated-testing-for-kubernetes-and-helm-charts-using-terratest-a4ddc4e67344)

> ุฃุฏุงุฉ ุงุฎุชุจุงุฑ Helm ุงูุฑุณููุฉ [`ct`](https://github.com/helm/chart-testing) ููุณุช ูุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช ุฃู ุงุฎุชุจุงุฑุงุช ุงูููุทุงุช ูููู ูููุญุต ูุงุฎุชุจุงุฑุงุช ุงูุชูุงูู

ุจูููุง ูู ุฃุฏูุงุช ูููุฉ ูุงุฎุชุจุงุฑ ูุฎุทุทุงุช Helmุ ุฅูุง ุฃู ููุง ุจุนุถ ุงููููุฏ ูููุง ูุชุนูู ุจุงุฎุชุจุงุฑ ุงูููุทุงุช.

- ุชุญุชุงุฌ ุฅูู ุชุนูู ูุชุฌููุฒ ูููุงุช Test Suite ููุฃุฏูุงุช ุญุชู ูู ูุงู ุฐูู ููุท ูุงุฎุชุจุงุฑ ุงูููุทุงุช.

- ูุง ุชูุชูุท ุงูููุทุฉ ูููุฎุทุท ุจุฃูููู ุงูุชุฑุงุถููุงุ ุจู ูุตููุฉ ููุงุฎุชุจุงุฑ ุนูู ุฃุณุงุณ ูู ููู ุฏุงุฎู ูุฎุทุท Helm.

- ูุง ุชุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงููุฎุฑุฌุงุช ุงูุฏููุงููููุฉ ูุฏูุงู Helm.

ุชู ุชุตููู helm-unittest ูุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช ุนูู ุฃุณุงุณ ูู ููู ุฏุงุฎู ูุฎุทุท Helm. ูุฐุง ูุนูู ุฃูู ูููู ูู ููู ุจุดูู ูุณุชููุ ูุนูุฏูุง ุชุคุฏู ููู ุฃู ุดุฑูุท ูุฎุทุท Helm ุฅูู ุชุถููู ุฃู ุงุณุชุจุนุงุฏ ููู ุจุงููุงูู ุจุดูู ุดุฑุทูุ ููุฏ ูุคุฏู ุฐูู ุฅูู ุนุฏู ูุฏุฑุฉ ุงูุงุฎุชุจุงุฑุงุช ุนูู ุชุบุทูุฉ ุณููุงุฑูููุงุช ูุงูุฉ.

ูููุง ููู ูุซุงู ุนูู ููู ููุงุตูุงุช ุงุฎุชุจุงุฑ ูุงุฎุชุจุงุฑ ุงูููุทุงุช ูู helm-unittest.

> https://github.com/helm-unittest/helm-unittest#snapshot-testing
> 
> ```yaml
> templates:
>   - templates/deployment.yaml
> tests:
>   - it: pod spec should match snapshot
>     asserts:
>       - matchSnapshot:
>           path: spec.template.spec
>   # or you can snapshot the whole manifest
>   - it: manifest should match snapshot
>     asserts:
>       - matchSnapshot: {}
> ```

ุนูู ุณุจูู ุงููุซุงูุ ุถุน ูู ุงุนุชุจุงุฑู ุณููุงุฑูู ูุฏ ููุดุฆ ููู ูุฎุทุท Helm ููุฑุฏ `Certificate` ูู `cert-manager` ุนูุฏูุง ูููู ูู ูู TLS ูcert-manager ููุนูููุ ูููู ููุดุฆ ููุฑุฏ `Secret` ูุดูุงุฏุฉ TLS ูููุนุฉ ุฐุงุชูุงู ุจุงุณุชุฎุฏุงู ุฏุงูุฉ helm [`genSelfSignedCert`](https://helm.sh/docs/chart_template_guide/function_list/#genselfsignedcert) ุนูุฏูุง ูุง ูููู cert-manager ููุนูุงู. ุนูุงูุฉ ุนูู ุฐููุ ูุคุซุฑ ุชูุนูู ุฃู ุชุนุทูู TLS ุนูู ุฎุตุงุฆุต TLS ุงูุฎุงุตุฉ ุจู Ingress ูุฎูุงุฑุงุช TLS ุงูุฎุงุตุฉ ุจุงูุชุทุจูู ูู ุงูู Deploymentุ ุฅูุฎ.

ูู ูุซู ูุฐู ุงูุญุงูุงุชุ ูุฏ ูุง ูุชููู helm-unittest ูู ุงุฎุชุจุงุฑ ุณููู ุงููุฎุทุท ุจุงููุงูู ุจุดูู ูุงููุ ุญูุซ ูุฏ ุชููู ูุฎุฑุฌุงุช ูุฐู ุงููููุงุช ุงูุดุฑุทูุฉ ูุงุฑุบุฉุ ููุง ูุคุฏู ุฅูู ุงุฎุชุจุงุฑุงุช ุบูุฑ ููุชููุฉ.

ููุน ุฐููุ ูู ูุง ุนููู ูุนูู ูุน `helm-chartsnap` ูู ููุท ุชุฌููุฒ ุจุนุถ ูููุงุช `values.yaml` ููุฃููุงุท ุงูุชู ุชุชููุนูุง ๐

## ุงูุชุซุจูุช ๐

ููููู ุชุซุจูุช ุงูุฃุฏุงุฉ ูุฅุถุงูุฉ ูู Helm.

```sh
helm plugin install https://github.com/jlandowner/helm-chartsnap
```

ุฎูุงุฑุงุช ุฃุฎุฑู:

- ุชุซุจูุช ุจูุงุณุทุฉ Go

  ```sh
  go install github.com/jlandowner/helm-chartsnap@latest
  ```

- [ุชุญููู ุงูููู ุงูุชูููุฐู ููุฅุตุฏุงุฑ](https://github.com/jlandowner/helm-chartsnap/releases)

## ุงูุงุณุชุฎุฏุงู

ููุท ูุฑุฑ ุงููุฎุทุท ุงูุฎุงุต ุจู ููุจุฏุก ุจุณุฑุนุฉ.

```
helm chartsnap -c YOUR_CHART
```

ุณูุชู ุฅูุดุงุก ูุฌูุฏ `__snapshot__` ูู ูุฌูุฏ ุงููุฎุทุท ูุณูุชู ุฅูุดุงุก ููู `default.snap`.

ููููู ุฃูุถูุง ุฅูุดุงุก ุญุงูุงุช ุงุฎุชุจุงุฑ ูุชูููุนุงุช ููููุงุช ุงูููู ุงูุฎุงุตุฉ ุจูุฎุทุทู.

ูููุง ููู ุงูุงุณุชุฎุฏุงู ุงููุงูู ููุฃูุฑ.

```sh
Usage:
  chartsnap -c CHART [flags]

Examples:

  # ููุทุฉ ูุน ุงูููู ุงูุงูุชุฑุงุถูุฉ:
  chartsnap -c YOUR_CHART
  
  # ุชุญุฏูุซ ูููุงุช ุงูููุทุงุช:
  chartsnap -c YOUR_CHART -u

  # ููุทุฉ ูุน ููู ุญุงูุฉ ุงุฎุชุจุงุฑ:
  chartsnap -c YOUR_CHART -f YOUR_TEST_VALUES_FILE
  
  # ููุทุฉ ูุฌููุน ุญุงูุงุช ุงูุงุฎุชุจุงุฑ:
  chartsnap -c YOUR_CHART -f YOUR_TEST_VALUES_FILES_DIRECTOY
  
  # ุชุนููู ูุนููุงุช ุฃู ุฃุนูุงู ุฅุถุงููุฉ ูุฃูุฑ 'helm template':
  chartsnap -c YOUR_CHART -f YOUR_TEST_VALUES_FILE -- --skip-tests

  # ููุทุฉ ููุฎุทุท ุจุนูุฏ ูู ูุณุชูุฏุน Helm:
  chartsnap -c CHART_NAME -f YOUR_VALUES_FILE -- --repo HELM_REPO_URL

  # ููุทุฉ ููุฎุทุท ingress-nginx (https://kubernetes.github.io/ingress-nginx/) ูุฅุตุฏุงุฑ ูุญุฏุฏ ูุน ููู ุงูููู ุงูุฎุงุต ุจู:
  chartsnap -c ingress-nginx -f YOUR_VALUES_FILE -- --repo https://kubernetes.github.io/ingress-nginx --namespace kube-system --version 4.8.3

  # ููุทุฉ ููุฎุทุท cilium (https://cilium.io) ูุน ุงูููู ุงูุงูุชุฑุงุถูุฉ ูุชุนููู ุฃุนูุงู:
  chartsnap -c cilium -- --repo https://helm.cilium.io --namespace kube-system --set hubble.relay.enabled=true --set hubble.ui.enabled=true

  # ููุทุฉ ููุฎุทุทุงุช ูู ุณุฌู OCI
  chartsnap -c oci://ghcr.io/nginxinc/charts/nginx-gateway-fabric -n nginx-gateway

  # ุฅุฎุฑุงุฌ ุจุฏูู ุฃููุงู:
  NO_COLOR=1 chartsnap -c YOUR_CHART

Flags:
  -c, --chart string              ูุณุงุฑ ุฏููู ุงููุฎุทุท. ูุชู ุชูุฑูุฑ ูุฐุง ุงูุนูู ุฅูู 'helm template RELEASE_NAME CHART --values VALUES' ูู 'CHART'
      --config-file string        ุงุณู ุฃู ูุณุงุฑ ููู ุงูุฅุนุฏุงุฏุงุชุ ูุงูุฐู ูุญุฏุฏ ุณููู ุงูููุทุฉ ูุซู ุงูุญููู ุงูุฏููุงููููุฉ (ุงูุงูุชุฑุงุถู ".chartsnap.yaml")
  -N, --ctx-lines int             ุนุฏุฏ ุงูุฃุณุทุฑ ุงูุชู ุชุธูุฑ ูู ุฅุฎุฑุงุฌ ุงููุฑู. 0 ูุฅุฎุฑุงุฌ ูุงูู (ุงูุงูุชุฑุงุถู 3)
      --debug                     ูุถุน ุงูุชุตุญูุญ
      --fail-helm-error           ูุดู ุฅุฐุง ูุดู ุฃูุฑ 'helm template'
      --failfast                  ูุดู ุนูุฏ ูุดู ุฃู ุญุงูุฉ ุงุฎุชุจุงุฑ
  -h, --help                      ุงููุณุงุนุฏุฉ ูู chartsnap
  -n, --namespace string          ูุณุงุญุฉ ุงูุฃุณูุงุก. ูุชู ุชูุฑูุฑ ูุฐุง ุงูุนูู ุฅูู 'helm template RELEASE_NAME CHART --values VALUES --namespace NAMESPACE' ูู 'NAMESPACE' (ุงูุงูุชุฑุงุถู "default")
  -o, --output-dir string         ุงูุฏููู ุงูุฐู ูุชู ููู ุฅูุดุงุก ุฏููู __snapshot__. (ุงูุงูุชุฑุงุถู: ุฏููู ููู ุงูููู ุฅุฐุง ุชู ุชุนููู --valuesุ ุฏููู ุงููุฎุทุท ุฅุฐุง ูุงู ุงููุฎุทุท ูุญูููุงุ ูุฅูุง ุงูุฏููู ุงูุญุงูู)
      --parallelism int           ุชุฒุงูู ุงูุงุฎุชุจุงุฑ ุนูุฏ ุงูุชูุงุท ููุทุงุช ูุชุนุฏุฏุฉ ูุฏููู ูููุงุช ุงูููู ุงูุงุฎุชุจุงุฑูุฉ. ุงูุงูุชุฑุงุถู ุบูุฑ ูุญุฏูุฏ (ุงูุงูุชุฑุงุถู -1)
      --release-name string       ุงุณู ุงูุฅุตุฏุงุฑ. ูุชู ุชูุฑูุฑ ูุฐุง ุงูุนูู ุฅูู 'helm template RELEASE_NAME CHART --values VALUES' ูู 'RELEASE_NAME' (ุงูุงูุชุฑุงุถู "chartsnap")
      --snapshot-version string   ุงุณุชุฎุฏุงู ุฅุตุฏุงุฑ ูุนูู ูู ุชูุณูู ุงูููุทุฉ. v1, v2, v3 ูุฏุนููุฉ. (ุงูุงูุชุฑุงุถู: ุงูุฃุญุฏุซ)
  -u, --update-snapshot           ูุถุน ุชุญุฏูุซ ุงูููุทุฉ
  -f, --values string             ูุณุงุฑ ููู ุงูููู ุงูุงุฎุชุจุงุฑูุฉ ุฃู ุงูุฏููู. ุฅุฐุง ุชู ุชุนููู ุงูุฏูููุ ูุชู ุงุฎุชุจุงุฑ ุฌููุน ุงููููุงุช. ุฅุฐุง ูุงู ูุงุฑุบูุงุ ูุชู ุงุณุชุฎุฏุงู ุงูููู ุงูุงูุชุฑุงุถูุฉ. ูุชู ุชูุฑูุฑ ูุฐุง ุงูุนูู ุฅูู 'helm template RELEASE_NAME CHART --values VALUES' ูู 'VALUES'
  -v, --version                   ุฅุตุฏุงุฑ chartsnap

```

### ูุนุงูุฌุฉ ุงูููู ุงูุฏููุงููููุฉ ๐ช

ูุญุชูู Helm ุนูู ููุฒุฉ ุชูุณูู "ุฏูุงู Helm" ูุงูุชู ุชูููุฏ ููููุง ุนุดูุงุฆูุฉ ุฃู ุดูุงุฏุงุช ูููุนุฉ ุฐุงุชููุง ูุซู [`randAlphaNum`](https://helm.sh/docs/chart_template_guide/function_list/#randalphanum-randalpha-randnumeric-and-randascii) ู [`genCA`, `genPrivateKey`, `genSelfSignedCert`](https://helm.sh/docs/chart_template_guide/function_list/#cryptographic-and-security-functions)

ุนูุฏ ุงุณุชุฎุฏุงู ูุฐู ุงูุฏูุงูุ ุณุชุฎุชูู ุงููุฎุฑุฌุงุช ูู ูู ูุฑุฉ ูุชู ูููุง ุชูููุฐ Helm.
ููุฐู ุงูุญุงูุฉุ ูุฏู chartsnap ููุฒุฉ ุชููุน ุนุฏู ุชุทุงุจู ุงูููุทุงุช ูู ุฎูุงู ุงุณุชุจุฏุงููุง ุจูููุฉ ุซุงุจุชุฉุ `###DYNAMIC_FIELD###`.

ููููู ุชุญุฏูุฏ ูุณุงุฑุงุช ุงูููู ุงูุฏููุงููููุฉ ูู ุงูู YAML ุงููุงุชุฌ ุจุงุณุชุฎุฏุงู [JSONPath](https://datatracker.ietf.org/doc/html/rfc6901).

```yaml:.chartsnap.yaml
dynamicFields:
  - apiVersion: v1
    kind: Secret
    name: cosmo-auth-env
    jsonPath:
      - /data/COOKIE_HASHKEY
      - /data/COOKIE_BLOCKKEY
      - /data/COOKIE_HASHKEY
      - /data/COOKIE_SESSION_NAME
    base64: true
```

> ููุงุญุธุฉ:
> ูู JSONPathุ ูุชู ุชูุซูู ูุฑูุจ ุงูุญุฑู / ูู [RFC6901ุ ุงููุณู 3](https://datatracker.ietf.org/doc/html/rfc6901#section-3)
> ```
>    ุจุณุจุจ ุฃู ุงูุญุฑููู '~' (%x7E) ู '/' (%x2F) ูููุง ูุนุงูู ุฎุงุตุฉ ูู JSON Pointerุ ูุฌุจ ุชุฑููุฒ '~' ูู '~0' ู'/' ูู '~1' ุนูุฏูุง ุชุธูุฑ ูุฐู ุงูุฃุญุฑู ูู ุฑูุฒ ูุฑุฌุนู.
> ```
>
> ูุฐุง ุฅุฐุง ููุช ุชุชุนุงูู ูุน ุจูุงู ูุซู ุงูุชุงููุ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ูุณุงุฑ json ูู `/metadata/annotaions/checksum~1values`.
> 
> ```yaml
> metadata:
>   annotations:
>     checksum/values: RANDOM_VALUES
> ```

ุฅุฐุง ูุงู ูุฏูู ุฏููู ููููุงุช ุงูููู ุงูุงุฎุชุจุงุฑูุฉุ ุถุน ููู `.chartsnap.yaml` ุจุฏุงุฎูู. ุณูููู ูุฐุง ุงูุณููู ุดุงุฆุนูุง ูู ุฌููุน ุงุฎุชุจุงุฑุงุช ุงูููุทุงุช ูู ุงูุฏููู.

ููุฒูุฏ ูู ุงูุฃูุซูุฉุ ุฑุงุฌุน [example/app1](https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/example/app1).

ุจุฏูุงู ูู ุฐููุ ููููู ุฅุถุงูุฉ ุงูุฅุนุฏุงุฏ ูุจุงุดุฑุฉ ูู ููู ุงูููู ุงูุงุฎุชุจุงุฑู ูุฎุงุตูุฉ `testSpec`.
ูู ูุฐู ุงูุญุงูุฉุ ูุง ุชุญุชุงุฌ ุฅูู ุชุฌููุฒ ููู `.chartsnap.yaml`. ูุฐุง ููุงุณุจ ูุฃุฎุฐ ููุทุงุช ููุฎุทุทุงุช ุจุนูุฏุฉ ุฃู ูู ุทุฑู ุซุงูุซ ูุน ููู ููู ูุงุญุฏ ููุท.

ูููู ุฃู ูููู ููู ุงูููู ุงูุฎุงุต ุจู ููุฐุง:

```yaml
# ุฃุถู ูุฐู ุงูุฎุงุตูุฉ ุฅูู ุงูููู ุงูุฎุงุตุฉ ุจู.
testSpec:
  dynamicFields:
    - apiVersion: v1
      kind: Secret
      name: cilium-ca
      jsonPath:
        - /data/ca.crt
        - /data/ca.key
      base64: true
    - apiVersion: v1
      kind: Secret
      name: hubble-server-certs
      jsonPath:
        - /data/ca.crt
        - /data/tls.crt
        - /data/tls.key
      base64: true
    - apiVersion: v1
      kind: Secret
      name: hubble-relay-client-certs
      jsonPath:
        - /data/ca.crt
        - /data/tls.crt
        - /data/tls.key
      base64: true

# ุงูุจุงูู ูููู ุฃู ูููู ุฃู ููู ููุฎุทุทู.
# ...
```

ููุฒูุฏ ูู ุงูุฃูุซูุฉุ ุฑุงุฌุน [example/remote](https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/example/remote).

## ุงูุนุฑุถ ูุงููุณุชุฎุฏููู โจ

| ุงููุณุชุฎุฏููู / ุงููุดุงุฑูุน | ุงููุตู | ุงูุฑุงุจุท |
|:---|:---|:---|
| ูุซุงู | ูุฎุทุท ูุซุงู ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ ุฃูุฑ `helm create` | [`example/app1`](https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/example/app1) |
| ูุซุงู | ูุซุงู ุนูู ุงูุชูุงุท ููุทุงุช ููุฎุทุทุงุช ูู ูุณุชูุฏุนุงุช Helm ุงูุจุนูุฏุฉ | [`example/remote`](https://raw.githubusercontent.com/jlandowner/helm-chartsnap/main/example/remote) |
| [helm-chartsnap-action](https://github.com/jlandowner/helm-chartsnap-action) | ุฅุฌุฑุงุก GitHub ูุงุณุชุฎุฏุงู helm chartsnap ูู CI | https://github.com/jlandowner/helm-chartsnap-action |
| [cosmo-workspace](https://github.com/cosmo-workspace/cosmo) | ููุตุฉ WebIDE ู DevEnvironment ููุชูุญุฉ ุงููุตุฏุฑ ุนูู Kubernetes | https://github.com/cosmo-workspace/cosmo/tree/main/charts/cosmo/test |
| [Kong](https://github.com/Kong/kong) | ๐ฆ ุจูุงุจุฉ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูุณุญุงุจูุฉ ุงูุฃุตููุฉ ูุจูุงุจุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู. | https://github.com/Kong/charts |


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-07

---