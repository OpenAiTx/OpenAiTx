# Xbox_SMC
オリジナルXboxからのPIC16/XyclopsダンプおよびIDAデータベース、一部リバースエンジニアリング済み。

![オリジナルXboxのPIC16LC63Aの画像](https://raw.githubusercontent.com/Prehistoricman/Xbox_SMC/master/pic16lc63a.jpg)

# Xyclopsのフラッシング（XycloMod）
[XyclopsディレクトリとREADME](/Xyclops)を参照

# ダンプ
各PICダンプの.binファイルは、IDAで正しく読み込むためにバイトが入れ替わっています。したがって、PICメモリの最初のワードはbyte_0 + byte_1 << 8です。

.idbのIDAデータベースには変数情報やデータベースのメモ帳にいくつかの観察結果が含まれています。

SMCのバージョンの内訳については、このwikiページを参照してください：https://xboxdevwiki.net/Xboxen_Info

## B2A
DVT3 Xboxからダンプ。P01と同じ設定ワード。製品PICとは異なり、設定エリアに0000 0000 000B 002AというデバイスIDが焼き込まれています。

ブートチャレンジが完全にありません。

## D01
XDK BETA 2 Xboxからダンプ。P01と同一ですが、ブートチャレンジがありません。期待されるブートチャレンジ応答を計算する関数は存在しますが、呼び出されていません。

## DXF
XDK D2デバッグキットからダンプ。D01に非常に似ていますが、トレイロジック、過熱ロジック、ブートロジックにわずかな違いがあります。ブートチャレンジはD01と同様に欠落しています。

## D2E
Tuscany (v1.6)開発キットからダンプ。XyclopsチップはX01202-001とマークされており、小売ユニットが持つA-A02またはA-B01ラインがありません。

FC00のデバッグシリアルコードは小売のP2Lダンプと一致します。0x4000から0xFBFFにかけて奇妙なデータパターンがあります。

## P01
v1.0 Xboxからダンプ。設定ワードは0x86：
- CP1:CP0 = 0（メモリ全体に対してコード保護が有効）
- BODEN = 0（ブラウンアウトリセット無効）
- ~PWRTE = 0（パワーアップタイマー有効）
- WDTE = 1（ウォッチドッグタイマー有効）
- FOSC1:FOSC0 = 2（HSオシレータ）

設定値0x3FB6は、コード保護が有効にならないようにSMCクローンに適しています。
## P11
v1.3 Xboxからダンプ。P01と同じ設定ワード。

P01に比べてP11にはいくつか小さな変更があり、追加のSMBusコマンド（0x22を書き込み）、異なるLED優先度、ブートタイミングの緩和が含まれる。

v1.3のスクランブルダンプをv1.4と比較したところ一致した。これは同じプログラムである可能性が非常に高いことを意味する。

## P2L
v1.6 Xboxからダンプ。XyclopsリビジョンA-A02。Intel 8051コードを含むが、多くの特殊機能レジスタがあり、その機能は不明。

デバッグシリアルはFC00のコードによって駆動されている。実行を一時停止し、データをダンプし、レジスタ/RAMに書き込むことができる粗雑なデバッガーのようだ。

# Xyclopsダンプ

Xyclopsチップにはデバッグ用の3つのピンがある：TXD（ピン64）、RXD（ピン63）、DEBUG（ピン29）。DEBUGピンを高に設定すると、TXおよびRXピンでシリアルポートが有効になる。シリアルは9600ボーで動作。

プロトコルは通常 `<cmd>` `<アドレス上位バイト>` `<アドレス下位バイト>` `<無視>` の形式の4バイトコマンドに基づいている。

コマンド0x14はBIOSデータを64バイトずつダンプし、0x15はSMCプログラムデータを64バイトずつダンプする。XyclopsからのダンプであるP2L.binがリポジトリに含まれている。自身のマシンをダンプするための[xyclops_dumper.py](/Xyclops/xyclops_dumper.py)も含まれている。

# PICダンプ方法論
詳細は https://wiki.recessim.com/view/PIC_Burnout にて。

PICはコード保護が有効なのでデータはすべて0000として読み取られる。私はスクランブルされたデータ出力を得るためのトリックを使い、犠牲チップを用いてスクランブルアルゴリズムを発見し、その後、一種のエクスプロイトを使ってROMデータの一部ビットを既知値に固定した。これにより複数のスクランブルダンプから必要な情報を抽出し、元のデータを再構築できる。

# PICProgrammer
PICProgrammerはRP2040用のいくつかのArduinoプロジェクトのうちの一つで、私の研究で使用した。PICに対してICSP（インサーキットシリアルプログラミング）操作を実行する簡単なコマンドラインインターフェースを提供する。製造元が意図しなかった操作も可能な柔軟性のため、PICkitなどの専用プログラマより好まれる。

使用前に電子工学とプログラミングの十分な知識を持ち、実行するコマンドの内容をよく確認するべきである。



---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-09-17

---