# RSS-Master

فیلتر و غربالگری سفارشی برای منابع RSS، استفاده از AI برای خلاصه‌سازی، جمع‌بندی و امتیازدهی. نسخه بهینه‌شده عملکرد، پشتیبانی از پردازش ناهمزمان و خلاصه‌سازی موازی AI.

### مقدمه

اوایل سپتامبر، من شروع به استفاده از Inoreader + RSSHub برای جمع‌آوری و اشتراک منابع RSS مورد علاقه‌ام کردم، همراه با خواننده Reeder، سعی داشتم کاملاً بر منبع ورودی روزانه اطلاعات کنترل داشته باشم. پس از یک ماه، افزایش تدریجی منابع RSS و افزایش روزافزون اطلاعات نخوانده، اضطراب خواندن را برایم بیشتر کرد. بنابراین به این فکر افتادم که آیا راهی برای تعریف قوانین فیلتر سفارشی وجود دارد که بهتر باشد AI نیز به من در خواندن کمک کند تا بار خواندنم کاهش یابد.

Inoreader فیلترهایی دارد، اما فقط برای این ویژگی هزینه کردن به نظر چندان مقرون به صرفه نبود؛ NewsBlur دارای «Intelligence Trainer» برای دسته‌بندی هوشمند است، اما من به طور ساده امتحان کردم و بازخورد ملموسی ندیدم و در مدت کوتاه هوشمندی آن نمایان نشد؛ Feedly هم فیلتر و هم قابلیت AI دارد که به نظر نیازهای من را برآورده می‌کند. درست وقتی تردید داشتم که از Inoreader به کاربر پولی Feedly منتقل شوم، این دو پروژه را دیدم

- [اجازه دادن به ChatGPT برای خلاصه‌سازی Hacker News](https://blog.betacat.io/post/2023/06/summarize-hacker-news-by-chatgpt/)
- [راهنمای استفاده RSS-GPT](http://yinan.me/rss-gpt-manual-zh.html)

ایده کلی هر دو پروژه اجرای اسکریپتی از طریق GitAction است که پس از دریافت اطلاعات، از API Open AI برای ترجمه، خلاصه‌سازی استفاده می‌کند و سپس در قالب قالبی رندر کرده و در GitHub Page مستقر می‌کند. روش RSS-GPT بیشتر نیازهای من را برآورده می‌کند، زیرا با اجرای زمان‌بندی شده اسکریپت به طور مستقیم فایل XML RSS را دریافت می‌کند، پس از پردازش فایل XML را روی GitHub Page بارگذاری می‌کند و سپس می‌توان لینک دسترسی به این فایل XML را گرفت و در نهایت خواننده مستقیماً این لینک را مشترک می‌شود.

من نیاز شدیدی به همگام‌سازی چندسکویی Inoreader دارم، برای منابع RSS جدیدی که در فایل پیکربندی اضافه می‌شود، لازم است بلافاصله به Inoreader اطلاع داده شود تا همگام‌سازی انجام شود، بنابراین من بر اساس ایده [RSS-GPT](https://github.com/yinan-c/) توسعه‌ای انجام دادم که به نام RSS-Master شناخته می‌شود.

### ویژگی‌ها

- **پشتیبانی از پردازش موازی**: استفاده از ناهمزمانی و ThreadPool برای پردازش موازی منابع RSS و خلاصه‌سازی AI، افزایش چشمگیر سرعت پردازش  
- **مکانیزم کش بهبود یافته**: سیستم کش پایدارتر برای جلوگیری از از دست رفتن داده و بهبود عملکرد دسترسی‌های مکرر  
- **مدیریت خطا بهتر**: همه عملیات دارای مدیریت خطا و ثبت کامل لاگ‌ها برای افزایش پایداری  
- **استخراج بهینه محتوای HTML**: استخراج هوشمند محتوای مقاله، نادیده گرفتن اطلاعات غیرمرتبط، افزایش کیفیت خلاصه‌سازی AI  
- **پشتیبانی از جدیدترین API OpenAI**: کاملاً سازگار با آخرین نسخه API OpenAI  
- **آمار دقیق**: پس از پردازش، زمان اجرا، نرخ موفقیت و هزینه‌ها را گزارش می‌دهد  
- **پشتیبانی از تولید فایل opml**: و تبدیل متقابل با config.yml: `script/convert_opml_to_yaml.sh` و `script/convert_yaml_to_opml.sh`  
- **پشتیبانی از قوانین فیلتر سفارشی**: شامل دو نوع include و exclude، و دو حوزه اثر title و article  
- **قابلیت انتخاب مدل AI سفارشی**: پیکربندی مدل OpenAI مختلف از طریق متغیرهای محیطی  
- **قابلیت تعریف URL پایه سفارشی**: برای تنظیم URL پایه دسترسی به فایل‌های RSS جهت استقرار در محیط‌های مختلف  
- **دفترچه یادداشت تعاملی**: ارائه Jupyter Notebook برای آزمایش قابلیت‌ها

### پیکربندی متغیرهای محیطی

این پروژه از طریق فایل `.env` از پارامترهای زیر پشتیبانی می‌کند:

```
# پارامترهای ضروری
OPENAI_API_KEY=your_openai_api_key_here

# پارامترهای اختیاری
RSS_BASE_URL=https://example.com/rss-feeds/  # URL پایه RSS
OPENAI_MODEL=gpt-4o-mini-2024-07-18          # مدل OpenAI
LOG_LEVEL=INFO                               # سطح لاگ
PARALLEL_WORKERS=5                           # تعداد پردازش‌های موازی
```

می‌توانید فایل `.env.example` را کپی کرده و به `.env` تغییر نام دهید و سپس مقادیر را ویرایش کنید.

### بهبودهای عملکرد

نسخه فعلی نسبت به نسخه اولیه بهبودهای عملکرد زیر را دارد:

1. **پردازش موازی منابع RSS**: استفاده از `asyncio` برای پردازش همزمان چندین منبع RSS  
2. **خلاصه‌سازی AI موازی**: استفاده از ThreadPool برای پردازش همزمان خلاصه‌سازی چند مقاله  
3. **بهینه‌سازی پردازش متن**: بهبود الگوریتم استخراج محتوای HTML برای استخراج هوشمندانه‌تر محتوای کلیدی مقاله  
4. **پردازش فایل امن**: استفاده از مکانیزم ایمن نوشتن فایل برای جلوگیری از از دست رفتن داده‌ها در صورت کرش برنامه  
5. **بهینه‌سازی مصرف حافظه**: بهینه‌سازی ساختار داده و روند پردازش برای کاهش مصرف حافظه

### دستورالعمل استفاده

1. کلون کردن پروژه به سیستم محلی  
2. نصب وابستگی‌ها: `pip install -r requirements.txt`  
3. ایجاد فایل `.env` و تنظیم کلید API OpenAI: `OPENAI_API_KEY=کلید_شما`  
4. ویرایش فایل `resource/config.yml` برای تنظیم منابع RSS  
5. اجرای `python main.py` برای شروع پردازش

### تست و اشکال‌زدایی

این پروژه یک دفترچه یادداشت تعاملی به نام `test.ipynb` ارائه می‌دهد که برای تست قابلیت‌های مختلف استفاده می‌شود:

1. دریافت و تحلیل منابع RSS  
2. عملکرد فیلترها  
3. قابلیت خلاصه‌سازی AI  
4. مکانیزم کش  
5. URL پایه سفارشی  
6. تست عملکرد

نحوه استفاده:

```bash
# نصب Jupyter
pip install jupyter

# اجرای دفترچه یادداشت
jupyter notebook test.ipynb
```

### نمونه قوانین فیلتر سفارشی

```yaml
- htmlUrl: http://www.smzdm.com
  name: c5738f
  text: 什么值得买 | 优惠精选
  url: http://feed.smzdm.com
  filters:
    - type: include
      field: title
      keywords:
        [
          '可乐',
          '雪碧',
          '芬达',
          '柠檬',
          '茶叶',
          '纸巾',
          '酒精',
          '湿纸巾',
          '餐巾纸',
        ]
```

### تصاویر استفاده

- قابلیت خلاصه‌سازی و جمع‌بندی AI

<div style="display: flex;">
    <img src="https://qiniu.dcts.top/typora/202310031757486.png" alt="image-20231003174334231" style="width: 45%;">
    <img src="https://qiniu.dcts.top/typora/202310031757686.png" alt="image-20231003175143405" style="width: 45%;">
</div>

- فیلتر سفارشی: فیلتر کردن کانال‌های تخفیف «什么值得买» و فقط توصیه مواردی که اخیراً می‌خواهم ذخیره کنم، مانند نوشابه

<img src="https://qiniu.dcts.top/typora/%E4%BB%80%E4%B9%88%E5%80%BC%E5%BE%97%E4%B9%B0-%E6%B1%BD%E6%B0%B4.png" alt="image-20231003164248923" style="width: 400; height: 400;" />

---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-11

---