# RSS-Master

สำหรับการกรองและคัดกรองฟีด RSS แบบกำหนดเอง โดยใช้ AI สรุป ย่อ และให้คะแนน เป็นต้น รุ่นที่ปรับปรุงประสิทธิภาพ รองรับการประมวลผลแบบอะซิงโครนัสและสรุป AI แบบขนาน

### คำนำ

ต้นเดือนกันยายน ผมเริ่มใช้ Inoreader + RSSHub เพื่อรวบรวมและสมัครรับฟีด RSS ที่สนใจ ร่วมกับ Reeder สำหรับอ่าน พยายามควบคุมแหล่งข้อมูลที่เข้ามาทุกวันอย่างเต็มที่ หลังผ่านไปหนึ่งเดือน จำนวนฟีด RSS ที่เพิ่มขึ้นเรื่อย ๆ และข้อมูลที่ยังไม่ได้อ่านก็มากขึ้น ทำให้ผมเกิดความวิตกกังวลในการอ่าน จึงคิดว่าจะมีวิธีใดบ้างที่สามารถกำหนดกฎการกรองเองได้ และถ้าได้ AI เข้ามาช่วยอ่านเพื่อลดภาระในการอ่านของผมจะดีมาก

Inoreader มีฟิลเตอร์ในตัว แต่แค่จ่ายเงินสำหรับฟังก์ชันนี้ดูเหมือนไม่คุ้มค่า NewsBlur มี “Intelligence Trainer” สำหรับการจัดหมวดหมู่อัจฉริยะ แต่ผมลองใช้งานง่าย ๆ แล้วรู้สึกว่าการตอบสนองไม่ชัดเจน และไม่เห็นผลในระยะเวลาอันสั้น Feedly มีทั้งฟีเจอร์กรองและ AI ฟังก์ชัน ฟังดูตอบโจทย์ผมมาก เมื่อผมลังเลว่าจะย้ายจาก Inoreader ไปเป็นผู้ใช้จ่ายเงินของ Feedly หรือไม่ ผมก็พบกับโปรเจกต์สองตัวนี้

- [ให้ ChatGPT ช่วยเราสรุป Hacker News](https://blog.betacat.io/post/2023/06/summarize-hacker-news-by-chatgpt/)
- [คู่มือการใช้ RSS-GPT](http://yinan.me/rss-gpt-manual-zh.html)

แนวคิดโดยรวมของสองโปรเจกต์นี้คือการใช้ GitAction เพื่อรันสคริปต์ ดึงข้อมูลมาแล้วใช้ API ของ Open AI ในการแปล สรุป แล้วเรนเดอร์เป็นเทมเพลต จากนั้นเปิดใช้งานบน GitHub Page วิธีใน RSS-GPT จะตอบโจทย์ผมมากกว่า โดยการรันสคริปต์เป็นระยะ ๆ เพื่อดึงไฟล์ XML ของ RSS มา ประมวลผลแล้วนำไฟล์ XML ไปเปิดใช้งานบน GitHub Page จึงสามารถเข้าถึงลิงก์ไฟล์ XML นี้ได้ และให้โปรแกรมอ่านฟีดสมัครรับตรงจากลิงก์นี้

ผมมีความต้องการซิงค์หลายอุปกรณ์ของ Inoreader สูง สำหรับการเพิ่มฟีด RSS ใหม่ในไฟล์ config จำเป็นต้องแจ้ง Inoreader ให้ซิงค์ทันที ดังนั้นผมจึงขยายแนวคิดจาก [RSS-GPT](https://github.com/yinan-c/) ออกมาเป็นโปรเจกต์ที่ชื่อว่า RSS-Master

### คุณสมบัติเด่น

- **รองรับการประมวลผลขนาน**: ใช้ async และ thread pool เพื่อประมวลผลฟีด RSS และสรุป AI แบบขนาน ช่วยเพิ่มความเร็วอย่างมาก
- **ระบบแคชที่แข็งแกร่งขึ้น**: ระบบแคชที่เสถียรมากขึ้น ป้องกันการสูญหายของข้อมูลและเพิ่มประสิทธิภาพการเข้าถึงซ้ำ
- **การจัดการข้อผิดพลาดที่ดีขึ้น**: ทุกขั้นตอนมีการจัดการข้อผิดพลาดอย่างครบถ้วนและบันทึกล็อก เพิ่มความเสถียร
- **การดึงเนื้อหา HTML ที่ดีขึ้น**: ดึงเนื้อหาบทความอย่างชาญฉลาด เพิกเฉยข้อมูลที่ไม่เกี่ยวข้อง ช่วยเพิ่มคุณภาพการสรุป AI
- **รองรับ OpenAI API รุ่นล่าสุด**: เข้ากันได้เต็มที่กับเวอร์ชันล่าสุดของ OpenAI API
- **สถิติรายละเอียด**: หลังการประมวลผลแสดงเวลาทำงาน อัตราความสำเร็จ และสถิติค่าใช้จ่าย
- **รองรับการสร้างไฟล์ opml**: และแปลงกลับไปมาระหว่าง config.yml ด้วยคำสั่ง `script/convert_opml_to_yaml.sh` และ `script/convert_yaml_to_opml.sh`
- **รองรับกฎการกรองแบบกำหนดเอง**: รองรับประเภท include และ exclude ในขอบเขต title และ article
- **กำหนดโมเดล AI ได้เอง**: กำหนดโมเดล OpenAI ที่ใช้ผ่านตัวแปรสภาพแวดล้อม
- **กำหนด URL พื้นฐานได้เอง**: กำหนด URL พื้นฐานของไฟล์ RSS เพื่อให้ง่ายต่อการเปิดใช้งานบนสภาพแวดล้อมต่าง ๆ
- **โน้ตบุ๊กทดสอบแบบโต้ตอบได้**: มี Jupyter โน้ตบุ๊กสำหรับทดสอบฟังก์ชันต่าง ๆ

### การตั้งค่าตัวแปรสภาพแวดล้อม

โปรเจกต์รองรับการตั้งค่าพารามิเตอร์ผ่านไฟล์ `.env` ดังนี้:

```
# พารามิเตอร์ที่จำเป็น
OPENAI_API_KEY=your_openai_api_key_here

# พารามิเตอร์ที่เลือกได้
RSS_BASE_URL=https://example.com/rss-feeds/  # URL พื้นฐานของ RSS
OPENAI_MODEL=gpt-4o-mini-2024-07-18          # โมเดล OpenAI
LOG_LEVEL=INFO                               # ระดับล็อก
PARALLEL_WORKERS=5                           # จำนวนงานประมวลผลขนาน
```

สามารถคัดลอกไฟล์ `.env.example` แล้วเปลี่ยนชื่อเป็น `.env` จากนั้นแก้ไขค่าพารามิเตอร์ตามต้องการ

### การปรับปรุงประสิทธิภาพ

เวอร์ชันนี้มีการปรับปรุงประสิทธิภาพจากเวอร์ชันเดิมดังนี้:

1. **ประมวลผลฟีด RSS แบบขนาน**: ใช้ `asyncio` เพื่อประมวลผลหลายฟีด RSS พร้อมกัน
2. **สรุป AI แบบขนาน**: ใช้ thread pool เพื่อประมวลผลสรุป AI หลายบทความพร้อมกัน
3. **ปรับปรุงการประมวลผลข้อความ**: ปรับปรุงอัลกอริทึมการดึงเนื้อหา HTML ให้ดึงเนื้อหาสำคัญของบทความได้ชาญฉลาดขึ้น
4. **การจัดการไฟล์ที่ปลอดภัย**: ใช้วิธีเขียนไฟล์อย่างปลอดภัย ป้องกันข้อมูลสูญหายหากโปรแกรมล่ม
5. **ปรับปรุงการใช้หน่วยความจำ**: ปรับปรุงโครงสร้างข้อมูลและกระบวนการประมวลผลเพื่อลดการใช้หน่วยความจำ

### วิธีใช้งาน

1. โคลนโปรเจกต์ลงเครื่อง
2. ติดตั้ง dependencies: `pip install -r requirements.txt`
3. สร้างไฟล์ `.env` และตั้งค่า OpenAI API Key: `OPENAI_API_KEY=your_key`
4. แก้ไข `resource/config.yml` เพื่อกำหนดฟีด RSS ของคุณ
5. รัน `python main.py` เพื่อเริ่มประมวลผล

### การทดสอบและดีบัก

โปรเจกต์มีโน้ตบุ๊กทดสอบแบบโต้ตอบ `test.ipynb` สำหรับทดสอบฟังก์ชันต่าง ๆ:

1. การดึงและแยกวิเคราะห์ฟีด RSS
2. ฟังก์ชันตัวกรอง
3. ฟังก์ชันสรุป AI
4. ระบบแคช
5. การกำหนด URL พื้นฐานเอง
6. การทดสอบประสิทธิภาพ

วิธีใช้งาน:

```bash
# ติดตั้ง Jupyter
pip install jupyter

# เปิดโน้ตบุ๊ก
jupyter notebook test.ipynb
```

### ตัวอย่างกฎการกรองแบบกำหนดเอง

```yaml
- htmlUrl: http://www.smzdm.com
  name: c5738f
  text: 什么值得买 | 优惠精选
  url: http://feed.smzdm.com
  filters:
    - type: include
      field: title
      keywords:
        [
          'โคล่า',
          'สไปรท์',
          'แฟนต้า',
          'มะนาว',
          'ชาใบ',
          'ทิชชู่',
          'แอลกอฮอล์',
          'ทิชชู่เปียก',
          'ผ้าเช็ดปาก',
        ]
```

### ภาพหน้าจอการใช้งาน

- ฟังก์ชันสรุปและย่อ AI

<div style="display: flex;">
    <img src="https://raw.githubusercontent.com/TD21forever/RSS-Master/main/202310031757486.png" alt="image-20231003174334231" style="width: 45%;">
    <img src="https://raw.githubusercontent.com/TD21forever/RSS-Master/main/202310031757686.png" alt="image-20231003175143405" style="width: 45%;">
</div>

- กรองกำหนดเอง: กรองช่องดีลดี ๆ จาก “什么值得买” เพื่อแนะนำเฉพาะสินค้าที่อยากสต็อกในช่วงนี้ เช่น น้ำอัดลม

<img src="https://raw.githubusercontent.com/TD21forever/RSS-Master/main/%E4%BB%80%E4%B9%88%E5%80%BC%E5%BE%97%E4%B9%B0-%E6%B1%BD%E6%B0%B4.png" alt="image-20231003164248923" style="width: 400px; height: 400px;" />

---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-11

---