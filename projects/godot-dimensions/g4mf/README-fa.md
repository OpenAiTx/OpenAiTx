# قالب مدل چهار بعدی خوب (G4MF)

قالب مدل چهار بعدی خوب، یا به اختصار G4MF، یک قالب مدل چندبعدی مبتنی بر JSON با تمرکز بر ۴ بعد است که با الهام از [glTF™](https://github.com/KhronosGroup/glTF) شرکت Khronos طراحی شده و امکان انتقال، تبادل و سازگاری محتوای ابعاد بالاتر را بین برنامه‌ها فراهم می‌کند.

فایل‌های G4MF می‌توانند به شکل‌های زیر باشند:
- `.g4tf` مخفف "فایل متنی مدل چهار بعدی خوب" است. این نوع شامل داده‌های JSON در قالب متنی صرفاً مبتنی بر UTF-8 است، داده‌های باینری به صورت Base64 درون یک رشته رمزگذاری می‌شوند یا به صورت فایل‌های خارجی ذخیره می‌شوند. فایل‌های G4TF معتبر فاقد BOM یا کاراکتر بازگشت به سر خط هستند.
- `.g4b` مخفف "مدل چهار بعدی خوب باینری" است. این نوع داده‌های باینری را به صورت متراکم برای بهبود کارایی حجم بسته‌بندی می‌کند، که بررسی آن را در ویرایشگر متنی دشوارتر می‌سازد.

مشخصات را اینجا بخوانید: [مشخصات قالب مدل چهار بعدی خوب (G4MF)](https://raw.githubusercontent.com/godot-dimensions/g4mf/main/specification/specification.md).

## تفاوت‌ها با glTF™

G4MF با الهام از glTF™ ساخته شده و ساختار کلی مشابهی دارد، اما تفاوت‌های زیادی دارد.

تفاوت‌های اصلی:

- G4MF یک قالب چندبعدی با تمرکز بر ۴ بعد است، در حالی که glTF™ قالب سه‌بعدی است. (واضح است اما برای شفافیت ذکر شد)
- glTF™ به‌گونه‌ای طراحی شده که به عنوان قالب نهایی آماده GPU باشد و داده‌ها به صورتی ذخیره می‌شوند که مستقیماً قابل بارگذاری در OpenGL™ یا Vulkan™ باشند. از آنجا که APIهای گرافیکی از مدل‌های ۴ بعدی، ۵ بعدی، ۶ بعدی و غیره پشتیبانی نمی‌کنند، این هدف برای G4MF معنایی ندارد. در عوض، G4MF عمدتاً به عنوان قالب تبادل قابل خواندن برای انسان طراحی شده است.
- رأس‌های مش G4MF معمولاً به صورت حذف تکراری ذخیره می‌شوند و توسط یال‌ها و سلول‌ها ارجاع داده می‌شوند. glTF™ هر مثلث را با رأس‌های منحصربه‌فرد ذخیره می‌کند که بارگذاری مستقیم در GPU را آسان‌تر می‌کند، اما منجر به سردرگمی در مورد تکرار رأس‌ها می‌شود. https://blender.stackexchange.com/questions/167372/gltf-export-has-twice-the-vertices-it-should/167383#167383
- G4MF فقط اجازه یک صحنه در هر فایل با یک گره ریشه را می‌دهد، در حالی که glTF™ اجازه چندین صحنه و چندین گره ریشه را می‌دهد. https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Vendor/GODOT_single_root
- باینری G4MF برای اندازه فایل‌های `.g4b` و بخش‌های آن از عدد صحیح بدون علامت ۶۴ بیتی استفاده می‌کند، در حالی که `.glb` از عدد صحیح بدون علامت ۳۲ بیتی استفاده می‌کند، که اجازه فایل‌های بزرگ‌تر از ۴ گیگابایت را می‌دهد. https://github.com/KhronosGroup/glTF/issues/2114
- G4MF یک قالب کاملاً جدید است، در حالی که glTF™ یک قالب استاندارد صنعتی بالغ است. بنابراین، توصیه می‌کنیم برای مدل‌های سه‌بعدی از glTF™ استفاده کنید، نه فایل‌های سه‌بعدی G4MF.

علاوه بر این، تفاوت‌های جزئی زیادی بین G4MF و glTF™ وجود دارد:

- G4MF یک کلید عدد صحیح جدید و اجباری به نام `"dimension"` به بخش `"asset"` اضافه می‌کند که باید تعریف شود، در غیر این صورت فایل نامعتبر است. این بدان معناست که مدل‌های ۴ بعدی باید `{ "asset": { "dimension": 4 } }` را در داده‌های JSON خود داشته باشند.
- هدر asset در G4MF شامل آرایه‌های `"extensionsUsed"` و `"extensionsRequired"` است. در glTF™ این آرایه‌ها در شیء سطح بالای JSON تعریف می‌شوند.
- تبدیل گره در G4MF ترکیبی از `"position"` و یا `"basis"` یا `"rotor"`+`"scale"` است، در حالی که glTF™ از `"translation"`+`"rotation"`+`"scale"` یا یک `"matrix"` ۴×۴ استفاده می‌کند. هر دو قالب فقط تبدیل خطی را اجازه می‌دهند، به این معنی که ویژگی `"matrix"` در glTF™ همیشه در ردیف آخر مقادیر (0, 0, 0, 1) دارد. این ردیف آخر برای ارسال داده به GPU مفید است اما داده معناداری برای تبادل نیست، بنابراین در G4MF وجود ندارد.
- `"scale"` گره در G4MF اجازه مقیاس‌های منفی را نمی‌دهد، در حالی که glTF™ این اجازه را می‌دهد. در صورت نیاز، G4MF الزام می‌کند که برای وارونه‌سازی/بازتاب از `"basis"` استفاده شود.
- `"scale"` گره در G4MF اجازه یک مقدار منفرد برای مقیاس یکنواخت را می‌دهد، که به ویژه در ابعاد خیلی بالا برای جمع‌وجوری مفید است. `"scale"` در glTF™ همیشه یک بردار سه‌بعدی است.
- گره‌های G4MF یک بولین `"visible"` دارند که قابلیت افزونه `KHR_node_visibility` در glTF™ را در مشخصات پایه ارائه می‌دهد. https://github.com/KhronosGroup/glTF/pull/2410
- مش‌های G4MF دارای `"surfaces"` هستند که نامی کاربرپسندتر است. مش‌های glTF™ دارای `"primitives"` هستند که ترمینولوژی OpenGL™ است. https://www.khronos.org/opengl/wiki/primitive
- سطوح مش در G4MF رأس‌ها، یال‌ها و سلول‌ها را به طور صریح روی سطح تعریف می‌کنند. پریمیتیوهای مش در glTF™ این‌ها را داخل `"attributes"` و `"mode"` تعریف می‌کنند.
- سطوح مش G4MF می‌توانند بولین `"polytopeCells"` داشته باشند که قابلیت افزونه `FB_ngon_encoding` در glTF™ را در مشخصات پایه ارائه می‌دهد. https://github.com/KhronosGroup/glTF/pull/1620
- مواد G4MF کانال‌هایی دارند که مفهوم ویژگی‌های مجزای مواد در glTF™ را تعمیم می‌دهند. برای مثال، رنگ پایه در glTF™ از `"baseColorFactor"` و `"baseColorTexture"` استفاده می‌کند که دومی شامل textureInfo با `"index"` و اندیس `"texCoord"` است. مواد G4MF کانال‌هایی مانند `"baseColor"` دارند که این ویژگی‌ها را در زیرمجموعه خود متحد می‌کند.
- نورها در G4MF در مشخصات پایه وجود دارند، در حالی که نورها در glTF™ در افزونه `KHR_lights_punctual` هستند.
- نورهای G4MF نیاز دارند که مقیاس گره متصل را در نظر بگیرند، در حالی که نورهای glTF™ باید مقیاس گره متصل را نادیده بگیرند.
- accessorهای G4MF دارای یک رشته `"primitiveType"` هستند که مقادیری مانند `"uint8"`، `"int16"`، `"float32"` و غیره را نگه می‌دارد. accessorهای glTF™ ویژگی `"componentType"` دارند که مقادیر آن شماره‌گذاری اختصاصی OpenGL™ مانند `5121`، `5122`، `5126` و غیره است. رویکرد G4MF خواناتر و قابل توسعه‌تر برای انسان است، در حالی که رویکرد glTF™ نیازمند مراجعه به جدول شماره‌گذاری برای درک مقادیر است.
- accessorهای G4MF یک عدد صحیح `"vectorSize"` دارند که مفهوم accessor در glTF™ برای `"SCALAR"`، `"VEC2"`، `"VEC3"` و `"VEC4"` را به هر اندازه‌ای تعمیم می‌دهد.
- accessorهای G4MF ویژگی `"count"` ندارند، در حالی که accessorهای glTF™ دارند. در G4MF تعداد توسط اندازه نمای بافر تعیین می‌شود.
- accessorهای G4MF ویژگی‌های `"normalized"`، `"max"` یا `"min"` ندارند، چون برای تبادل مفید نیستند.
- accessorهای G4MF به صورت پیوسته هستند و از sparse بودن پشتیبانی نمی‌کنند، در حالی که accessorهای glTF™ می‌توانند sparse باشند. این برای بهینه‌سازی‌های عملکرد آماده GPU مفید است، اما برای تبادل کاربردی ندارد.
- نماهای بافر G4MF ویژگی‌های `"byteStride"` یا `"target"` ندارند، به این معنی که G4MF از داده‌های درهم‌تنیده پشتیبانی نمی‌کند. این ویژگی در glTF™ برای بهینه‌سازی‌های عملکرد آماده GPU مفید است اما برای تبادل کاربردی ندارد.
- بخش‌های باینری G4MF یک شاخص فرمت فشرده‌سازی ۴ بایتی دارند که امکان فایل‌های باینری فشرده G4MF را در آینده فراهم می‌کند.

---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-09

---