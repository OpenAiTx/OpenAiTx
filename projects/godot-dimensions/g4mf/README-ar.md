# تنسيق النماذج الجيدة رباعية الأبعاد (G4MF)

تنسيق النماذج الجيدة رباعية الأبعاد، أو اختصارًا G4MF، هو تنسيق نماذج متعدد الأبعاد يركز على البعد الرابع ويعتمد على JSON، مستوحى من [glTF™](https://github.com/KhronosGroup/glTF) الخاص بـ Khronos، ويسمح بنقل وتبادل وتوافقية المحتوى ذي الأبعاد الأعلى بين التطبيقات.

يمكن أن تأتي ملفات G4MF بالأنواع التالية:
- `.g4tf` تعني "ملف نصي لنموذج جيد رباعي الأبعاد". يتضمن بيانات JSON بتنسيق نصي بحت UTF-8، مع الكتل الثنائية مشفرة كـ Base64 داخل سلسلة نصية، أو مخزنة كملفات خارجية. لا تحتوي ملفات G4TF الصالحة على BOMs أو محارف ترجيع العربة.
- `.g4b` تعني "نموذج جيد رباعي الأبعاد ثنائي". يضغط البيانات الثنائية بكثافة لتحقيق كفاءة في الحجم، على حساب صعوبة فحصها في محرر نصوص.

اقرأ المواصفة هنا: [مواصفة تنسيق النماذج الجيدة رباعية الأبعاد (G4MF)](specification/specification.md).

## الاختلافات عن glTF™

تم استلهام G4MF من glTF™، وله بنية عامة مشابهة، لكنه يحتوي على العديد من الاختلافات.

الاختلافات الرئيسية:

- G4MF هو تنسيق متعدد الأبعاد يركز على البعد الرابع، في حين أن glTF™ هو تنسيق ثلاثي الأبعاد. (من الواضح، لكن مذكور للتوضيح)
- تم تصميم glTF™ ليكون تنسيقًا جاهزًا للمعالجة الرسومية النهائية، مع تخزين البيانات بطريقة جاهزة للتحميل إلى OpenGL™ أو Vulkan™. ونظرًا لأن واجهات برمجة الرسوميات لا تدعم النماذج رباعية أو خماسية أو سداسية الأبعاد، فإن هذا الهدف لا معنى له بالنسبة لـ G4MF. بدلاً من ذلك، تم تصميم G4MF أساسًا كتبادل قابل للقراءة البشرية.
- يتم تخزين رؤوس الشبكة في G4MF عادةً بطريقة غير مكررة، ويتم الرجوع إليها بواسطة الحواف والخلايا. يقوم glTF™ بتخزين كل مثلث برؤوس فريدة، وهو أسهل للتحميل المباشر إلى المعالج الرسومي، لكنه يؤدي إلى ارتباك حول تكرار الرؤوس. https://blender.stackexchange.com/questions/167372/gltf-export-has-twice-the-vertices-it-should/167383#167383
- يسمح G4MF بمشهد واحد فقط لكل ملف مع عقدة جذر واحدة، بينما يسمح glTF™ بعدة مشاهد وعدة عقد جذر. https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Vendor/GODOT_single_root
- يستخدم الثنائي في G4MF عددًا صحيحًا غير موقع 64-بت لحجم ملفات وعناصر `.g4b`، بدلاً من عدد صحيح غير موقع 32-بت مثل `.glb`، مما يسمح بملفات أكبر من 4 جيبيبايت. https://github.com/KhronosGroup/glTF/issues/2114
- G4MF هو تنسيق جديد كليًا، بينما glTF™ هو تنسيق صناعي ناضج وقياسي. لذلك، نوصي باستخدام glTF™ للنماذج ثلاثية الأبعاد، وليس ملفات G4MF ثلاثية الأبعاد.

بالإضافة إلى ذلك، هناك العديد من الاختلافات التفصيلية بين G4MF و glTF™:

- يضيف G4MF مفتاح عدد صحيح جديد مطلوب `"dimension"` إلى `"asset"`، ويجب تعريفه وإلا يكون الملف غير صالح. هذا يعني أن النماذج رباعية الأبعاد يجب أن تحتوي على `{ "asset": { "dimension": 4 } }` في بيانات JSON الخاصة بها.
- يحتوي رأس الأصل في G4MF على مصفوفتين `"extensionsUsed"` و `"extensionsRequired"`. في glTF™، يتم تعريفهما في كائن JSON على المستوى الأعلى.
- تستخدم تحويلات العقدة في G4MF مزيجًا من `"position"` وإما `"basis"` أو `"rotor"`+`"scale"`، بينما يستخدم glTF™ `"translation"`+`"rotation"`+`"scale"` أو مصفوفة 4x4 `"matrix"`. كلا التنسيقين يسمح فقط بتحويل خطي، مما يعني أن خاصية `"matrix"` في glTF™ تحتوي دائمًا على القيم (0، 0، 0، 1) في الصف الأخير. هذا الصف الأخير مفيد لإرسال البيانات إلى المعالج الرسومي، لكنه ليس ذا معنى للتبادل، لذلك فهو غير موجود في G4MF.
- لا تسمح خاصية `"scale"` في عقدة G4MF بقيم سالبة، بينما يسمح بها glTF™. يتطلب G4MF استخدام `"basis"` للانعكاس أو العكس إذا لزم الأمر.
- تسمح خاصية `"scale"` في عقدة G4MF بقيمة واحدة تمثل مقياسًا موحدًا، مما يفيد في التقليل من الحجم خاصة مع الأبعاد العالية جدًا. خاصية `"scale"` في glTF™ دائمًا متجه ثلاثي الأبعاد.
- تحتوي عقد G4MF على قيمة منطقية `"visible"`، توفر امتداد glTF™ `KHR_node_visibility` في المواصفة الأساسية. https://github.com/KhronosGroup/glTF/pull/2410
- تحتوي شبكات G4MF على `"surfaces"`، وهو اسم أكثر سهولة للمستخدم. أما شبكات glTF™ فتحتوي على `"primitives"`، وهو المصطلح المستخدم في OpenGL™. https://www.khronos.org/opengl/wiki/primitive
- تحدد أسطح الشبكة في G4MF الرؤوس والحواف والخلايا الموجودة على السطح بشكل صريح. تحدد بدائل شبكات glTF™ هذه داخل `"attributes"` و `"mode"`.
- قد تحتوي أسطح الشبكة في G4MF على قيمة منطقية `"polytopeCells"`، توفر امتداد glTF™ `FB_ngon_encoding` في المواصفة الأساسية. https://github.com/KhronosGroup/glTF/pull/1620
- تحتوي المواد في G4MF على قنوات تعمم مفهوم خصائص المواد المنفصلة في glTF™. على سبيل المثال، يستخدم glTF™ لون القاعدة عبر `"baseColorFactor"` و `"baseColorTexture"`، حيث تحتوي الأخيرة على textureInfo يحدد مؤشر نسيج `"index"` ومؤشر `"texCoord"`. تحتوي مواد G4MF على قنوات مثل `"baseColor"` مع هذه الخصائص موحدة تحتها.
- الإضاءة في G4MF جزء من المواصفة الأساسية، بينما الإضاءة في glTF™ موجودة في الامتداد `KHR_lights_punctual`.
- تتطلب الإضاءة في G4MF أخذ مقياس العقدة المرتبطة بها في الاعتبار، بينما تتطلب إضاءة glTF™ تجاهل مقياس العقدة المرتبطة بها.
- تحتوي أدوات الوصول في G4MF على سلسلة نصية `"primitiveType"` تحمل قيمًا مثل `"uint8"`، `"int16"`، `"float32"`، إلخ. تحتوي أدوات الوصول في glTF™ على خاصية `"componentType"` بقيم عبارة عن تعداد خاص بـ OpenGL™ مثل `5121`، `5122`، `5126`، إلخ. نهج G4MF أكثر قابلية للقراءة البشرية وقابل للتوسعة، بينما يتطلب نهج glTF™ الرجوع إلى جدول التعدادات لفهم القيم.
- تحتوي أدوات الوصول في G4MF على عدد صحيح `"vectorSize"` يعمم مفهوم أداة الوصول في glTF™ `"SCALAR"`، `"VEC2"`، `"VEC3"` و `"VEC4"` لأي حجم.
- لا تحتوي أدوات الوصول في G4MF على `"count"` مثل أدوات الوصول في glTF™، بل يتم تحديد العدد بواسطة حجم منظور المخزن المؤقت.
- لا تحتوي أدوات الوصول في G4MF على خصائص `"normalized"` أو `"max"` أو `"min"`، لأنها غير مفيدة للتبادل.
- أدوات الوصول في G4MF متجاورة ولا تدعم أن تكون متفرقة، بينما يمكن أن تكون أدوات الوصول في glTF™ متفرقة. هذا مفيد لتحسينات الأداء الجاهزة للمعالج الرسومي، لكنه غير مفيد للتبادل.
- لا تحتوي منظور المخزن المؤقت في G4MF على خصائص `"byteStride"` أو `"target"`، مما يعني أن G4MF لا يدعم البيانات المتداخلة. هذا مفيد في glTF™ لتحسينات الأداء الجاهزة للمعالج الرسومي، لكنه غير مفيد للتبادل.
- تحتوي كتل G4MF الثنائية على مؤشر تنسيق ضغط من 4 بايت، مما يسمح بملفات G4MF ثنائية مضغوطة في المستقبل.


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-09

---