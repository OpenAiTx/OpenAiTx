<h3 align="center"> ğŸ¥‡ é‡‘ç´šè´ŠåŠ©å•† <br> </h3> <table align="center" width="100%"><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://stytch.com/?utm_source&#x3D;oss-sponsorship&amp;utm_medium&#x3D;paid_sponsorship&amp;utm_content&#x3D;website-link&amp;utm_campaign&#x3D;axios-http" style="padding: 10px; display: inline-block"> <picture> <source width="200px" height="38px" media="(prefers-color-scheme: dark)" srcset="https://axios-http.com/assets/sponsors/stytch_white.png"> <img width="200px" height="38px" src="https://axios-http.com/assets/sponsors/stytch.png" alt="Stytch"/> </picture> </a> <p align="center" title="API-first authentication, authorization, and fraud prevention">API å„ªå…ˆçš„èº«ä»½é©—è­‰ã€æˆæ¬Šå’Œé˜²è©æ¬ºé˜²è­·</p> <p align="center"> <a href="https://stytch.com/?utm_source&#x3D;oss-sponsorship&amp;utm_medium&#x3D;paid_sponsorship&amp;utm_content&#x3D;website-link&amp;utm_campaign&#x3D;axios-http"><b>å®˜æ–¹ç¶²ç«™</b></a> | <a href="https://stytch.com/docs?utm_source&#x3D;oss-sponsorship&amp;utm_medium&#x3D;paid_sponsorship&amp;utm_content&#x3D;docs-link&amp;utm_campaign&#x3D;axios-http"><b>æ–‡ä»¶</b></a> | <a href="https://github.com/stytchauth/stytch-node?utm_source&#x3D;oss-sponsorship&amp;utm_medium&#x3D;paid_sponsorship&amp;utm_content&#x3D;node-sdk&amp;utm_campaign&#x3D;axios-http"><b>Node.js</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://www.principal.com/about-us?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="133px" height="43px" src="https://axios-http.com/assets/sponsors/principal.svg" alt="Principal Financial Group"/> </a> <p align="center" title="Weâ€™re bound by one common purpose: to give you the financial tools, resources and information you need to live your best life.">æˆ‘å€‘æ‡·æŠ±è‘—ä¸€å€‹å…±åŒç›®æ¨™ï¼šç‚ºæ‚¨æä¾›å¯¦ç¾ç¾å¥½äººç”Ÿæ‰€éœ€çš„é‡‘èå·¥å…·ã€è³‡æºèˆ‡è³‡è¨Šã€‚</p> <p align="center"> <a href="https://www.principal.com/about-us?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>www.principal.com</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://twicsy.com/buy-instagram-followers?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="85px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/buy-instagram-followers-twicsy.png" alt="Buy Instagram Followers Twicsy"/> </a> <p align="center" title="Buy real Instagram followers from Twicsy starting at only $2.97. Twicsy has been voted the best site to buy followers from the likes of US Magazine.">åœ¨ Twicsy ä»¥ $2.97 èµ·è³¼è²·çœŸæ­£çš„ Instagram ç²‰çµ²ã€‚Twicsy æ›¾ç² US Magazine è©•é¸ç‚ºæœ€ä½³è³¼è²·ç²‰çµ²ç¶²ç«™ã€‚</p> <p align="center"> <a href="https://twicsy.com/buy-instagram-followers?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>twicsy.com</b></a> </p>
</td></tr><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://www.descope.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;referral&amp;utm_campaign&#x3D;axios-oss-sponsorship" style="padding: 10px; display: inline-block"> <picture> <source width="200px" height="52px" media="(prefers-color-scheme: dark)" srcset="https://axios-http.com/assets/sponsors/descope_white.png"> <img width="200px" height="52px" src="https://axios-http.com/assets/sponsors/descope.png" alt="Descope"/> </picture> </a> <p align="center" title="Hi, we&#x27;re Descope! We are building something in the authentication space for app developers and canâ€™t wait to place it in your hands.">å—¨ï¼Œæˆ‘å€‘æ˜¯ Descopeï¼æˆ‘å€‘æ­£åœ¨ç‚ºæ‡‰ç”¨é–‹ç™¼è€…æ‰“é€ èº«ä»½é©—è­‰ç›¸é—œç”¢å“ï¼ŒæœŸå¾…ç›¡å¿«äº¤åˆ°ä½ æ‰‹ä¸Šã€‚</p> <p align="center"> <a href="https://www.descope.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;referral&amp;utm_campaign&#x3D;axios-oss-sponsorship"><b>å®˜æ–¹ç¶²ç«™</b></a> | <a href="https://docs.descope.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;referral&amp;utm_campaign&#x3D;axios-oss-sponsorship"><b>æ–‡ä»¶</b></a> | <a href="https://www.descope.com/community?utm_source&#x3D;axios&amp;utm_medium&#x3D;referral&amp;utm_campaign&#x3D;axios-oss-sponsorship"><b>ç¤¾ç¾¤</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://buzzoid.com/buy-instagram-followers/?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="62px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/buzzoid-buy-instagram-followers.png" alt="Buzzoid - Buy Instagram Followers"/> </a> <p align="center" title="At Buzzoid, you can buy Instagram followers quickly, safely, and easily with just a few clicks. Rated world&#x27;s #1 IG service since 2012.">åœ¨ Buzzoidï¼Œæ‚¨åªéœ€é»å¹¾ä¸‹å³å¯å¿«é€Ÿã€å®‰å…¨ã€è¼•é¬†è³¼è²· Instagram ç²‰çµ²ã€‚è‡ª 2012 å¹´èµ·è¢«è©•ç‚ºå…¨çƒç¬¬ä¸€ IG æœå‹™ã€‚</p> <p align="center"> <a href="https://buzzoid.com/buy-instagram-followers/?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>buzzoid.com</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://www.famety.net/?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="70px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/famety-buy-instagram-followers.png" alt="Famety - Buy Instagram Followers"/> </a> <p align="center" title="At Famety, you can grow your social media following quickly, safely, and easily with just a few clicks. Rated the worldâ€™s #1 social media service since 2013.">åœ¨ Fametyï¼Œæ‚¨åªéœ€é»å¹¾ä¸‹å³å¯å¿«é€Ÿã€å®‰å…¨ã€è¼•é¬†æ“´å±•æ‚¨çš„ç¤¾ç¾¤åª’é«”ç²‰çµ²æ•¸ã€‚è‡ª 2013 å¹´ä»¥ä¾†è¢«è©•ç‚ºå…¨çƒç¬¬ä¸€ç¤¾ç¾¤åª’é«”æœå‹™ã€‚</p> <p align="center"> <a href="https://www.famety.net/?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>www.famety.net</b></a> </p>
</td></tr><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://poprey.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="70px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/instagram-likes.png" alt="Poprey - Buy Instagram Likes"/> </a> <p align="center" title="Buy Instagram Likes">è³¼è²· Instagram æŒ‰è®šæ•¸</p> <p align="center"> <a href="https://poprey.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>poprey.com</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://ssmarket.net/buy-youtube-subscribers?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="70px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/youtube-subscribers-ssmarket.png" alt="Buy Youtube Subscribers"/> </a> <p align="center" title="SS Market offers professional social media services that rapidly increase your YouTube subscriber count, elevating your channel to a powerful position.">SS Market æä¾›å°ˆæ¥­çš„ç¤¾ç¾¤åª’é«”æœå‹™ï¼Œèƒ½è¿…é€Ÿæå‡æ‚¨çš„ YouTube è¨‚é–±äººæ•¸ï¼Œè®“æ‚¨çš„é »é“å¿«é€Ÿå£¯å¤§ã€‚</p> <p align="center"> <a href="https://ssmarket.net/buy-youtube-subscribers?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>ssmarket.net</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://smmpanelserver.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="200px" height="56px" src="https://axios-http.com/assets/sponsors/opencollective/smmpanelserver123.png" alt="smmpanelserver"/> </a> <p align="center" title="smmpanelserver - Best and Cheapest Smm Panel">smmpanelserver - æœ€ä½³ä¸”æœ€ä¾¿å®œçš„ Smm é¢æ¿</p> <p align="center"> <a href="https://smmpanelserver.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>smmpanelserver.com</b></a> </p>
</td></tr><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://opencollective.com/axios/contribute">ğŸ’œ æˆç‚ºè´ŠåŠ©å•†</a>
</td><td align="center" width="33.333333333333336%"> <a href="https://opencollective.com/axios/contribute">ğŸ’œ æˆç‚ºè´ŠåŠ©å•†</a>
</td><td align="center" width="33.333333333333336%"> <a href="https://opencollective.com/axios/contribute">ğŸ’œ æˆç‚ºè´ŠåŠ©å•†</a>
</td></tr></table>

<!--<div>marker</div>-->
<br><br>
<div align="center">
   <a href="https://axios-http.com"><img src="https://axios-http.com/assets/logo.svg" /></a><br>
</div>

<p align="center">åŸºæ–¼ Promise çš„ç€è¦½å™¨èˆ‡ Node.js HTTP å®¢æˆ¶ç«¯</p>

<p align="center">
    <a href="https://axios-http.com/"><b>å®˜æ–¹ç¶²ç«™</b></a> â€¢
    <a href="https://axios-http.com/docs/intro"><b>æ–‡ä»¶</b></a>
</p>

<div align="center">

[![npm ç‰ˆæœ¬](https://img.shields.io/npm/v/axios.svg?style=flat-square)](https://www.npmjs.org/package/axios)
[![CDNJS](https://img.shields.io/cdnjs/v/axios.svg?style=flat-square)](https://cdnjs.com/libraries/axios)
[![å»ºç½®ç‹€æ…‹](https://img.shields.io/github/actions/workflow/status/axios/axios/ci.yml?branch=v1.x&label=CI&logo=github&style=flat-square)](https://github.com/axios/axios/actions/workflows/ci.yml)
[![Gitpod Ready-to-Code](https://img.shields.io/badge/Gitpod-Ready--to--Code-blue?logo=gitpod&style=flat-square)](https://gitpod.io/#https://github.com/axios/axios)
[![ç¨‹å¼ç¢¼è¦†è“‹ç‡](https://img.shields.io/coveralls/mzabriskie/axios.svg?style=flat-square)](https://coveralls.io/r/mzabriskie/axios)
[![å®‰è£å¤§å°](https://img.shields.io/badge/dynamic/json?url=https://packagephobia.com/v2/api.json?p=axios&query=$.install.pretty&label=install%20size&style=flat-square)](https://packagephobia.now.sh/result?p=axios)
[![npm bundle å¤§å°](https://img.shields.io/bundlephobia/minzip/axios?style=flat-square)](https://bundlephobia.com/package/axios@latest)
[![npm ä¸‹è¼‰é‡](https://img.shields.io/npm/dm/axios.svg?style=flat-square)](https://npm-stat.com/charts.html?package=axios)
[![gitter èŠå¤©å®¤](https://img.shields.io/gitter/room/mzabriskie/axios.svg?style=flat-square)](https://gitter.im/mzabriskie/axios)
[![code helpers](https://www.codetriage.com/axios/axios/badges/users.svg)](https://www.codetriage.com/axios/axios)
[![å·²çŸ¥æ¼æ´](https://snyk.io/test/npm/axios/badge.svg)](https://snyk.io/test/npm/axios)




</div>

## ç›®éŒ„

  - [åŠŸèƒ½ç‰¹é»](#features)
  - [ç€è¦½å™¨æ”¯æ´](#browser-support)
  - [å®‰è£](#installing)
    - [å¥—ä»¶ç®¡ç†å·¥å…·](#package-manager)
    - [CDN](#cdn)
  - [ç¯„ä¾‹](#example)
  - [Axios API](#axios-api)
  - [è«‹æ±‚æ–¹æ³•åˆ¥å](#request-method-aliases)
  - [ä¸¦è¡Œ ğŸ‘](#concurrency-deprecated)
  - [å»ºç«‹å¯¦ä¾‹](#creating-an-instance)
  - [å¯¦ä¾‹æ–¹æ³•](#instance-methods)
  - [è«‹æ±‚è¨­å®š](#request-config)
  - [å›æ‡‰çµæ§‹](#response-schema)
  - [é è¨­è¨­å®š](#config-defaults)
    - [å…¨åŸŸ axios é è¨­å€¼](#global-axios-defaults)
    - [è‡ªè¨‚å¯¦ä¾‹é è¨­å€¼](#custom-instance-defaults)
    - [è¨­å®šå„ªå…ˆé †åº](#config-order-of-precedence)
  - [æ””æˆªå™¨](#interceptors)
    - [å¤šå€‹æ””æˆªå™¨](#multiple-interceptors)
  - [éŒ¯èª¤è™•ç†](#handling-errors)
  - [å–æ¶ˆè«‹æ±‚](#cancellation)
    - [AbortController](#abortcontroller)
    - [CancelToken ğŸ‘](#canceltoken-deprecated)
  - [ä½¿ç”¨ application/x-www-form-urlencoded æ ¼å¼](#using-applicationx-www-form-urlencoded-format)
    - [URLSearchParams](#urlsearchparams)
    - [æŸ¥è©¢å­—ä¸²](#query-string-older-browsers)
    - [ğŸ†• è‡ªå‹•åºåˆ—åŒ–](#-automatic-serialization-to-urlsearchparams)
  - [ä½¿ç”¨ multipart/form-data æ ¼å¼](#using-multipartform-data-format)
    - [FormData](#formdata)
    - [ğŸ†• è‡ªå‹•åºåˆ—åŒ–](#-automatic-serialization-to-formdata)
  - [æª”æ¡ˆä¸Šå‚³](#files-posting)
  - [HTML è¡¨å–®ä¸Šå‚³](#-html-form-posting-browser)
  - [ğŸ†• é€²åº¦ç›£æ§](#-progress-capturing)
  - [ğŸ†• æµé‡é™åˆ¶](#-progress-capturing)
  - [ğŸ†• AxiosHeaders](#-axiosheaders)
  - [ğŸ”¥ Fetch é…æ¥å™¨](#-fetch-adapter)
  - [Semver](#semver)
  - [Promises](#promises)
  - [TypeScript](#typescript)
  - [è³‡æº](#resources)
  - [è²¢ç»è€…](#credits)
  - [æˆæ¬Š](#license)

## åŠŸèƒ½ç‰¹é»

- å¯å¾ç€è¦½å™¨ç™¼é€ [XMLHttpRequests](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)
- å¯å¾ node.js ç™¼é€ [http](https://nodejs.org/api/http.html) è«‹æ±‚
- æ”¯æ´ [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) API
- è«‹æ±‚èˆ‡å›æ‡‰æ””æˆª
- è«‹æ±‚èˆ‡å›æ‡‰è³‡æ–™è½‰æ›
- è«‹æ±‚å¯å–æ¶ˆ
- è‡ªå‹•è½‰æ› [JSON](https://www.json.org/json-en.html) è³‡æ–™
- ğŸ†• è‡ªå‹•å°‡è³‡æ–™ç‰©ä»¶åºåˆ—åŒ–ç‚º `multipart/form-data` å’Œ `x-www-form-urlencoded` ä¸»é«”ç·¨ç¢¼
- æ”¯æ´ç”¨æˆ¶ç«¯é˜²è­· [XSRF](https://en.wikipedia.org/wiki/Cross-site_request_forgery) æ”»æ“Š

## ç€è¦½å™¨æ”¯æ´

![Chrome](https://raw.githubusercontent.com/alrra/browser-logos/main/src/chrome/chrome_48x48.png) | ![Firefox](https://raw.githubusercontent.com/alrra/browser-logos/main/src/firefox/firefox_48x48.png) | ![Safari](https://raw.githubusercontent.com/alrra/browser-logos/main/src/safari/safari_48x48.png) | ![Opera](https://raw.githubusercontent.com/alrra/browser-logos/main/src/opera/opera_48x48.png) | ![Edge](https://raw.githubusercontent.com/alrra/browser-logos/main/src/edge/edge_48x48.png) |
--- | --- | --- | --- | --- |
æœ€æ–°ç‰ˆ âœ” | æœ€æ–°ç‰ˆ âœ” | æœ€æ–°ç‰ˆ âœ” | æœ€æ–°ç‰ˆ âœ” | æœ€æ–°ç‰ˆ âœ” | 11 âœ” |

[![Browser Matrix](https://saucelabs.com/open_sauce/build_matrix/axios.svg)](https://saucelabs.com/u/axios)

## å®‰è£

### å¥—ä»¶ç®¡ç†å™¨

ä½¿ç”¨ npmï¼š

```bash
$ npm install axios
```

ä½¿ç”¨ bowerï¼š

```bash
$ bower install axios
```

ä½¿ç”¨ yarnï¼š

```bash
$ yarn add axios
```

ä½¿ç”¨ pnpmï¼š

```bash
$ pnpm add axios
```

ä½¿ç”¨ bunï¼š

```bash
$ bun add axios
```

å®‰è£å¥½å¥—ä»¶å¾Œï¼Œä½ å¯ä»¥ç”¨ `import` æˆ– `require` æ–¹å¼å°å…¥é€™å€‹å‡½å¼åº«ï¼š

```js
import axios, {isCancel, AxiosError} from 'axios';
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é è¨­åŒ¯å‡ºï¼Œå› ç‚ºå‘½ååŒ¯å‡ºåªæ˜¯å¾ Axios å·¥å» é‡æ–°åŒ¯å‡ºï¼š

```js
import axios from 'axios';

console.log(axios.isCancel('something'));
```

å¦‚æœä½ ä½¿ç”¨ `require` ä¾†å°å…¥ï¼Œåªèƒ½ä½¿ç”¨**é è¨­åŒ¯å‡º**ï¼š

```js
const axios = require('axios');

console.log(axios.isCancel('something'));
```

å°æ–¼æŸäº›æ‰“åŒ…å·¥å…·å’Œ ES6 éœæ…‹æª¢æŸ¥å·¥å…·ï¼Œä½ å¯èƒ½éœ€è¦é€™æ¨£åšï¼š

```js
import { default as axios } from 'axios';
```

å¦‚æœåœ¨è‡ªè¨‚æˆ–èˆŠç’°å¢ƒä¸­å°å…¥æ¨¡çµ„æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œå¯ä»¥å˜—è©¦ç›´æ¥å°å…¥æ¨¡çµ„å¥—ä»¶ï¼š

```js
const axios = require('axios/dist/browser/axios.cjs'); // browser commonJS bundle (ES2017)
// const axios = require('axios/dist/node/axios.cjs'); // node commonJS bundle (ES2017)
```

### CDN

ä½¿ç”¨ jsDelivr CDN (ES5 UMD ç€è¦½å™¨æ¨¡çµ„)ï¼š

```html
<script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
```

ä½¿ç”¨ unpkg CDNï¼š

```html
<script src="https://unpkg.com/axios@1.6.7/dist/axios.min.js"></script>
```

## ç¯„ä¾‹

> **æ³¨æ„**ï¼šCommonJS ç”¨æ³•  
> è‹¥è¦åœ¨ä½¿ç”¨ CommonJS çš„ `require()` å°å…¥æ–¹å¼ä¸‹å–å¾— TypeScript å‹åˆ¥ï¼ˆä»¥æ”¯æ´ intellisense / è‡ªå‹•å®Œæˆï¼‰ï¼Œè«‹ä½¿ç”¨ä¸‹åˆ—æ–¹å¼ï¼š
```js
import axios from 'axios';
//const axios = require('axios'); // èˆŠæœ‰æ–¹å¼

// ä»¥çµ¦å®šçš„ ID ç™¼é€ç”¨æˆ¶è«‹æ±‚
axios.get('/user?ID=12345')
  .then(function (response) {
    // è™•ç†æˆåŠŸ
    console.log(response);
  })
  .catch(function (error) {
    // è™•ç†éŒ¯èª¤
    console.log(error);
  })
  .finally(function () {
    // ç¸½æ˜¯åŸ·è¡Œ
  });

// ä¸Šè¿°è«‹æ±‚ä¹Ÿå¯ä»¥é€™æ¨£å¯«
axios.get('/user', {
    params: {
      ID: 12345
    }
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  })
  .finally(function () {
    // ç¸½æ˜¯åŸ·è¡Œ
  });

// æƒ³è¦ä½¿ç”¨ async/awaitï¼Ÿåœ¨å¤–éƒ¨å‡½æ•¸/æ–¹æ³•åŠ ä¸Š `async` é—œéµå­—ã€‚
async function getUser() {
  try {
    const response = await axios.get('/user?ID=12345');
    console.log(response);
  } catch (error) {
    console.error(error);
  }
}
```

> **æ³¨æ„**ï¼š`async/await` æ˜¯ ECMAScript 2017 çš„ä¸€éƒ¨åˆ†ï¼Œä¸¦ä¸æ”¯æ´ Internet Explorer åŠèˆŠç‰ˆç€è¦½å™¨ï¼Œè«‹è¬¹æ…ä½¿ç”¨ã€‚

åŸ·è¡Œ `POST` è«‹æ±‚

```js
axios.post('/user', {
    firstName: 'Fred',
    lastName: 'Flintstone'
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
```

åŸ·è¡Œå¤šå€‹ä¸¦è¡Œè«‹æ±‚

```js
function getUserAccount() {
  return axios.get('/user/12345');
}

function getUserPermissions() {
  return axios.get('/user/12345/permissions');
}

Promise.all([getUserAccount(), getUserPermissions()])
  .then(function (results) {
    const acct = results[0];
    const perm = results[1];
  });
```

## axios API

å¯ä»¥é€šéå‚³éç›¸é—œçš„è¨­å®š(config)çµ¦ `axios` ä¾†ç™¼é€è«‹æ±‚ã€‚

##### axios(config)

```js
// ç™¼é€ POST è«‹æ±‚
axios({
  method: 'post',
  url: '/user/12345',
  data: {
    firstName: 'Fred',
    lastName: 'Flintstone'
  }
});
```

```js
// åœ¨ node.js ä¸­å°é ç«¯åœ–ç‰‡ç™¼é€ GET è«‹æ±‚
axios({
  method: 'get',
  url: 'https://bit.ly/2mTM3nY',
  responseType: 'stream'
})
  .then(function (response) {
    response.data.pipe(fs.createWriteStream('ada_lovelace.jpg'))
  });
```

##### axios(url[, config])

```js
// ç™¼é€ä¸€å€‹ GET è«‹æ±‚ï¼ˆé è¨­æ–¹æ³•ï¼‰
axios('/user/12345');
```

### è«‹æ±‚æ–¹æ³•åˆ¥å

ç‚ºäº†æ–¹ä¾¿ï¼Œæ‰€æœ‰å¸¸ç”¨çš„è«‹æ±‚æ–¹æ³•éƒ½æä¾›äº†åˆ¥åã€‚

##### axios.request(config)
##### axios.get(url[, config])
##### axios.delete(url[, config])
##### axios.head(url[, config])
##### axios.options(url[, config])
##### axios.post(url[, data[, config]])
##### axios.put(url[, data[, config]])
##### axios.patch(url[, data[, config]])

###### æ³¨æ„
ä½¿ç”¨åˆ¥åæ–¹æ³•æ™‚ï¼Œ`url`ã€`method` å’Œ `data` å±¬æ€§ä¸éœ€è¦åœ¨ config ä¸­æŒ‡å®šã€‚

### ä½µç™¼ï¼ˆå·²æ£„ç”¨ï¼‰
è«‹ä½¿ç”¨ `Promise.all` å–ä»£ä»¥ä¸‹å‡½æ•¸ã€‚

è™•ç†ä½µç™¼è«‹æ±‚çš„è¼”åŠ©å‡½æ•¸ã€‚

axios.all(iterable)
axios.spread(callback)

### å»ºç«‹å¯¦ä¾‹

ä½ å¯ä»¥ç”¨è‡ªå®šç¾©çš„ config å»ºç«‹ä¸€å€‹æ–°çš„ axios å¯¦ä¾‹ã€‚

##### axios.create([config])

```js
const instance = axios.create({
  baseURL: 'https://some-domain.com/api/',
  timeout: 1000,
  headers: {'X-Custom-Header': 'foobar'}
});
```

### å¯¦ä¾‹æ–¹æ³•

å¯ç”¨çš„å¯¦ä¾‹æ–¹æ³•å¦‚ä¸‹æ‰€åˆ—ã€‚æŒ‡å®šçš„ config æœƒèˆ‡å¯¦ä¾‹çš„ config åˆä½µã€‚

##### axios#request(config)
##### axios#get(url[, config])
##### axios#delete(url[, config])
##### axios#head(url[, config])
##### axios#options(url[, config])
##### axios#post(url[, data[, config]])
##### axios#put(url[, data[, config]])
##### axios#patch(url[, data[, config]])
##### axios#getUri([config])

## è«‹æ±‚è¨­å®š

é€™äº›æ˜¯å¯ç”¨æ–¼ç™¼é€è«‹æ±‚çš„è¨­å®šé¸é …ã€‚åªæœ‰ `url` æ˜¯å¿…è¦çš„ã€‚å¦‚æœæœªæŒ‡å®š `method`ï¼Œè«‹æ±‚é è¨­ç‚º `GET`ã€‚

```js
{
  // `url` æ˜¯æœ¬æ¬¡è«‹æ±‚å°‡æœƒä½¿ç”¨çš„ä¼ºæœå™¨ URL
  url: '/user',

  // `method` æ˜¯è«‹æ±‚æ™‚è¦ä½¿ç”¨çš„è«‹æ±‚æ–¹æ³•
  method: 'get', // é è¨­å€¼

  // `baseURL` æœƒåŠ åœ¨ `url` å‰é¢ï¼Œé™¤é `url` æ˜¯çµ•å°è·¯å¾‘ä¸”é¸é … `allowAbsoluteUrls` è¨­ç‚º trueã€‚
  // å¯ä»¥ç‚º axios å¯¦ä¾‹è¨­å®š `baseURL`ï¼Œä»¥ä¾¿å‚³éç›¸å° URL çµ¦è©²å¯¦ä¾‹çš„æ–¹æ³•ã€‚
  baseURL: 'https://some-domain.com/api/',

  // `allowAbsoluteUrls` æ±ºå®šçµ•å° URL æ˜¯å¦æœƒè¦†è“‹å·²è¨­å®šçš„ `baseUrl`ã€‚
  // ç•¶è¨­ç‚º trueï¼ˆé è¨­ï¼‰ï¼Œ`url` çš„çµ•å°å€¼æœƒè¦†è“‹ `baseUrl`ã€‚
  // ç•¶è¨­ç‚º falseï¼Œ`url` çš„çµ•å°å€¼æœƒæ°¸é ç”± `baseUrl` åŠ åœ¨å‰é¢ã€‚
  allowAbsoluteUrls: true,

  // `transformRequest` å…è¨±åœ¨è³‡æ–™ç™¼é€åˆ°ä¼ºæœå™¨å‰ä¿®æ”¹è«‹æ±‚è³‡æ–™
  // åªé©ç”¨æ–¼ 'PUT', 'POST', 'PATCH' å’Œ 'DELETE' æ–¹æ³•
  // é™£åˆ—ä¸­çš„æœ€å¾Œä¸€å€‹å‡½å¼å¿…é ˆå›å‚³å­—ä¸²æˆ– Bufferã€ArrayBufferã€
  // FormData æˆ– Stream çš„å¯¦ä¾‹
  // ä½ å¯ä»¥ä¿®æ”¹ headers ç‰©ä»¶ã€‚
  transformRequest: [function (data, headers) {
    // å¯æ ¹æ“šéœ€æ±‚è½‰æ›è³‡æ–™
```
    return data;
  }],

  // `transformResponse` å…è¨±åœ¨å›å‚³è³‡æ–™å‚³éçµ¦ then/catch å‰é€²è¡Œè®Šæ›´
  transformResponse: [function (data) {
    // ä½ å¯ä»¥åœ¨é€™è£¡å°è³‡æ–™é€²è¡Œä»»ä½•éœ€è¦çš„è½‰æ›

    return data;
  }],

  // `headers` æ˜¯è¦ç™¼é€çš„è‡ªè¨‚æ¨™é ­
  headers: {'X-Requested-With': 'XMLHttpRequest'},

  // `params` æ˜¯èˆ‡è«‹æ±‚ä¸€èµ·ç™¼é€çš„ URL åƒæ•¸
  // å¿…é ˆæ˜¯ç´”ç‰©ä»¶æˆ– URLSearchParams ç‰©ä»¶
  params: {
    ID: 12345
  },
  
  // `paramsSerializer` æ˜¯ä¸€å€‹å¯é¸çš„è¨­å®šï¼Œå…è¨±ä½ è‡ªè¨‚åºåˆ—åŒ– `params` çš„æ–¹å¼ã€‚
  paramsSerializer: {

    // è‡ªè¨‚ç·¨ç¢¼å™¨å‡½å¼ï¼Œä»¥è¿­ä»£æ–¹å¼å‚³é€ key/value å°ã€‚
    encode?: (param: string): string => { /* åœ¨é€™è£¡è‡ªè¨‚æ“ä½œä¸¦å›å‚³è½‰æ›å¾Œçš„å­—ä¸² */ }, 
    
    // é‡å°æ•´å€‹åƒæ•¸è‡ªè¨‚åºåˆ—åŒ–å‡½å¼ã€‚å…è¨±ä½¿ç”¨è€…æ¨¡æ“¬ 1.x ä¹‹å‰çš„è¡Œç‚ºã€‚
    serialize?: (params: Record<string, any>, options?: ParamsSerializerOptions ), 
    
    // è¨­å®šé™£åˆ—ç´¢å¼•åœ¨åƒæ•¸ä¸­çš„æ ¼å¼ã€‚
    indexes: false // æœ‰ä¸‰ç¨®å¯ç”¨é¸é …ï¼š(1) indexes: nullï¼ˆä¸åŠ æ‹¬è™Ÿï¼‰ï¼Œ(2)ï¼ˆé è¨­ï¼‰indexes: falseï¼ˆç©ºæ‹¬è™Ÿï¼‰ï¼Œ(3) indexes: trueï¼ˆåŠ ç´¢å¼•çš„æ‹¬è™Ÿï¼‰ã€‚
  },

  // `data` æ˜¯è¦ä½œç‚ºè«‹æ±‚ä¸»é«”ç™¼é€çš„è³‡æ–™
  // åªé©ç”¨æ–¼ 'PUT'ã€'POST'ã€'DELETE' å’Œ 'PATCH' è«‹æ±‚æ–¹æ³•
  // ç•¶æœªè¨­å®š `transformRequest` æ™‚ï¼Œå¿…é ˆæ˜¯ä»¥ä¸‹å…¶ä¸­ä¸€ç¨®å‹æ…‹ï¼š
  // - å­—ä¸²ã€ç´”ç‰©ä»¶ã€ArrayBufferã€ArrayBufferViewã€URLSearchParams
  // - åƒ…é™ç€è¦½å™¨ï¼šFormDataã€Fileã€Blob
  // - åƒ…é™ Nodeï¼šStreamã€Bufferã€FormDataï¼ˆform-data å¥—ä»¶ï¼‰
  data: {
    firstName: 'Fred'
  },

  // å‚³é€è³‡æ–™åˆ°ä¸»é«”çš„èªæ³•æ›¿ä»£æ–¹å¼
  // æ–¹æ³•ç‚º post
  // åªæœƒå‚³é€å€¼ï¼Œä¸æœƒå‚³é€éµ
  data: 'Country=Brasil&City=Belo Horizonte',

  // `timeout` æŒ‡å®šè«‹æ±‚é€¾æ™‚å‰çš„æ¯«ç§’æ•¸ã€‚
  // å¦‚æœè«‹æ±‚è¶…é `timeout`ï¼Œè«‹æ±‚æœƒè¢«ä¸­æ­¢ã€‚
  timeout: 1000, // é è¨­ç‚º `0`ï¼ˆç„¡é€¾æ™‚ï¼‰

  // `withCredentials` æŒ‡ç¤ºæ˜¯å¦æ‡‰ä½¿ç”¨èªè­‰é€²è¡Œè·¨ç«™å­˜å–æ§åˆ¶è«‹æ±‚
  withCredentials: false, // é è¨­å€¼

  // `adapter` å…è¨±è‡ªè¨‚è«‹æ±‚è™•ç†ï¼Œæ–¹ä¾¿æ¸¬è©¦ã€‚
  // å›å‚³ä¸€å€‹ promise ä¸¦æä¾›æœ‰æ•ˆçš„å›æ‡‰ï¼ˆè«‹åƒé–± lib/adapters/README.mdï¼‰
  adapter: function (config) {
    /* ... */
  },
  // ä½ ä¹Ÿå¯ä»¥è¨­å®šå…§å»º adapter çš„åç¨±ï¼Œæˆ–æä¾›ä¸€å€‹åç¨±é™£åˆ—
  // ä»¥é¸æ“‡åœ¨ç’°å¢ƒä¸­å¯ç”¨çš„ç¬¬ä¸€å€‹
  adapter: 'xhr', // 'fetch' | 'http' | ['xhr', 'http', 'fetch']

  // `auth` è¡¨ç¤ºè¦ä½¿ç”¨ HTTP Basic èªè­‰ï¼Œä¸¦æä¾›èªè­‰è³‡è¨Šã€‚
  // é€™æœƒè¨­å®šä¸€å€‹ `Authorization` æ¨™é ­ï¼Œæœƒè¦†è“‹ä½ ç”¨ `headers` è¨­å®šçš„ä»»ä½•ç¾æœ‰
  // `Authorization` è‡ªè¨‚æ¨™é ­ã€‚
  // è«‹æ³¨æ„ï¼Œåªæœ‰ HTTP Basic èªè­‰å¯é€éæ­¤åƒæ•¸è¨­å®šã€‚
  // è‹¥éœ€ Bearer token ç­‰ï¼Œè«‹æ”¹ç”¨ `Authorization` è‡ªè¨‚æ¨™é ­ã€‚
  auth: {
    username: 'janedoe',
    password: 's00pers3cret'
  },

  // `responseType` è¡¨ç¤ºä¼ºæœå™¨å°‡å›æ‡‰çš„è³‡æ–™å‹æ…‹
  // é¸é …æœ‰ï¼š'arraybuffer'ã€'document'ã€'json'ã€'text'ã€'stream'
  //   åƒ…ç€è¦½å™¨ï¼š'blob'
  responseType: 'json', // é è¨­å€¼

  // `responseEncoding` è¡¨ç¤ºè§£ç¢¼å›æ‡‰æ™‚è¦ä½¿ç”¨çš„ç·¨ç¢¼ï¼ˆåƒ…é™ Node.jsï¼‰
  // æ³¨æ„ï¼šå°æ–¼ 'stream' çš„ `responseType` æˆ–ç”¨æˆ¶ç«¯è«‹æ±‚å°‡è¢«å¿½ç•¥
  // é¸é …æœ‰ï¼š'ascii'ã€'ASCII'ã€'ansi'ã€'ANSI'ã€'binary'ã€'BINARY'ã€'base64'ã€'BASE64'ã€'base64url'ã€
  // 'BASE64URL'ã€'hex'ã€'HEX'ã€'latin1'ã€'LATIN1'ã€'ucs-2'ã€'UCS-2'ã€'ucs2'ã€'UCS2'ã€'utf-8'ã€'UTF-8'ã€
  // 'utf8'ã€'UTF8'ã€'utf16le'ã€'UTF16LE'
  responseEncoding: 'utf8', // é è¨­å€¼

  // `xsrfCookieName` æ˜¯è¦ä½œç‚º xsrf token å€¼ä½¿ç”¨çš„ cookie åç¨±
  xsrfCookieName: 'XSRF-TOKEN', // é è¨­å€¼

  // `xsrfHeaderName` æ˜¯æ”œå¸¶ xsrf token å€¼çš„ http æ¨™é ­åç¨±
  xsrfHeaderName: 'X-XSRF-TOKEN', // é è¨­å€¼
    
  // `undefined`ï¼ˆé è¨­ï¼‰- åƒ…å°åŒæºè«‹æ±‚è¨­ç½® XSRF æ¨™é ­
  withXSRFToken: boolean | undefined | ((config: InternalAxiosRequestConfig) => boolean | undefined),

  // `onUploadProgress` å…è¨±ä¸Šå‚³æ™‚è™•ç†é€²åº¦äº‹ä»¶
  // ç€è¦½å™¨èˆ‡ node.js
  onUploadProgress: function ({loaded, total, progress, bytes, estimated, rate, upload = true}) {
```markdown
    // ä½ å¯ä»¥éš¨æ„è™•ç† Axios çš„é€²åº¦äº‹ä»¶
  },

  // `onDownloadProgress` å…è¨±è™•ç†ä¸‹è¼‰çš„é€²åº¦äº‹ä»¶
  // ç€è¦½å™¨ & node.js
  onDownloadProgress: function ({loaded, total, progress, bytes, estimated, rate, download = true}) {
    // ä½ å¯ä»¥éš¨æ„è™•ç† Axios çš„é€²åº¦äº‹ä»¶
  },

  // `maxContentLength` å®šç¾©åœ¨ node.js ä¸­å…è¨±çš„ HTTP å›æ‡‰å…§å®¹æœ€å¤§å¤§å°ï¼ˆä½å…ƒçµ„ï¼‰
  maxContentLength: 2000,

  // `maxBodyLength`ï¼ˆåƒ…é™ Node é¸é …ï¼‰å®šç¾©åœ¨ node.js ä¸­å…è¨±çš„ HTTP è«‹æ±‚å…§å®¹æœ€å¤§å¤§å°ï¼ˆä½å…ƒçµ„ï¼‰
  maxBodyLength: 2000,

  // `validateStatus` å®šç¾©æ˜¯å¦é‡å°çµ¦å®šçš„ HTTP å›æ‡‰ç‹€æ…‹ç¢¼è§£ææˆ–æ‹’çµ• promiseã€‚
  // å¦‚æœ `validateStatus` å›å‚³ `true`ï¼ˆæˆ–è¨­ç‚º `null` æˆ– `undefined`ï¼‰ï¼Œpromise æœƒè¢«è§£æï¼›
  // å¦å‰‡ promise æœƒè¢«æ‹’çµ•ã€‚
  validateStatus: function (status) {
    return status >= 200 && status < 300; // é è¨­å€¼
  },

  // `maxRedirects` å®šç¾©åœ¨ node.js ä¸­å…è¨±è·Ÿéš¨çš„æœ€å¤§é‡å°æ¬¡æ•¸ã€‚
  // å¦‚æœè¨­ç‚º 0ï¼Œå‰‡ä¸è·Ÿéš¨ä»»ä½•é‡å°ã€‚
  maxRedirects: 21, // é è¨­å€¼

  // `beforeRedirect` å®šç¾©ä¸€å€‹åœ¨é‡å°å‰æœƒè¢«å‘¼å«çš„å‡½å¼ã€‚
  // ä½¿ç”¨æ­¤å‡½å¼å¯åœ¨é‡å°æ™‚èª¿æ•´è«‹æ±‚é¸é …ï¼Œ
  // æª¢æŸ¥æœ€æ–°çš„å›æ‡‰æ¨™é ­ï¼Œ
  // æˆ–é€éæ‹‹å‡ºéŒ¯èª¤å–æ¶ˆè«‹æ±‚
  // å¦‚æœ maxRedirects è¨­ç‚º 0ï¼Œå‰‡ä¸æœƒä½¿ç”¨ `beforeRedirect`ã€‚
  beforeRedirect: (options, { headers }) => {
    if (options.hostname === "example.com") {
      options.auth = "user:password";
    }
  },

  // `socketPath` å®šç¾©åœ¨ node.js ä¸­è¦ä½¿ç”¨çš„ UNIX Socketã€‚
  // ä¾‹å¦‚ '/var/run/docker.sock' å¯å‚³é€è«‹æ±‚åˆ° docker daemonã€‚
  // åªèƒ½æŒ‡å®š `socketPath` æˆ– `proxy` å…¶ä¸­ä¹‹ä¸€ã€‚
  // å¦‚æœå…©è€…éƒ½æŒ‡å®šï¼Œå‰‡æœƒä½¿ç”¨ `socketPath`ã€‚
  socketPath: null, // é è¨­å€¼
  
  // `transport` æ±ºå®šè«‹æ±‚æ‰€ä½¿ç”¨çš„å‚³è¼¸æ–¹å¼ã€‚
  // å¦‚æœå·²å®šç¾©ï¼Œå‰‡æœƒä½¿ç”¨å®ƒã€‚å¦å‰‡ï¼Œå¦‚æœ `maxRedirects` ç‚º 0ï¼Œ
  // å‰‡æœƒä¾æ“š `protocol` æŒ‡å®šçš„å”è­°é è¨­ä½¿ç”¨ `http` æˆ– `https` å‡½å¼åº«ã€‚
  // å¦å‰‡ï¼Œæœƒä¾æ“šå”è­°ä½¿ç”¨ `httpFollow` æˆ– `httpsFollow` å‡½å¼åº«ï¼Œ
  // é€™äº›å‡½å¼åº«å¯ä»¥è™•ç†é‡å°ã€‚
  transport: undefined, // é è¨­å€¼

  // `httpAgent` å’Œ `httpsAgent` å®šç¾©åœ¨ node.js ä¸­é€²è¡Œ http å’Œ https è«‹æ±‚æ™‚è¦ä½¿ç”¨çš„è‡ªè¨‚ agentã€‚
  // é€™å…è¨±åŠ å…¥å¦‚ `keepAlive` ç­‰é¸é …ï¼Œåœ¨ Node.js v19.0.0 ä¹‹å‰é è¨­æœªå•Ÿç”¨ã€‚
  // åœ¨ Node.js v19.0.0 ä¹‹å¾Œï¼Œä¸éœ€è‡ªè¨‚ agent ä¹Ÿèƒ½å•Ÿç”¨ `keepAlive`ï¼Œ
  // å› ç‚º `http.globalAgent` é è¨­å·²å•Ÿç”¨ `keepAlive`ã€‚
  httpAgent: new http.Agent({ keepAlive: true }),
  httpsAgent: new https.Agent({ keepAlive: true }),

  // `proxy` å®šç¾©ä»£ç†ä¼ºæœå™¨çš„ä¸»æ©Ÿåç¨±ã€åŸ è™Ÿèˆ‡å”è­°ã€‚
  // ä½ ä¹Ÿå¯ä»¥é€éå‚³çµ±çš„ `http_proxy` å’Œ `https_proxy` ç’°å¢ƒè®Šæ•¸å®šç¾©ä»£ç†ã€‚
  // å¦‚æœä½¿ç”¨ç’°å¢ƒè®Šæ•¸é€²è¡Œä»£ç†è¨­å®šï¼Œä¹Ÿå¯ä»¥å®šç¾© `no_proxy` ç’°å¢ƒè®Šæ•¸ï¼Œ
  // å…¶å€¼ç‚ºä¸æ‡‰ä»£ç†çš„ç¶²åŸŸï¼ˆä»¥é€—è™Ÿåˆ†éš”çš„æ¸…å–®ï¼‰ã€‚
  // ä½¿ç”¨ `false` å¯åœç”¨ä»£ç†ï¼Œä¸¦å¿½ç•¥ç’°å¢ƒè®Šæ•¸ã€‚
  // `auth` è¡¨ç¤ºæ‡‰ä½¿ç”¨ HTTP Basic èªè­‰é€£æ¥ä»£ç†ï¼Œä¸¦æä¾›èªè­‰è³‡è¨Šã€‚
  // é€™æœƒè¨­å®š `Proxy-Authorization` æ¨™é ­ï¼Œè¦†è“‹ä½ é€é `headers` è¨­å®šçš„ä»»ä½•ç¾æœ‰
  // `Proxy-Authorization` è‡ªè¨‚æ¨™é ­ã€‚
  // å¦‚æœä»£ç†ä¼ºæœå™¨ä½¿ç”¨ HTTPSï¼Œå¿…é ˆå°‡ protocol è¨­ç‚º `https`ã€‚
  proxy: {
    protocol: 'https',
    host: '127.0.0.1',
    // hostname: '127.0.0.1' // å¦‚æœåŒæ™‚å®šç¾©ï¼Œå„ªå…ˆä½¿ç”¨ 'hostname'
    port: 9000,
    auth: {
      username: 'mikeymike',
      password: 'rapunz3l'
    }
  },

  // `cancelToken` æŒ‡å®šå¯ç”¨æ–¼å–æ¶ˆè«‹æ±‚çš„å–æ¶ˆæ¬Šæ–
  //ï¼ˆè©³è¦‹ä¸‹æ–¹ã€Œå–æ¶ˆã€ç« ç¯€ï¼‰
  cancelToken: new CancelToken(function (cancel) {
  }),

  // å¦ä¸€ç¨®ä½¿ç”¨ AbortController å–æ¶ˆ Axios è«‹æ±‚çš„æ–¹æ³•
  signal: new AbortController().signal,

  // `decompress` æŒ‡ç¤ºæ˜¯å¦è¦è‡ªå‹•è§£å£“å›æ‡‰ä¸»é«”ã€‚
  // å¦‚æœè¨­ç‚º `true`ï¼Œä¹Ÿæœƒå¾æ‰€æœ‰å·²è§£å£“å›æ‡‰çš„ response ç‰©ä»¶ä¸­ç§»é™¤ 'content-encoding' æ¨™é ­
  // - åƒ…é©ç”¨æ–¼ Nodeï¼ˆXHR ç„¡æ³•é—œé–‰è§£å£“ç¸®ï¼‰
  decompress: true, // é è¨­å€¼

  // `insecureHTTPParser` å¸ƒæ—å€¼ã€‚
  // æŒ‡ç¤ºæ˜¯å¦ä½¿ç”¨å¯æ¥å—ç„¡æ•ˆ HTTP æ¨™é ­çš„ä¸å®‰å…¨ HTTP è§£æå™¨ã€‚
  // é€™å¯èƒ½å…è¨±èˆ‡ä¸ç¬¦åˆæ¨™æº–çš„ HTTP å¯¦ä½œäº’é€šã€‚
  // æ‡‰é¿å…ä½¿ç”¨ä¸å®‰å…¨çš„è§£æå™¨ã€‚
  // åƒè¦‹é¸é … https://nodejs.org/dist/latest-v12.x/docs/api/http.html#http_http_request_url_options_callback
```
```
// å¦è«‹åƒé–± https://nodejs.org/en/blog/vulnerability/february-2020-security-releases/#strict-http-header-parsing-none
  insecureHTTPParser: undefined, // é è¨­å€¼

  // èˆŠç‰ˆæœ¬å‘ä¸‹ç›¸å®¹çš„éæ¸¡é¸é …ï¼Œæœªä¾†ç‰ˆæœ¬å¯èƒ½æœƒç§»é™¤
  transitional: {
    // éœé»˜ JSON è§£ææ¨¡å¼
    // `true`  - å¿½ç•¥ JSON è§£æéŒ¯èª¤ï¼Œè§£æå¤±æ•—æ™‚å°‡ response.data è¨­ç‚º nullï¼ˆèˆŠè¡Œç‚ºï¼‰
    // `false` - è‹¥ JSON è§£æå¤±æ•—å‰‡æ‹‹å‡º SyntaxErrorï¼ˆæ³¨æ„ï¼šresponseType å¿…é ˆè¨­ç‚º 'json'ï¼‰
    silentJSONParsing: true, // ç›®å‰ Axios ç‰ˆæœ¬çš„é è¨­å€¼

    // å³ä½¿ `responseType` ä¸æ˜¯ 'json'ï¼Œä¹Ÿå˜—è©¦å°‡å›æ‡‰å­—ä¸²è§£æç‚º JSON
    forcedJSONParsing: true,

    // è«‹æ±‚é€¾æ™‚æ™‚ï¼Œæ‹‹å‡º ETIMEDOUT éŒ¯èª¤è€Œéä¸€èˆ¬ ECONNABORTED
    clarifyTimeoutError: false,
  },

  env: {
    // ç”¨æ–¼è‡ªå‹•å°‡æœ‰æ•ˆè² è¼‰åºåˆ—åŒ–æˆ FormData ç‰©ä»¶çš„ FormData é¡åˆ¥
    FormData: window?.FormData || global?.FormData
  },

  formSerializer: {
      visitor: (value, key, path, helpers) => {}, // è‡ªå®šç¾© visitor å‡½å¼ç”¨æ–¼åºåˆ—åŒ–è¡¨å–®æ•¸å€¼
      dots: boolean, // ä½¿ç”¨é»è™Ÿæ ¼å¼è€Œéä¸­æ‹¬è™Ÿæ ¼å¼
      metaTokens: boolean, // ä¿ç•™åƒæ•¸ key çš„ç‰¹æ®Šçµå°¾å¦‚ {}
      indexes: boolean, // é™£åˆ—ç´¢å¼•æ ¼å¼ null - ç„¡æ‹¬è™Ÿ, false - ç©ºæ‹¬è™Ÿ, true - æœ‰ç´¢å¼•çš„æ‹¬è™Ÿ
  },

  // åƒ…é™ http adapterï¼ˆnode.jsï¼‰
  maxRate: [
    100 * 1024, // ä¸Šå‚³é™åˆ¶ 100KB/s,
    100 * 1024  // ä¸‹è¼‰é™åˆ¶ 100KB/s
  ]
}
```

## å›æ‡‰çµæ§‹ï¼ˆResponse Schemaï¼‰

ä¸€å€‹è«‹æ±‚çš„å›æ‡‰åŒ…å«ä»¥ä¸‹è³‡è¨Šã€‚

```js
{
  // `data` æ˜¯ä¼ºæœå™¨æä¾›çš„å›æ‡‰å…§å®¹
  data: {},

  // `status` æ˜¯ä¼ºæœå™¨å›æ‡‰çš„ HTTP ç‹€æ…‹ç¢¼
  status: 200,

  // `statusText` æ˜¯ä¼ºæœå™¨å›æ‡‰çš„ HTTP ç‹€æ…‹è¨Šæ¯
  statusText: 'OK',

  // `headers` æ˜¯ä¼ºæœå™¨å›æ‡‰çš„ HTTP æ¨™é ­
  // æ‰€æœ‰æ¨™é ­åç¨±çš†ç‚ºå°å¯«ï¼Œå¯ç”¨æ–¹æ‹¬è™Ÿèªæ³•å­˜å–ã€‚
  // ç¯„ä¾‹ï¼š`response.headers['content-type']`
  headers: {},

  // `config` æ˜¯å‚³éçµ¦ `axios` çš„è«‹æ±‚è¨­å®š
  config: {},

  // `request` æ˜¯ç”¢ç”Ÿæ­¤å›æ‡‰çš„è«‹æ±‚
  // åœ¨ node.jsï¼ˆé‡å®šå‘æ™‚ï¼‰ç‚ºæœ€å¾Œä¸€å€‹ ClientRequest å¯¦ä¾‹
  // åœ¨ç€è¦½å™¨ä¸­å‰‡ç‚º XMLHttpRequest å¯¦ä¾‹
  request: {}
}
```

ç•¶ä½¿ç”¨ `then` æ™‚ï¼Œä½ æœƒæ”¶åˆ°å¦‚ä¸‹çš„å›æ‡‰ï¼š

```js
axios.get('/user/12345')
  .then(function (response) {
    console.log(response.data);
    console.log(response.status);
    console.log(response.statusText);
    console.log(response.headers);
    console.log(response.config);
  });
```

ç•¶ä½¿ç”¨ `catch`ï¼Œæˆ–åœ¨ `then` çš„ç¬¬äºŒå€‹åƒæ•¸å‚³å…¥ [æ‹’çµ•å›å‘¼å‡½å¼ï¼ˆrejection callbackï¼‰](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then) æ™‚ï¼Œå›æ‡‰å°‡å¯é€é `error` ç‰©ä»¶å–å¾—ï¼Œè©³è¦‹[éŒ¯èª¤è™•ç†](#handling-errors)ç« ç¯€ã€‚

## è¨­å®šé è¨­å€¼ï¼ˆConfig Defaultsï¼‰

ä½ å¯ä»¥æŒ‡å®šå¥—ç”¨æ–¼æ¯å€‹è«‹æ±‚çš„é è¨­è¨­å®šã€‚

### å…¨åŸŸ axios é è¨­å€¼

```js
axios.defaults.baseURL = 'https://api.example.com';

// é‡è¦ï¼šå¦‚æœ axios ç”¨æ–¼å¤šå€‹ç¶²åŸŸï¼ŒAUTH_TOKEN æœƒè¢«ç™¼é€åˆ°æ‰€æœ‰ç¶²åŸŸã€‚
// å¦‚éœ€åƒ…å°ç‰¹å®šç¶²åŸŸç™¼é€ï¼Œè«‹åƒè€ƒä¸‹æ–¹è‡ªè¨‚å¯¦ä¾‹é è¨­å€¼çš„ç¯„ä¾‹ã€‚
axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;

axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
```

### è‡ªè¨‚å¯¦ä¾‹é è¨­å€¼
```
```js
// å»ºç«‹å¯¦ä¾‹æ™‚è¨­å®šé è¨­çµ„æ…‹
const instance = axios.create({
  baseURL: 'https://api.example.com'
});

// åœ¨å»ºç«‹å¯¦ä¾‹å¾Œä¿®æ”¹é è¨­å€¼
instance.defaults.headers.common['Authorization'] = AUTH_TOKEN;
```

### çµ„æ…‹å„ªå…ˆé †åº

çµ„æ…‹æœƒä¾ç…§å„ªå…ˆé †åºé€²è¡Œåˆä½µã€‚é †åºç‚ºï¼šåœ¨ [lib/defaults/index.js](https://github.com/axios/axios/blob/main/lib/defaults/index.js#L49) ä¸­å®šç¾©çš„å‡½å¼åº«é è¨­å€¼ï¼Œç„¶å¾Œæ˜¯å¯¦ä¾‹çš„ `defaults` å±¬æ€§ï¼Œæœ€å¾Œæ˜¯è«‹æ±‚çš„ `config` åƒæ•¸ã€‚å¾Œè€…æœƒè¦†è“‹å‰è€…ã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹ç¯„ä¾‹ã€‚

```js
// ä½¿ç”¨å‡½å¼åº«æä¾›çš„é è¨­çµ„æ…‹å»ºç«‹å¯¦ä¾‹
// æ­¤æ™‚ï¼Œtimeout çµ„æ…‹å€¼ç‚º `0`ï¼Œé€™æ˜¯å‡½å¼åº«çš„é è¨­å€¼
const instance = axios.create();

// è¦†è“‹å‡½å¼åº«çš„ timeout é è¨­å€¼
// ç¾åœ¨æ‰€æœ‰ä½¿ç”¨æ­¤å¯¦ä¾‹çš„è«‹æ±‚éƒ½æœƒç­‰å€™ 2.5 ç§’æ‰æœƒé€¾æ™‚
instance.defaults.timeout = 2500;

// ç”±æ–¼é€™å€‹è«‹æ±‚é æœŸæœƒèŠ±è¼ƒé•·æ™‚é–“ï¼Œå› æ­¤å–®ç¨è¦†è“‹ timeout
instance.get('/longRequest', {
  timeout: 5000
});
```

## æ””æˆªå™¨

ä½ å¯ä»¥åœ¨ `then` æˆ– `catch` è™•ç†ä¹‹å‰ï¼Œæ””æˆªè«‹æ±‚æˆ–å›æ‡‰ã€‚

```js

const instance = axios.create();

// æ–°å¢è«‹æ±‚æ””æˆªå™¨
instance.interceptors.request.use(function (config) {
    // åœ¨è«‹æ±‚ç™¼é€å‰åšäº›è™•ç†
    return config;
  }, function (error) {
    // è™•ç†è«‹æ±‚éŒ¯èª¤
    return Promise.reject(error);
  });

// æ–°å¢å›æ‡‰æ””æˆªå™¨
instance.interceptors.response.use(function (response) {
    // ä»»ä½• 2xx ç¯„åœå…§çš„ç‹€æ…‹ç¢¼éƒ½æœƒè§¸ç™¼æ­¤å‡½å¼
    // è™•ç†å›æ‡‰è³‡æ–™
    return response;
  }, function (error) {
    // ä»»ä½•ä¸åœ¨ 2xx ç¯„åœå…§çš„ç‹€æ…‹ç¢¼éƒ½æœƒè§¸ç™¼æ­¤å‡½å¼
    // è™•ç†å›æ‡‰éŒ¯èª¤
    return Promise.reject(error);
  });
```

å¦‚æœä½ éœ€è¦ä¹‹å¾Œç§»é™¤æ””æˆªå™¨ï¼Œå¯ä»¥é€™éº¼åšã€‚

```js
const instance = axios.create();
const myInterceptor = instance.interceptors.request.use(function () {/*...*/});
axios.interceptors.request.eject(myInterceptor);
```

ä½ ä¹Ÿå¯ä»¥æ¸…é™¤æ‰€æœ‰è«‹æ±‚æˆ–å›æ‡‰çš„æ””æˆªå™¨ã€‚
```js
const instance = axios.create();
instance.interceptors.request.use(function () {/*...*/});
instance.interceptors.request.clear(); // ç§»é™¤æ‰€æœ‰è«‹æ±‚æ””æˆªå™¨
instance.interceptors.response.use(function () {/*...*/});
instance.interceptors.response.clear(); // ç§»é™¤æ‰€æœ‰å›æ‡‰æ””æˆªå™¨
```

ä½ å¯ä»¥å°‡æ””æˆªå™¨åŠ åˆ°è‡ªè¨‚çš„ axios å¯¦ä¾‹ä¸Šã€‚

```js
const instance = axios.create();
instance.interceptors.request.use(function () {/*...*/});
```

ç•¶ä½ æ–°å¢è«‹æ±‚æ””æˆªå™¨æ™‚ï¼Œé è¨­æœƒè¢«è¦–ç‚ºéåŒæ­¥ã€‚é€™å¯èƒ½æœƒå°è‡´ç•¶ä¸»åŸ·è¡Œç·’è¢«é˜»å¡æ™‚ï¼Œ
axios è«‹æ±‚åŸ·è¡Œæœ‰å»¶é²ï¼ˆæ””æˆªå™¨åº•å±¤æœƒå»ºç«‹ä¸€å€‹ promiseï¼Œè«‹æ±‚æœƒè¢«æ”¾åˆ°åº•éƒ¨çš„å‘¼å«å †ç–Šï¼‰ã€‚å¦‚æœä½ çš„è«‹æ±‚æ””æˆªå™¨æ˜¯åŒæ­¥çš„ï¼Œå¯ä»¥åœ¨é¸é …ç‰©ä»¶ä¸­åŠ å…¥ä¸€å€‹æ——æ¨™ï¼Œ
è®“ axios ä»¥åŒæ­¥æ–¹å¼åŸ·è¡Œç¨‹å¼ç¢¼ï¼Œé¿å…è«‹æ±‚åŸ·è¡Œå»¶é²ã€‚

```js
axios.interceptors.request.use(function (config) {
  config.headers.test = 'I am only a header!';
  return config;
}, null, { synchronous: true });
```

å¦‚æœä½ æƒ³æ ¹æ“šåŸ·è¡Œéšæ®µæª¢æŸ¥ä¾†åŸ·è¡Œç‰¹å®šæ””æˆªå™¨ï¼Œ
å¯ä»¥åœ¨é¸é …ç‰©ä»¶ä¸­åŠ å…¥ `runWhen` å‡½å¼ã€‚ç•¶ä¸”åƒ…ç•¶ `runWhen` çš„å›å‚³å€¼ç‚º `false` æ™‚ï¼Œè©²è«‹æ±‚æ””æˆªå™¨æ‰ä¸æœƒè¢«åŸ·è¡Œã€‚æ­¤å‡½å¼æœƒæ¥æ”¶ config
ç‰©ä»¶ä½œç‚ºåƒæ•¸ï¼ˆä½ ä¹Ÿå¯ä»¥ç¹«çµè‡ªå·±çš„åƒæ•¸ï¼‰ã€‚é€™åœ¨ä½ æœ‰éåŒæ­¥è«‹æ±‚æ””æˆªå™¨åªéœ€åœ¨ç‰¹å®šæ™‚æ©ŸåŸ·è¡Œæ™‚æœƒå¾ˆæ–¹ä¾¿ã€‚
```
```js
function onGetCall(config) {
  return config.method === 'get';
}
axios.interceptors.request.use(function (config) {
  config.headers.test = 'special get headers';
  return config;
}, null, { runWhen: onGetCall });
```

> **æ³¨æ„ï¼š** options åƒæ•¸ï¼ˆåŒ…å« `synchronous` å’Œ `runWhen` å±¬æ€§ï¼‰ç›®å‰åƒ…æ”¯æ´è«‹æ±‚æ””æˆªå™¨ã€‚

### å¤šé‡æ””æˆªå™¨

å‡è¨­ä½ æ·»åŠ å¤šå€‹å›æ‡‰æ””æˆªå™¨ï¼Œ
ç•¶å›æ‡‰è¢« fulfill æ™‚
- æ¯å€‹æ””æˆªå™¨éƒ½æœƒè¢«åŸ·è¡Œ
- å®ƒå€‘æŒ‰ç…§è¢«æ·»åŠ çš„é †åºåŸ·è¡Œ
- åªæœ‰æœ€å¾Œä¸€å€‹æ””æˆªå™¨çš„çµæœæœƒè¢«å›å‚³
- æ¯å€‹æ””æˆªå™¨éƒ½æœƒæ”¶åˆ°å…¶å‰ä¸€å€‹æ””æˆªå™¨çš„çµæœ
- ç•¶ fulfillment-interceptor æ‹‹å‡ºç•°å¸¸æ™‚
    - ä¹‹å¾Œçš„ fulfillment-interceptor ä¸æœƒè¢«å‘¼å«
    - ä¹‹å¾Œçš„ rejection-interceptor æœƒè¢«å‘¼å«
    - ä¸€æ—¦è¢«æ•ç²ï¼Œæ¥ä¸‹ä¾†çš„ fulfill-interceptor æœƒå†æ¬¡è¢«å‘¼å«ï¼ˆå°±åƒ promise éˆé‚£æ¨£ï¼‰ã€‚

é–±è®€ [æ””æˆªå™¨æ¸¬è©¦](https://raw.githubusercontent.com/axios/axios/v1.x/./test/specs/interceptors.spec.js) å¯æŸ¥çœ‹æ‰€æœ‰ç›¸é—œç¨‹å¼ç¢¼ã€‚

## éŒ¯èª¤é¡å‹

Axios å¯èƒ½å‡ºç¾å¤šç¨®ä¸åŒçš„éŒ¯èª¤è¨Šæ¯ï¼Œé€™äº›è¨Šæ¯å¯æä¾›é—œæ–¼éŒ¯èª¤ç´°ç¯€çš„åŸºæœ¬è³‡è¨Šï¼Œä¸¦æŒ‡å¼•é™¤éŒ¯æ–¹å‘ã€‚

Axios éŒ¯èª¤çš„ä¸€èˆ¬çµæ§‹å¦‚ä¸‹ï¼š
| å±¬æ€§      | å®šç¾©  |
| -------- | ----------  |
| message  | éŒ¯èª¤è¨Šæ¯çš„ç°¡è¦æ‘˜è¦ä»¥åŠå¤±æ•—æ™‚çš„ç‹€æ…‹ã€‚ |
| name     | å®šç¾©éŒ¯èª¤ä¾†æºã€‚å°æ–¼ axios ä¾†èªªï¼Œç¸½æ˜¯ 'AxiosError'ã€‚ |
| stack    | æä¾›éŒ¯èª¤çš„å †ç–Šè¿½è¹¤ã€‚ | 
| config   | ä¸€å€‹ axios config ç‰©ä»¶ï¼ŒåŒ…å«ç”¨æˆ¶åœ¨ç™¼å‡ºè«‹æ±‚æ™‚è¨­å®šçš„ç‰¹å®šå¯¦ä¾‹çµ„æ…‹ |
| code     | è¡¨ç¤ºç”± axios è¾¨è­˜çš„éŒ¯èª¤ã€‚ä¸‹è¡¨åˆ—å‡ºäº† axios å…§éƒ¨éŒ¯èª¤çš„å…·é«”å®šç¾©ã€‚ |
| status   | HTTP å›æ‡‰ç‹€æ…‹ç¢¼ã€‚å¸¸è¦‹ HTTP å›æ‡‰ç‹€æ…‹ç¢¼å«ç¾©è«‹åƒè€ƒ[é€™è£¡](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)ã€‚

ä»¥ä¸‹æ˜¯å¯èƒ½ç”± axios è­˜åˆ¥çš„éŒ¯èª¤åˆ—è¡¨ï¼š

| ä»£ç¢¼                      | å®šç¾©                                                                                                                                                                                                                                                                                                                                                                                     |
| --- | --- |
| ERR_BAD_OPTION_VALUE      | åœ¨ axios é…ç½®ä¸­æä¾›äº†ç„¡æ•ˆçš„å€¼ã€‚                                                                                                                                                                                                                                                                                                                                                 |
| ERR_BAD_OPTION            | åœ¨ axios é…ç½®ä¸­æä¾›äº†ç„¡æ•ˆçš„é¸é …ã€‚                                                                                                                                                                                                                                                                                                                                                |
| ERR_NOT_SUPPORT           | ç›®å‰ axios ç’°å¢ƒä¸æ”¯æ´è©²åŠŸèƒ½æˆ–æ–¹æ³•ã€‚                                                                                                                                                                                                                                                                                                                              |
| ERR_DEPRECATED            | ä½¿ç”¨äº†å·²æ£„ç”¨çš„åŠŸèƒ½æˆ–æ–¹æ³•ã€‚                                                                                                                                                                                                                                                                                                                                                    |
| ERR_INVALID_URL           | ç‚º axios è«‹æ±‚æä¾›äº†ç„¡æ•ˆçš„ URLã€‚                                                                                                                                                                                                                                                                                                                                                        |
| ECONNABORTED              | é€šå¸¸è¡¨ç¤ºè«‹æ±‚å·²é€¾æ™‚ï¼ˆé™¤éè¨­ç½®äº† `transitional.clarifyTimeoutError`ï¼‰æˆ–è¢«ç€è¦½å™¨æˆ–å…¶å¤–æ›ä¸­æ­¢ã€‚                                                                                                                                                                                                                                            |
| ERR_CANCELED              | è©²åŠŸèƒ½æˆ–æ–¹æ³•è¢«ç”¨æˆ¶é€é AbortSignalï¼ˆæˆ– CancelTokenï¼‰æ˜ç¢ºå–æ¶ˆã€‚                                                                                                                                                                                                                                                                                                  |
| ETIMEDOUT                 | è«‹æ±‚å› è¶…å‡ºé è¨­ axios æ™‚é–“é™åˆ¶è€Œé€¾æ™‚ã€‚å¿…é ˆå°‡ `transitional.clarifyTimeoutError` è¨­ç‚º `true`ï¼Œå¦å‰‡æœƒæ‹‹å‡ºä¸€èˆ¬çš„ `ECONNABORTED` éŒ¯èª¤ã€‚                                                                                                                                                                                                         |
| ERR_NETWORK               | ç¶²è·¯ç›¸é—œå•é¡Œã€‚åœ¨ç€è¦½å™¨ä¸­ï¼Œä¹Ÿå¯èƒ½å›  [CORS](https://developer.mozilla.org/ru/docs/Web/HTTP/Guides/CORS) æˆ– [æ··åˆå…§å®¹](https://developer.mozilla.org/en-US/docs/Web/Security/Mixed_content) æ”¿ç­–é•è¦å°è‡´ã€‚ç”±æ–¼ç€è¦½å™¨ä¸å…è¨± JS ç¨‹å¼ç¢¼æ˜ç¢ºæŒ‡å‡ºå®‰å…¨å•é¡Œçš„å¯¦éš›åŸå› ï¼Œè«‹æª¢æŸ¥ä¸»æ§å°ã€‚ |
| ERR_FR_TOO_MANY_REDIRECTS | è«‹æ±‚è¢«é‡å°æ¬¡æ•¸éå¤šï¼›è¶…é axios é…ç½®ä¸­æŒ‡å®šçš„æœ€å¤§é‡å°æ¬¡æ•¸ã€‚                                                                                                                                                                                                                                                                                                  |
| ERR_BAD_RESPONSE          | å›æ‡‰ç„¡æ³•æ­£ç¢ºè§£ææˆ–æ ¼å¼ç•°å¸¸ã€‚é€šå¸¸èˆ‡ `5xx` ç‹€æ…‹ç¢¼çš„å›æ‡‰æœ‰é—œã€‚                                                                                                                                                                                                                                                                          |
| ERR_BAD_REQUEST           | è«‹æ±‚æ ¼å¼ç•°å¸¸æˆ–ç¼ºå°‘å¿…è¦åƒæ•¸ã€‚é€šå¸¸èˆ‡ `4xx` ç‹€æ…‹ç¢¼çš„å›æ‡‰æœ‰é—œã€‚                                                                                                                                                                                                                                                                    |

## è™•ç†éŒ¯èª¤

é è¨­è¡Œç‚ºæ˜¯å°æ‰€æœ‰ç‹€æ…‹ç¢¼ä¸åœ¨ 2xx ç¯„åœå…§çš„å›æ‡‰éƒ½è¦–ç‚ºéŒ¯èª¤ä¸¦æ‹’çµ•ã€‚

```js
axios.get('/user/12345')
  .catch(function (error) {
    if (error.response) {
      // è«‹æ±‚å·²ç™¼å‡ºï¼Œä¸”ä¼ºæœå™¨æœ‰å›æ‡‰ç‹€æ…‹ç¢¼
      // ä¸”ç‹€æ…‹ç¢¼ä¸åœ¨ 2xx ç¯„åœå…§
      console.log(error.response.data);
      console.log(error.response.status);
      console.log(error.response.headers);
    } else if (error.request) {
      // è«‹æ±‚å·²ç™¼å‡ºä½†æ²’æœ‰æ”¶åˆ°å›æ‡‰
      // `error.request` åœ¨ç€è¦½å™¨ä¸­æ˜¯ XMLHttpRequest å¯¦ä¾‹ï¼Œåœ¨ node.js ä¸­æ˜¯ http.ClientRequest å¯¦ä¾‹
      console.log(error.request);
    } else {
      // è¨­å®šè«‹æ±‚æ™‚ç™¼ç”Ÿç•°å¸¸
      console.log('Error', error.message);
    }
    console.log(error.config);
  });
```

ä½¿ç”¨ `validateStatus` é…ç½®é¸é …ï¼Œå¯ä»¥è¦†å¯«é è¨­æ¢ä»¶ï¼ˆstatus >= 200 && status < 300ï¼‰ï¼Œè‡ªè¨‚å“ªäº› HTTP ç‹€æ…‹ç¢¼æ‡‰æ‹‹å‡ºéŒ¯èª¤ã€‚

```js
axios.get('/user/12345', {
  validateStatus: function (status) {
    return status < 500; // åªè¦ç‹€æ…‹ç¢¼å°æ–¼ 500 å°±è§£æ±ºï¼ˆresolveï¼‰
  }
})
```

ä½¿ç”¨ `toJSON` å¯å–å¾—åŒ…å«æ›´å¤š HTTP éŒ¯èª¤è³‡è¨Šçš„ç‰©ä»¶ã€‚

```js
axios.get('/user/12345')
  .catch(function (error) {
    console.log(error.toJSON());
```
```

## å–æ¶ˆè«‹æ±‚

### AbortController

å¾ `v0.22.0` é–‹å§‹ï¼ŒAxios æ”¯æ´ä½¿ç”¨ AbortController ä»¥ fetch API çš„æ–¹å¼å–æ¶ˆè«‹æ±‚ï¼š

```js
const controller = new AbortController();

axios.get('/foo/bar', {
   signal: controller.signal
}).then(function(response) {
   //...
});
// å–æ¶ˆè«‹æ±‚
controller.abort()
```

### CancelToken `ğŸ‘å·²æ£„ç”¨`

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ *CancelToken* ä¾†å–æ¶ˆè«‹æ±‚ã€‚

> axios çš„ cancel token API åŸºæ–¼å·²æ’¤å›çš„ [cancellable promises proposal](https://github.com/tc39/proposal-cancelable-promises)ã€‚

> æ­¤ API è‡ª v0.22.0 èµ·å·²è¢«æ£„ç”¨ï¼Œä¸æ‡‰åœ¨æ–°å°ˆæ¡ˆä¸­ä½¿ç”¨

ä½ å¯ä»¥åƒä¸‹é¢é€™æ¨£ä½¿ç”¨ `CancelToken.source` å·¥å» æ–¹æ³•ä¾†å»ºç«‹ä¸€å€‹ cancel tokenï¼š

```js
const CancelToken = axios.CancelToken;
const source = CancelToken.source();

axios.get('/user/12345', {
  cancelToken: source.token
}).catch(function (thrown) {
  if (axios.isCancel(thrown)) {
    console.log('Request canceled', thrown.message);
  } else {
    // è™•ç†éŒ¯èª¤
  }
});

axios.post('/user/12345', {
  name: 'new name'
}, {
  cancelToken: source.token
})

// å–æ¶ˆè«‹æ±‚ï¼ˆmessage åƒæ•¸ç‚ºå¯é¸ï¼‰
source.cancel('Operation canceled by the user.');
```

ä½ ä¹Ÿå¯ä»¥å°‡ executor å‡½æ•¸å‚³çµ¦ `CancelToken` å»ºæ§‹å­ä¾†å»ºç«‹ cancel tokenï¼š

```js
const CancelToken = axios.CancelToken;
let cancel;

axios.get('/user/12345', {
  cancelToken: new CancelToken(function executor(c) {
    // executor å‡½æ•¸æœƒæ”¶åˆ° cancel å‡½æ•¸ä½œç‚ºåƒæ•¸
    cancel = c;
  })
});

// å–æ¶ˆè«‹æ±‚
cancel();
```

> **æ³¨æ„ï¼š**ä½ å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ cancel token/abort controller ä¾†å–æ¶ˆå¤šå€‹è«‹æ±‚ã€‚
> å¦‚æœåœ¨ç™¼èµ· Axios è«‹æ±‚æ™‚å–æ¶ˆ token å·²ç¶“è¢«å–æ¶ˆï¼Œå‰‡è©²è«‹æ±‚æœƒç«‹å³è¢«å–æ¶ˆï¼Œä¸æœƒå˜—è©¦é€²è¡Œå¯¦éš›è«‹æ±‚ã€‚

> åœ¨éæ¸¡æœŸé–“ï¼Œä½ å¯ä»¥åŒæ™‚ä½¿ç”¨é€™å…©ç¨®å–æ¶ˆ APIï¼Œç”šè‡³ç”¨æ–¼åŒä¸€å€‹è«‹æ±‚ï¼š

## ä½¿ç”¨ `application/x-www-form-urlencoded` æ ¼å¼

### URLSearchParams

é è¨­æƒ…æ³ä¸‹ï¼Œaxios æœƒå°‡ JavaScript ç‰©ä»¶åºåˆ—åŒ–ç‚º `JSON`ã€‚è‹¥è¦æ”¹ç‚ºä»¥ [`application/x-www-form-urlencoded` æ ¼å¼](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST) å‚³é€è³‡æ–™ï¼Œä½ å¯ä»¥ä½¿ç”¨ [`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams) APIï¼Œè©² API åœ¨çµ•å¤§å¤šæ•¸ç€è¦½å™¨ä¸­éƒ½å·²[æ”¯æ´](http://www.caniuse.com/#feat=urlsearchparams)ï¼Œä¸” [Node](https://nodejs.org/api/url.html#url_class_urlsearchparams) è‡ª v10ï¼ˆ2018 å¹´ç™¼å¸ƒï¼‰èµ·ä¹Ÿæ”¯æ´ã€‚

```js
const params = new URLSearchParams({ foo: 'bar' });
params.append('extraparam', 'value');
axios.post('/foo', params);
```

### æŸ¥è©¢å­—ä¸²ï¼ˆèˆŠç‰ˆç€è¦½å™¨ï¼‰

ç‚ºäº†ç›¸å®¹éå¸¸èˆŠçš„ç€è¦½å™¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ [polyfill](https://github.com/WebReflection/url-search-params)ï¼ˆè«‹ç¢ºä¿å…¨åŸŸç’°å¢ƒå·²åŠ è¼‰ polyfillï¼‰ã€‚

æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ [`qs`](https://github.com/ljharb/qs) å‡½å¼åº«é€²è¡Œç·¨ç¢¼ï¼š

```js
const qs = require('qs');
axios.post('/foo', qs.stringify({ 'bar': 123 }));
```
```
æˆ–è€…ç”¨å¦ä¸€ç¨®æ–¹å¼ï¼ˆES6ï¼‰ï¼Œ

```js
import qs from 'qs';
const data = { 'bar': 123 };
const options = {
  method: 'POST',
  headers: { 'content-type': 'application/x-www-form-urlencoded' },
  data: qs.stringify(data),
  url,
};
axios(options);
```

### èˆŠç‰ˆ Node.js

å°æ–¼è¼ƒèˆŠçš„ Node.js å¼•æ“ï¼Œä½ å¯ä»¥é€™æ¨£ä½¿ç”¨ [`querystring`](https://nodejs.org/api/querystring.html) æ¨¡çµ„ï¼š

```js
const querystring = require('querystring');
axios.post('https://something.com/', querystring.stringify({ foo: 'bar' }));
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ [`qs`](https://github.com/ljharb/qs) å‡½å¼åº«ã€‚

> **æ³¨æ„**ï¼šå¦‚æœä½ éœ€è¦å°å·¢ç‹€ç‰©ä»¶é€²è¡Œå­—ä¸²åŒ–ï¼Œå»ºè­°ä½¿ç”¨ `qs` å‡½å¼åº«ï¼Œå› ç‚º `querystring` æ–¹æ³•åœ¨é€™ç¨®ç”¨ä¾‹ä¸‹æœ‰[å·²çŸ¥å•é¡Œ](https://github.com/nodejs/node-v0.x-archive/issues/1665)ã€‚

### ğŸ†• è‡ªå‹•åºåˆ—åŒ–ç‚º URLSearchParams

ç•¶ content-type æ¨™é ­è¨­ç‚º "application/x-www-form-urlencoded" æ™‚ï¼ŒAxios æœƒè‡ªå‹•å°‡ data ç‰©ä»¶åºåˆ—åŒ–ç‚º urlencoded æ ¼å¼ã€‚

```js
const data = {
  x: 1,
  arr: [1, 2, 3],
  arr2: [1, [2], 3],
  users: [{name: 'Peter', surname: 'Griffin'}, {name: 'Thomas', surname: 'Anderson'}],
};

await axios.postForm('https://postman-echo.com/post', data,
  {headers: {'content-type': 'application/x-www-form-urlencoded'}}
);
```

ä¼ºæœå™¨å°‡æœƒå°‡å…¶è™•ç†ç‚ºï¼š

```js
  {
    x: '1',
    'arr[]': [ '1', '2', '3' ],
    'arr2[0]': '1',
    'arr2[1][0]': '2',
    'arr2[2]': '3',
    'arr3[]': [ '1', '2', '3' ],
    'users[0][name]': 'Peter',
    'users[0][surname]': 'griffin',
    'users[1][name]': 'Thomas',
    'users[1][surname]': 'Anderson'
  }
```

å¦‚æœä½ çš„å¾Œç«¯ body-parserï¼ˆå¦‚ `express.js` çš„ `body-parser`ï¼‰æ”¯æ´å·¢ç‹€ç‰©ä»¶è§£ç¢¼ï¼Œä½ æœƒåœ¨ä¼ºæœå™¨ç«¯è‡ªå‹•ç²å¾—ç›¸åŒçš„ç‰©ä»¶

```js
  var app = express();

  app.use(bodyParser.urlencoded({ extended: true })); // æ”¯æ´ç·¨ç¢¼ä¸»é«”

  app.post('/', function (req, res, next) {
     // ä»¥ JSON å›å‚³ body
     res.send(JSON.stringify(req.body));
  });

  server = app.listen(3000);
```

## ä½¿ç”¨ `multipart/form-data` æ ¼å¼

### FormData

è‹¥è¦å°‡è³‡æ–™ä»¥ `multipart/formdata` ç™¼é€ï¼Œä½ éœ€è¦å‚³éä¸€å€‹ formData å¯¦ä¾‹ä½œç‚ºè² è¼‰ã€‚
ä¸éœ€è¦æ‰‹å‹•è¨­ç½® `Content-Type` æ¨™é ­ï¼ŒAxios æœƒæ ¹æ“šè² è¼‰å‹åˆ¥è‡ªå‹•åˆ¤æ–·ã€‚

```js
const formData = new FormData();
formData.append('foo', 'bar');

axios.post('https://httpbin.org/post', formData);
```

åœ¨ node.js ä¸­ï¼Œä½ å¯ä»¥é€™æ¨£ä½¿ç”¨ [`form-data`](https://github.com/form-data/form-data) å‡½å¼åº«ï¼š

```js
const FormData = require('form-data');

const form = new FormData();
form.append('my_field', 'my value');
form.append('my_buffer', new Buffer(10));
form.append('my_file', fs.createReadStream('/foo/bar.jpg'));
```
axios.post('https://example.com', form)
```

### ğŸ†• è‡ªå‹•åºåˆ—åŒ–ç‚º FormData

å¾ `v0.27.0` é–‹å§‹ï¼Œè‹¥è«‹æ±‚çš„ `Content-Type` æ¨™é ­è¨­ç‚º `multipart/form-data`ï¼ŒAxios æ”¯æ´è‡ªå‹•å°‡ç‰©ä»¶åºåˆ—åŒ–ç‚º FormData ç‰©ä»¶ã€‚

ä»¥ä¸‹è«‹æ±‚å°‡ä»¥ FormData æ ¼å¼æäº¤è³‡æ–™ï¼ˆç€è¦½å™¨ & Node.jsï¼‰ï¼š

```js
import axios from 'axios';

axios.post('https://httpbin.org/post', {x: 1}, {
  headers: {
    'Content-Type': 'multipart/form-data'
  }
}).then(({data}) => console.log(data));
```

åœ¨ `node.js` ç‰ˆæœ¬ä¸­ï¼Œé è¨­æœƒä½¿ç”¨ ([`form-data`](https://github.com/form-data/form-data)) polyfillã€‚

ä½ å¯ä»¥é€éè¨­å®š `env.FormData` é…ç½®è®Šæ•¸ä¾†è¦†å¯« FormData é¡åˆ¥ï¼Œ
ä½†å¤§å¤šæ•¸æƒ…æ³ä¸‹ä½ å¯èƒ½ä¸éœ€è¦é€™éº¼åšï¼š

```js
const axios = require('axios');
var FormData = require('form-data');

axios.post('https://httpbin.org/post', {x: 1, buf: new Buffer(10)}, {
  headers: {
    'Content-Type': 'multipart/form-data'
  }
}).then(({data}) => console.log(data));
```

Axios FormData åºåˆ—åŒ–å™¨æ”¯æ´ä¸€äº›ç‰¹æ®Šçµå°¾ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

- `{}` - ä½¿ç”¨ JSON.stringify å°‡å€¼åºåˆ—åŒ–
- `[]` - å°‡é¡é™£åˆ—ç‰©ä»¶è§£åŒ…ç‚ºå…·æœ‰ç›¸åŒéµåçš„å¤šå€‹æ¬„ä½

> **æ³¨æ„**ï¼šå°æ–¼é™£åˆ—å’Œ FileList ç‰©ä»¶ï¼Œé è¨­æœƒä½¿ç”¨è§£åŒ…/å±•é–‹æ“ä½œ

FormData åºåˆ—åŒ–å™¨æ”¯æ´é€šé `config.formSerializer: object` å±¬æ€§æä¾›é¡å¤–é¸é …ä»¥è™•ç†å°‘è¦‹æƒ…å¢ƒï¼š

- `visitor: Function` - ä½¿ç”¨è€…è‡ªè¨‚çš„ visitor å‡½å¼ï¼Œå°‡æ ¹æ“šè‡ªè¨‚è¦å‰‡éè¿´å°‡è³‡æ–™ç‰©ä»¶åºåˆ—åŒ–ç‚º `FormData` ç‰©ä»¶ã€‚

- `dots: boolean = false` - ä½¿ç”¨é»è™Ÿè¡¨ç¤ºæ³•è€Œéä¸­æ‹¬è™Ÿä¾†åºåˆ—åŒ–é™£åˆ—å’Œç‰©ä»¶ï¼›

- `metaTokens: boolean = true` - åœ¨ FormData çš„éµä¸­æ·»åŠ ç‰¹æ®Šçµå°¾ï¼ˆä¾‹å¦‚ `user{}: '{"name": "John"}'`ï¼‰ã€‚
å¾Œç«¯ body-parser å¯ä»¥åˆ©ç”¨é€™å€‹ä¸­ç¹¼è³‡è¨Šè‡ªå‹•å°‡å€¼è§£æç‚º JSONã€‚

- `indexes: null|false|true = false` - æ§åˆ¶å° `flat` é¡é™£åˆ—ç‰©ä»¶è§£åŒ…éµæ™‚ç´¢å¼•çš„æ·»åŠ æ–¹å¼ã€‚

    - `null` - ä¸åŠ ä¸­æ‹¬è™Ÿï¼ˆ`arr: 1`, `arr: 2`, `arr: 3`ï¼‰
    - `false`(é è¨­) - åŠ ç©ºä¸­æ‹¬è™Ÿï¼ˆ`arr[]: 1`, `arr[]: 2`, `arr[]: 3`ï¼‰
    - `true` - åŠ å¸¶ç´¢å¼•çš„ä¸­æ‹¬è™Ÿï¼ˆ`arr[0]: 1`, `arr[1]: 2`, `arr[2]: 3`ï¼‰

å‡è¨­æˆ‘å€‘æœ‰å¦‚ä¸‹ç‰©ä»¶ï¼š

```js
const obj = {
  x: 1,
  arr: [1, 2, 3],
  arr2: [1, [2], 3],
  users: [{name: 'Peter', surname: 'Griffin'}, {name: 'Thomas', surname: 'Anderson'}],
  'obj2{}': [{x:1}]
};
```

ä»¥ä¸‹æ­¥é©Ÿå°‡ç”± Axios çš„åºåˆ—åŒ–å™¨åœ¨å…§éƒ¨åŸ·è¡Œï¼š

```js
const formData = new FormData();
formData.append('x', '1');
formData.append('arr[]', '1');
formData.append('arr[]', '2');
formData.append('arr[]', '3');
formData.append('arr2[0]', '1');
formData.append('arr2[1][0]', '2');
formData.append('arr2[2]', '3');
formData.append('users[0][name]', 'Peter');
formData.append('users[0][surname]', 'Griffin');
formData.append('users[1][name]', 'Thomas');
formData.append('users[1][surname]', 'Anderson');
formData.append('obj2{}', '[{"x":1}]');
```

Axios æ”¯æ´ä»¥ä¸‹å¿«æ·æ–¹æ³•ï¼š`postForm`ã€`putForm`ã€`patchForm`
é€™äº›æ–¹æ³•åƒ…æ˜¯å°æ‡‰çš„ http æ–¹æ³•ï¼Œä¸”é è¨­å·²è¨­ç½® `Content-Type` æ¨™é ­ç‚º `multipart/form-data`ã€‚

## æª”æ¡ˆä¸Šå‚³

ä½ å¯ä»¥è¼•é¬†æäº¤å–®ä¸€æª”æ¡ˆï¼š

```js
await axios.postForm('https://httpbin.org/post', {
  'myVar' : 'foo',
  'file': document.querySelector('#fileInput').files[0]
});
```

æˆ–å¤šå€‹æª”æ¡ˆä½œç‚º `multipart/form-data` ä¸Šå‚³ï¼š

```js
await axios.postForm('https://httpbin.org/post', {
  'files[]': document.querySelector('#fileInput').files
});
```

å¯ä»¥ç›´æ¥å‚³é `FileList` ç‰©ä»¶ï¼š

```js
await axios.postForm('https://httpbin.org/post', document.querySelector('#fileInput').files)
```

æ‰€æœ‰æª”æ¡ˆéƒ½å°‡ä½¿ç”¨ç›¸åŒçš„æ¬„ä½åç¨±å‚³é€ï¼š`files[]`ã€‚

## ğŸ†• HTML è¡¨å–®æäº¤ï¼ˆç€è¦½å™¨ï¼‰

å‚³é HTML è¡¨å–®å…ƒç´ ä½œç‚ºè¼‰è·ï¼Œå¯ä»¥å°‡å…¶ä½œç‚º `multipart/form-data` å…§å®¹æäº¤ã€‚

```js
await axios.postForm('https://httpbin.org/post', document.querySelector('#htmlForm'));
```

`FormData` å’Œ `HTMLForm` ç‰©ä»¶ä¹Ÿå¯ä»¥é€éæ˜ç¢ºè¨­å®š `Content-Type` æ¨™é ­ç‚º `application/json`ï¼Œä½œç‚º `JSON` æäº¤ï¼š

```js
await axios.post('https://httpbin.org/post', document.querySelector('#htmlForm'), {
  headers: {
    'Content-Type': 'application/json'
  }
})
```

ä¾‹å¦‚ï¼Œä»¥ä¸‹è¡¨å–®

```html
<form id="form">
  <input type="text" name="foo" value="1">
  <input type="text" name="deep.prop" value="2">
  <input type="text" name="deep prop spaced" value="3">
  <input type="text" name="baz" value="4">
  <input type="text" name="baz" value="5">

  <select name="user.age">
    <option value="value1">Value 1</option>
    <option value="value2" selected>Value 2</option>
    <option value="value3">Value 3</option>
  </select>

  <input type="submit" value="Save">
</form>
```

å°‡æœƒè¢«æäº¤ç‚ºä»¥ä¸‹ JSON ç‰©ä»¶ï¼š

```js
{
  "foo": "1",
  "deep": {
    "prop": {
      "spaced": "3"
    }
  },
  "baz": [
    "4",
    "5"
  ],
  "user": {
    "age": "value2"
  }
}
````

ç›®å‰ä¸æ”¯æ´å°‡ `Blobs`/`Files` ä½œç‚º JSONï¼ˆ`base64`ï¼‰å‚³é€ã€‚

## ğŸ†• é€²åº¦æ•æ‰

Axios æ”¯æ´åœ¨ç€è¦½å™¨å’Œ Node ç’°å¢ƒä¸­æ•æ‰è«‹æ±‚çš„ä¸Šå‚³/ä¸‹è¼‰é€²åº¦ã€‚
é€²åº¦äº‹ä»¶çš„é »ç‡æœƒè¢«å¼·åˆ¶é™åˆ¶ç‚ºæ¯ç§’ `3` æ¬¡ã€‚

```js    
await axios.post(url, data, {
  onUploadProgress: function (axiosProgressEvent) {
    /*{
      loaded: number;
      total?: number;
      progress?: number; // ç¯„åœ [0..1]
      bytes: number; // è‡ªä¸Šæ¬¡è§¸ç™¼ä»¥ä¾†å·²å‚³è¼¸çš„ä½å…ƒçµ„æ•¸ï¼ˆå¢é‡ï¼‰
      estimated?: number; // é ä¼°å‰©é¤˜ç§’æ•¸
      rate?: number; // ä¸Šå‚³é€Ÿåº¦ï¼ˆä½å…ƒçµ„/ç§’ï¼‰
      upload: true; // ä¸Šå‚³æ¨™èªŒ
    }*/
  },

  onDownloadProgress: function (axiosProgressEvent) {
    /*{
      loaded: number;
      total?: number;
      progress?: number;
      bytes: number; 
      estimated?: number;
      rate?: number; // ä¸‹è¼‰é€Ÿåº¦ï¼ˆä»¥ä½å…ƒçµ„ç‚ºå–®ä½ï¼‰
      download: true; // ä¸‹è¼‰æ¨™èªŒ
    }*/
  }
});  
```

ä½ ä¹Ÿå¯ä»¥åœ¨ node.js ä¸­è¿½è¹¤ä¸²æµçš„ä¸Šå‚³/ä¸‹è¼‰é€²åº¦ï¼š

```js
const {data} = await axios.post(SERVER_URL, readableStream, {
   onUploadProgress: ({progress}) => {
     console.log((progress * 100).toFixed(2));
   },
  
   headers: {
    'Content-Length': contentLength
   },

   maxRedirects: 0 // é¿å…å°‡æ•´å€‹ä¸²æµç·©è¡åˆ°è¨˜æ†¶é«”
});
````

> **æ³¨æ„ï¼š**
> ç›®å‰åœ¨ node.js ç’°å¢ƒä¸‹å°šä¸æ”¯æ´æ•æ‰ FormData ä¸Šå‚³é€²åº¦ã€‚

> **âš ï¸ è­¦å‘Š**
> å»ºè­°åœ¨ **node.js** ç’°å¢ƒä¸­å°‡ maxRedirects è¨­ç‚º 0 ä¾†ç¦ç”¨é‡å°å‘ï¼Œ
> å› ç‚º follow-redirects å¥—ä»¶æœƒå°‡æ•´å€‹ä¸²æµç·©è¡åˆ°è¨˜æ†¶é«”ä¸­ï¼Œç„¡æ³•éµå¾ªã€ŒèƒŒå£“ã€æ¼”ç®—æ³•ã€‚


## ğŸ†• é€Ÿç‡é™åˆ¶

ä¸‹è¼‰èˆ‡ä¸Šå‚³é€Ÿç‡é™åˆ¶åƒ…èƒ½æ–¼ http adapterï¼ˆnode.jsï¼‰ä¸­è¨­å®šï¼š

```js
const {data} = await axios.post(LOCAL_SERVER_URL, myBuffer, {
  onUploadProgress: ({progress, rate}) => {
    console.log(`ä¸Šå‚³ [${(progress*100).toFixed(2)}%]: ${(rate / 1024).toFixed(2)}KB/s`)
  },
   
  maxRate: [100 * 1024], // 100KB/s é™é€Ÿ
});
```

## ğŸ†• AxiosHeaders

Axios æœ‰è‡ªå·±çš„ `AxiosHeaders` é¡åˆ¥ï¼Œå¯ä»¥ä½¿ç”¨é¡ä¼¼ Map çš„ API æ“ä½œæ¨™é ­ï¼Œä¿è­‰ä¸åˆ†å¤§å°å¯«çš„é‹ä½œã€‚
é›–ç„¶ HTTP æ¨™é ­æœ¬èº«ä¸å€åˆ†å¤§å°å¯«ï¼ŒAxios ç‚ºäº†é¢¨æ ¼åŠå› æ‡‰æŸäº›ä¼ºæœå™¨éŒ¯èª¤åœ°å€åˆ†å¤§å°å¯«çš„æƒ…æ³ï¼Œæœƒä¿ç•™åŸå§‹æ¨™é ­çš„å¤§å°å¯«ã€‚
ç›´æ¥æ“ä½œ headers ç‰©ä»¶çš„èˆŠæ–¹å¼ä»ç„¶å¯ç”¨ï¼Œä½†å·²è¢«æ£„ç”¨ï¼Œä¸å»ºè­°æœªä¾†ç¹¼çºŒä½¿ç”¨ã€‚

### æ“ä½œ headers

AxiosHeaders ç‰©ä»¶å¯¦ä¾‹å¯ä»¥åŒ…å«ä¸åŒé¡å‹çš„å…§éƒ¨å€¼ï¼Œé€™äº›å€¼æ§åˆ¶è¨­å®šèˆ‡åˆä½µçš„é‚è¼¯ã€‚
æœ€çµ‚åªå«å­—ä¸²å€¼çš„ headers ç‰©ä»¶ï¼Œæœƒé€é Axios èª¿ç”¨ `toJSON` æ–¹æ³•å–å¾—ã€‚

> æ³¨æ„ï¼šé€™è£¡çš„ JSON æ˜¯æŒ‡ä¸€å€‹åªåŒ…å«å­—ä¸²å€¼ã€ç”¨æ–¼ç¶²è·¯å‚³è¼¸çš„ç‰©ä»¶ã€‚

æ¨™é ­å€¼å¯ä»¥æ˜¯ä¸‹åˆ—å…¶ä¸­ä¹‹ä¸€ï¼š
- `string` - æ­£å¸¸çš„å­—ä¸²å€¼ï¼Œæœƒå‚³é€åˆ°ä¼ºæœå™¨
- `null` - æ¸²æŸ“æˆ JSON æ™‚ç•¥éæ­¤æ¨™é ­
- `false` - æ¸²æŸ“æˆ JSON æ™‚ç•¥éæ­¤æ¨™é ­ï¼Œä¸¦ä¸”è¡¨ç¤ºå¿…é ˆä½¿ç”¨ `rewrite` é¸é …å‘¼å« `set` æ–¹æ³•è¦†å¯«æ­¤å€¼ï¼ˆAxios å…§éƒ¨ç”¨æ–¼è®“ä½¿ç”¨è€…é¸æ“‡ä¸å®‰è£å¦‚ `User-Agent` æˆ– `Content-Type` ç­‰ç‰¹å®šæ¨™é ­ï¼‰
- `undefined` - å°šæœªè¨­å®šå€¼

> æ³¨æ„ï¼šåªè¦æ¨™é ­å€¼ä¸ç­‰æ–¼ undefinedï¼Œå°±è¢«è¦–ç‚ºå·²è¨­å®šã€‚

headers ç‰©ä»¶æœƒåœ¨æ””æˆªå™¨èˆ‡è½‰æ›å™¨å…§éƒ¨åˆå§‹åŒ–ï¼š

```ts
  axios.interceptors.request.use((request: InternalAxiosRequestConfig) => {
      request.headers.set('My-header', 'value');

      request.headers.set({
        "My-set-header1": "my-set-value1",
        "My-set-header2": "my-set-value2"
      });
      
      request.headers.set('User-Agent', false); // ç¦æ­¢ Axios å¾ŒçºŒè¨­å®šæ­¤æ¨™é ­

      request.headers.setContentType('text/plain');
    
      request.headers['My-set-header2'] = 'newValue' // ç›´æ¥å­˜å–å·²è¢«æ£„ç”¨
    
      return request;
    }
  );
````

ä½ å¯ä»¥ç”¨ `for...of` è¿´åœˆéæ­· `AxiosHeaders` å¯¦ä¾‹ï¼š

````js
const headers = new AxiosHeaders({
  foo: '1',
```js
  bar: '2',
  baz: '3'
});

for(const [header, value] of headers) {
  console.log(header, value);
}

// foo 1
// bar 2
// baz 3
````

### new AxiosHeaders(headers?)

å»ºç«‹ä¸€å€‹æ–°çš„ `AxiosHeaders` å¯¦ä¾‹ã€‚

```
constructor(headers?: RawAxiosHeaders | AxiosHeaders | string);
```

å¦‚æœ headers ç‰©ä»¶æ˜¯ä¸€å€‹å­—ä¸²ï¼Œå°‡æœƒè¢«è§£æç‚º RAW HTTP æ¨™é ­ã€‚

````js
const headers = new AxiosHeaders(`
Host: www.bing.com
User-Agent: curl/7.54.0
Accept: */*`);

console.log(headers);

// Object [AxiosHeaders] {
//   host: 'www.bing.com',
//   'user-agent': 'curl/7.54.0',
//   accept: '*/*'
// }
````

### AxiosHeaders#set

```ts
set(headerName, value: Axios, rewrite?: boolean);
set(headerName, value, rewrite?: (this: AxiosHeaders, value: string, name: string, headers: RawAxiosHeaders) => boolean);
set(headers?: RawAxiosHeaders | AxiosHeaders | string, rewrite?: boolean);
```

`rewrite` åƒæ•¸ç”¨æ–¼æ§åˆ¶è¦†å¯«è¡Œç‚ºï¼š
- `false` - å¦‚æœæ¨™é ­çš„å€¼å·²è¨­ç½®ï¼ˆä¸æ˜¯ `undefined`ï¼‰ï¼Œå‰‡ä¸è¦†å¯«
- `undefined`ï¼ˆé è¨­ï¼‰- é™¤éå…¶å€¼è¨­ç‚º `false`ï¼Œå¦å‰‡è¦†å¯«æ¨™é ­
- `true` - ç„¡è«–å¦‚ä½•éƒ½è¦†å¯«

é€™å€‹é¸é …ä¹Ÿå¯ä»¥æ¥å—ä¸€å€‹è‡ªå®šç¾©å‡½å¼ï¼Œæ±ºå®šæ˜¯å¦æ‡‰è©²è¦†å¯«è©²å€¼ã€‚

å›å‚³ `this`ã€‚

### AxiosHeaders#get(header)

```
  get(headerName: string, matcher?: true | AxiosHeaderMatcher): AxiosHeaderValue;
  get(headerName: string, parser: RegExp): RegExpExecArray | null;
````

å›å‚³æ¨™é ­çš„å…§éƒ¨å€¼ã€‚å®ƒå¯ä»¥æ¥å—é¡å¤–åƒæ•¸ï¼Œä½¿ç”¨ `RegExp.exec`ã€åŒ¹é…å‡½å¼æˆ–å…§éƒ¨ key-value è§£æå™¨è§£ææ¨™é ­çš„å€¼ã€‚

```ts
const headers = new AxiosHeaders({
  'Content-Type': 'multipart/form-data; boundary=Asrf456BGe4h'
});

console.log(headers.get('Content-Type')); 
// multipart/form-data; boundary=Asrf456BGe4h

console.log(headers.get('Content-Type', true)); // è§£æä»¥ \s,;= åˆ†éš”çš„å­—ä¸²ä¸­çš„ key-value å°ï¼š
// [Object: null prototype] {
//   'multipart/form-data': undefined,
//    boundary: 'Asrf456BGe4h'
// }


console.log(headers.get('Content-Type', (value, name, headers) => {
  return String(value).replace(/a/g, 'ZZZ');
}));
// multipZZZrt/form-dZZZtZZZ; boundZZZry=Asrf456BGe4h

console.log(headers.get('Content-Type', /boundary=(\w+)/)?.[0]);
// boundary=Asrf456BGe4h

```

å›å‚³æ¨™é ­çš„å€¼ã€‚

### AxiosHeaders#has(header, matcher?)

```
has(header: string, matcher?: AxiosHeaderMatcher): boolean;
```

å¦‚æœæ¨™é ­å·²è¨­å®šï¼ˆå€¼ä¸æ˜¯ `undefined`ï¼‰ï¼Œå‰‡å›å‚³ `true`ã€‚
```
### AxiosHeaders#delete(header, matcher?)

```
delete(header: string | string[], matcher?: AxiosHeaderMatcher): boolean;
```

å¦‚æœè‡³å°‘æœ‰ä¸€å€‹æ¨™é ­è¢«ç§»é™¤ï¼Œå‰‡å›å‚³ `true`ã€‚

### AxiosHeaders#clear(matcher?)

```
clear(matcher?: AxiosHeaderMatcher): boolean;
```

ç§»é™¤æ‰€æœ‰æ¨™é ­ã€‚
èˆ‡ `delete` æ–¹æ³•çš„ matcher ä¸åŒï¼Œæ­¤å¯é¸çš„ matcher æœƒç”¨ä¾†æ¯”å°æ¨™é ­åç¨±è€Œéå€¼ã€‚

```ts
const headers = new AxiosHeaders({
  'foo': '1',
  'x-foo': '2',
  'x-bar': '3',
});

console.log(headers.clear(/^x-/)); // true

console.log(headers.toJSON()); // [Object: null prototype] { foo: '1' }
```

å¦‚æœè‡³å°‘æœ‰ä¸€å€‹æ¨™é ­è¢«æ¸…é™¤ï¼Œå‰‡å›å‚³ `true`ã€‚

### AxiosHeaders#normalize(format);

å¦‚æœ headers ç‰©ä»¶è¢«ç›´æ¥ä¿®æ”¹ï¼Œå¯èƒ½æœƒæœ‰åç¨±ç›¸åŒä½†å¤§å°å¯«ä¸åŒçš„é‡è¤‡é …ã€‚
æ­¤æ–¹æ³•æœƒå°‡ headers ç‰©ä»¶æ¨™æº–åŒ–ï¼Œå°‡é‡è¤‡çš„éµåˆä½µç‚ºä¸€å€‹ã€‚
Axios åœ¨å‘¼å«æ¯å€‹æ””æˆªå™¨å¾Œæœƒåœ¨å…§éƒ¨ä½¿ç”¨æ­¤æ–¹æ³•ã€‚
å°‡ `format` è¨­ç‚º true æ™‚ï¼Œæœƒå°‡æ¨™é ­åç¨±è½‰ç‚ºå°å¯«ä¸¦å°‡é¦–å­—æ¯å¤§å¯«ï¼ˆå¦‚ `cOntEnt-type` => `Content-Type`ï¼‰

```js
const headers = new AxiosHeaders({
  'foo': '1',
});

headers.Foo = '2';
headers.FOO = '3';

console.log(headers.toJSON()); // [Object: null prototype] { foo: '1', Foo: '2', FOO: '3' }
console.log(headers.normalize().toJSON()); // [Object: null prototype] { foo: '3' }
console.log(headers.normalize(true).toJSON()); // [Object: null prototype] { Foo: '3' }
```

å›å‚³ `this`ã€‚

### AxiosHeaders#concat(...targets)

```
concat(...targets: Array<AxiosHeaders | RawAxiosHeaders | string | undefined | null>): AxiosHeaders;
```

å°‡ç•¶å‰å¯¦ä¾‹èˆ‡ç›®æ¨™åˆä½µç‚ºæ–°çš„ `AxiosHeaders` å¯¦ä¾‹ã€‚å¦‚æœç›®æ¨™æ˜¯å­—ä¸²ï¼Œå‰‡æœƒè§£æç‚º RAW HTTP æ¨™é ­ã€‚

å›å‚³æ–°çš„ `AxiosHeaders` å¯¦ä¾‹ã€‚

### AxiosHeaders#toJSON(asStrings?)

````
toJSON(asStrings?: boolean): RawAxiosHeaders;
````

å°‡æ‰€æœ‰å…§éƒ¨æ¨™é ­å€¼è§£æç‚ºæ–°çš„ null prototype ç‰©ä»¶ã€‚
å°‡ `asStrings` è¨­ç‚º true æ™‚ï¼Œé™£åˆ—æœƒè½‰ç‚ºç”¨é€—è™Ÿåˆ†éš”çš„å­—ä¸²ã€‚

### AxiosHeaders.from(thing?)

````
from(thing?: AxiosHeaders | RawAxiosHeaders | string): AxiosHeaders;
````

å›å‚³å¾å‚³å…¥çš„åŸå§‹æ¨™é ­å»ºç«‹çš„æ–° `AxiosHeaders` å¯¦ä¾‹ï¼Œ
æˆ–å¦‚æœå‚³å…¥çš„æ˜¯ `AxiosHeaders` å¯¦ä¾‹å‰‡ç›´æ¥å›å‚³è©²ç‰©ä»¶ã€‚

### AxiosHeaders.concat(...targets)

````
concat(...targets: Array<AxiosHeaders | RawAxiosHeaders | string | undefined | null>): AxiosHeaders;
````

å›å‚³ç”±åˆä½µç›®æ¨™ç‰©ä»¶æ‰€å»ºç«‹çš„æ–° `AxiosHeaders` å¯¦ä¾‹ã€‚

### å¿«æ·æ–¹æ³•

å¯ç”¨çš„å¿«æ·æ–¹æ³•å¦‚ä¸‹ï¼š

- `setContentType`, `getContentType`, `hasContentType`

- `setContentLength`, `getContentLength`, `hasContentLength`

- `setAccept`, `getAccept`, `hasAccept`

- `setUserAgent`, `getUserAgent`, `hasUserAgent`
- `setContentEncoding`ã€`getContentEncoding`ã€`hasContentEncoding`

## ğŸ”¥ Fetch é©é…å™¨

Fetch é©é…å™¨æ–¼ `v1.7.0` ä¸­å¼•å…¥ã€‚é è¨­æƒ…æ³ä¸‹ï¼Œè‹¥å»ºæ§‹ä¸­æœªæä¾› `xhr` å’Œ `http` é©é…å™¨ï¼Œæˆ–ç’°å¢ƒä¸æ”¯æ´ï¼Œå‰‡å°‡ä½¿ç”¨å®ƒã€‚
è‹¥è¦é è¨­ä½¿ç”¨ï¼Œå¿…é ˆæ˜ç¢ºé¸æ“‡ï¼š

```js
const {data} = axios.get(url, {
  adapter: 'fetch' // é è¨­ç‚º ['xhr', 'http', 'fetch']
})
```

ä½ ä¹Ÿå¯ä»¥ç‚ºæ­¤å»ºç«‹ä¸€å€‹ç¨ç«‹çš„å¯¦ä¾‹ï¼š

```js
const fetchAxios = axios.create({
  adapter: 'fetch'
});

const {data} = fetchAxios.get(url);
```

æ­¤é©é…å™¨æ”¯æ´èˆ‡ `xhr` é©é…å™¨ç›¸åŒçš„åŠŸèƒ½ï¼Œ**åŒ…æ‹¬ä¸Šå‚³åŠä¸‹è¼‰é€²åº¦ç›£æ§**ã€‚
æ­¤å¤–ï¼Œé‚„æ”¯æ´é¡å¤–çš„å›æ‡‰é¡å‹ï¼Œå¦‚ `stream` å’Œ `formdata`ï¼ˆè‹¥ç’°å¢ƒæ”¯æ´ï¼‰ã€‚

## Semver

åœ¨ axios ç™¼å¸ƒ `1.0` ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰€æœ‰é‡å¤§è®Šæ›´éƒ½æœƒä»¥æ–°æ¬¡è¦ç‰ˆæœ¬ç™¼å¸ƒã€‚ä¾‹å¦‚ `0.5.1` å’Œ `0.5.4` æœƒæœ‰ç›¸åŒçš„ APIï¼Œä½† `0.6.0` å‰‡æœƒæœ‰é‡å¤§è®Šæ›´ã€‚

## Promises

axios ä¾è³´æ–¼åŸç”Ÿ ES6 Promise å¯¦ä½œä¾†ç²å¾—[æ”¯æ´](https://caniuse.com/promises)ã€‚
è‹¥ä½ çš„ç’°å¢ƒä¸æ”¯æ´ ES6 Promisesï¼Œä½ å¯ä»¥[ä½¿ç”¨ polyfill](https://github.com/jakearchibald/es6-promise)ã€‚

## TypeScript

axios å…§å»º [TypeScript](https://typescriptlang.org) å‹åˆ¥å®šç¾©ä»¥åŠ axios éŒ¯èª¤çš„å‹åˆ¥å®ˆè¡›ã€‚

```typescript
let user: User = null;
try {
  const { data } = await axios.get('/user?ID=12345');
  user = data.userDetails;
} catch (error) {
  if (axios.isAxiosError(error)) {
    handleAxiosError(error);
  } else {
    handleUnexpectedError(error);
  }
}
```

ç”±æ–¼ axios åŒæ™‚ä»¥ ESM é è¨­åŒ¯å‡ºå’Œ CJS çš„ `module.exports` ç™¼å¸ƒï¼Œå› æ­¤æœ‰äº›æ³¨æ„äº‹é …ã€‚
å»ºè­°è¨­å®š `"moduleResolution": "node16"`ï¼ˆé€™ä¹Ÿç”± `"module": "node16"` éš±å«ï¼‰ã€‚è«‹æ³¨æ„ï¼Œé€™éœ€è¦ TypeScript 4.7 æˆ–ä»¥ä¸Šç‰ˆæœ¬ã€‚
å¦‚æœä½¿ç”¨ ESMï¼Œä½ çš„è¨­å®šæ‡‰è©²æ²’å•é¡Œã€‚
å¦‚æœä½ å°‡ TypeScript ç·¨è­¯ç‚º CJS è€Œä¸èƒ½ä½¿ç”¨ `"moduleResolution": "node16"`ï¼Œå‰‡å¿…é ˆå•Ÿç”¨ `esModuleInterop`ã€‚
è‹¥ä½ ç”¨ TypeScript ä¾†å‹åˆ¥æª¢æŸ¥ CJS JavaScript ç¨‹å¼ç¢¼ï¼Œä½ å”¯ä¸€é¸æ“‡å°±æ˜¯ä½¿ç”¨ `"moduleResolution": "node16"`ã€‚

## ç·šä¸Šä¸€éµè¨­ç½®

ä½ å¯ä»¥ä½¿ç”¨ Gitpodï¼Œä¸€å€‹ç·šä¸Š IDEï¼ˆå°æ–¼é–‹æºå°ˆæ¡ˆå…è²»ï¼‰ï¼Œä¾†è²¢ç»æˆ–åœ¨ç·šä¸Šé‹è¡Œç¯„ä¾‹ã€‚

[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/#https://github.com/axios/axios/blob/main/examples/server.js)


## è³‡æº

* [Changelog](https://github.com/axios/axios/blob/v1.x/CHANGELOG.md)
* [Ecosystem](https://github.com/axios/axios/blob/v1.x/ECOSYSTEM.md)
* [Contributing Guide](https://github.com/axios/axios/blob/v1.x/CONTRIBUTING.md)
* [Code of Conduct](https://github.com/axios/axios/blob/v1.x/CODE_OF_CONDUCT.md)

## é³´è¬

axios æ·±å— [AngularJS](https://angularjs.org/) æ‰€æä¾›çš„ [$http æœå‹™](https://docs.angularjs.org/api/ng/service/$http) å•Ÿç™¼ã€‚æœ€çµ‚ï¼Œaxios è‡´åŠ›æ–¼æä¾›ä¸€å€‹ç¨ç«‹æ–¼ AngularJS ä¹‹å¤–å¯ç”¨çš„ `$http` é¡æœå‹™ã€‚

## æˆæ¬Š

[MIT](LICENSE)


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-30

---