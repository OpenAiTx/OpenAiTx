<h3 align="center"> ğŸ¥‡ é‡‘ç‰ŒèµåŠ©å•† <br> </h3> <table align="center" width="100%"><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://stytch.com/?utm_source&#x3D;oss-sponsorship&amp;utm_medium&#x3D;paid_sponsorship&amp;utm_content&#x3D;website-link&amp;utm_campaign&#x3D;axios-http" style="padding: 10px; display: inline-block"> <picture> <source width="200px" height="38px" media="(prefers-color-scheme: dark)" srcset="https://axios-http.com/assets/sponsors/stytch_white.png"> <img width="200px" height="38px" src="https://axios-http.com/assets/sponsors/stytch.png" alt="Stytch"/> </picture> </a> <p align="center" title="API-first authentication, authorization, and fraud prevention">APIä¼˜å…ˆçš„è®¤è¯ã€æˆæƒå’Œé˜²æ¬ºè¯ˆ</p> <p align="center"> <a href="https://stytch.com/?utm_source&#x3D;oss-sponsorship&amp;utm_medium&#x3D;paid_sponsorship&amp;utm_content&#x3D;website-link&amp;utm_campaign&#x3D;axios-http"><b>å®˜ç½‘</b></a> | <a href="https://stytch.com/docs?utm_source&#x3D;oss-sponsorship&amp;utm_medium&#x3D;paid_sponsorship&amp;utm_content&#x3D;docs-link&amp;utm_campaign&#x3D;axios-http"><b>æ–‡æ¡£</b></a> | <a href="https://github.com/stytchauth/stytch-node?utm_source&#x3D;oss-sponsorship&amp;utm_medium&#x3D;paid_sponsorship&amp;utm_content&#x3D;node-sdk&amp;utm_campaign&#x3D;axios-http"><b>Node.js</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://www.principal.com/about-us?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="133px" height="43px" src="https://axios-http.com/assets/sponsors/principal.svg" alt="Principal Financial Group"/> </a> <p align="center" title="Weâ€™re bound by one common purpose: to give you the financial tools, resources and information you need to live your best life.">æˆ‘ä»¬æœ‰ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ï¼šä¸ºæ‚¨æä¾›å®ç°ç¾å¥½ç”Ÿæ´»æ‰€éœ€çš„é‡‘èå·¥å…·ã€èµ„æºå’Œä¿¡æ¯ã€‚</p> <p align="center"> <a href="https://www.principal.com/about-us?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>www.principal.com</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://twicsy.com/buy-instagram-followers?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="85px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/buy-instagram-followers-twicsy.png" alt="Buy Instagram Followers Twicsy"/> </a> <p align="center" title="Buy real Instagram followers from Twicsy starting at only $2.97. Twicsy has been voted the best site to buy followers from the likes of US Magazine.">åœ¨Twicsyï¼Œè´­ä¹°çœŸå®Instagramç²‰ä¸ä»…éœ€$2.97èµ·ã€‚Twicsyè¢«ã€ŠUS Magazineã€‹ç­‰è¯„ä¸ºæœ€ä½³ç²‰ä¸è´­ä¹°ç½‘ç«™ã€‚</p> <p align="center"> <a href="https://twicsy.com/buy-instagram-followers?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>twicsy.com</b></a> </p>
</td></tr><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://www.descope.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;referral&amp;utm_campaign&#x3D;axios-oss-sponsorship" style="padding: 10px; display: inline-block"> <picture> <source width="200px" height="52px" media="(prefers-color-scheme: dark)" srcset="https://axios-http.com/assets/sponsors/descope_white.png"> <img width="200px" height="52px" src="https://axios-http.com/assets/sponsors/descope.png" alt="Descope"/> </picture> </a> <p align="center" title="Hi, we&#x27;re Descope! We are building something in the authentication space for app developers and canâ€™t wait to place it in your hands.">ä½ å¥½ï¼Œæˆ‘ä»¬æ˜¯Descopeï¼æˆ‘ä»¬æ­£åœ¨ä¸ºåº”ç”¨å¼€å‘è€…æ‰“é€ è®¤è¯é¢†åŸŸçš„æ–°äº§å“ï¼ŒæœŸå¾…æ—©æ—¥ä¸æ‚¨è§é¢ã€‚</p> <p align="center"> <a href="https://www.descope.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;referral&amp;utm_campaign&#x3D;axios-oss-sponsorship"><b>å®˜ç½‘</b></a> | <a href="https://docs.descope.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;referral&amp;utm_campaign&#x3D;axios-oss-sponsorship"><b>æ–‡æ¡£</b></a> | <a href="https://www.descope.com/community?utm_source&#x3D;axios&amp;utm_medium&#x3D;referral&amp;utm_campaign&#x3D;axios-oss-sponsorship"><b>ç¤¾åŒº</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://buzzoid.com/buy-instagram-followers/?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="62px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/buzzoid-buy-instagram-followers.png" alt="Buzzoid - Buy Instagram Followers"/> </a> <p align="center" title="At Buzzoid, you can buy Instagram followers quickly, safely, and easily with just a few clicks. Rated world&#x27;s #1 IG service since 2012.">åœ¨Buzzoidï¼Œæ‚¨åªéœ€å‡ æ­¥å³å¯å¿«é€Ÿã€å®‰å…¨ã€ä¾¿æ·åœ°è´­ä¹°Instagramç²‰ä¸ã€‚è‡ª2012å¹´ä»¥æ¥è¢«è¯„ä¸ºå…¨çƒç¬¬ä¸€InstagramæœåŠ¡ã€‚</p> <p align="center"> <a href="https://buzzoid.com/buy-instagram-followers/?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>buzzoid.com</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://www.famety.net/?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="70px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/famety-buy-instagram-followers.png" alt="Famety - Buy Instagram Followers"/> </a> <p align="center" title="At Famety, you can grow your social media following quickly, safely, and easily with just a few clicks. Rated the worldâ€™s #1 social media service since 2013.">åœ¨Fametyï¼Œæ‚¨åªéœ€å‡ æ­¥å³å¯å¿«é€Ÿã€å®‰å…¨ã€ä¾¿æ·åœ°å¢é•¿ç¤¾äº¤åª’ä½“ç²‰ä¸ã€‚è‡ª2013å¹´ä»¥æ¥è¢«è¯„ä¸ºå…¨çƒç¬¬ä¸€ç¤¾äº¤åª’ä½“æœåŠ¡ã€‚</p> <p align="center"> <a href="https://www.famety.net/?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>www.famety.net</b></a> </p>
</td></tr><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://poprey.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="70px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/instagram-likes.png" alt="Poprey - Buy Instagram Likes"/> </a> <p align="center" title="Buy Instagram Likes">è´­ä¹°Instagramç‚¹èµ</p> <p align="center"> <a href="https://poprey.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>poprey.com</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://ssmarket.net/buy-youtube-subscribers?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="70px" height="70px" src="https://axios-http.com/assets/sponsors/opencollective/youtube-subscribers-ssmarket.png" alt="Buy Youtube Subscribers"/> </a> <p align="center" title="SS Market offers professional social media services that rapidly increase your YouTube subscriber count, elevating your channel to a powerful position.">SS Market æä¾›ä¸“ä¸šç¤¾äº¤åª’ä½“æœåŠ¡ï¼Œå¸®åŠ©æ‚¨çš„YouTubeè®¢é˜…æ•°å¿«é€Ÿå¢é•¿ï¼Œä½¿æ‚¨çš„é¢‘é“æ›´åŠ å¼ºå¤§ã€‚</p> <p align="center"> <a href="https://ssmarket.net/buy-youtube-subscribers?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>ssmarket.net</b></a> </p>
</td><td align="center" width="33.333333333333336%"> <a href="https://smmpanelserver.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;sponsorlist&amp;utm_campaign&#x3D;sponsorship" style="padding: 10px; display: inline-block"> <img width="200px" height="56px" src="https://axios-http.com/assets/sponsors/opencollective/smmpanelserver123.png" alt="smmpanelserver"/> </a> <p align="center" title="smmpanelserver - Best and Cheapest Smm Panel">smmpanelserver - æœ€ä¼˜è´¨ä¸”æœ€ä¾¿å®œçš„SMMé¢æ¿</p> <p align="center"> <a href="https://smmpanelserver.com/?utm_source&#x3D;axios&amp;utm_medium&#x3D;readme_sponsorlist&amp;utm_campaign&#x3D;sponsorship"><b>smmpanelserver.com</b></a> </p>
</td></tr><tr width="33.333333333333336%"><td align="center" width="33.333333333333336%"> <a href="https://opencollective.com/axios/contribute">ğŸ’œ æˆä¸ºèµåŠ©å•†</a>
</td><td align="center" width="33.333333333333336%"> <a href="https://opencollective.com/axios/contribute">ğŸ’œ æˆä¸ºèµåŠ©å•†</a>
</td><td align="center" width="33.333333333333336%"> <a href="https://opencollective.com/axios/contribute">ğŸ’œ æˆä¸ºèµåŠ©å•†</a>
</td></tr></table>

<!--<div>marker</div>-->
<br><br>
<div align="center">
   <a href="https://axios-http.com"><img src="https://axios-http.com/assets/logo.svg" /></a><br>
</div>

<p align="center">åŸºäºPromiseçš„æµè§ˆå™¨å’ŒNode.js HTTPå®¢æˆ·ç«¯</p>

<p align="center">
    <a href="https://axios-http.com/"><b>å®˜ç½‘</b></a> â€¢
    <a href="https://axios-http.com/docs/intro"><b>æ–‡æ¡£</b></a>
</p>

<div align="center">

[![npm version](https://img.shields.io/npm/v/axios.svg?style=flat-square)](https://www.npmjs.org/package/axios)
[![CDNJS](https://img.shields.io/cdnjs/v/axios.svg?style=flat-square)](https://cdnjs.com/libraries/axios)
[![Build status](https://img.shields.io/github/actions/workflow/status/axios/axios/ci.yml?branch=v1.x&label=CI&logo=github&style=flat-square)](https://github.com/axios/axios/actions/workflows/ci.yml)
[![Gitpod Ready-to-Code](https://img.shields.io/badge/Gitpod-Ready--to--Code-blue?logo=gitpod&style=flat-square)](https://gitpod.io/#https://github.com/axios/axios)
[![code coverage](https://img.shields.io/coveralls/mzabriskie/axios.svg?style=flat-square)](https://coveralls.io/r/mzabriskie/axios)
[![install size](https://img.shields.io/badge/dynamic/json?url=https://packagephobia.com/v2/api.json?p=axios&query=$.install.pretty&label=install%20size&style=flat-square)](https://packagephobia.now.sh/result?p=axios)
[![npm bundle size](https://img.shields.io/bundlephobia/minzip/axios?style=flat-square)](https://bundlephobia.com/package/axios@latest)
[![npm downloads](https://img.shields.io/npm/dm/axios.svg?style=flat-square)](https://npm-stat.com/charts.html?package=axios)
[![gitter chat](https://img.shields.io/gitter/room/mzabriskie/axios.svg?style=flat-square)](https://gitter.im/mzabriskie/axios)
[![code helpers](https://www.codetriage.com/axios/axios/badges/users.svg)](https://www.codetriage.com/axios/axios)
[![Known Vulnerabilities](https://snyk.io/test/npm/axios/badge.svg)](https://snyk.io/test/npm/axios)




</div>

## ç›®å½•

  - [åŠŸèƒ½ç‰¹æ€§](#features)
  - [æµè§ˆå™¨æ”¯æŒ](#browser-support)
  - [å®‰è£…](#installing)
    - [åŒ…ç®¡ç†å™¨](#package-manager)
    - [CDN](#cdn)
  - [ç¤ºä¾‹](#example)
  - [Axios API](#axios-api)
  - [è¯·æ±‚æ–¹æ³•åˆ«å](#request-method-aliases)
  - [å¹¶å‘ ğŸ‘](#concurrency-deprecated)
  - [åˆ›å»ºå®ä¾‹](#creating-an-instance)
  - [å®ä¾‹æ–¹æ³•](#instance-methods)
  - [è¯·æ±‚é…ç½®](#request-config)
  - [å“åº”ç»“æ„](#response-schema)
  - [é…ç½®é»˜è®¤å€¼](#config-defaults)
    - [å…¨å±€axiosé»˜è®¤å€¼](#global-axios-defaults)
    - [è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼](#custom-instance-defaults)
    - [é…ç½®ä¼˜å…ˆçº§é¡ºåº](#config-order-of-precedence)
  - [æ‹¦æˆªå™¨](#interceptors)
    - [å¤šé‡æ‹¦æˆªå™¨](#multiple-interceptors)
  - [é”™è¯¯å¤„ç†](#handling-errors)
  - [å–æ¶ˆè¯·æ±‚](#cancellation)
    - [AbortController](#abortcontroller)
    - [CancelToken ğŸ‘](#canceltoken-deprecated)
  - [ä½¿ç”¨application/x-www-form-urlencodedæ ¼å¼](#using-applicationx-www-form-urlencoded-format)
    - [URLSearchParams](#urlsearchparams)
    - [æŸ¥è¯¢å­—ç¬¦ä¸²](#query-string-older-browsers)
    - [ğŸ†• è‡ªåŠ¨åºåˆ—åŒ–](#-automatic-serialization-to-urlsearchparams)
  - [ä½¿ç”¨multipart/form-dataæ ¼å¼](#using-multipartform-data-format)
    - [FormData](#formdata)
    - [ğŸ†• è‡ªåŠ¨åºåˆ—åŒ–](#-automatic-serialization-to-formdata)
  - [æ–‡ä»¶ä¸Šä¼ ](#files-posting)
  - [HTMLè¡¨å•æäº¤](#-html-form-posting-browser)
  - [ğŸ†• è¿›åº¦æ•è·](#-progress-capturing)
  - [ğŸ†• é™é€Ÿ](#-progress-capturing)
  - [ğŸ†• AxiosHeaders](#-axiosheaders)
  - [ğŸ”¥ Fetché€‚é…å™¨](#-fetch-adapter)
  - [è¯­ä¹‰åŒ–ç‰ˆæœ¬](#semver)
  - [Promise](#promises)
  - [TypeScript](#typescript)
  - [èµ„æº](#resources)
  - [è‡´è°¢](#credits)
  - [è®¸å¯è¯](#license)

## åŠŸèƒ½ç‰¹æ€§

- åœ¨æµè§ˆå™¨ä¸­å‘èµ· [XMLHttpRequests](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)
- åœ¨Node.jsä¸­å‘èµ· [http](https://nodejs.org/api/http.html) è¯·æ±‚
- æ”¯æŒ [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) API
- æ‹¦æˆªè¯·æ±‚å’Œå“åº”
- è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®
- å–æ¶ˆè¯·æ±‚
- [JSON](https://www.json.org/json-en.html) æ•°æ®çš„è‡ªåŠ¨è½¬æ¢
- ğŸ†• æ•°æ®å¯¹è±¡è‡ªåŠ¨åºåˆ—åŒ–ä¸º `multipart/form-data` å’Œ `x-www-form-urlencoded` è¯·æ±‚ä½“ç¼–ç 
- å®¢æˆ·ç«¯æ”¯æŒé˜²æŠ¤ [XSRF](https://en.wikipedia.org/wiki/Cross-site_request_forgery) æ”»å‡»

## æµè§ˆå™¨æ”¯æŒ

![Chrome](https://raw.githubusercontent.com/alrra/browser-logos/main/src/chrome/chrome_48x48.png) | ![Firefox](https://raw.githubusercontent.com/alrra/browser-logos/main/src/firefox/firefox_48x48.png) | ![Safari](https://raw.githubusercontent.com/alrra/browser-logos/main/src/safari/safari_48x48.png) | ![Opera](https://raw.githubusercontent.com/alrra/browser-logos/main/src/opera/opera_48x48.png) | ![Edge](https://raw.githubusercontent.com/alrra/browser-logos/main/src/edge/edge_48x48.png) |
--- | --- | --- | --- | --- |
æœ€æ–° âœ” | æœ€æ–° âœ” | æœ€æ–° âœ” | æœ€æ–° âœ” | æœ€æ–° âœ” | 11 âœ” |

[![Browser Matrix](https://saucelabs.com/open_sauce/build_matrix/axios.svg)](https://saucelabs.com/u/axios)

## å®‰è£…

### åŒ…ç®¡ç†å™¨

ä½¿ç”¨ npm:

```bash
$ npm install axios
```

ä½¿ç”¨ bower:

```bash
$ bower install axios
```

ä½¿ç”¨ yarn:

```bash
$ yarn add axios
```

ä½¿ç”¨ pnpm:

```bash
$ pnpm add axios
```

ä½¿ç”¨ bun:

```bash
$ bun add axios
```

å®‰è£…åŒ…åï¼Œä½ å¯ä»¥ä½¿ç”¨ `import` æˆ– `require` çš„æ–¹å¼å¯¼å…¥è¯¥åº“ï¼š

```js
import axios, {isCancel, AxiosError} from 'axios';
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å¯¼å‡ºï¼Œå› ä¸ºå…·åå¯¼å‡ºåªæ˜¯ Axios å·¥å‚çš„å†å¯¼å‡ºï¼š

```js
import axios from 'axios';

console.log(axios.isCancel('something'));
```

å¦‚æœä½ ä½¿ç”¨ `require` è¿›è¡Œå¯¼å…¥ï¼Œ**ä»…æ”¯æŒé»˜è®¤å¯¼å‡º**ï¼š

```js
const axios = require('axios');

console.log(axios.isCancel('something'));
```

å¯¹äºæŸäº›æ‰“åŒ…å·¥å…·å’ŒæŸäº› ES6 è¯­æ³•æ£€æŸ¥å™¨ï¼Œä½ å¯èƒ½éœ€è¦å¦‚ä¸‹æ–¹å¼ï¼š

```js
import { default as axios } from 'axios';
```

å¦‚æœåœ¨è‡ªå®šä¹‰æˆ–é—ç•™ç¯å¢ƒä¸­å¯¼å…¥æ¨¡å—æ—¶é‡åˆ°é—®é¢˜ï¼Œ
ä½ å¯ä»¥å°è¯•ç›´æ¥å¯¼å…¥æ¨¡å—åŒ…ï¼š

```js
const axios = require('axios/dist/browser/axios.cjs'); // æµè§ˆå™¨ commonJS åŒ…ï¼ˆES2017ï¼‰
// const axios = require('axios/dist/node/axios.cjs'); // node commonJS åŒ…ï¼ˆES2017ï¼‰
```

### CDN

ä½¿ç”¨ jsDelivr CDNï¼ˆES5 UMD æµè§ˆå™¨æ¨¡å—ï¼‰:

```html
<script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
```

ä½¿ç”¨ unpkg CDN:

```html
<script src="https://unpkg.com/axios@1.6.7/dist/axios.min.js"></script>
```

## ç¤ºä¾‹

> **æ³¨æ„**: CommonJS ç”¨æ³•  
> ä¸ºäº†åœ¨ä½¿ç”¨ CommonJS çš„ `require()` å¯¼å…¥æ–¹å¼æ—¶è·å¾— TypeScript ç±»å‹ï¼ˆç”¨äºæ™ºèƒ½æç¤º/è‡ªåŠ¨è¡¥å…¨ï¼‰ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š
```js
import axios from 'axios';
//const axios = require('axios'); // ä¼ ç»Ÿæ–¹å¼

// ä¸ºæŒ‡å®š ID çš„ç”¨æˆ·å‘èµ·è¯·æ±‚
axios.get('/user?ID=12345')
  .then(function (response) {
    // å¤„ç†æˆåŠŸæƒ…å†µ
    console.log(response);
  })
  .catch(function (error) {
    // å¤„ç†é”™è¯¯æƒ…å†µ
    console.log(error);
  })
  .finally(function () {
    // æ€»ä¼šæ‰§è¡Œ
  });

// ä¸Šè¿°è¯·æ±‚ä¹Ÿå¯ä»¥è¿™æ ·å†™
axios.get('/user', {
    params: {
      ID: 12345
    }
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  })
  .finally(function () {
    // æ€»ä¼šæ‰§è¡Œ
  });

// æƒ³ç”¨ async/awaitï¼Ÿè¯·åœ¨å¤–éƒ¨å‡½æ•°/æ–¹æ³•æ·»åŠ  `async` å…³é”®å­—ã€‚
async function getUser() {
  try {
    const response = await axios.get('/user?ID=12345');
    console.log(response);
  } catch (error) {
    console.error(error);
  }
}
```

> **æ³¨æ„**ï¼š`async/await` æ˜¯ ECMAScript 2017 çš„ä¸€éƒ¨åˆ†ï¼Œä¸è¢« Internet Explorer å’Œæ—§ç‰ˆæµè§ˆå™¨æ”¯æŒï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚

æ‰§è¡Œ `POST` è¯·æ±‚

```js
axios.post('/user', {
    firstName: 'Fred',
    lastName: 'Flintstone'
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
```

æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚

```js
function getUserAccount() {
  return axios.get('/user/12345');
}

function getUserPermissions() {
  return axios.get('/user/12345/permissions');
}

Promise.all([getUserAccount(), getUserPermissions()])
  .then(function (results) {
    const acct = results[0];
    const perm = results[1];
  });
```

## axios API

å¯ä»¥é€šè¿‡ä¼ é€’ç›¸å…³é…ç½®ç»™ `axios` å‘èµ·è¯·æ±‚ã€‚

##### axios(config)

```js
// å‘é€ä¸€ä¸ª POST è¯·æ±‚
axios({
  method: 'post',
  url: '/user/12345',
  data: {
    firstName: 'Fred',
    lastName: 'Flintstone'
  }
});
```

```js
// åœ¨ node.js ä¸­å¯¹è¿œç¨‹å›¾ç‰‡å‘èµ· GET è¯·æ±‚
axios({
  method: 'get',
  url: 'https://bit.ly/2mTM3nY',
  responseType: 'stream'
})
  .then(function (response) {
    response.data.pipe(fs.createWriteStream('ada_lovelace.jpg'))
  });
```

##### axios(url[, config])

```js
// å‘é€ä¸€ä¸ª GET è¯·æ±‚ï¼ˆé»˜è®¤æ–¹æ³•ï¼‰
axios('/user/12345');
```

### è¯·æ±‚æ–¹æ³•åˆ«å

ä¸ºäº†æ–¹ä¾¿ï¼Œæ‰€æœ‰å¸¸ç”¨è¯·æ±‚æ–¹æ³•éƒ½æä¾›äº†åˆ«åã€‚

##### axios.request(config)
##### axios.get(url[, config])
##### axios.delete(url[, config])
##### axios.head(url[, config])
##### axios.options(url[, config])
##### axios.post(url[, data[, config]])
##### axios.put(url[, data[, config]])
##### axios.patch(url[, data[, config]])

###### æ³¨æ„
å½“ä½¿ç”¨åˆ«åæ–¹æ³•æ—¶ï¼Œ`url`ã€`method` å’Œ `data` å±æ€§æ— éœ€åœ¨ config ä¸­æŒ‡å®šã€‚

### å¹¶å‘è¯·æ±‚ï¼ˆå·²å¼ƒç”¨ï¼‰
è¯·ä½¿ç”¨ `Promise.all` æ›¿ä»£ä»¥ä¸‹åŠŸèƒ½å‡½æ•°ã€‚

ç”¨äºå¤„ç†å¹¶å‘è¯·æ±‚çš„è¾…åŠ©å‡½æ•°ã€‚

axios.all(iterable)
axios.spread(callback)

### åˆ›å»ºå®ä¾‹

ä½ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰é…ç½®åˆ›å»ºä¸€ä¸ªæ–°çš„ axios å®ä¾‹ã€‚

##### axios.create([config])

```js
const instance = axios.create({
  baseURL: 'https://some-domain.com/api/',
  timeout: 1000,
  headers: {'X-Custom-Header': 'foobar'}
});
```

### å®ä¾‹æ–¹æ³•

å¯ç”¨çš„å®ä¾‹æ–¹æ³•å¦‚ä¸‹æ‰€åˆ—ã€‚æŒ‡å®šçš„ config ä¼šä¸å®ä¾‹çš„ config åˆå¹¶ã€‚

##### axios#request(config)
##### axios#get(url[, config])
##### axios#delete(url[, config])
##### axios#head(url[, config])
##### axios#options(url[, config])
##### axios#post(url[, data[, config]])
##### axios#put(url[, data[, config]])
##### axios#patch(url[, data[, config]])
##### axios#getUri([config])

## è¯·æ±‚é…ç½®

ä»¥ä¸‹æ˜¯å¯ç”¨äºå‘èµ·è¯·æ±‚çš„é…ç½®é€‰é¡¹ã€‚åªæœ‰ `url` æ˜¯å¿…éœ€çš„ã€‚å¦‚æœæœªæŒ‡å®š `method`ï¼Œè¯·æ±‚é»˜è®¤ä½¿ç”¨ `GET`ã€‚

```js
{
  // `url` æ˜¯ç”¨äºè¯·æ±‚çš„æœåŠ¡å™¨ URL
  url: '/user',

  // `method` æ˜¯è¯·æ±‚æ—¶ä½¿ç”¨çš„ HTTP æ–¹æ³•
  method: 'get', // é»˜è®¤

  // `baseURL` ä¼šè¢«åŠ åœ¨ `url` å‰ï¼Œé™¤é `url` æ˜¯ç»å¯¹è·¯å¾„ä¸”é€‰é¡¹ `allowAbsoluteUrls` è®¾ç½®ä¸º trueã€‚
  // ä¸º axios çš„å®ä¾‹è®¾ç½® `baseURL`ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä¼ é€’ç›¸å¯¹ URL ç»™è¯¥å®ä¾‹çš„æ–¹æ³•ã€‚
  baseURL: 'https://some-domain.com/api/',

  // `allowAbsoluteUrls` å†³å®šç»å¯¹ URL æ˜¯å¦ä¼šè¦†ç›–å·²é…ç½®çš„ `baseUrl`ã€‚
  // è®¾ç½®ä¸º trueï¼ˆé»˜è®¤ï¼‰æ—¶ï¼Œ`url` çš„ç»å¯¹å€¼ä¼šè¦†ç›– `baseUrl`ã€‚
  // è®¾ç½®ä¸º false æ—¶ï¼Œ`url` çš„ç»å¯¹å€¼æ€»ä¼šè¢« `baseUrl` ä½œä¸ºå‰ç¼€ã€‚
  allowAbsoluteUrls: true,

  // `transformRequest` å…è®¸åœ¨è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰ä¿®æ”¹è¯·æ±‚æ•°æ®
  // ä»…é€‚ç”¨äº 'PUT'ã€'POST'ã€'PATCH' å’Œ 'DELETE' æ–¹æ³•
  // æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå‡½æ•°å¿…é¡»è¿”å›å­—ç¬¦ä¸²æˆ– Bufferã€ArrayBufferã€
  // FormData æˆ– Stream çš„å®ä¾‹
  // ä½ å¯ä»¥ä¿®æ”¹ headers å¯¹è±¡ã€‚
  transformRequest: [function (data, headers) {
    // æŒ‰éœ€è½¬æ¢æ•°æ®
```
```markdown
    return data;
  }],

  // `transformResponse` å…è®¸åœ¨å“åº”æ•°æ®ä¼ é€’åˆ° then/catch ä¹‹å‰å¯¹å…¶è¿›è¡Œæ›´æ”¹
  transformResponse: [function (data) {
    // å¯ä»¥å¯¹æ•°æ®è¿›è¡Œä»»æ„è½¬æ¢

    return data;
  }],

  // `headers` æ˜¯è¦å‘é€çš„è‡ªå®šä¹‰è¯·æ±‚å¤´
  headers: {'X-Requested-With': 'XMLHttpRequest'},

  // `params` æ˜¯éšè¯·æ±‚ä¸€èµ·å‘é€çš„ URL å‚æ•°
  // å¿…é¡»ä¸ºæ™®é€šå¯¹è±¡æˆ– URLSearchParams å¯¹è±¡
  params: {
    ID: 12345
  },
  
  // `paramsSerializer` æ˜¯ä¸€ä¸ªå¯é€‰é…ç½®ï¼Œå…è®¸ä½ è‡ªå®šä¹‰ `params` çš„åºåˆ—åŒ–æ–¹å¼ã€‚
  paramsSerializer: {

    // è‡ªå®šä¹‰ç¼–ç å™¨å‡½æ•°ï¼ŒæŒ‰è¿­ä»£æ–¹å¼å‘é€é”®/å€¼å¯¹ã€‚
    encode?: (param: string): string => { /* åœ¨è¿™é‡Œè¿›è¡Œè‡ªå®šä¹‰æ“ä½œå¹¶è¿”å›è½¬æ¢åçš„å­—ç¬¦ä¸² */ }, 
    
    // å¯¹æ•´ä¸ªå‚æ•°è¿›è¡Œè‡ªå®šä¹‰åºåˆ—åŒ–çš„å‡½æ•°ã€‚å…è®¸ç”¨æˆ·æ¨¡æ‹Ÿ 1.x ä¹‹å‰çš„è¡Œä¸ºã€‚
    serialize?: (params: Record<string, any>, options?: ParamsSerializerOptions ), 
    
    // é…ç½®å‚æ•°ä¸­æ•°ç»„ç´¢å¼•çš„æ ¼å¼åŒ–æ–¹å¼ã€‚
    indexes: false // ä¸‰ç§å¯é€‰æ–¹å¼ï¼š(1) indexes: nullï¼ˆæ— æ‹¬å·ï¼‰ï¼Œ(2)ï¼ˆé»˜è®¤ï¼‰indexes: falseï¼ˆç©ºæ‹¬å·ï¼‰ï¼Œ(3) indexes: trueï¼ˆå¸¦ç´¢å¼•çš„æ‹¬å·ï¼‰ã€‚
  },

  // `data` æ˜¯ä½œä¸ºè¯·æ±‚ä½“å‘é€çš„æ•°æ®
  // ä»…é€‚ç”¨äº 'PUT'ã€'POST'ã€'DELETE' å’Œ 'PATCH' è¯·æ±‚æ–¹æ³•
  // å½“æœªè®¾ç½® `transformRequest` æ—¶ï¼Œå¿…é¡»ä¸ºä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š
  // - å­—ç¬¦ä¸²ã€æ™®é€šå¯¹è±¡ã€ArrayBufferã€ArrayBufferViewã€URLSearchParams
  // - ä»…æµè§ˆå™¨ï¼šFormDataã€Fileã€Blob
  // - ä»… Nodeï¼šStreamã€Bufferã€FormDataï¼ˆform-data åŒ…ï¼‰
  data: {
    firstName: 'Fred'
  },

  // å‘é€æ•°æ®åˆ°è¯·æ±‚ä½“çš„è¯­æ³•æ›¿ä»£æ–¹å¼
  // post æ–¹æ³•
  // åªå‘é€å€¼ï¼Œä¸å‘é€é”®
  data: 'Country=Brasil&City=Belo Horizonte',

  // `timeout` æŒ‡å®šè¯·æ±‚è¶…æ—¶å‰çš„æ¯«ç§’æ•°
  // å¦‚æœè¯·æ±‚è¶…å‡º `timeout` æ—¶é—´ï¼Œè¯·æ±‚ä¼šè¢«ä¸­æ­¢
  timeout: 1000, // é»˜è®¤å€¼ä¸º `0`ï¼ˆæ— è¶…æ—¶ï¼‰

  // `withCredentials` æŒ‡ç¤ºæ˜¯å¦åº”ä½¿ç”¨å‡­è¯è¿›è¡Œè·¨ç«™ç‚¹çš„è®¿é—®æ§åˆ¶è¯·æ±‚
  withCredentials: false, // é»˜è®¤å€¼

  // `adapter` å…è®¸è‡ªå®šä¹‰è¯·æ±‚å¤„ç†ï¼Œä½¿æµ‹è¯•æ›´åŠ å®¹æ˜“ã€‚
  // è¿”å›ä¸€ä¸ª promise å¹¶æä¾›ä¸€ä¸ªæœ‰æ•ˆçš„å“åº”ï¼ˆå‚è§ lib/adapters/README.mdï¼‰
  adapter: function (config) {
    /* ... */
  },
  // ä½ ä¹Ÿå¯ä»¥è®¾ç½®å†…ç½®é€‚é…å™¨çš„åç§°ï¼Œæˆ–è€…æä¾›ä¸€ä¸ªåŒ…å«åç§°çš„æ•°ç»„
  // ä»¥ä¾¿åœ¨ç¯å¢ƒä¸­é€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨çš„
  adapter: 'xhr', // 'fetch' | 'http' | ['xhr', 'http', 'fetch']

  // `auth` è¡¨ç¤ºåº”ä½¿ç”¨ HTTP Basic è®¤è¯ï¼Œå¹¶æä¾›å‡­æ®ã€‚
  // è¿™å°†è®¾ç½®ä¸€ä¸ª `Authorization` è¯·æ±‚å¤´ï¼Œè¦†ç›–ä½ é€šè¿‡ `headers` è®¾ç½®çš„ä»»ä½•å·²æœ‰
  // `Authorization` è‡ªå®šä¹‰è¯·æ±‚å¤´ã€‚
  // è¯·æ³¨æ„ï¼Œé€šè¿‡æ­¤å‚æ•°ä»…å¯é…ç½® HTTP Basic è®¤è¯ã€‚
  // å¯¹äº Bearer ç­‰ä»¤ç‰Œï¼Œè¯·ä½¿ç”¨ `Authorization` è‡ªå®šä¹‰è¯·æ±‚å¤´ã€‚
  auth: {
    username: 'janedoe',
    password: 's00pers3cret'
  },

  // `responseType` æŒ‡ç¤ºæœåŠ¡å™¨å“åº”çš„æ•°æ®ç±»å‹
  // å¯é€‰é¡¹ä¸ºï¼š'arraybuffer'ã€'document'ã€'json'ã€'text'ã€'stream'
  //   ä»…æµè§ˆå™¨ï¼š'blob'
  responseType: 'json', // é»˜è®¤å€¼

  // `responseEncoding` æŒ‡å®šç”¨äºè§£ç å“åº”çš„ç¼–ç ï¼ˆä»…é™ Node.jsï¼‰
  // æ³¨æ„ï¼šå¯¹äº `responseType` ä¸º 'stream' æˆ–å®¢æˆ·ç«¯è¯·æ±‚æ—¶ä¼šè¢«å¿½ç•¥
  // å¯é€‰é¡¹ä¸ºï¼š'ascii'ã€'ASCII'ã€'ansi'ã€'ANSI'ã€'binary'ã€'BINARY'ã€'base64'ã€'BASE64'ã€'base64url'ã€
  // 'BASE64URL'ã€'hex'ã€'HEX'ã€'latin1'ã€'LATIN1'ã€'ucs-2'ã€'UCS-2'ã€'ucs2'ã€'UCS2'ã€'utf-8'ã€'UTF-8'ã€
  // 'utf8'ã€'UTF8'ã€'utf16le'ã€'UTF16LE'
  responseEncoding: 'utf8', // é»˜è®¤å€¼

  // `xsrfCookieName` ç”¨ä½œ xsrf token å€¼çš„ cookie åç§°
  xsrfCookieName: 'XSRF-TOKEN', // é»˜è®¤å€¼

  // `xsrfHeaderName` æ‰¿è½½ xsrf token å€¼çš„ http å¤´åç§°
  xsrfHeaderName: 'X-XSRF-TOKEN', // é»˜è®¤å€¼
    
  // `undefined`ï¼ˆé»˜è®¤ï¼‰- ä»…å¯¹åŒæºè¯·æ±‚è®¾ç½® XSRF å¤´
  withXSRFToken: boolean | undefined | ((config: InternalAxiosRequestConfig) => boolean | undefined),

  // `onUploadProgress` å…è®¸å¤„ç†ä¸Šä¼ çš„è¿›åº¦äº‹ä»¶
  // æµè§ˆå™¨ & node.js
  onUploadProgress: function ({loaded, total, progress, bytes, estimated, rate, upload = true}) {
```
```markdown
    // å¯ä»¥å¯¹ Axios çš„è¿›åº¦äº‹ä»¶æ‰§è¡Œä»»ä½•æ“ä½œ
  },

  // `onDownloadProgress` å…è®¸å¤„ç†ä¸‹è½½çš„è¿›åº¦äº‹ä»¶
  // æµè§ˆå™¨ & node.js
  onDownloadProgress: function ({loaded, total, progress, bytes, estimated, rate, download = true}) {
    // å¯ä»¥å¯¹ Axios çš„è¿›åº¦äº‹ä»¶æ‰§è¡Œä»»ä½•æ“ä½œ
  },

  // `maxContentLength` å®šä¹‰åœ¨ node.js ä¸­å…è®¸çš„ HTTP å“åº”å†…å®¹æœ€å¤§å­—èŠ‚æ•°
  maxContentLength: 2000,

  // `maxBodyLength`ï¼ˆä»… Node é€‰é¡¹ï¼‰å®šä¹‰åœ¨ node.js ä¸­å…è®¸çš„ HTTP è¯·æ±‚å†…å®¹æœ€å¤§å­—èŠ‚æ•°
  maxBodyLength: 2000,

  // `validateStatus` å®šä¹‰æ˜¯å¦é’ˆå¯¹ç»™å®šçš„ HTTP å“åº”çŠ¶æ€ç  resolve æˆ– reject promiseã€‚
  // å¦‚æœ `validateStatus` è¿”å› `true`ï¼ˆæˆ–è®¾ç½®ä¸º `null` æˆ– `undefined`ï¼‰ï¼Œpromise ä¼šè¢« resolveï¼›
  // å¦åˆ™ï¼Œpromise ä¼šè¢« rejectã€‚
  validateStatus: function (status) {
    return status >= 200 && status < 300; // é»˜è®¤å€¼
  },

  // `maxRedirects` å®šä¹‰åœ¨ node.js ä¸­å…è®¸è·Ÿéšçš„æœ€å¤§é‡å®šå‘æ¬¡æ•°ã€‚
  // å¦‚æœè®¾ç½®ä¸º 0ï¼Œåˆ™ä¸è·Ÿéšé‡å®šå‘ã€‚
  maxRedirects: 21, // é»˜è®¤å€¼

  // `beforeRedirect` å®šä¹‰ä¸€ä¸ªåœ¨é‡å®šå‘å‰è°ƒç”¨çš„å‡½æ•°ã€‚
  // å¯ç”¨äºåœ¨é‡å®šå‘æ—¶è°ƒæ•´è¯·æ±‚é€‰é¡¹ï¼Œ
  // æ£€æŸ¥æœ€æ–°çš„å“åº”å¤´ï¼Œ
  // æˆ–é€šè¿‡æŠ›å‡ºé”™è¯¯æ¥å–æ¶ˆè¯·æ±‚
  // å¦‚æœ maxRedirects è®¾ç½®ä¸º 0ï¼Œåˆ™ä¸ä¼šä½¿ç”¨ `beforeRedirect`ã€‚
  beforeRedirect: (options, { headers }) => {
    if (options.hostname === "example.com") {
      options.auth = "user:password";
    }
  },

  // `socketPath` å®šä¹‰ node.js ä¸­è¦ä½¿ç”¨çš„ UNIX Socketã€‚
  // ä¾‹å¦‚ï¼š'/var/run/docker.sock' ç”¨äºå‘ docker å®ˆæŠ¤è¿›ç¨‹å‘é€è¯·æ±‚ã€‚
  // åªèƒ½æŒ‡å®š `socketPath` æˆ– `proxy` ä¹‹ä¸€ã€‚
  // å¦‚æœä¸¤è€…éƒ½æŒ‡å®šï¼Œåˆ™ä½¿ç”¨ `socketPath`ã€‚
  socketPath: null, // é»˜è®¤å€¼
  
  // `transport` å†³å®šç”¨äºå‘èµ·è¯·æ±‚çš„ä¼ è¾“æ–¹å¼ã€‚
  // å¦‚æœå®šä¹‰äº†ï¼Œåˆ™ä¼šè¢«ä½¿ç”¨ã€‚å¦åˆ™ï¼Œå¦‚æœ `maxRedirects` ä¸º 0ï¼Œ
  // åˆ™ä¼šæ ¹æ® `protocol` æŒ‡å®šçš„åè®®ï¼Œä½¿ç”¨é»˜è®¤çš„ `http` æˆ– `https` åº“ã€‚
  // å¦åˆ™ï¼Œæ ¹æ®åè®®ï¼Œä¼šä½¿ç”¨å¯ä»¥å¤„ç†é‡å®šå‘çš„ `httpFollow` æˆ– `httpsFollow` åº“ã€‚
  transport: undefined, // é»˜è®¤å€¼

  // `httpAgent` å’Œ `httpsAgent` å®šä¹‰åœ¨ node.js ä¸­æ‰§è¡Œ http å’Œ https è¯·æ±‚æ—¶ä½¿ç”¨çš„è‡ªå®šä¹‰ agentã€‚
  // è¿™å…è®¸æ·»åŠ å¦‚ `keepAlive` ç­‰åœ¨ Node.js v19.0.0 ä¹‹å‰é»˜è®¤æœªå¯ç”¨çš„é€‰é¡¹ã€‚
  // åœ¨ Node.js v19.0.0 ä¹‹åï¼Œä¸å†éœ€è¦è‡ªå®šä¹‰ agent æ¥å¯ç”¨ `keepAlive`ï¼Œ
  // å› ä¸º `http.globalAgent` é»˜è®¤å·²å¯ç”¨ `keepAlive`ã€‚
  httpAgent: new http.Agent({ keepAlive: true }),
  httpsAgent: new https.Agent({ keepAlive: true }),

  // `proxy` å®šä¹‰ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºåã€ç«¯å£å’Œåè®®ã€‚
  // ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¸¸è§„çš„ `http_proxy` å’Œ `https_proxy` ç¯å¢ƒå˜é‡æ¥å®šä¹‰ä»£ç†ã€‚
  // å¦‚æœä½ ä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œä»£ç†é…ç½®ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ `no_proxy` ç¯å¢ƒå˜é‡ï¼Œ
  // å…¶å€¼ä¸ºä¸åº”ä½¿ç”¨ä»£ç†çš„åŸŸåï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ã€‚
  // ä½¿ç”¨ `false` å¯ä»¥ç¦ç”¨ä»£ç†ï¼Œå¿½ç•¥ç¯å¢ƒå˜é‡ã€‚
  // `auth` è¡¨ç¤ºåº”ä½¿ç”¨ HTTP Basic è®¤è¯è¿æ¥åˆ°ä»£ç†ï¼Œå¹¶æä¾›å‡­æ®ã€‚
  // è¿™å°†è®¾ç½® `Proxy-Authorization` å¤´ï¼Œè¦†ç›–ä½ é€šè¿‡ `headers` è®¾ç½®çš„ä»»ä½•è‡ªå®šä¹‰
  // `Proxy-Authorization` å¤´ã€‚
  // å¦‚æœä»£ç†æœåŠ¡å™¨ä½¿ç”¨ HTTPSï¼Œåˆ™å¿…é¡»å°†åè®®è®¾ç½®ä¸º `https`ã€‚
  proxy: {
    protocol: 'https',
    host: '127.0.0.1',
    // hostname: '127.0.0.1' // å¦‚æœåŒæ—¶å®šä¹‰ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨ 'hostname'
    port: 9000,
    auth: {
      username: 'mikeymike',
      password: 'rapunz3l'
    }
  },

  // `cancelToken` æŒ‡å®šä¸€ä¸ªå–æ¶ˆä»¤ç‰Œï¼Œå¯ç”¨äºå–æ¶ˆè¯·æ±‚
  //ï¼ˆè¯¦è§ä¸‹æ–‡çš„å–æ¶ˆéƒ¨åˆ†ï¼‰
  cancelToken: new CancelToken(function (cancel) {
  }),

  // ä½¿ç”¨ AbortController å–æ¶ˆ Axios è¯·æ±‚çš„å¦ä¸€ç§æ–¹å¼
  signal: new AbortController().signal,

  // `decompress` æŒ‡ç¤ºæ˜¯å¦è‡ªåŠ¨è§£å‹å“åº”ä½“ã€‚
  // å¦‚æœè®¾ç½®ä¸º `true`ï¼Œè¿˜ä¼šä»æ‰€æœ‰å·²è§£å‹å“åº”çš„å“åº”å¯¹è±¡ä¸­ç§»é™¤ 'content-encoding' å¤´
  // - ä»… Nodeï¼ˆXHR æ— æ³•å…³é—­è§£å‹ï¼‰
  decompress: true, // é»˜è®¤å€¼

  // `insecureHTTPParser` å¸ƒå°”å€¼ã€‚
  // æŒ‡ç¤ºæ˜¯å¦ä½¿ç”¨æ¥å—æ— æ•ˆ HTTP å¤´çš„éå®‰å…¨ HTTP è§£æå™¨ã€‚
  // è¿™å¯èƒ½å…è®¸ä¸ä¸å…¼å®¹çš„ HTTP å®ç°è¿›è¡Œäº’æ“ä½œã€‚
  // åº”é¿å…ä½¿ç”¨éå®‰å…¨è§£æå™¨ã€‚
  // é€‰é¡¹è¯¦è§ https://nodejs.org/dist/latest-v12.x/docs/api/http.html#http_http_request_url_options_callback
```
```js
  // å¦è¯·å‚è§ https://nodejs.org/en/blog/vulnerability/february-2020-security-releases/#strict-http-header-parsing-none
  insecureHTTPParser: undefined, // é»˜è®¤å€¼

  // å…¼å®¹æ—§ç‰ˆæœ¬çš„è¿‡æ¸¡é€‰é¡¹ï¼Œå¯èƒ½ä¼šåœ¨æ–°ç‰ˆæœ¬ä¸­ç§»é™¤
  transitional: {
    // é™é»˜ JSON è§£ææ¨¡å¼
    // `true`  - å¿½ç•¥ JSON è§£æé”™è¯¯ï¼Œå¦‚æœè§£æå¤±è´¥åˆ™å°† response.data è®¾ä¸º nullï¼ˆæ—§è¡Œä¸ºï¼‰
    // `false` - å¦‚æœ JSON è§£æå¤±è´¥åˆ™æŠ›å‡º SyntaxErrorï¼ˆæ³¨æ„ï¼šresponseType å¿…é¡»è®¾ç½®ä¸º 'json'ï¼‰
    silentJSONParsing: true, // å½“å‰ Axios ç‰ˆæœ¬çš„é»˜è®¤å€¼

    // å³ä½¿ `responseType` ä¸æ˜¯ 'json'ï¼Œä¹Ÿå°è¯•å°†å“åº”å­—ç¬¦ä¸²è§£æä¸º JSON
    forcedJSONParsing: true,

    // åœ¨è¯·æ±‚è¶…æ—¶æ—¶æŠ›å‡º ETIMEDOUT é”™è¯¯ï¼Œè€Œä¸æ˜¯é€šç”¨çš„ ECONNABORTED
    clarifyTimeoutError: false,
  },

  env: {
    // ç”¨äºè‡ªåŠ¨å°†è´Ÿè½½åºåˆ—åŒ–ä¸º FormData å¯¹è±¡çš„ FormData ç±»
    FormData: window?.FormData || global?.FormData
  },

  formSerializer: {
      visitor: (value, key, path, helpers) => {}; // è‡ªå®šä¹‰è®¿é—®å™¨å‡½æ•°ï¼Œç”¨äºåºåˆ—åŒ–è¡¨å•å€¼
      dots: boolean; // ä½¿ç”¨ç‚¹å·è€Œä¸æ˜¯æ‹¬å·æ ¼å¼
      metaTokens: boolean; // ä¿ç•™å‚æ•°é”®ä¸­çš„ç‰¹æ®Šç»“å°¾ï¼Œå¦‚ {}
      indexes: boolean; // æ•°ç»„ç´¢å¼•æ ¼å¼ null - æ— æ‹¬å·ï¼Œfalse - ç©ºæ‹¬å·ï¼Œtrue - å¸¦ç´¢å¼•çš„æ‹¬å·
  },

  // ä»…é™ http é€‚é…å™¨ï¼ˆnode.jsï¼‰
  maxRate: [
    100 * 1024, // 100KB/s ä¸Šä¼ é™é€Ÿ
    100 * 1024  // 100KB/s ä¸‹è½½é™é€Ÿ
  ]
}
```

## å“åº”ç»“æ„

è¯·æ±‚çš„å“åº”åŒ…å«ä»¥ä¸‹ä¿¡æ¯ã€‚

```js
{
  // `data` æ˜¯æœåŠ¡å™¨è¿”å›çš„å“åº”å†…å®¹
  data: {},

  // `status` æ˜¯æœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ç 
  status: 200,

  // `statusText` æ˜¯æœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€æ¶ˆæ¯
  statusText: 'OK',

  // `headers` æ˜¯æœåŠ¡å™¨å“åº”çš„ HTTP å¤´ä¿¡æ¯
  // æ‰€æœ‰å¤´åç§°å‡ä¸ºå°å†™ï¼Œå¯é€šè¿‡æ‹¬å·è¡¨ç¤ºæ³•è®¿é—®ã€‚
  // ç¤ºä¾‹ï¼š`response.headers['content-type']`
  headers: {},

  // `config` æ˜¯ä¸ºè¯¥è¯·æ±‚æä¾›ç»™ `axios` çš„é…ç½®
  config: {},

  // `request` æ˜¯ç”Ÿæˆè¯¥å“åº”çš„è¯·æ±‚
  // åœ¨ node.jsï¼ˆé‡å®šå‘æ—¶ï¼‰ä¸­æ˜¯æœ€åä¸€ä¸ª ClientRequest å®ä¾‹
  // åœ¨æµè§ˆå™¨ä¸­æ˜¯ XMLHttpRequest å®ä¾‹
  request: {}
}
```

ä½¿ç”¨ `then` æ—¶ï¼Œä½ å°†ä»¥å¦‚ä¸‹æ–¹å¼æ¥æ”¶å“åº”ï¼š

```js
axios.get('/user/12345')
  .then(function (response) {
    console.log(response.data);
    console.log(response.status);
    console.log(response.statusText);
    console.log(response.headers);
    console.log(response.config);
  });
```

ä½¿ç”¨ `catch`ï¼Œæˆ–å°† [æ‹’ç»å›è°ƒ](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then) ä½œä¸º `then` çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’æ—¶ï¼Œå“åº”å°†é€šè¿‡ `error` å¯¹è±¡è·å–ï¼Œè¯¦è§ [é”™è¯¯å¤„ç†](#handling-errors) éƒ¨åˆ†ã€‚

## é…ç½®é»˜è®¤å€¼

ä½ å¯ä»¥æŒ‡å®šå°†åº”ç”¨äºæ¯ä¸ªè¯·æ±‚çš„é…ç½®é»˜è®¤å€¼ã€‚

### å…¨å±€ axios é»˜è®¤å€¼

```js
axios.defaults.baseURL = 'https://api.example.com';

// é‡è¦æç¤ºï¼šå¦‚æœ axios ç”¨äºå¤šä¸ªåŸŸåï¼ŒAUTH_TOKEN å°†ä¼šå‘é€åˆ°æ‰€æœ‰åŸŸåã€‚
// å‚è§ä¸‹æ–¹è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼çš„ç¤ºä¾‹ã€‚
axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;

axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
```

### è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼
```
```js
// åˆ›å»ºå®ä¾‹æ—¶è®¾ç½®é…ç½®é»˜è®¤å€¼
const instance = axios.create({
  baseURL: 'https://api.example.com'
});

// åœ¨å®ä¾‹åˆ›å»ºåä¿®æ”¹é»˜è®¤å€¼
instance.defaults.headers.common['Authorization'] = AUTH_TOKEN;
```

### é…ç½®ä¼˜å…ˆçº§é¡ºåº

é…ç½®å°†æŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºè¿›è¡Œåˆå¹¶ã€‚é¡ºåºä¸ºï¼š[lib/defaults/index.js](https://github.com/axios/axios/blob/main/lib/defaults/index.js#L49) ä¸­åº“çš„é»˜è®¤å€¼ï¼Œç„¶åæ˜¯å®ä¾‹çš„ `defaults` å±æ€§ï¼Œæœ€åæ˜¯è¯·æ±‚çš„ `config` å‚æ•°ã€‚åè€…ä¼šè¦†ç›–å‰è€…ã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ã€‚

```js
// ä½¿ç”¨åº“æä¾›çš„é…ç½®é»˜è®¤å€¼åˆ›å»ºå®ä¾‹
// æ­¤æ—¶è¶…æ—¶é…ç½®å€¼ä¸º `0`ï¼Œè¿™æ˜¯åº“çš„é»˜è®¤å€¼
const instance = axios.create();

// è¦†ç›–åº“çš„è¶…æ—¶é»˜è®¤å€¼
// ç°åœ¨æ‰€æœ‰ä½¿ç”¨æ­¤å®ä¾‹çš„è¯·æ±‚å°†åœ¨è¶…æ—¶å‰ç­‰å¾… 2.5 ç§’
instance.defaults.timeout = 2500;

// ä¸ºè¯¥è¯·æ±‚è¦†ç›–è¶…æ—¶æ—¶é—´ï¼Œå› ä¸ºå·²çŸ¥è¯¥è¯·æ±‚éœ€è¦è¾ƒé•¿æ—¶é—´
instance.get('/longRequest', {
  timeout: 5000
});
```

## æ‹¦æˆªå™¨

ä½ å¯ä»¥åœ¨ `then` æˆ– `catch` å¤„ç†è¯·æ±‚æˆ–å“åº”ä¹‹å‰æ‹¦æˆªå®ƒä»¬ã€‚

```js

const instance = axios.create();

// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(function (config) {
    // åœ¨è¯·æ±‚å‘é€ä¹‹å‰åšäº›ä»€ä¹ˆ
    return config;
  }, function (error) {
    // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
    return Promise.reject(error);
  });

// æ·»åŠ å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(function (response) {
    // ä»»ä½• 2xx èŒƒå›´å†…çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°
    // å¯¹å“åº”æ•°æ®åšäº›ä»€ä¹ˆ
    return response;
  }, function (error) {
    // ä»»ä½•è¶…å‡º 2xx èŒƒå›´çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°
    // å¯¹å“åº”é”™è¯¯åšäº›ä»€ä¹ˆ
    return Promise.reject(error);
  });
```

å¦‚æœä½ éœ€è¦åœ¨ä¹‹åç§»é™¤æ‹¦æˆªå™¨ï¼Œä¹Ÿå¯ä»¥åšåˆ°ã€‚

```js
const instance = axios.create();
const myInterceptor = instance.interceptors.request.use(function () {/*...*/});
axios.interceptors.request.eject(myInterceptor);
```

ä½ ä¹Ÿå¯ä»¥æ¸…é™¤æ‰€æœ‰è¯·æ±‚æˆ–å“åº”çš„æ‹¦æˆªå™¨ã€‚
```js
const instance = axios.create();
instance.interceptors.request.use(function () {/*...*/});
instance.interceptors.request.clear(); // ç§»é™¤è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.response.use(function () {/*...*/});
instance.interceptors.response.clear(); // ç§»é™¤å“åº”æ‹¦æˆªå™¨
```

ä½ å¯ä»¥ä¸º axios çš„è‡ªå®šä¹‰å®ä¾‹æ·»åŠ æ‹¦æˆªå™¨ã€‚

```js
const instance = axios.create();
instance.interceptors.request.use(function () {/*...*/});
```

å½“ä½ æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒä»¬è¢«è§†ä¸ºå¼‚æ­¥ã€‚è¿™å¯èƒ½ä¼šåœ¨ä¸»çº¿ç¨‹è¢«é˜»å¡æ—¶å¯¼è‡´ axios è¯·æ±‚æ‰§è¡Œå»¶è¿Ÿï¼ˆæ‹¦æˆªå™¨åº•å±‚ä¼šåˆ›å»ºä¸€ä¸ª promiseï¼Œä½ çš„è¯·æ±‚ä¼šè¢«æ”¾åˆ°è°ƒç”¨æ ˆåº•éƒ¨ï¼‰ã€‚å¦‚æœä½ çš„è¯·æ±‚æ‹¦æˆªå™¨æ˜¯åŒæ­¥çš„ï¼Œä½ å¯ä»¥åœ¨é€‰é¡¹å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªæ ‡å¿—ï¼Œå‘ŠçŸ¥ axios ä»¥åŒæ­¥æ–¹å¼è¿è¡Œä»£ç ï¼Œä»è€Œé¿å…è¯·æ±‚æ‰§è¡Œçš„å»¶è¿Ÿã€‚

```js
axios.interceptors.request.use(function (config) {
  config.headers.test = 'I am only a header!';
  return config;
}, null, { synchronous: true });
```

å¦‚æœä½ æƒ³æ ¹æ®è¿è¡Œæ—¶æ£€æŸ¥æ‰§è¡Œç‰¹å®šæ‹¦æˆªå™¨ï¼Œå¯ä»¥åœ¨é€‰é¡¹å¯¹è±¡ä¸­æ·»åŠ  `runWhen` å‡½æ•°ã€‚**åªæœ‰å½“** `runWhen` è¿”å› `false` æ—¶ï¼Œè¯·æ±‚æ‹¦æˆªå™¨æ‰ä¸ä¼šè¢«æ‰§è¡Œã€‚è¯¥å‡½æ•°ä¼šæ¥æ”¶ config å¯¹è±¡ï¼ˆä½ ä¹Ÿå¯ä»¥ç»‘å®šè‡ªå·±çš„å‚æ•°ï¼‰ã€‚å½“ä½ æœ‰ä¸€ä¸ªä»…åœ¨ç‰¹å®šæ—¶é—´éœ€è¦è¿è¡Œçš„å¼‚æ­¥è¯·æ±‚æ‹¦æˆªå™¨æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚
```
```js
function onGetCall(config) {
  return config.method === 'get';
}
axios.interceptors.request.use(function (config) {
  config.headers.test = 'special get headers';
  return config;
}, null, { runWhen: onGetCall });
```

> **æ³¨æ„ï¼š** ç›®å‰ï¼Œoptions å‚æ•°ï¼ˆåŒ…å« `synchronous` å’Œ `runWhen` å±æ€§ï¼‰ä»…æ”¯æŒè¯·æ±‚æ‹¦æˆªå™¨ã€‚

### å¤šä¸ªæ‹¦æˆªå™¨

å‡è®¾ä½ æ·»åŠ äº†å¤šä¸ªå“åº”æ‹¦æˆªå™¨ï¼Œ
å½“å“åº”è¢«æˆåŠŸå¤„ç†æ—¶ï¼š
- æ¯ä¸ªæ‹¦æˆªå™¨éƒ½ä¼šè¢«æ‰§è¡Œ
- å®ƒä»¬æŒ‰ç…§æ·»åŠ é¡ºåºä¾æ¬¡æ‰§è¡Œ
- åªæœ‰æœ€åä¸€ä¸ªæ‹¦æˆªå™¨çš„ç»“æœä¼šè¢«è¿”å›
- æ¯ä¸ªæ‹¦æˆªå™¨éƒ½ä¼šæ¥æ”¶å…¶å‰ä¸€ä¸ªæ‹¦æˆªå™¨çš„ç»“æœ
- å½“ fulfillment-interceptor æŠ›å‡ºå¼‚å¸¸æ—¶
    - åç»­çš„ fulfillment-interceptor ä¸ä¼šè¢«è°ƒç”¨
    - åç»­çš„ rejection-interceptor ä¼šè¢«è°ƒç”¨
    - ä¸€æ—¦è¢«æ•è·ï¼Œä¸‹ä¸€ä¸ª fulfill-interceptor ä¼šå†æ¬¡è¢«è°ƒç”¨ï¼ˆå°±åƒåœ¨ promise é“¾ä¸­ä¸€æ ·ï¼‰ã€‚

æŸ¥çœ‹[æ‹¦æˆªå™¨æµ‹è¯•ä»£ç ](https://raw.githubusercontent.com/axios/axios/v1.x/./test/specs/interceptors.spec.js)ä»¥äº†è§£æ‰€æœ‰ç›¸å…³å®ç°ã€‚

## é”™è¯¯ç±»å‹

axios å¯èƒ½ä¼šå‡ºç°å¤šç§ä¸åŒçš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥ä¸ºé”™è¯¯çš„å…·ä½“åŸå› å’Œè°ƒè¯•æä¾›åŸºæœ¬ä¿¡æ¯ã€‚

axios é”™è¯¯çš„ä¸€èˆ¬ç»“æ„å¦‚ä¸‹ï¼š
| å±æ€§      | å®šä¹‰  |
| -------- | ----------  |
| message  | é”™è¯¯ä¿¡æ¯çš„ç®€è¦æ‘˜è¦ä»¥åŠå¤±è´¥çš„çŠ¶æ€ç ã€‚ |
| name     | å®šä¹‰é”™è¯¯çš„æ¥æºã€‚å¯¹äº axiosï¼Œè¿™é‡Œå§‹ç»ˆæ˜¯ 'AxiosError'ã€‚ |
| stack    | æä¾›é”™è¯¯çš„å †æ ˆè¿½è¸ªã€‚ | 
| config   | ä¸€ä¸ª axios é…ç½®å¯¹è±¡ï¼ŒåŒ…å«ç”¨æˆ·è¯·æ±‚æ—¶å®šä¹‰çš„å…·ä½“å®ä¾‹é…ç½®ã€‚ |
| code     | è¡¨ç¤º axios è¯†åˆ«çš„é”™è¯¯ã€‚ä¸‹è¡¨åˆ—å‡ºäº† axios å†…éƒ¨é”™è¯¯çš„å…·ä½“å®šä¹‰ã€‚  |
| status   | HTTP å“åº”çŠ¶æ€ç ã€‚å¸¸è§ HTTP å“åº”çŠ¶æ€ç çš„å«ä¹‰è§[æ­¤å¤„](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)ã€‚

ä»¥ä¸‹æ˜¯ axios å¯èƒ½è¯†åˆ«çš„é”™è¯¯åˆ—è¡¨ï¼š

| ä»£ç                       | å®šä¹‰                                                                                                                                                                                                                                                                                                                                                                                      |
| --- | --- |
| ERR_BAD_OPTION_VALUE      | åœ¨ axios é…ç½®ä¸­æä¾›äº†æ— æ•ˆçš„å€¼ã€‚                                                                                                                                                                                                                                                                                                                                                           |
| ERR_BAD_OPTION            | åœ¨ axios é…ç½®ä¸­æä¾›äº†æ— æ•ˆçš„é€‰é¡¹ã€‚                                                                                                                                                                                                                                                                                                                                                         |
| ERR_NOT_SUPPORT           | å½“å‰ axios ç¯å¢ƒä¸‹ä¸æ”¯æŒçš„åŠŸèƒ½æˆ–æ–¹æ³•ã€‚                                                                                                                                                                                                                                                                                                                                                      |
| ERR_DEPRECATED            | ä½¿ç”¨äº† axios å·²åºŸå¼ƒçš„åŠŸèƒ½æˆ–æ–¹æ³•ã€‚                                                                                                                                                                                                                                                                                                                                                        |
| ERR_INVALID_URL           | ä¸º axios è¯·æ±‚æä¾›äº†æ— æ•ˆçš„ URLã€‚                                                                                                                                                                                                                                                                                                                                                          |
| ECONNABORTED              | é€šå¸¸è¡¨ç¤ºè¯·æ±‚è¶…æ—¶ï¼ˆé™¤éè®¾ç½®äº† `transitional.clarifyTimeoutError`ï¼‰ï¼Œæˆ–è€…è¢«æµè§ˆå™¨æˆ–å…¶æ’ä»¶ä¸­æ­¢ã€‚                                                                                                                                                                                                                                                      |
| ERR_CANCELED              | åŠŸèƒ½æˆ–æ–¹æ³•è¢«ç”¨æˆ·é€šè¿‡ AbortSignalï¼ˆæˆ– CancelTokenï¼‰æ˜¾å¼å–æ¶ˆã€‚                                                                                                                                                                                                                                                                                      |
| ETIMEDOUT                 | è¯·æ±‚å› è¶…å‡º axios é»˜è®¤æ—¶é—´é™åˆ¶è€Œè¶…æ—¶ã€‚å¿…é¡»å°† `transitional.clarifyTimeoutError` è®¾ç½®ä¸º `true`ï¼Œå¦åˆ™ä¼šæŠ›å‡ºé€šç”¨çš„ `ECONNABORTED` é”™è¯¯ã€‚                                                                                                                                                                                                               |
| ERR_NETWORK               | ä¸ç½‘ç»œç›¸å…³çš„é—®é¢˜ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œè¯¥é”™è¯¯ä¹Ÿå¯èƒ½ç”± [CORS](https://developer.mozilla.org/ru/docs/Web/HTTP/Guides/CORS) æˆ– [æ··åˆå†…å®¹](https://developer.mozilla.org/en-US/docs/Web/Security/Mixed_content) ç­–ç•¥è¿è§„å¼•èµ·ã€‚æµè§ˆå™¨ä¸ä¼šå…è®¸ JS ä»£ç æ˜ç¡®è¯´æ˜ç”±å®‰å…¨é—®é¢˜å¼•èµ·çš„é”™è¯¯çš„çœŸå®åŸå› ï¼Œè¯·æ£€æŸ¥æ§åˆ¶å°ã€‚                      |
| ERR_FR_TOO_MANY_REDIRECTS | è¯·æ±‚é‡å®šå‘æ¬¡æ•°è¿‡å¤šï¼Œè¶…è¿‡äº† axios é…ç½®ä¸­æŒ‡å®šçš„æœ€å¤§é‡å®šå‘æ¬¡æ•°ã€‚                                                                                                                                                                                                                                                                                    |
| ERR_BAD_RESPONSE          | å“åº”æ— æ³•è¢«æ­£ç¡®è§£ææˆ–æ ¼å¼ä¸ç¬¦åˆé¢„æœŸã€‚é€šå¸¸ä¸ `5xx` çŠ¶æ€ç çš„å“åº”ç›¸å…³ã€‚                                                                                                                                                                                                                                                                                 |
| ERR_BAD_REQUEST           | è¯·æ±‚æ ¼å¼å¼‚å¸¸æˆ–ç¼ºå°‘å¿…è¦å‚æ•°ã€‚é€šå¸¸ä¸ `4xx` çŠ¶æ€ç çš„å“åº”ç›¸å…³ã€‚                                                                                                                                                                                                                                                                                         |

## é”™è¯¯å¤„ç†

é»˜è®¤è¡Œä¸ºæ˜¯æ‹’ç»æ‰€æœ‰è¿”å›çŠ¶æ€ç ä¸åœ¨ 2xx èŒƒå›´å†…çš„å“åº”ï¼Œå¹¶å°†å…¶è§†ä¸ºé”™è¯¯ã€‚

```js
axios.get('/user/12345')
  .catch(function (error) {
    if (error.response) {
      // è¯·æ±‚å·²å‘å‡ºï¼ŒæœåŠ¡å™¨å“åº”äº†çŠ¶æ€ç 
      // çŠ¶æ€ç è¶…å‡ºäº† 2xx èŒƒå›´
      console.log(error.response.data);
      console.log(error.response.status);
      console.log(error.response.headers);
    } else if (error.request) {
      // è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ²¡æœ‰æ”¶åˆ°å“åº”
      // `error.request` åœ¨æµè§ˆå™¨ä¸­æ˜¯ XMLHttpRequest çš„å®ä¾‹ï¼Œåœ¨ node.js ä¸­æ˜¯ http.ClientRequest çš„å®ä¾‹
      console.log(error.request);
    } else {
      // è¯·æ±‚è®¾ç½®è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯
      console.log('Error', error.message);
    }
    console.log(error.config);
  });
```

é€šè¿‡ä½¿ç”¨ `validateStatus` é…ç½®é€‰é¡¹ï¼Œä½ å¯ä»¥è¦†ç›–é»˜è®¤æ¡ä»¶ï¼ˆstatus >= 200 && status < 300ï¼‰ï¼Œè‡ªå®šä¹‰å“ªäº› HTTP çŠ¶æ€ç ä¼šæŠ›å‡ºé”™è¯¯ã€‚

```js
axios.get('/user/12345', {
  validateStatus: function (status) {
    return status < 500; // åªæœ‰çŠ¶æ€ç å°äº 500 æ—¶æ‰ä¼šè¢«å¤„ç†ä¸ºæˆåŠŸ
  }
})
```

ä½¿ç”¨ `toJSON` å¯ä»¥è·å¾—åŒ…å«æ›´å¤š HTTP é”™è¯¯ä¿¡æ¯çš„å¯¹è±¡ã€‚

```js
axios.get('/user/12345')
  .catch(function (error) {
    console.log(error.toJSON());
```
```

## å–æ¶ˆè¯·æ±‚

### AbortController

ä» `v0.22.0` å¼€å§‹ï¼ŒAxios æ”¯æŒä½¿ç”¨ AbortController ä»¥ fetch API çš„æ–¹å¼å–æ¶ˆè¯·æ±‚ï¼š

```js
const controller = new AbortController();

axios.get('/foo/bar', {
   signal: controller.signal
}).then(function(response) {
   //...
});
// å–æ¶ˆè¯·æ±‚
controller.abort()
```

### CancelToken `ğŸ‘å·²å¼ƒç”¨`

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ *CancelToken* å–æ¶ˆè¯·æ±‚ã€‚

> axios çš„ cancel token API åŸºäºå·²æ’¤å›çš„ [cancellable promises proposal](https://github.com/tc39/proposal-cancelable-promises)ã€‚

> æ­¤ API ä» v0.22.0 èµ·å·²å¼ƒç”¨ï¼Œä¸å»ºè®®åœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨

ä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ `CancelToken.source` å·¥å‚æ–¹æ³•åˆ›å»ºä¸€ä¸ªå–æ¶ˆä»¤ç‰Œï¼š

```js
const CancelToken = axios.CancelToken;
const source = CancelToken.source();

axios.get('/user/12345', {
  cancelToken: source.token
}).catch(function (thrown) {
  if (axios.isCancel(thrown)) {
    console.log('è¯·æ±‚å·²å–æ¶ˆ', thrown.message);
  } else {
    // å¤„ç†é”™è¯¯
  }
});

axios.post('/user/12345', {
  name: 'new name'
}, {
  cancelToken: source.token
})

// å–æ¶ˆè¯·æ±‚ï¼ˆmessage å‚æ•°å¯é€‰ï¼‰
source.cancel('ç”¨æˆ·å–æ¶ˆäº†æ“ä½œã€‚');
```

ä½ ä¹Ÿå¯ä»¥é€šè¿‡å‘ `CancelToken` æ„é€ å‡½æ•°ä¼ é€’ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°æ¥åˆ›å»ºå–æ¶ˆä»¤ç‰Œï¼š

```js
const CancelToken = axios.CancelToken;
let cancel;

axios.get('/user/12345', {
  cancelToken: new CancelToken(function executor(c) {
    // æ‰§è¡Œå™¨å‡½æ•°æ¥æ”¶ä¸€ä¸ªå–æ¶ˆå‡½æ•°ä½œä¸ºå‚æ•°
    cancel = c;
  })
});

// å–æ¶ˆè¯·æ±‚
cancel();
```

> **æ³¨æ„ï¼š** ä½ å¯ä»¥ä½¿ç”¨ç›¸åŒçš„å–æ¶ˆä»¤ç‰Œ/abort controller å–æ¶ˆå¤šä¸ªè¯·æ±‚ã€‚
> å¦‚æœåœ¨å‘èµ· Axios è¯·æ±‚æ—¶å–æ¶ˆä»¤ç‰Œå·²ç»å¤„äºå·²å–æ¶ˆçŠ¶æ€ï¼Œåˆ™è¯·æ±‚ä¼šç«‹å³è¢«å–æ¶ˆï¼Œä¸ä¼šå°è¯•å‘èµ·çœŸæ­£çš„è¯·æ±‚ã€‚

> åœ¨è¿‡æ¸¡æœŸé—´ï¼Œä½ å¯ä»¥åŒæ—¶ä½¿ç”¨è¿™ä¸¤ç§å–æ¶ˆ APIï¼Œç”šè‡³ç”¨äºåŒä¸€ä¸ªè¯·æ±‚ï¼š

## ä½¿ç”¨ `application/x-www-form-urlencoded` æ ¼å¼

### URLSearchParams

é»˜è®¤æƒ…å†µä¸‹ï¼Œaxios ä¼šå°† JavaScript å¯¹è±¡åºåˆ—åŒ–ä¸º `JSON`ã€‚å¦‚æœä½ å¸Œæœ›ä»¥ [`application/x-www-form-urlencoded` æ ¼å¼](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST) å‘é€æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ [`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams) APIï¼Œè¯¥ API è¢«ç»å¤§å¤šæ•°æµè§ˆå™¨å’Œ [Node](https://nodejs.org/api/url.html#url_class_urlsearchparams)ï¼ˆä» v10ï¼Œ2018 å¹´å‘å¸ƒï¼‰[æ”¯æŒ](http://www.caniuse.com/#feat=urlsearchparams)ã€‚

```js
const params = new URLSearchParams({ foo: 'bar' });
params.append('extraparam', 'value');
axios.post('/foo', params);
```

### æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆè€æ—§æµè§ˆå™¨ï¼‰

ä¸ºå…¼å®¹éå¸¸è€çš„æµè§ˆå™¨ï¼Œå¯ä»¥ä½¿ç”¨ [polyfill](https://github.com/WebReflection/url-search-params)ï¼ˆç¡®ä¿ä¸ºå…¨å±€ç¯å¢ƒå¼•å…¥ polyfillï¼‰ã€‚

æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ [`qs`](https://github.com/ljharb/qs) åº“å¯¹æ•°æ®è¿›è¡Œç¼–ç ï¼š

```js
const qs = require('qs');
axios.post('/foo', qs.stringify({ 'bar': 123 }));
```
```
æˆ–è€…ç”¨å¦ä¸€ç§æ–¹å¼ï¼ˆES6ï¼‰ï¼Œ

```js
import qs from 'qs';
const data = { 'bar': 123 };
const options = {
  method: 'POST',
  headers: { 'content-type': 'application/x-www-form-urlencoded' },
  data: qs.stringify(data),
  url,
};
axios(options);
```

### æ—§ç‰ˆ Node.js

å¯¹äºè¾ƒæ—§çš„ Node.js å¼•æ“ï¼Œä½ å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼ä½¿ç”¨ [`querystring`](https://nodejs.org/api/querystring.html) æ¨¡å—ï¼š

```js
const querystring = require('querystring');
axios.post('https://something.com/', querystring.stringify({ foo: 'bar' }));
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ [`qs`](https://github.com/ljharb/qs) åº“ã€‚

> **æ³¨æ„**ï¼šå¦‚æœä½ éœ€è¦å¯¹åµŒå¥—å¯¹è±¡è¿›è¡Œå­—ç¬¦ä¸²åŒ–ï¼Œå»ºè®®ä½¿ç”¨ `qs` åº“ï¼Œå› ä¸º `querystring` æ–¹æ³•åœ¨è¯¥ç”¨ä¾‹ä¸‹å­˜åœ¨[å·²çŸ¥é—®é¢˜](https://github.com/nodejs/node-v0.x-archive/issues/1665)ã€‚

### ğŸ†• è‡ªåŠ¨åºåˆ—åŒ–ä¸º URLSearchParams

å¦‚æœ `content-type` å¤´è¢«è®¾ç½®ä¸º "application/x-www-form-urlencoded"ï¼ŒAxios ä¼šè‡ªåŠ¨å°† data å¯¹è±¡åºåˆ—åŒ–ä¸º urlencoded æ ¼å¼ã€‚

```js
const data = {
  x: 1,
  arr: [1, 2, 3],
  arr2: [1, [2], 3],
  users: [{name: 'Peter', surname: 'Griffin'}, {name: 'Thomas', surname: 'Anderson'}],
};

await axios.postForm('https://postman-echo.com/post', data,
  {headers: {'content-type': 'application/x-www-form-urlencoded'}}
);
```

æœåŠ¡å™¨å°†ä¼šè¿™æ ·å¤„ç†ï¼š

```js
  {
    x: '1',
    'arr[]': [ '1', '2', '3' ],
    'arr2[0]': '1',
    'arr2[1][0]': '2',
    'arr2[2]': '3',
    'arr3[]': [ '1', '2', '3' ],
    'users[0][name]': 'Peter',
    'users[0][surname]': 'griffin',
    'users[1][name]': 'Thomas',
    'users[1][surname]': 'Anderson'
  }
````

å¦‚æœä½ çš„åç«¯ body-parserï¼ˆå¦‚ `express.js` çš„ `body-parser`ï¼‰æ”¯æŒåµŒå¥—å¯¹è±¡è§£ç ï¼Œä½ å°†åœ¨æœåŠ¡ç«¯è‡ªåŠ¨è·å¾—ç›¸åŒçš„å¯¹è±¡

```js
  var app = express();

  app.use(bodyParser.urlencoded({ extended: true })); // æ”¯æŒç¼–ç çš„è¯·æ±‚ä½“

  app.post('/', function (req, res, next) {
     // ä»¥ JSON å½¢å¼å›æ˜¾è¯·æ±‚ä½“
     res.send(JSON.stringify(req.body));
  });

  server = app.listen(3000);
```

## ä½¿ç”¨ `multipart/form-data` æ ¼å¼

### FormData

è¦ä»¥ `multipart/formdata` æ–¹å¼å‘é€æ•°æ®ï¼Œä½ éœ€è¦ä¼ é€’ä¸€ä¸ª formData å®ä¾‹ä½œä¸ºè½½è·ã€‚
æ— éœ€æ‰‹åŠ¨è®¾ç½® `Content-Type` å¤´ï¼ŒAxios ä¼šæ ¹æ®è½½è·ç±»å‹è‡ªåŠ¨åˆ¤æ–­ã€‚

```js
const formData = new FormData();
formData.append('foo', 'bar');

axios.post('https://httpbin.org/post', formData);
```

åœ¨ node.js ä¸­ï¼Œä½ å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼ä½¿ç”¨ [`form-data`](https://github.com/form-data/form-data) åº“ï¼š

```js
const FormData = require('form-data');

const form = new FormData();
form.append('my_field', 'my value');
form.append('my_buffer', new Buffer(10));
form.append('my_file', fs.createReadStream('/foo/bar.jpg'));
```
axios.post('https://example.com', form)
```

### ğŸ†• è‡ªåŠ¨åºåˆ—åŒ–ä¸º FormData

ä» `v0.27.0` å¼€å§‹ï¼Œå¦‚æœè¯·æ±‚çš„ `Content-Type` å¤´è¢«è®¾ç½®ä¸º `multipart/form-data`ï¼ŒAxios æ”¯æŒå°†å¯¹è±¡è‡ªåŠ¨åºåˆ—åŒ–ä¸º FormData å¯¹è±¡ã€‚

ä»¥ä¸‹è¯·æ±‚å°†ä»¥ FormData æ ¼å¼æäº¤æ•°æ®ï¼ˆé€‚ç”¨äºæµè§ˆå™¨å’Œ Node.jsï¼‰ï¼š

```js
import axios from 'axios';

axios.post('https://httpbin.org/post', {x: 1}, {
  headers: {
    'Content-Type': 'multipart/form-data'
  }
}).then(({data}) => console.log(data));
```

åœ¨ `node.js` æ„å»ºä¸­ï¼Œé»˜è®¤ä½¿ç”¨ ([`form-data`](https://github.com/form-data/form-data)) polyfillã€‚

ä½ å¯ä»¥é€šè¿‡è®¾ç½® `env.FormData` é…ç½®å˜é‡æ¥é‡è½½ FormData ç±»ï¼Œ
ä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½ å¯èƒ½å¹¶ä¸éœ€è¦è¿™æ ·åšï¼š

```js
const axios = require('axios');
var FormData = require('form-data');

axios.post('https://httpbin.org/post', {x: 1, buf: new Buffer(10)}, {
  headers: {
    'Content-Type': 'multipart/form-data'
  }
}).then(({data}) => console.log(data));
```

Axios çš„ FormData åºåˆ—åŒ–å™¨æ”¯æŒä¸€äº›ç‰¹æ®Šåç¼€ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

- `{}` - ä½¿ç”¨ JSON.stringify åºåˆ—åŒ–è¯¥å€¼
- `[]` - ä»¥ç›¸åŒçš„é”®åå°†ç±»æ•°ç»„å¯¹è±¡è§£åŒ…ä¸ºå¤šä¸ªå­—æ®µ

> **æ³¨æ„**ï¼šæ•°ç»„å’Œ FileList å¯¹è±¡é»˜è®¤ä¼šä½¿ç”¨è§£åŒ…/å±•å¼€æ“ä½œ

FormData åºåˆ—åŒ–å™¨æ”¯æŒé€šè¿‡ `config.formSerializer: object` å±æ€§ä¼ é€’é¢å¤–é€‰é¡¹ï¼Œä»¥å¤„ç†ç‰¹æ®Šæƒ…å†µï¼š

- `visitor: Function` - ç”¨æˆ·è‡ªå®šä¹‰çš„éå†å‡½æ•°ï¼Œå°†æŒ‰ç…§è‡ªå®šä¹‰è§„åˆ™é€’å½’åœ°å°†æ•°æ®å¯¹è±¡åºåˆ—åŒ–ä¸º `FormData` å¯¹è±¡ã€‚

- `dots: boolean = false` - ä½¿ç”¨ç‚¹å·è¡¨ç¤ºæ³•è€Œä¸æ˜¯æ‹¬å·æ¥åºåˆ—åŒ–æ•°ç»„å’Œå¯¹è±¡ï¼›

- `metaTokens: boolean = true` - åœ¨ FormData çš„é”®åä¸­æ·»åŠ ç‰¹æ®Šåç¼€ï¼ˆä¾‹å¦‚ `user{}: '{"name": "John"}'`ï¼‰ã€‚åç«¯çš„ body-parser å¯èƒ½ä¼šåˆ©ç”¨æ­¤å…ƒä¿¡æ¯è‡ªåŠ¨å°†å€¼è§£æä¸º JSONã€‚

- `indexes: null|false|true = false` - æ§åˆ¶å¦‚ä½•ä¸ºâ€œæ‰å¹³â€ç±»æ•°ç»„å¯¹è±¡çš„è§£åŒ…é”®æ·»åŠ ç´¢å¼•ã€‚

    - `null` - ä¸æ·»åŠ æ‹¬å·ï¼ˆ`arr: 1`, `arr: 2`, `arr: 3`ï¼‰
    - `false`ï¼ˆé»˜è®¤ï¼‰- æ·»åŠ ç©ºæ‹¬å·ï¼ˆ`arr[]: 1`, `arr[]: 2`, `arr[]: 3`ï¼‰
    - `true` - æ·»åŠ å¸¦ç´¢å¼•çš„æ‹¬å·ï¼ˆ`arr[0]: 1`, `arr[1]: 2`, `arr[2]: 3`ï¼‰

å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹å¯¹è±¡ï¼š

```js
const obj = {
  x: 1,
  arr: [1, 2, 3],
  arr2: [1, [2], 3],
  users: [{name: 'Peter', surname: 'Griffin'}, {name: 'Thomas', surname: 'Anderson'}],
  'obj2{}': [{x:1}]
};
```

Axios åºåˆ—åŒ–å™¨å†…éƒ¨å°†æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```js
const formData = new FormData();
formData.append('x', '1');
formData.append('arr[]', '1');
formData.append('arr[]', '2');
formData.append('arr[]', '3');
formData.append('arr2[0]', '1');
formData.append('arr2[1][0]', '2');
formData.append('arr2[2]', '3');
formData.append('users[0][name]', 'Peter');
formData.append('users[0][surname]', 'Griffin');
formData.append('users[1][name]', 'Thomas');
formData.append('users[1][surname]', 'Anderson');
formData.append('obj2{}', '[{"x":1}]');
```

Axios æ”¯æŒä»¥ä¸‹ç®€å†™æ–¹æ³•ï¼š`postForm`ã€`putForm`ã€`patchForm`ï¼Œ
å®ƒä»¬åªæ˜¯å¯¹åº”çš„ http æ–¹æ³•ï¼Œå¹¶ä¸” `Content-Type` å¤´å·²é¢„è®¾ä¸º `multipart/form-data`ã€‚

## æ–‡ä»¶ä¸Šä¼ 

ä½ å¯ä»¥è½»æ¾æäº¤å•ä¸ªæ–‡ä»¶ï¼š

```js
await axios.postForm('https://httpbin.org/post', {
  'myVar' : 'foo',
  'file': document.querySelector('#fileInput').files[0]
});
```

æˆ–ä»¥ `multipart/form-data` æ–¹å¼ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼š

```js
await axios.postForm('https://httpbin.org/post', {
  'files[]': document.querySelector('#fileInput').files
});
```

å¯ä»¥ç›´æ¥ä¼ é€’ `FileList` å¯¹è±¡ï¼š

```js
await axios.postForm('https://httpbin.org/post', document.querySelector('#fileInput').files)
```

æ‰€æœ‰æ–‡ä»¶å°†ä½¿ç”¨ç›¸åŒçš„å­—æ®µåå‘é€ï¼š`files[]`ã€‚

## ğŸ†• HTML è¡¨å•æäº¤ï¼ˆæµè§ˆå™¨ç«¯ï¼‰

å°† HTML Form å…ƒç´ ä½œä¸ºè´Ÿè½½ä¼ é€’ï¼Œä»¥ `multipart/form-data` å†…å®¹ç±»å‹æäº¤ã€‚

```js
await axios.postForm('https://httpbin.org/post', document.querySelector('#htmlForm'));
```

ä¹Ÿå¯ä»¥é€šè¿‡æ˜¾å¼è®¾ç½® `Content-Type` å¤´ä¸º `application/json`ï¼Œå°† `FormData` å’Œ `HTMLForm` å¯¹è±¡ä»¥ `JSON` å½¢å¼æäº¤ï¼š

```js
await axios.post('https://httpbin.org/post', document.querySelector('#htmlForm'), {
  headers: {
    'Content-Type': 'application/json'
  }
})
```

ä¾‹å¦‚ï¼Œè¡¨å•

```html
<form id="form">
  <input type="text" name="foo" value="1">
  <input type="text" name="deep.prop" value="2">
  <input type="text" name="deep prop spaced" value="3">
  <input type="text" name="baz" value="4">
  <input type="text" name="baz" value="5">

  <select name="user.age">
    <option value="value1">Value 1</option>
    <option value="value2" selected>Value 2</option>
    <option value="value3">Value 3</option>
  </select>

  <input type="submit" value="ä¿å­˜">
</form>
```

å°†ä¼šè¢«æäº¤ä¸ºå¦‚ä¸‹ JSON å¯¹è±¡ï¼š

```js
{
  "foo": "1",
  "deep": {
    "prop": {
      "spaced": "3"
    }
  },
  "baz": [
    "4",
    "5"
  ],
  "user": {
    "age": "value2"
  }
}
````

å½“å‰ä¸æ”¯æŒä»¥ JSONï¼ˆ`base64`ï¼‰æ–¹å¼å‘é€ `Blobs`/`Files`ã€‚

## ğŸ†• è¿›åº¦æ•è·

Axios æ”¯æŒåœ¨æµè§ˆå™¨å’Œ node ç¯å¢ƒä¸­æ•è·è¯·æ±‚ä¸Šä¼ /ä¸‹è½½è¿›åº¦ã€‚
è¿›åº¦äº‹ä»¶çš„é¢‘ç‡è¢«å¼ºåˆ¶é™åˆ¶ä¸ºæ¯ç§’ `3` æ¬¡ã€‚

```js    
await axios.post(url, data, {
  onUploadProgress: function (axiosProgressEvent) {
    /*{
      loaded: number;
      total?: number;
      progress?: number; // èŒƒå›´åœ¨ [0..1] ä¹‹é—´
      bytes: number; // è‡ªä¸Šæ¬¡è§¦å‘ä»¥æ¥å·²ä¼ è¾“çš„å­—èŠ‚æ•°ï¼ˆå¢é‡ï¼‰
      estimated?: number; // é¢„è®¡å‰©ä½™æ—¶é—´ï¼ˆç§’ï¼‰
      rate?: number; // ä¸Šä¼ é€Ÿç‡ï¼ˆå­—èŠ‚æ•°ï¼‰
      upload: true; // ä¸Šä¼ æ ‡è¯†
    }*/
  },

  onDownloadProgress: function (axiosProgressEvent) {
    /*{
```js
      loaded: number;
      total?: number;
      progress?: number;
      bytes: number; 
      estimated?: number;
      rate?: number; // ä¸‹è½½é€Ÿåº¦ï¼ˆå­—èŠ‚æ•°ï¼‰
      download: true; // ä¸‹è½½æ ‡å¿—
    }*/
  }
});  
```

ä½ ä¹Ÿå¯ä»¥åœ¨ node.js ä¸­è·Ÿè¸ªæµä¸Šä¼ /ä¸‹è½½è¿›åº¦ï¼š

```js
const {data} = await axios.post(SERVER_URL, readableStream, {
   onUploadProgress: ({progress}) => {
     console.log((progress * 100).toFixed(2));
   },
  
   headers: {
    'Content-Length': contentLength
   },

   maxRedirects: 0 // é¿å…ç¼“å†²æ•´ä¸ªæµ
});
````

> **æ³¨æ„ï¼š**
> ç›®å‰åœ¨ node.js ç¯å¢ƒä¸‹ä¸æ”¯æŒæ•è· FormData ä¸Šä¼ è¿›åº¦ã€‚

> **âš ï¸ è­¦å‘Š**
> å»ºè®®åœ¨ **node.js** ç¯å¢ƒä¸­é€šè¿‡è®¾ç½® maxRedirects: 0 ç¦ç”¨é‡å®šå‘æ¥ä¸Šä¼ æµï¼Œ
> å› ä¸º follow-redirects åŒ…ä¼šåœ¨å†…å­˜ä¸­ç¼“å†²æ•´ä¸ªæµï¼Œè€Œä¸ä¼šéµå¾ªâ€œèƒŒå‹â€ç®—æ³•ã€‚


## ğŸ†• é™é€Ÿ

ä¸‹è½½å’Œä¸Šä¼ é€Ÿç‡é™åˆ¶åªèƒ½ä¸º http é€‚é…å™¨ï¼ˆnode.jsï¼‰è®¾ç½®ï¼š

```js
const {data} = await axios.post(LOCAL_SERVER_URL, myBuffer, {
  onUploadProgress: ({progress, rate}) => {
    console.log(`Upload [${(progress*100).toFixed(2)}%]: ${(rate / 1024).toFixed(2)}KB/s`)
  },
   
  maxRate: [100 * 1024], // é™åˆ¶ä¸º 100KB/s
});
```

## ğŸ†• AxiosHeaders

Axios æœ‰è‡ªå·±çš„ `AxiosHeaders` ç±»ï¼Œä½¿ç”¨ç±»ä¼¼ Map çš„ API æ“ä½œè¯·æ±‚å¤´ï¼Œä¿è¯ä¸åŒºåˆ†å¤§å°å†™ã€‚
è™½ç„¶ HTTP å¤´éƒ¨ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½† Axios ä¼šå‡ºäºé£æ ¼è€ƒè™‘ä¿ç•™åŸå§‹å¤´éƒ¨çš„å¤§å°å†™ï¼Œ
å¹¶ä½œä¸ºæŸäº›æœåŠ¡å™¨é”™è¯¯åŒºåˆ†å¤´éƒ¨å¤§å°å†™æ—¶çš„è§£å†³æ–¹æ¡ˆã€‚
ç›´æ¥æ“ä½œ headers å¯¹è±¡çš„æ—§æ–¹å¼ä»ç„¶å¯ç”¨ï¼Œä½†å·²å¼ƒç”¨ï¼Œä¸å»ºè®®åœ¨å°†æ¥ä½¿ç”¨ã€‚

### æ“ä½œè¯·æ±‚å¤´

AxiosHeaders å¯¹è±¡å®ä¾‹å¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„å†…éƒ¨å€¼ï¼Œç”¨äºæ§åˆ¶è®¾ç½®å’Œåˆå¹¶é€»è¾‘ã€‚
æœ€ç»ˆå¸¦æœ‰å­—ç¬¦ä¸²å€¼çš„ headers å¯¹è±¡ç”± Axios é€šè¿‡è°ƒç”¨ `toJSON` æ–¹æ³•è·å¾—ã€‚

> æ³¨æ„ï¼šæ­¤å¤„ JSON æŒ‡çš„æ˜¯ä»…åŒ…å«å­—ç¬¦ä¸²å€¼ã€å‡†å¤‡ç”¨äºç½‘ç»œä¼ è¾“çš„å¯¹è±¡ã€‚

å¤´éƒ¨å€¼å¯ä»¥æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š
- `string` - å°†ä¼šå‘é€ç»™æœåŠ¡å™¨çš„æ™®é€šå­—ç¬¦ä¸²å€¼
- `null` - æ¸²æŸ“ä¸º JSON æ—¶è·³è¿‡è¯¥å¤´éƒ¨
- `false` - æ¸²æŸ“ä¸º JSON æ—¶è·³è¿‡è¯¥å¤´éƒ¨ï¼Œæ­¤å¤–è¡¨ç¤ºå¿…é¡»ä½¿ç”¨ `rewrite` é€‰é¡¹ä¸º `true` è°ƒç”¨ `set` æ–¹æ³•æ‰èƒ½è¦†ç›–æ­¤å€¼
  ï¼ˆAxios å†…éƒ¨ä½¿ç”¨æ­¤æ–¹å¼ï¼Œå…è®¸ç”¨æˆ·é€‰æ‹©ä¸å®‰è£…æŸäº›å¤´éƒ¨ï¼Œå¦‚ `User-Agent` æˆ– `Content-Type`ï¼‰
- `undefined` - æœªè®¾ç½®å€¼

> æ³¨æ„ï¼šåªæœ‰å¤´éƒ¨å€¼ä¸ç­‰äº undefined æ—¶æ‰è§†ä¸ºå·²è®¾ç½®ã€‚

headers å¯¹è±¡æ€»æ˜¯åœ¨æ‹¦æˆªå™¨å’Œè½¬æ¢å™¨ä¸­åˆå§‹åŒ–ï¼š

```ts
  axios.interceptors.request.use((request: InternalAxiosRequestConfig) => {
      request.headers.set('My-header', 'value');

      request.headers.set({
        "My-set-header1": "my-set-value1",
        "My-set-header2": "my-set-value2"
      });
      
      request.headers.set('User-Agent', false); // ç¦æ­¢ Axios åç»­è®¾ç½®è¯¥å¤´éƒ¨

      request.headers.setContentType('text/plain');
    
      request.headers['My-set-header2'] = 'newValue' // ç›´æ¥è®¿é—®å·²å¼ƒç”¨
    
      return request;
    }
  );
````

ä½ å¯ä»¥ä½¿ç”¨ `for...of` è¯­å¥éå† `AxiosHeaders` å®ä¾‹ï¼š

````js
const headers = new AxiosHeaders({
  foo: '1',
````
  bar: '2',
  baz: '3'
});

for(const [header, value] of headers) {
  console.log(header, value);
}

// foo 1
// bar 2
// baz 3
````

### new AxiosHeaders(headers?)

æ„é€ ä¸€ä¸ªæ–°çš„ `AxiosHeaders` å®ä¾‹ã€‚

```
constructor(headers?: RawAxiosHeaders | AxiosHeaders | string);
```

å¦‚æœ headers å¯¹è±¡æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šè¢«è§£æä¸ºåŸå§‹ HTTP å¤´éƒ¨ä¿¡æ¯ã€‚

````js
const headers = new AxiosHeaders(`
Host: www.bing.com
User-Agent: curl/7.54.0
Accept: */*`);

console.log(headers);

// Object [AxiosHeaders] {
//   host: 'www.bing.com',
//   'user-agent': 'curl/7.54.0',
//   accept: '*/*'
// }
````

### AxiosHeaders#set

```ts
set(headerName, value: Axios, rewrite?: boolean);
set(headerName, value, rewrite?: (this: AxiosHeaders, value: string, name: string, headers: RawAxiosHeaders) => boolean);
set(headers?: RawAxiosHeaders | AxiosHeaders | string, rewrite?: boolean);
```

`rewrite` å‚æ•°ç”¨äºæ§åˆ¶è¦†ç›–è¡Œä¸ºï¼š
- `false` - å¦‚æœ header çš„å€¼å·²è®¾ç½®ï¼ˆä¸ä¸º `undefined`ï¼‰åˆ™ä¸è¦†ç›–
- `undefined`ï¼ˆé»˜è®¤ï¼‰- é™¤é header çš„å€¼è®¾ç½®ä¸º `false`ï¼Œå¦åˆ™è¦†ç›–è¯¥ header
- `true` - æ— è®ºå¦‚ä½•éƒ½è¦†ç›–

è¯¥é€‰é¡¹ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼Œç”¨äºå†³å®šæ˜¯å¦åº”è¦†ç›–è¯¥å€¼ã€‚

è¿”å› `this`ã€‚

### AxiosHeaders#get(header)

```
  get(headerName: string, matcher?: true | AxiosHeaderMatcher): AxiosHeaderValue;
  get(headerName: string, parser: RegExp): RegExpExecArray | null;
````

è¿”å› header çš„å†…éƒ¨å€¼ã€‚å®ƒå¯ä»¥æ¥å—ä¸€ä¸ªé¢å¤–å‚æ•°ï¼Œç”¨äºç”¨ `RegExp.exec`ã€åŒ¹é…å™¨å‡½æ•°æˆ–å†…éƒ¨é”®å€¼è§£æå™¨è§£æ header çš„å€¼ã€‚

```ts
const headers = new AxiosHeaders({
  'Content-Type': 'multipart/form-data; boundary=Asrf456BGe4h'
});

console.log(headers.get('Content-Type')); 
// multipart/form-data; boundary=Asrf456BGe4h

console.log(headers.get('Content-Type', true)); // è§£æç”¨ \s,;= åˆ†éš”çš„å­—ç¬¦ä¸²ä¸­çš„é”®å€¼å¯¹ï¼š
// [Object: null prototype] {
//   'multipart/form-data': undefined,
//    boundary: 'Asrf456BGe4h'
// }


console.log(headers.get('Content-Type', (value, name, headers) => {
  return String(value).replace(/a/g, 'ZZZ');
}));
// multipZZZrt/form-dZZZtZZZ; boundZZZry=Asrf456BGe4h

console.log(headers.get('Content-Type', /boundary=(\w+)/)?.[0]);
// boundary=Asrf456BGe4h

```

è¿”å› header çš„å€¼ã€‚

### AxiosHeaders#has(header, matcher?)

```
has(header: string, matcher?: AxiosHeaderMatcher): boolean;
```

å¦‚æœ header å·²è®¾ç½®ï¼ˆå€¼ä¸ä¸º `undefined`ï¼‰ï¼Œåˆ™è¿”å› `true`ã€‚
````
### AxiosHeaders#delete(header, matcher?)

```
delete(header: string | string[], matcher?: AxiosHeaderMatcher): boolean;
```

å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªå¤´è¢«ç§»é™¤ï¼Œåˆ™è¿”å› `true`ã€‚

### AxiosHeaders#clear(matcher?)

```
clear(matcher?: AxiosHeaderMatcher): boolean;
```

ç§»é™¤æ‰€æœ‰å¤´ä¿¡æ¯ã€‚
ä¸ `delete` æ–¹æ³•çš„ matcher ä¸åŒï¼Œè¿™é‡Œçš„å¯é€‰ matcher ç”¨äºåŒ¹é…å¤´åç§°è€Œä¸æ˜¯å€¼ã€‚

```ts
const headers = new AxiosHeaders({
  'foo': '1',
  'x-foo': '2',
  'x-bar': '3',
});

console.log(headers.clear(/^x-/)); // true

console.log(headers.toJSON()); // [Object: null prototype] { foo: '1' }
```

å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªå¤´è¢«æ¸…é™¤ï¼Œåˆ™è¿”å› `true`ã€‚

### AxiosHeaders#normalize(format);

å¦‚æœ headers å¯¹è±¡è¢«ç›´æ¥æ›´æ”¹ï¼Œå¯èƒ½ä¼šå‡ºç°åŒåä½†å¤§å°å†™ä¸åŒçš„é‡å¤é¡¹ã€‚
æ­¤æ–¹æ³•é€šè¿‡å°†é‡å¤é”®åˆå¹¶ä¸ºä¸€ä¸ªæ¥è§„èŒƒåŒ– headers å¯¹è±¡ã€‚
Axios åœ¨è°ƒç”¨æ¯ä¸ªæ‹¦æˆªå™¨åä¼šåœ¨å†…éƒ¨ä½¿ç”¨æ­¤æ–¹æ³•ã€‚
å°† `format` è®¾ä¸º true å¯å°†å¤´åç§°è½¬æ¢ä¸ºå°å†™ï¼Œå¹¶å°†é¦–å­—æ¯å¤§å†™ï¼ˆå¦‚ `cOntEnt-type` => `Content-Type`ï¼‰

```js
const headers = new AxiosHeaders({
  'foo': '1',
});

headers.Foo = '2';
headers.FOO = '3';

console.log(headers.toJSON()); // [Object: null prototype] { foo: '1', Foo: '2', FOO: '3' }
console.log(headers.normalize().toJSON()); // [Object: null prototype] { foo: '3' }
console.log(headers.normalize(true).toJSON()); // [Object: null prototype] { Foo: '3' }
```

è¿”å› `this`ã€‚

### AxiosHeaders#concat(...targets)

```
concat(...targets: Array<AxiosHeaders | RawAxiosHeaders | string | undefined | null>): AxiosHeaders;
```

å°†å®ä¾‹ä¸ç›®æ ‡åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ `AxiosHeaders` å®ä¾‹ã€‚å¦‚æœç›®æ ‡æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šè¢«è§£æä¸ºåŸå§‹ HTTP å¤´ã€‚

è¿”å›ä¸€ä¸ªæ–°çš„ `AxiosHeaders` å®ä¾‹ã€‚

### AxiosHeaders#toJSON(asStrings?)

````
toJSON(asStrings?: boolean): RawAxiosHeaders;
````

å°†æ‰€æœ‰å†…éƒ¨å¤´ä¿¡æ¯å€¼è§£æä¸ºä¸€ä¸ªæ–°çš„ null åŸå‹å¯¹è±¡ã€‚
å°† `asStrings` è®¾ä¸º true å¯ä»¥å°†æ•°ç»„è§£æä¸ºç”¨é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚

### AxiosHeaders.from(thing?)

````
from(thing?: AxiosHeaders | RawAxiosHeaders | string): AxiosHeaders;
````

è¿”å›ç”±ä¼ å…¥çš„åŸå§‹ headers åˆ›å»ºçš„æ–° `AxiosHeaders` å®ä¾‹ï¼Œ
æˆ–è€…å¦‚æœä¼ å…¥çš„æ˜¯ `AxiosHeaders` å®ä¾‹ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥å¯¹è±¡ã€‚

### AxiosHeaders.concat(...targets)

````
concat(...targets: Array<AxiosHeaders | RawAxiosHeaders | string | undefined | null>): AxiosHeaders;
````

è¿”å›ä¸€ä¸ªé€šè¿‡åˆå¹¶ç›®æ ‡å¯¹è±¡åˆ›å»ºçš„æ–° `AxiosHeaders` å®ä¾‹ã€‚

### å¿«æ·æ–¹å¼

æä¾›ä»¥ä¸‹å¿«æ·æ–¹å¼ï¼š

- `setContentType`ï¼Œ`getContentType`ï¼Œ`hasContentType`

- `setContentLength`ï¼Œ`getContentLength`ï¼Œ`hasContentLength`

- `setAccept`ï¼Œ`getAccept`ï¼Œ`hasAccept`

- `setUserAgent`ï¼Œ`getUserAgent`ï¼Œ`hasUserAgent`

- `setContentEncoding`, `getContentEncoding`, `hasContentEncoding`

## ğŸ”¥ Fetch é€‚é…å™¨

Fetch é€‚é…å™¨åœ¨ `v1.7.0` ä¸­å¼•å…¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ„å»ºä¸­æ²¡æœ‰ `xhr` å’Œ `http` é€‚é…å™¨ï¼Œæˆ–è€…ç¯å¢ƒä¸æ”¯æŒï¼Œå°†ä¼šä½¿ç”¨å®ƒã€‚
è¦é»˜è®¤ä½¿ç”¨å®ƒï¼Œå¿…é¡»æ˜¾å¼é€‰æ‹©ï¼š

```js
const {data} = axios.get(url, {
  adapter: 'fetch' // é»˜è®¤é¡ºåº ['xhr', 'http', 'fetch']
})
```

ä½ å¯ä»¥ä¸ºæ­¤åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å®ä¾‹ï¼š

```js
const fetchAxios = axios.create({
  adapter: 'fetch'
});

const {data} = fetchAxios.get(url);
```

è¯¥é€‚é…å™¨æ”¯æŒä¸ `xhr` é€‚é…å™¨ç›¸åŒçš„åŠŸèƒ½ï¼Œ**åŒ…æ‹¬ä¸Šä¼ å’Œä¸‹è½½è¿›åº¦çš„æ•æ‰**ã€‚
æ­¤å¤–ï¼Œå®ƒè¿˜æ”¯æŒé¢å¤–çš„å“åº”ç±»å‹ï¼Œå¦‚ `stream` å’Œ `formdata`ï¼ˆå¦‚æœç¯å¢ƒæ”¯æŒï¼‰ã€‚

## è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemverï¼‰

åœ¨ axios è¾¾åˆ° `1.0` æ­£å¼ç‰ˆä¹‹å‰ï¼Œä»»ä½•ç ´åæ€§å˜æ›´éƒ½å°†é€šè¿‡æ–°çš„æ¬¡ç‰ˆæœ¬å‘å¸ƒã€‚ä¾‹å¦‚ï¼Œ`0.5.1` å’Œ `0.5.4` å°†æ‹¥æœ‰ç›¸åŒçš„ APIï¼Œä½† `0.6.0` ä¼šæœ‰ç ´åæ€§å˜æ›´ã€‚

## Promises

axios ä¾èµ–åŸç”Ÿçš„ ES6 Promise å®ç°ä»¥è·å¾—[æ”¯æŒ](https://caniuse.com/promises)ã€‚
å¦‚æœä½ çš„ç¯å¢ƒä¸æ”¯æŒ ES6 Promiseï¼Œä½ å¯ä»¥ä½¿ç”¨ [polyfill](https://github.com/jakearchibald/es6-promise)ã€‚

## TypeScript

axios åŒ…å« [TypeScript](https://typescriptlang.org) ç±»å‹å®šä¹‰ä»¥åŠ axios é”™è¯¯çš„ç±»å‹ä¿æŠ¤ã€‚

```typescript
let user: User = null;
try {
  const { data } = await axios.get('/user?ID=12345');
  user = data.userDetails;
} catch (error) {
  if (axios.isAxiosError(error)) {
    handleAxiosError(error);
  } else {
    handleUnexpectedError(error);
  }
}
```

ç”±äº axios åŒæ—¶ä»¥ ESM é»˜è®¤å¯¼å‡ºå’Œ CJS çš„ `module.exports` æ–¹å¼å‘å¸ƒï¼Œå› æ­¤æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚
æ¨èçš„è®¾ç½®æ˜¯ä½¿ç”¨ `"moduleResolution": "node16"`ï¼ˆè¿™åœ¨ `"module": "node16"` æ—¶å·²éšå¼è®¾ç½®ï¼‰ã€‚æ³¨æ„ï¼Œè¿™éœ€è¦ TypeScript 4.7 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
å¦‚æœä½¿ç”¨ ESMï¼Œä½ çš„è®¾ç½®åº”è¯¥æ²¡é—®é¢˜ã€‚
å¦‚æœä½ å°† TypeScript ç¼–è¯‘ä¸º CJS å¹¶ä¸”æ— æ³•ä½¿ç”¨ `"moduleResolution": "node16"`ï¼Œä½ å¿…é¡»å¯ç”¨ `esModuleInterop`ã€‚
å¦‚æœä½ ä½¿ç”¨ TypeScript å¯¹ CJS JavaScript ä»£ç è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä½ å”¯ä¸€çš„é€‰æ‹©æ˜¯ä½¿ç”¨ `"moduleResolution": "node16"`ã€‚

## åœ¨çº¿ä¸€é”®è®¾ç½®

ä½ å¯ä»¥ä½¿ç”¨ Gitpodï¼Œä¸€ä¸ªåœ¨çº¿ IDEï¼ˆå¯¹å¼€æºå…è´¹ï¼‰ï¼Œç”¨äºè´¡çŒ®ä»£ç æˆ–åœ¨çº¿è¿è¡Œç¤ºä¾‹ã€‚

[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/#https://github.com/axios/axios/blob/main/examples/server.js)


## èµ„æº

* [æ›´æ–°æ—¥å¿—](https://github.com/axios/axios/blob/v1.x/CHANGELOG.md)
* [ç”Ÿæ€ç³»ç»Ÿ](https://github.com/axios/axios/blob/v1.x/ECOSYSTEM.md)
* [è´¡çŒ®æŒ‡å—](https://github.com/axios/axios/blob/v1.x/CONTRIBUTING.md)
* [è¡Œä¸ºå‡†åˆ™](https://github.com/axios/axios/blob/v1.x/CODE_OF_CONDUCT.md)

## è‡´è°¢

axios æ·±å— [AngularJS](https://angularjs.org/) æä¾›çš„ [$http æœåŠ¡](https://docs.angularjs.org/api/ng/service/$http) å¯å‘ã€‚æœ€ç»ˆï¼Œaxios è‡´åŠ›äºæä¾›ä¸€ä¸ªå¯åœ¨ AngularJS ä¹‹å¤–ä½¿ç”¨çš„ç‹¬ç«‹ `$http` ç±»æœåŠ¡ã€‚

## è®¸å¯è¯

[MIT](LICENSE)


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-30

---