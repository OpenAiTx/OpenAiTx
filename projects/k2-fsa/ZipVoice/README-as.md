
<div align="right">
  <details>
    <summary >ЁЯМР ржнрж╛рж╖рж╛</summary>
    <div>
      <div align="center">
        <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=en">English</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=zh-CN">чоАф╜Уф╕нцЦЗ</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=zh-TW">ч╣БщлФф╕нцЦЗ</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=ja">цЧецЬмшкЮ</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=ko">эХЬъ╡ньЦ┤</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=hi">рд╣рд┐рдиреНрджреА</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=th">р╣Др╕Чр╕в</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=fr">Fran├зais</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=de">Deutsch</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=es">Espa├▒ol</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=it">Itapano</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=ru">╨а╤Г╤Б╤Б╨║╨╕╨╣</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=pt">Portugu├кs</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=nl">Nederlands</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=pl">Polski</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=ar">╪з┘Д╪╣╪▒╪и┘К╪й</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=fa">┘Б╪з╪▒╪│█М</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=tr">T├╝rk├зe</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=vi">Tiс║┐ng Viс╗Зt</a>
        | <a href="https://openaitx.github.io/view.html?user=k2-fsa&project=ZipVoice&lang=id">Bahasa Indonesia</a>
      </div>
    </div>
  </details>
</div>

<div align="center">

# ZipVoiceтЪб

## Flow Matching ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ ржжрзНрз░рзБржд ржЖрз░рзБ ржЙржЪрзНржЪ-ржЧрзБржгржорж╛ржирз░ рж╢рзВржирзНржп-рж╢рзНржмржЯ ржкрж╛ржа-ржЯрзБ-рж╕рзНржкрзАржЪ
</div>

## ржкрз░рж┐рж╕ржВржЦрзНржпрж╛ржи

ZipVoice рж╣рзИржЫрзЗ flow matching-рз░ ржЖржзрж╛рз░ржд ржирж┐рз░рзНржорж┐ржд, ржжрзНрз░рзБржд ржЖрз░рзБ ржЙржЪрзНржЪ-ржЧрзБржгржЧрждржорж╛ржирз░ zero-shot TTS ржоржбрзЗрж▓рз░ ржПржХ рж╢рзГржВржЦрж▓рж╛ред

### рзз. ржорзБржЦрзНржп ржмрзИрж╢рж┐рж╖рзНржЯрзНржпрж╕ржорзВрж╣

- рж╕рз░рзБ ржЖрз░рзБ ржжрзНрз░рзБржд: ржХрзЗрз▒рж▓ рззрзирзйM ржкрз░рж╛ржорж┐рждрзНрз░ред

- ржЙржЪрзНржЪ-ржЧрзБржгржЧрждржорж╛ржирз░ ржнрзЯрзЗржЫ ржХрзНрж▓тАЩржирж┐ржВ: рж╕рзНржкрзАржХрж╛рз░рз░ рж╕рж╛ржжрзГрж╢рзНржп, ржмрзБржЬрж╛ржмрж▓рзИ рж╕ржХрзНрж╖ржорждрж╛, ржЖрз░рзБ ржкрзНрз░рж╛ржХрзГрждрж┐ржХрждрж╛рз░ ржХрзНрж╖рзЗрждрзНрз░ржд рж╢рзНрз░рзЗрж╖рзНржа ржкрз░рзНржпрж╛ржпрж╝рз░ ржХрж╛рз░рзНржпржХрзНрж╖ржорждрж╛ред

- ржмрж╣рзБ-ржнрж╛рж╖рж┐ржХ: ржЪрзАржирж╛ ржЖрз░рзБ ржЗржВрз░рж╛ржЬрзА рж╕ржорз░рзНржерж┐рждред

- ржмрж╣рзБ-ржорзЛржб: ржПржХржХ рж╕рзНржкрзАржХрж╛рз░ ржЖрз░рзБ рж╕ржВрж▓рж╛ржк ржЙрждрзНржкрж╛ржжржирз░ ржжрзБржпрж╝рзЛ рж╕ржорз░рзНржерж┐рждред

### рзи. ржоржбрзЗрж▓ ржнрзЗрз░рж┐ржпрж╝рзЗржгрзНржЯрж╕ржорзВрж╣

<table>
  <thead>
    <tr>
      <th>ржоржбрзЗрж▓рз░ ржирж╛ржо</th>
      <th>ржмрж┐рз▒рз░ржг</th>
      <th>ржкрзЗржкрж╛рз░</th>
      <th>ржбрзЗржорзЛ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ZipVoice</td>
      <td>ржорзВрж▓ ржоржбрзЗрж▓, ржпрж┐ ржЪрзАржирж╛ ржЖрз░рзБ ржЗржВрз░рж╛ржЬрзАржд zero-shot ржПржХржХ-рж╕рзНржкрзАржХрж╛рз░ TTS рж╕ржорз░рзНржержи ржХрз░рзЗред</td>
      <td rowspan="2"><a href="https://arxiv.org/abs/2506.13053"><img src="https://img.shields.io/badge/arXiv-ржкрзЗржкрж╛рз░-COLOR.svg"></a></td>
      <td rowspan="2"><a href="https://zipvoice.github.io"><img src="https://img.shields.io/badge/GitHub.io-ржбрзЗржорзЛ_ржкрзГрж╖рзНржарж╛-blue?logo=Github&style=flat-square"></a></td>
    </tr>
    <tr>
      <td>ZipVoice-Distill</td>
      <td>ZipVoice-рз░ ржбрж┐рж╕рзНржЯрж┐рж▓рзНржб рж╕ржВрж╕рзНржХрз░ржг, ржЦрзБржм ржХржо ржХрж╛рз░рзНржпржХрзНрж╖ржорждрж╛ рж╣рзНрз░рж╛рж╕рз░ рж╕рзИрждрзЗ ржмрзЗржЫрж┐ ржжрзНрз░рзБрждред</td>
    </tr>
    <tr>
      <td>ZipVoice-Dialog</td>
      <td>ZipVoice-рз░ ржУржкрз░ржд ржирж┐рз░рзНржорж┐ржд рж╕ржВрж▓рж╛ржк ржЙрждрзНржкрж╛ржжржи ржоржбрзЗрж▓, ржпрж┐ ржПржХржХ-ржЪрзЗржирзЗрж▓ ржжрзБржЬржи ржмрзНржпржХрзНрждрж┐рз░ ржорзБржЦрз░ рж╕ржВрж▓рж╛ржк ржЙрждрзНржкрж╛ржжржи ржХрз░рж┐ржм ржкрж╛рз░рзЗред</td>
      <td rowspan="2"><a href="https://arxiv.org/abs/2507.09318"><img src="https://img.shields.io/badge/arXiv-ржкрзЗржкрж╛рз░-COLOR.svg"></a></td>
      <td rowspan="2"><a href="https://zipvoice-dialog.github.io"><img src="https://img.shields.io/badge/GitHub.io-ржбрзЗржорзЛ_ржкрзГрж╖рзНржарж╛-blue?logo=Github&style=flat-square"></a></td>
    </tr>
    <tr>
      <td>ZipVoice-Dialog-Stereo</td>
      <td>ZipVoice-Dialog рз░ рж╖рзНржЯрзЗрз░рж┐ржЕ' рз░рзВржк, ржпрж┐ ржжрзБржЯрж╛ ржЪрзЗржирзЗрж▓ржд рж╕ржВрж▓рж╛ржк рж╕рзГрж╖рзНржЯрж┐ ржХрз░рж┐ржмрж▓рзИ рж╕ржХрзНрж╖ржо, ржп'ржд ржкрзНрз░рждрж┐ржЯрзЛ ржмржХрзНрждрж╛ржХ ржкрзГржержХ ржЪрзЗржирзЗрж▓ржд ржирж┐ржпрзБржХрзНржд ржХрз░рж╛ рж╣рзЯред</td>
    </tr>
  </tbody>
</table>

## ржмрж╛рждрз░рж┐

**рзирзжрзирзл/рзжрзн/рззрзк**: **ZipVoice-Dialog** ржЖрз░рзБ **ZipVoice-Dialog-Stereo**, ржжрзБржЯрж╛ ржорзМржЦрж┐ржХ рж╕ржВрж▓рж╛ржк рж╕рзГрж╖рзНржЯрж┐ ржХрз░рж╛рз░ ржоржбрзЗрж▓, ржорзБржХрзНржд ржХрз░рж╛ рж╣рзИржЫрзЗред [![arXiv](https://img.shields.io/badge/arXiv-Paper-COLOR.svg)](https://arxiv.org/abs/2507.09318) [![demo page](https://img.shields.io/badge/GitHub.io-Demo_Page-blue?logo=Github&style=flat-square)](https://zipvoice-dialog.github.io)

**рзирзжрзирзл/рзжрзн/рззрзк**: **OpenDialog** ржбрж╛ржЯрж╛ржЫрзЗржЯ, рзм.рзо ржХрж┐ржШржирзНржЯрж╛рз░ ржорзМржЦрж┐ржХ рж╕ржВрж▓рж╛ржк ржбрж╛ржЯрж╛ржЫрзЗржЯ, ржорзБржХрзНржд ржХрз░рж╛ рж╣рзИржЫрзЗред ржбрж╛ржЙржирж▓'ржб ржХрз░ржХ [![hf](https://img.shields.io/badge/%F0%9F%A4%97%20HuggingFace-Dataset-yellow)](https://huggingface.co/datasets/k2-fsa/OpenDialog), [![ms](https://img.shields.io/badge/ModelScope-Dataset-blue?logo=data)](https://www.modelscope.cn/datasets/k2-fsa/OpenDialog)ред ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЪрж╛ржУржХ [![arXiv](https://img.shields.io/badge/arXiv-Paper-COLOR.svg)](https://arxiv.org/abs/2507.09318)ред

**рзирзжрзирзл/рзжрзм/рззрзм**: **ZipVoice** ржЖрз░рзБ **ZipVoice-Distill** ржорзБржХрзНржд ржХрз░рж╛ рж╣рзИржЫрзЗред [![arXiv](https://img.shields.io/badge/arXiv-Paper-COLOR.svg)](https://arxiv.org/abs/2506.13053) [![demo page](https://img.shields.io/badge/GitHub.io-Demo_Page-blue?logo=Github&style=flat-square)](https://zipvoice.github.io)

## рж╕ржВрж╕рзНржерж╛ржкржи

### рзз. ZipVoice рз░рзЗржк'ржЬрж┐ржЯ'рз░рзА ржХрзНрж▓рзЛржи ржХрз░ржХ

```bash
git clone https://github.com/k2-fsa/ZipVoice.git
```

### 2. (ржмрзИржХрж▓рзНржкрж┐ржХ) ржПржЯрж╛ Python ржнрж╛рз░рзНржЪрзБрз▒рзЗрж▓ ржкрз░рж┐рз▒рзЗрж╢ рж╕рзГрж╖рзНржЯрж┐ ржХрз░ржХ

```bash
python3 -m venv zipvoice
source zipvoice/bin/activate
```

### рзй. ржкрзНрз░рзЯрзЛржЬржирзАрзЯ ржкрзЗржХрзЗржЬрж╕ржорзВрж╣ рж╕ржВрж╕рзНржерж╛ржкржи ржХрз░ржХ

```bash
pip install -r requirements.txt
```

### 4. ржкрзНрз░рж╢рж┐ржХрзНрж╖ржг ржмрж╛ ржХрж╛рж░рзНржпржХрз░рзА ржЕржирзБржорж╛ржирз░ ржмрж╛ржмрзЗ k2 рж╕ржВрж╕рзНржерж╛ржкржи ржХрз░ржХ

**k2 ржкрзНрз░рж╢рж┐ржХрзНрж╖ржгрз░ ржмрж╛ржмрзЗ ржкрзНрз░ржпрж╝рзЛржЬржирзАржпрж╝** ржЖрз░рзБ ржЕржирзБржорж╛ржирз░ ржЧрждрж┐ ржмрзГржжрзНржзрж┐ ржХрз░рж┐ржм ржкрж╛рз░рзЗред рждржерж╛ржкрж┐, k2 рж╕ржВрж╕рзНржерж╛ржкржи ржиржХрз░рж╛ржХрзИ ZipVoice рз░ ржЕржирзБржорж╛ржи ржорзЛржб ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ржм ржкрж╛рз░рзЗред

> **ржЯрзЛржХрж╛:**  ржЖржкрзЛржирж╛рз░ PyTorch ржЖрз░рзБ CUDA рж╕ржВрж╕рзНржХрз░ржгрз░ рж╕рзИрждрзЗ ржорж┐рж▓ ржержХрж╛ k2 рж╕ржВрж╕рзНржХрз░ржг рж╕ржВрж╕рзНржерж╛ржкржи ржХрз░рж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрз░ржХред ржЙржжрж╛рж╣рз░ржгрж╕рзНржмрз░рзВржк, ржпржжрж┐ ржЖржкрзБржирж┐ pytorch 2.5.1 ржЖрз░рзБ CUDA 12.1 ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ржЫрзЗ, рждрзЗржирзНрждрзЗ k2 рждрж▓ржд ржжрж┐ржпрж╝рж╛ ржЕржирзБрж╕рз░рж┐ рж╕ржВрж╕рзНржерж╛ржкржи ржХрз░рж┐ржм ржкрж╛рз░рзЗ:

```bash
pip install k2==1.24.4.dev20250208+cuda12.1.torch2.5.1 -f https://k2-fsa.github.io/k2/cuda.html
```

ржЕржирзБржЧрзНрз░рж╣ ржХрз░рж┐ https://k2-fsa.org/get-started/k2/ ржЪрж╛ржУржХ ржмрж┐рз▒рз░ржгрз░ ржмрж╛ржмрзЗред
ржЪрзАржи ржорзВрж▓ ржнрзВ-ржЦржгрзНржбрз░ ржмрзНржпрз▒рж╣рж╛рз░ржХрж╛рз░рзАрж╕ржХрж▓рзЗ https://k2-fsa.org/zh-CN/get-started/k2/ ржЪрж╛ржм ржкрж╛рз░рзЗред

- k2 рж╕ржВрж╕рзНржерж╛ржкржи ржкрз░рзАржХрзНрж╖рж╛ ржХрз░рж┐ржмрж▓рзИ:

```bash
python3 -c "import k2; print(k2.__file__)"
```

## ржмрзНржпрз▒рж╣рж╛рз░

### 1. ржПржХржХ ржмржХрзНрждрж╛рз░ ржмржХрзНрждржмрзНржп ржЙрждрзНржкрж╛ржжржи

ржЖржорж╛рж▓рзИ ржЙржкрж▓ржнрзНржп ZipVoice ржмрж╛ ZipVoice-Distill ржоржбрзЗрж▓рз░ рж╕рж╣рж╛ржпрж╝ржд ржПржХржХ ржмржХрзНрждрж╛рз░ ржмржХрзНрждржмрзНржп ржЙрждрзНржкрж╛ржжржи ржХрз░рж┐ржмрж▓рзИ, рждрж▓ржд ржжрж┐ржпрж╝рж╛ ржЖржжрзЗрж╢рж╕ржорзВрж╣ ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░ржХ (ржкрзНрз░ржпрж╝рзЛржЬржирзАржпрж╝ ржоржбрзЗрж▓рж╕ржорзВрж╣ HuggingFace рз░ ржкрз░рж╛ ржбрж╛ржЙржирж▓рзЛржб ржХрз░рж╛ рж╣'ржм):

#### 1.1 ржПржЯрж╛ ржмрж╛ржХрзНржпрз░ ржЗржиржлрж╛рз░рзЗржирзНрж╕

```bash
python3 -m zipvoice.bin.infer_zipvoice \
    --model-name zipvoice \
    --prompt-wav prompt.wav \
    --prompt-text "I am the transcription of the prompt wav." \
    --text "I am the text to be synthesized." \
    --res-wav-path result.wav
```
- `--model-name` рж╣рж┐ржЪрж╛ржкрзЗ `zipvoice` ржмрж╛ `zipvoice_distill` ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ржм ржкрж╛рз░рж┐, ржпрж┐ржмрзЛрз░ ржпржерж╛ржХрзНрз░ржорзЗ distillationрз░ ржЖржЧрз░ ржЖрз░рзБ ржкрж╛ржЫрз░ ржоржбрзЗрж▓ред
- ржпржжрж┐ ржкрж╛ржаржд `<>` ржмрж╛ `[]` ржжрзЗржЦрж╛ ржпрж╛рзЯ, рждрзЗржирзНрждрзЗ ржЗрзЯрж╛рз░рзЗ ржЖржмржжрзНржз strings ржмрж┐рж╢рзЗрж╖ ржЯрзЛржХрзЗржи рж╣рж┐ржЪрж╛ржкрзЗ ржЧржгрзНржп ржХрз░рж╛ рж╣тАЩржмред `<>` ржЪрж╛ржЗржирзАржЬ ржкрж┐ржиржЗржирз░ ржмрж╛ржмрзЗ ржЖрз░рзБ `[]` ржЖржи ржмрж┐рж╢рзЗрж╖ ржЯрзЗржЧрз░ ржмрж╛ржмрзЗ ржмрзНржпрз▒рж╣рж╛рз░ рж╣рзЯред

#### 1.2 ржмрж╛ржХрзНржпрз░ рждрж╛рж▓рж┐ржХрж╛ inference

```bash
python3 -m zipvoice.bin.infer_zipvoice \
    --model-name zipvoice \
    --test-list test.tsv \
    --res-dir results
```

- `test.tsv`-рз░ ржкрзНрз░рждрзНржпрзЗржХржЯрзЛ рж╢рж╛рз░рзА `{wav_name}\t{prompt_transcription}\t{prompt_wav}\t{text}` рз░рзВржкржд ржерж╛ржХрзЗред

### 2. рж╕ржВрж▓рж╛ржк ржмржХрзНрждржмрзНржп ржЙрзОржкрж╛ржжржи

#### 2.1 ржЕржирзБржорж╛ржи ржЖржжрзЗрж╢

ржЖржорж╛рз░ ржкрзВрз░рзНржм-ржкрзНрз░рж╢рж┐ржХрзНрж╖рж┐ржд ZipVoice-Dialogue ржЕржержмрж╛ ZipVoice-Dialogue-Stereo ржоржбрзЗрж▓рз░ рж╕рж╣рж╛ржпрж╝ржд ржжрзБржЬржи ржмрзНржпржХрзНрждрж┐рз░ рж╕ржВрж▓рж╛ржк ржмржХрзНрждржмрзНржп ржЙрзОржкрж╛ржжржи ржХрз░рж┐ржмрж▓рзИ, рждрж▓ржд ржжрж┐ржпрж╝рж╛ ржЖржжрзЗрж╢рж╕ржорзВрж╣ ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░ржХ (ржкрзНрз░ржпрж╝рзЛржЬржирзАржпрж╝ ржоржбрзЗрж▓рж╕ржорзВрж╣ HuggingFace-рз░ ржкрз░рж╛ ржбрж╛ржЙржирж▓'ржб рж╣ржм):

```bash
python3 -m zipvoice.bin.infer_zipvoice_dialog \
    --model-name "zipvoice_dialog" \
    --test-list test.tsv \
    --res-dir results
```

- `--model-name` рж╣рж┐ржЪрж╛ржкрзЗ `zipvoice_dialog` ржЕржержмрж╛ `zipvoice_dialog_stereo` ржерж╛ржХрж┐ржм ржкрж╛рз░рзЗ,
    ржпрж┐ржпрж╝рзЗ ржЕржирзБрж╕рз░рж┐ ржорзЛржирзЛ ржЖрз░рзБ рж╖рзНржЯрзЗрз░рж┐ржЕ' рж╕ржВрж▓рж╛ржк ржЙрждрзНржкрж╛ржжржи ржХрз░рзЗред

#### 2.2 ржЗржиржкрзБржЯ ржлрз░рзНржорзЗржЯрж╕ржорзВрж╣

`test.tsv`-рз░ ржкрзНрз░рждрзНржпрзЗржХржЯрж╛ рж╢рж╛рз░рзА рждрж▓ржд ржжрж┐ржпрж╝рж╛ ржлрз░рзНржорзЗржЯрж╕ржорзВрж╣рз░ ржЕржирзНржпрждржоржд ржерж╛ржХрзЗ:

(1) **Merged prompt format** ржп'ржд ржжрзБржЬржи ржмржХрзНрждрж╛рз░ ржЕржбрж┐ржЕ' ржЖрз░рзБ ржкрзНрз░рждрж┐рж▓рж┐ржкрж┐ ржПржХрзЗрж▓ржЧ ржХрз░рж┐ ржПржЯрж╛ ржкрзНрз░ржорзНржкржЯ рз▒рзЗржн ржлрж╛ржЗрж▓ржд рж╕ржВржпрзБржХрзНржд ржХрз░рж╛ рж╣ржпрж╝:
```
{wav_name}\t{prompt_transcription}\t{prompt_wav}\t{text}
```

- `wav_name` рж╣рзИржЫрзЗ ржЖржЙржЯржкрзБржЯ wav ржлрж╛ржЗрж▓рз░ ржирж╛ржоред
- `prompt_transcription` рж╣рзИржЫрзЗ ржХржерзЛржкржХржержирз░ ржкрзНрз░ржорзНржкржЯ wav-рз░ рж▓рж┐ржкрзНржпржирзНрждрз░ржг, ржпрзЗржирзЗ, "[S1] Hello. [S2] How are you?"
- `prompt_wav` рж╣рзИржЫрзЗ ржкрзНрз░ржорзНржкржЯ wav-рз░ ржкржеред
- `text` рж╣рзИржЫрзЗ рж╕ржВрж╢рзНрж▓рзЗрж╖ржг ржХрз░рж┐ржмрж▓ржЧрзАржпрж╝рж╛ ржкрж╛ржарзНржп, ржпрзЗржирзЗ "[S1] I'm fine. [S2] What's your name? [S1] I'm Eric. [S2] Hi Eric."

(2) **Splitted prompt format** ржп'ржд ржжрзБржЯрж╛ ржмржХрзНрждрж╛рз░ ржЕржбрж┐ржЕ' ржЖрз░рзБ рж▓рж┐ржкрзНржпржирзНрждрз░ржг ржкрзГржержХ ржлрж╛ржЗрж▓ржд ржерж╛ржХрзЗ:

```
{wav_name}\t{spk1_prompt_transcription}\t{spk2_prompt_transcription}\t{spk1_prompt_wav}\t{spk2_prompt_wav}\t{text}
```

- `wav_name` рж╣рзИржЫрзЗ output wav ржлрж╛ржЗрж▓ржЯрзЛрз░ ржирж╛ржоред
- `spk1_prompt_transcription` рж╣рзИржЫрзЗ ржкрзНрз░ржержо ржмржХрзНрждрж╛рз░ prompt wav-рз░ transcript, ржпрзЗржирзЗ "Hello"
- `spk2_prompt_transcription` рж╣рзИржЫрзЗ ржжрзНржмрж┐рждрзАржпрж╝ ржмржХрзНрждрж╛рз░ prompt wav-рз░ transcript, ржпрзЗржирзЗ "How are you?"
- `spk1_prompt_wav` рж╣рзИржЫрзЗ ржкрзНрз░ржержо ржмржХрзНрждрж╛рз░ prompt wav ржлрж╛ржЗрж▓рз░ ржкржеред
- `spk2_prompt_wav` рж╣рзИржЫрзЗ ржжрзНржмрж┐рждрзАржпрж╝ ржмржХрзНрждрж╛рз░ prompt wav ржлрж╛ржЗрж▓рз░ ржкржеред
- `text` рж╣рзИржЫрзЗ synthesis ржХрз░рж┐ржмрж▓ржЧрзАржпрж╝рж╛ ржкрж╛ржарзНржп, ржпрзЗржирзЗ "[S1] I'm fine. [S2] What's your name? [S1] I'm Eric. [S2] Hi Eric."

### 3 ржнрж╛рж▓ ржмрзНржпрз▒рж╣рж╛рз░рз░ ржмрж╛ржмрзЗ ржирж┐рз░рзНржжрзЗрж╢ржирж╛:

#### 3.1 Prompt-рз░ ржжрзИрз░рзНржШрзНржп

ржЖржорж╛рз░ ржкрз░рж╛ржорз░рзНрж╢, рж╕рзЛржиржХрж╛рж▓ prompt wav ржлрж╛ржЗрж▓ ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░ржХ (ржпрзЗржирзЗ, ржПржХржХ ржмржХрзНрждрж╛ speech generation-рз░ ржмрж╛ржмрзЗ рзй ржЫрзЗржХрзЗржгрзНржбржд ржХржо, dialogue speech generation-рз░ ржмрж╛ржмрзЗ рззрзж ржЫрзЗржХрзЗржгрзНржбржд ржХржо) ржпрж╛рждрзЗ inference ржЧрждрж┐ ржмрзЗржЫрж┐ рж╣ржпрж╝ред ржЦрзБржм ржжрзАржШрж▓ prompt inference ржзрзАрз░ ржХрз░рж┐ speech quality ржХржорж╛ржЗ ржжрж┐ржмред

#### 3.2 ржЧрждрж┐рз░ ржЙржирзНржиржпрж╝ржи

ржпржжрж┐ inference ржЧрждрж┐ рж╕ржирзНрждрзЛрж╖ржЬржиржХ ржирж╣ржпрж╝, рждрзЗржирзНрждрзЗ рждрж▓ржд ржжрж┐ржпрж╝рж╛ ржкржжржХрзНрж╖рзЗржк ржЕржирзБрж╕рз░ржг ржХрз░рж┐ ржЧрждрж┐ ржмрзГржжрзНржзрж┐ ржХрз░рж┐ржм ржкрж╛рз░рзЗ:

- **Distill model ржЖрз░рзБ ржХржо ржкржжржХрзНрж╖рзЗржк**: ржПржХржХ ржмржХрзНрждрж╛ speech generation model-рз░ ржмрж╛ржмрзЗ, speech quality ржнрж╛рж▓ ржХрз░рж┐ржмрж▓рзИ ржЖржорж┐ `zipvoice` model ржбрж┐ржлрж▓рзНржЯ рж╣рж┐ржЪрж╛ржкрзЗ ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рзЛржБред ржЧрждрж┐ ржЕржзрж┐ржХ ржкрзНрз░ржпрж╝рзЛржЬржи рж╣рж▓рзЗ, ржЖржкрзБржирж┐ `zipvoice_distill`-рж▓рзИ switch ржХрз░рж┐ржм ржкрж╛рз░рзЗ ржЖрз░рзБ `--num-steps` ржХржорж╛ржЗ рзк (ржбрж┐ржлрж▓рзНржЯ рзо) ржХрз░рж┐ржм ржкрж╛рз░рзЗред

- **CPU-ржд multi-threading-ржП ржЧрждрж┐ ржмрзГржжрзНржзрж┐**: CPU-ржд ржЪрж▓рзЛрз▒рж╛ рж╕ржоржпрж╝ржд, `--num-thread` parameter (ржпрзЗржирзЗ, `--num-thread 4`) ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ thread-рз░ рж╕ржВржЦрзНржпрж╛ ржмрзГржжрзНржзрж┐ ржХрз░рж┐ ржЧрждрж┐ ржмржврж╝рж╛ржм ржкрж╛рз░рзЗред ржбрж┐ржлрж▓рзНржЯржд рзз thread ржмрзНржпрз▒рж╣рж╛рз░ рж╣ржпрж╝ред

- **ONNX-ржП CPU-ржд ржЧрждрж┐ ржмрзГржжрзНржзрж┐**: CPU-ржд ржЪрж▓рзЛрз▒рж╛ рж╕ржоржпрж╝ржд, ONNX model `zipvoice.bin.infer_zipvoice_onnx`-рз░ рж╕рзИрждрзЗ ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ ржЧрждрж┐ ржмрзГржжрзНржзрж┐ ржХрз░рж┐ржм ржкрж╛рз░рзЗ (dialogue generation model-рз░ ржмрж╛ржмрзЗ ONNX ржПрждрж┐ржпрж╝рж╛ржУ support ржХрз░рж╛ рж╣рзЛрз▒рж╛ ржирж╛ржЗ)ред ржЖрз░рзБ ржЕржзрж┐ржХ ржЧрждрж┐рз░ ржмрж╛ржмрзЗ, ржЖржкрзБржирж┐ `--onnx-int8 True` set ржХрз░рж┐ INT8-quantized ONNX model ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ржм ржкрж╛рз░рзЗред ржоржиржд рз░рж╛ржЦрж┐ржм, quantized model speech quality-ржд ржХрж┐ржЫрзБ ржкрз░рж┐ржорж╛ржгрзЗ ржХржорж┐ ржпрж╛ржпрж╝ред **GPU-ржд ONNX ржмрзНржпрз▒рж╣рж╛рз░ ржиржХрз░рж┐ржм**, ржХрж╛рз░ржг GPU-ржд PyTorch-рждржХрзИ ржзрзАрз░ред

#### 3.3 Memory ржирж┐ржпрж╝ржирзНрждрзНрз░ржг

ржжрж┐ржпрж╝рж╛ ржкрж╛ржарзНржп punctuation ржЕржирзБрж╕рз░рж┐ chunk ржХрз░рж╛ рж╣ржпрж╝ (ржПржХржХ ржмржХрзНрждрж╛ speech generation-рз░ ржмрж╛ржмрзЗ) ржмрж╛ speaker-turn symbol ржЕржирзБрж╕рз░рж┐ (dialogue speech generation-рз░ ржмрж╛ржмрзЗ)ред рждрж╛рз░ ржкрж┐ржЫржд, chunked ржкрж╛ржарзНржпржмрзЛрз░ batch-ржд process ржХрз░рж╛ рж╣ржпрж╝ред ржлрж▓ржд, model-ржП ржкрзНрз░рж╛ржпрж╝ рж╕рзНржерж╛ржпрж╝рзА memory ржмрзНржпрз▒рж╣рж╛рз░рзЗрз░рзЗ ржпрж┐ржХрзЛржирзЛ ржжрзИрз░рзНржШрзНржпрз░ ржкрж╛ржарзНржп process ржХрз░рж┐ржм ржкрж╛рз░рзЗред ржЖржкрзБржирж┐ `--max-duration` parameter adjust ржХрз░рж┐ memory ржирж┐ржпрж╝ржирзНрждрзНрз░ржг ржХрз░рж┐ржм ржкрж╛рз░рзЗред

#### 3.4 "Raw" ржорзВрж▓рзНржпрж╛ржпрж╝ржи

ржбрж┐ржлрж▓рзНржЯржд, efficient inference ржЖрз░рзБ ржнрж╛рж▓ performance-рз░ ржмрж╛ржмрзЗ ржЖржорж┐ inputs (prompt wav, prompt transcription, ржЖрз░рзБ ржкрж╛ржарзНржп) preprocess ржХрз░рзЛржБред ржпржжрж┐ ржЖржкрзБржирж┐ model-рз░ "raw" performance ржарж┐ржХ ржжрж┐ржпрж╝рж╛ inputs-рз░рзЗ ржорзВрж▓рзНржпрж╛ржпрж╝ржи ржХрз░рж┐ржм ржмрж┐ржЪрж╛рз░рзЗ (ржпрзЗржирзЗ, ржЖржорж╛рз░ paper-рз░ ржлрж▓рж╛ржлрж▓ reproduce ржХрз░рж┐ржмрж▓рзИ), `--raw-evaluation True` pass ржХрз░рж┐ржм ржкрж╛рз░рзЗред

#### 3.5 рж╕рзЛржиржХрж╛рж▓ ржкрж╛ржарзНржп

ржЕрждрж┐ рж╕рзЛржиржХрж╛рж▓ ржкрж╛ржарзНржп (ржпрзЗржирзЗ, ржПржЯрж╛ ржмрж╛ ржжрзБржЯрж╛ рж╢ржмрзНржж) speech generation-рз░ рж╕ржоржпрж╝ржд, generated speech-ржд ржХрзЗрждрж┐ржпрж╝рж╛ржмрж╛ ржХрж┐ржЫрзБржорж╛ржи pronunciation omit рж╣рзЛрз▒рж╛ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ред ржПржЗ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржХрз░рж┐ржмрж▓рзИ, ржЖржкрзБржирж┐ `--speed 0.3` (ржп'ржд рзж.рзй ржПржЯрж╛ tunable value) pass ржХрз░рж┐ generated speech-рз░ duration ржмрзГржжрзНржзрж┐ ржХрз░рж┐ржм ржкрж╛рз░рзЗред

#### 3.6 ржнрзБрж▓ ржЙржЪрзНржЪрж╛рз░рж┐ржд ржЪрзАржирз░ ржмрж╣рзБ-ржзрзНржмржирж┐ ржЕржХрзНрж╖рз░ рж╕ржВрж╢рзЛржзржи

ржЖржорж┐ [pypinyin](https://github.com/mozillazg/python-pinyin) ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рзЛржБ ржЪрзАржирзА ржЕржХрзНрж╖рз░ржмрзЛрз░ржХ pinyin-рж▓рзИ convert ржХрз░рж┐ржмрж▓рзИред ржпржжрж┐ржУ, ржПржЗржпрж╝рзЗ ржХрзЗрждрж┐ржпрж╝рж╛ржмрж╛ **ржмрж╣рзБ-ржзрзНржмржирж┐ ржЕржХрзНрж╖рз░** (хдЪщЯ│хнЧ) ржнрзБрж▓ ржЙржЪрзНржЪрж╛рз░ржг ржХрз░рж┐ржм ржкрж╛рз░рзЗред

ржПржЗ ржнрзБрж▓ ржЙржЪрзНржЪрж╛рз░ржгрж╕ржорзВрж╣ ржирж┐ржЬрзЗ рж╣рж╛рждрзЗ рж╕ржВрж╢рзЛржзржи ржХрз░рж┐ржмрж▓рзИ, **рж╕ржарж┐ржХ ржкрж┐ржиржЗржи**-ржЯрзЛ ржХрзЛржирж╛ ржХрзЛржгрз░ ржХрзМрж▓ржд `< >` ржд рз░рж╛ржЦржХ ржЖрз░рзБ **рж╕рзНржмрз░ ржЪрж┐рж╣рзНржи** ржЕржирзНрждрз░рзНржнрзБржХрзНржд ржХрз░ржХред

**ржЙржжрж╛рж╣рз░ржг:**

- ржорзВрж▓ ржкрж╛ржа: `ш┐ЩцККхЙСщХ┐ф╕ЙхНБхЕмхИЖ`
- `щХ┐`-рз░ ржкрж┐ржиржЗржи рж╕ржВрж╢рзЛржзржи ржХрз░ржХ:  `ш┐ЩцККхЙС<chang2>ф╕ЙхНБхЕмхИЖ`

> **ржЯрзЛржХрж╛:** ржпржжрж┐ ржЖржкрзБржирж┐ ржПржХрж╛ржзрж┐ржХ ржкрж┐ржиржЗржи ржирж┐ржЬрзЗ рж╣рж╛рждрзЗ ржирж┐рз░рзНржзрж╛рз░ржг ржХрз░рж┐ржм ржмрж┐ржЪрж╛рз░рзЗ, рждрзЗржирзНрждрзЗ ржкрзНрж░рждрж┐ржЯрзЛ ржкрж┐ржиржЗржи `< >` ржд рз░рж╛ржЦржХ, ржпрзЗржирзЗ `ш┐ЩцКК<jian4><chang2><san1>хНБхЕмхИЖ`

#### рзй.рзн ржЙрзОржкржирзНржи ржХрз░рж╛ ржмржХрзНрждрзГрждрж╛рз░ ржкрз░рж╛ ржжрзАржШрж▓ ржирж┐ржГрж╢ржмрзНржжрждрж╛ ржЖржБрждрз░рж╛ржУржХ

ржоржбрзЗрж▓рзЗ ржЙрзОржкржирзНржи ржХрз░рж╛ ржмржХрзНрждрзГрждрж╛ржд ржирж┐ржГрж╢ржмрзНржжрждрж╛рз░ рж╕рзНржерж╛ржи ржЖрз░рзБ ржжрзИрз░рзНржШрзНржп ржирж┐ржЬрзЗ ржирж┐рз░рзНржзрж╛рз░ржг ржХрз░рж┐ржмред ржХрзЗрждрж┐ржпрж╝рж╛ржмрж╛ ржмржХрзНрждрзГрждрж╛рз░ ржорж╛ржЬржд ржжрзАржШрж▓ ржирж┐ржГрж╢ржмрзНржжрждрж╛ ржерж╛ржХрзЗред ржпржжрж┐ ржЖржкрзБржирж┐ ржПржЗржЯрзЛ ржиржЪрж╛рж╣рзЗ, рждрзЗржирзНрждрзЗ `--remove-long-sil` ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ ржЙрзОржкржирзНржи ржХрз░рж╛ ржмржХрзНрждрзГрждрж╛рз░ ржорж╛ржЬрз░ ржжрзАржШрж▓ ржирж┐ржГрж╢ржмрзНржжрждрж╛ ржЖржБрждрз░рж╛ржм ржкрж╛рз░рзЗ (ржкрзНрз░рж╛ржирзНрждрж┐ржХ ржирж┐ржГрж╢ржмрзНржжрждрж╛ ржбрж┐ржлрж▓рзНржЯ рж╣рж┐ржЪрж╛ржкрзЗ ржЖржБрждрз░рзЛрз▒рж╛ рж╣тАЩржм)ред

#### рзй.рзо ржоржбрзЗрж▓ ржбрж╛ржЙржирж▓рзЛржбрж┐ржВ

ржкрзНрз░рж╢рж┐ржХрзНрж╖ржгржкрзНрз░рж╛ржкрзНржд ржоржбрзЗрж▓рж╕ржорзВрж╣ ржбрж╛ржЙржирж▓рзЛржб ржХрз░рж╛рз░ рж╕ржорзЯржд HuggingFace-ржд рж╕ржВржпрзЛржЧржд рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗ, mirror site-рж▓рзИ endpoint switch ржХрз░ржХ: `export HF_ENDPOINT=https://hf-mirror.com`ред

## ржЖржкрзЛржирж╛рз░ ржирж┐ржЬрж╛ ржоржбрзЗрж▓ ржкрзНрз░рж╢рж┐ржХрзНрж╖ржг ржХрз░ржХ

ржкрзНрз░рж╢рж┐ржХрзНрж╖ржг, fine-tuning ржЖрз░рзБ ржорзВрж▓рзНржпрж╛рзЯржирз░ ржЙржжрж╛рж╣рз░ржгрз░ ржмрж╛ржмрзЗ [egs](egs) directory ржЪрж╛ржУржХред

## C++ ржбрж┐ржкрзНрж▓рзЯржорзЗржирзНржЯ

CPU-ржд C++ ржбрж┐ржкрзНрж▓рзЯржорзЗржирзНржЯрз░ рж╕ржорж╛ржзрж╛ржирз░ ржмрж╛ржмрзЗ [sherpa-onnx](https://github.com/k2-fsa/sherpa-onnx/pull/2487#issuecomment-3227884498) ржЪрж╛ржУржХред

## ржЖрж▓рзЛржЪржирж╛ & ржпрзЛржЧрж╛ржпрзЛржЧ

ржЖржкрзБржирж┐ [Github Issues](https://github.com/k2-fsa/ZipVoice/issues)ржд рж╕рз░рж╛рж╕рз░рж┐ ржЖрж▓рзЛржЪржирж╛ ржХрз░рж┐ржм ржкрж╛рз░рзЗред

ржЖржкрзБржирж┐ ржЖржорж╛рж▓рзИ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрз░рж┐ржмрж▓рзИ QR code scan ржХрз░рж┐ржм ржкрж╛рз░рзЗ ржмрж╛ ржЖржорж╛рж▓рзИ wechat official account follow ржХрз░рж┐ржм ржкрж╛рз░рзЗред

| Wechat Group | Wechat Official Account |
| ------------ | ----------------------- |
|![wechat](https://k2-fsa.org/zh-CN/assets/pic/wechat_group.jpg) |![wechat](https://k2-fsa.org/zh-CN/assets/pic/wechat_account.jpg) |

## ржЙржжрзНржзрзГрждрж┐

```bibtex
@article{zhu2025zipvoice,
      title={ZipVoice: Fast and High-Quality Zero-Shot Text-to-Speech with Flow Matching},
      author={Zhu, Han and Kang, Wei and Yao, Zengwei and Guo, Liyong and Kuang, Fangjun and Li, Zhaoqing and Zhuang, Weiji and Lin, Long and Povey, Daniel},
      journal={arXiv preprint arXiv:2506.13053},
      year={2025}
}

@article{zhu2025zipvoicedialog,
      title={ZipVoice-Dialog: Non-Autoregressive Spoken Dialogue Generation with Flow Matching},
      author={Zhu, Han and Kang, Wei and Guo, Liyong and Yao, Zengwei and Kuang, Fangjun and Zhuang, Weiji and Li, Zhaoqing and Han, Zhifeng and Zhang, Dong and Zhang, Xin and Song, Xingchen and Lin, Long and Povey, Daniel},
      journal={arXiv preprint arXiv:2507.09318},
      year={2025}
}
```


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-10-06

---