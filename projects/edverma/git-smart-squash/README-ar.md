# Git Smart Squash

توقف عن إضاعة الوقت في إعادة تنظيم الالتزامات يدويًا. دع الذكاء الاصطناعي يقوم بذلك نيابةً عنك.

## المشكلة

لقد مررت بذلك من قبل: 15 التزامًا لميزة واحدة، نصفها بعنوان "fix"، أو "typo"، أو "WIP". الآن تحتاج إلى تنظيفها من أجل مراجعة طلب السحب (PR). الدمج وإعادة الكتابة يدويًا أمر ممل.

## الحل

يحلل Git Smart Squash تغييراتك ويعيد تنظيمها في التزامات منطقية مع رسائل مناسبة:

```bash
# قبل: فرعك الفوضوي
* fix tests
* typo  
* more auth changes
* WIP: working on auth
* update tests
* initial auth implementation
```
# بعد ذلك: التزامات نظيفة ومنطقية
* feat: تنفيذ نظام مصادقة JWT
* test: إضافة تغطية نقاط نهاية المصادقة
```

## البداية السريعة

### 1. التثبيت

```bash
# باستخدام pip
pip install git-smart-squash

# باستخدام pipx (موصى به للتثبيت المعزول)
pipx install git-smart-squash

# باستخدام uv (مدير حزم بايثون سريع)
uv tool install git-smart-squash
```
### 2. إعداد الذكاء الاصطناعي

**الخيار أ: محلي (مجاني، خاص)**
```bash
# قم بتثبيت Ollama من https://ollama.com
ollama pull devstral  # النموذج الافتراضي
```

**الخيار ب: سحابي (نتائج أفضل)**
```bash
export OPENAI_API_KEY="مفتاحك"
export ANTHROPIC_API_KEY="مفتاحك"
export GEMINI_API_KEY="مفتاحك"
```

### 3. التشغيل

```bash
cd your-repo
git-smart-squash
```
هذا كل شيء. راجع الخطة ووافق عليها.

## معلمات سطر الأوامر

| المعلمة        | الوصف                                               | القيمة الافتراضية           |
|----------------|-----------------------------------------------------|-----------------------------|
| `--base`       | الفرع الأساسي للمقارنة معه                           | ملف الإعدادات أو `main`      |
| `--ai-provider`| مزود الذكاء الاصطناعي المستخدم (openai، anthropic، local، gemini) | محدد في الإعدادات            |
| `--model`      | نموذج الذكاء الاصطناعي المحدد للاستخدام (انظر النماذج الموصى بها أدناه) | الافتراضي للمزود             |
| `--config`     | مسار ملف الإعدادات المخصص                            | `.git-smart-squash.yml` أو `~/.git-smart-squash.yml` |
| `--auto-apply` | تطبيق خطة الالتزام بدون مطالبة بالتأكيد              | `false`                     |
| `--instructions`, `-i` | تعليمات مخصصة للذكاء الاصطناعي (مثال: "تجميع حسب مجال الميزة") | لا يوجد                      |
| `--no-attribution` | تعطيل رسالة الإسناد في الالتزامات                | `false`                     |
| `--debug`      | تفعيل تسجيل الأخطاء التفصيلية                        | `false`                     |

## النماذج الموصى بها

### النماذج الافتراضية
- **OpenAI**: `gpt-4.1` (الافتراضي)
- **Anthropic**: `claude-sonnet-4-20250514` (الافتراضي)
- **Gemini**: `gemini-2.5-pro` (الافتراضي)
- **Local/Ollama**: `devstral` (الافتراضي)
### اختيار النموذج
```bash
# تحديد نموذج مختلف
git-smart-squash --ai-provider openai --model gpt-4.1-mini

# للاستخدام المحلي مع Ollama
git-smart-squash --ai-provider local --model llama-3.1
```

## تعليمات مخصصة

تتيح لك المعلمة `--instructions` التحكم في كيفية تنظيم الالتزامات (commits):

### أمثلة
```bash
# إضافة بادئة رقم التذكرة
git-smart-squash -i "Prefix all commits with [ABC-1234]"

# الفصل حسب النوع
git-smart-squash -i "Keep backend and frontend changes in separate commits"
```
# تحديد عدد الكوميتات
git-smart-squash -i "أنشئ بحد أقصى 3 كوميتات فقط"
```

### نصائح للحصول على نتائج أفضل
- **كن محدداً**: "اجمع ترحيلات قاعدة البيانات بشكل منفصل" تعمل بشكل أفضل من "نظمها بشكل جيد"
- **تعليمات واحدة في كل مرة**: قد يتم تجاهل التعليمات المعقدة متعددة الأجزاء جزئياً
- **استخدم نماذج أفضل**: النماذج الأكبر تتبع التعليمات بشكل أكثر موثوقية من النماذج الأصغر

## حالات الاستخدام الشائعة

### "أحتاج إلى تنظيف قبل مراجعة PR"
```bash
git-smart-squash              # يعرض الخطة ويطلب التأكيد
git-smart-squash --auto-apply # يطبق تلقائياً بدون طلب التأكيد
```

### "أعمل مع فرع رئيسي مختلف"
```bash
git-smart-squash --base develop
```
### "أريد استخدام مزود ذكاء اصطناعي محدد"
```bash
git-smart-squash --ai-provider openai
```

## الأمان

**كودك آمن:**
- يعرض الخطة قبل إجراء أي تغييرات
- ينشئ فرع نسخ احتياطي تلقائيًا
- يتطلب دليل عمل نظيف
- لا يدفع التغييرات أبدًا بدون أمرك

**إذا حدث خطأ ما:**
```bash
# العثور على النسخة الاحتياطية
git branch | grep backup

# استعادة

git reset --hard your-branch-backup-[timestamp]
```

## مزودو الذكاء الاصطناعي

| المزود     | التكلفة | الخصوصية |
|------------|---------|----------|
| **Ollama**     | مجاني    | محلي     |
| **OpenAI**     | ~$0.01   | سحابي    |
| **Anthropic**  | ~$0.01   | سحابي    |
| **Gemini**     | ~$0.01   | سحابي    |

## الإعدادات المتقدمة (اختياري)

هل ترغب في التخصيص؟ أنشئ ملف إعدادات:

**خاص بالمشروع** (`.git-smart-squash.yml` في مستودعك):
```yaml
ai:
  provider: openai  # استخدم OpenAI لهذا المشروع
base: develop       # استخدم develop كفرع أساسي لهذا المشروع
```
**الإعدادات الافتراضية العالمية** (`~/.git-smart-squash.yml`):
```yaml
ai:
  provider: local   # استخدم الذكاء الاصطناعي المحلي دائماً بشكل افتراضي
base: main          # الفرع الأساسي الافتراضي لجميع المشاريع
```

## استكشاف الأخطاء وإصلاحها

### خطأ "JSON غير صالح"
عادةً ما يعني هذا أن نموذج الذكاء الاصطناعي لم يستطع تنسيق الاستجابة بشكل صحيح:
- **مع Ollama**: بدّل من `llama2` إلى `mistral` أو `mixtral`
- **الحل**: `ollama pull mistral` ثم حاول مرة أخرى
- **بديل**: استخدم مزود سحابي مع `--ai-provider openai`

### النموذج لا يتبع التعليمات
بعض النماذج تواجه صعوبة مع التعليمات المعقدة:
- **استخدم نماذج أفضل**: `--model gpt-4-turbo` أو `--model claude-3-opus`
- **بسط التعليمات**: توجيه واحد وواضح يعمل بشكل أفضل من عدة توجيهات
- **كن صريحًا**: "أضف بادئة [ABC-123]" وليس "أضف رقم التذكرة"

### "لم يتم العثور على Ollama"
```bash
# التثبيت من https://ollama.com
ollama serve
ollama pull devstral  # النموذج الافتراضي
```

### تجميع الالتزامات بشكل سيء
إذا أنشأ الذكاء الاصطناعي العديد من الالتزامات أو لم يجمعها بشكل جيد:
- **النموذج غير كافٍ**: استخدم نموذجًا أكبر
- **أضف تعليمات**: `-i "اجمع التغييرات المتعلقة، بحد أقصى 3 التزامات"`
- **قدّم ملاحظات**: أنشئ مشكلة على GitHub وأخبرنا بما حدث

### مشاكل التثبيت (ماك)
إذا لم يكن لديك pip أو تفضل التثبيت المعزول:
```bash
# باستخدام pipx (موصى به)
brew install pipx
pipx install git-smart-squash
```
### "لا توجد تغييرات لإعادة التنظيم"
```bash
git log --oneline main..HEAD  # تحقق من وجود عمليات تسجيل
git diff main                 # تحقق من وجود تغييرات
```

### الفروق الكبيرة / حدود الرموز (Token Limits)
النماذج المحلية لديها حد رموز تقريبًا ~32k. بالنسبة للتغييرات الكبيرة:
- استخدم `--base` مع عملية تسجيل أحدث
- التحويل إلى السحابة: `--ai-provider openai`
- قسّم التغييرات إلى طلبات دمج (PRs) أصغر

### هل تحتاج إلى مزيد من المساعدة؟

اطلع على [التوثيق التفصيلي](https://raw.githubusercontent.com/edverma/git-smart-squash/main/DOCUMENTATION.md) أو افتح تذكرة مشكلة!

## الرخصة

رخصة MIT - راجع ملف [LICENSE](LICENSE) لمزيد من التفاصيل.


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-07-12

---