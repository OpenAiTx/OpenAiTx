
<div align="right">
  <details>
    <summary >ЁЯМР ржнрж╛рж╖рж╛</summary>
    <div>
      <div align="center">
        <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=en">English</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=zh-CN">чоАф╜Уф╕нцЦЗ</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=zh-TW">ч╣БщлФф╕нцЦЗ</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=ja">цЧецЬмшкЮ</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=ko">эХЬъ╡ньЦ┤</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=hi">рд╣рд┐рдиреНрджреА</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=th">р╣Др╕Чр╕в</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=fr">Fran├зais</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=de">Deutsch</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=es">Espa├▒ol</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=it">Italiano</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=ru">╨а╤Г╤Б╤Б╨║╨╕╨╣</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=pt">Portugu├кs</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=nl">Nederlands</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=pl">Polski</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=ar">╪з┘Д╪╣╪▒╪и┘К╪й</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=fa">┘Б╪з╪▒╪│█М</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=tr">T├╝rk├зe</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=vi">Tiс║┐ng Viс╗Зt</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=id">Bahasa Indonesia</a>
        | <a href="https://openaitx.github.io/view.html?user=anhao&project=acme-client&lang=as">ржЕрж╕ржорзАржпрж╝рж╛</
      </div>
    </div>
  </details>
</div>

# ACME ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ

Let's Encrypt, ZeroSSL, ржЖрз░рзБ ржЕржирзНржпрж╛ржирзНржп ACME-ржЕржирзБржХрзВрж▓ Certificate Authoritiesрз░ рж╕рзИрждрзЗ SSL/TLS ржкрзНрз░ржорж╛ржгржкрждрзНрз░ ржмрзНржпрз▒рж╕рзНржерж╛ржкржирж╛ рж╕рзНржмржпрж╝ржВржХрзНрз░рж┐ржпрж╝ржХрз░ржгрз░ ржмрж╛ржмрзЗ ржПржЯрж╛ ржмрж┐рж╕рзНрждрзГржд PHP ACME v2 ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ рж▓рж╛ржЗржмрзНрж░рзЗрз░рзАред

[![github stats](https://img.shields.io/github/stars/anhao/acme-client?style=flat-square&label=github%20stats)](https://github.com/anhao/acme-client)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://github.com/anhao/acme-client)
[![PHP Version](https://img.shields.io/badge/PHP-%3E%3D8.2-blue.svg)](https://www.php.net/)

> **Language / ржнрж╛рж╖рж╛**: [ржЗржВрз░рж╛ржЬрзА](https://raw.githubusercontent.com/anhao/acme-client/main/README.md) | [ржЪрзАржирж╛рз░](https://raw.githubusercontent.com/anhao/acme-client/main/README_ZH.md)

## ржмрзИрж╢рж┐рж╖рзНржЯрзНржпрж╕ржорзВрж╣

- **ACME v2 ржкрзНрз░'ржЯ'ржХрж▓ рж╕ржорз░рзНржержи**: ACME v2 рж╕рзНржкрзЗржЫрж┐ржлрж┐ржХрзЗрж╢рзНржпржирз░ рж╕рзИрждрзЗ рж╕ржорзНржкрзВрж░рзНржг рж╕рж╛ржоржЮрзНржЬрж╕рзНржпрждрж╛
- **ржмрж╣рзБржмрж┐ржз CA рж╕ржорз░рзНржержи**: Let's Encrypt, ZeroSSL, ржЖрз░рзБ ржЕржирзНржпрж╛ржирзНржп ACME ржкрзНрз░ржжрж╛ржиржХрж╛рз░рзАрз░ рж╕рзИрждрзЗ ржХрж╛ржо ржХрз░рзЗ
- **ржПржХрж╛ржЙржгрзНржЯ ржмрзНржпрз▒рж╕рзНржерж╛ржкржирж╛**: ACME ржПржХрж╛ржЙржгрзНржЯ рж╕рзГрж╖рзНржЯрж┐, рж╕ржВрз░ржХрзНрж╖ржг, ржЖрз░рзБ ржкрз░рж┐ржЪрж╛рж▓ржирж╛ ржХрз░ржХ
- **ржкрзНрз░ржорж╛ржгржкрждрзНрз░ ржЕржкрж╛рз░рзЗрж╢рзНржпржи**: SSL ржкрзНрз░ржорж╛ржгржкрждрзНрз░ ржЕржирзБрз░рзЛржз, ржкрзБржиржГржирз▒рзАржХрз░ржг, ржЖрз░рзБ ржмрж╛рждрж┐рж▓ ржХрз░ржХ
- **ржбржорзЗржЗржи ржмрзИржзрждрж╛**: HTTP-01 ржЖрз░рзБ DNS-01 ржЪрзЗрж▓рзЗржЮрзНржЬ рж╕ржорз░рзНржержи
- **ARI рж╕ржорз░рзНржержи**: ржЕржкрзНржЯрж┐ржорж╛рж▓ ржкрзБржиржГржирз▒рзАржХрз░ржг рж╕ржоржпрж╝рз░ ржмрж╛ржмрзЗ рж╕рзНржмржпрж╝ржВржХрзНрз░рж┐ржпрж╝ Renewal Information
- **ржиржоржирзАржпрж╝ ржХрж┐ ржкрзНрз░ржХрж╛рз░**: RSA ржЖрз░рзБ ECC ржХрж┐ рж╕ржорз░рзНржержи
- **ржмрж┐рж╢ржж рж▓ржЧрж┐ржВ**: PSR-3 рж╕ржВрж▓ржЧрзНржи рж▓ржЧрж┐ржВ ржмрж┐рж▓рзНржЯ-ржЗржи
- **рж╕рж╣ржЬ рж╕ржВрж╣рждрж┐**: рж╕рж╣ржЬ ржЖрз░рзБ ржмрзЛржзржЧржорзНржп API ржбрж┐ржЬрж╛ржЗржи

## ржкрзНрз░ржпрж╝рзЛржЬржирзАржпрж╝рждрж╛

- PHP 8.2 ржЕржержмрж╛ рждрж╛рждржХрзИ ржЙржЪрзНржЪ
- OpenSSL ржПржХрзНрж╕ржЯрзЗржирж╢рзНржпржи
- cURL ржПржХрзНрж╕ржЯрзЗржирж╢рзНржпржи
- JSON ржПржХрзНрж╕ржЯрзЗржирж╢рзНржпржи
- mbstring ржПржХрзНрж╕ржЯрзЗржирж╢рзНржпржи

## ржЗржирж╖рзНржЯрж▓рзЗрж╢рзНржпржи

Composer ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ ржЗржирж╖рзНржЯрж▓ ржХрз░ржХ:

```bash
composer require alapi/acme-client
```

## ржжрзНрз░рзБржд ржЖрз░ржорзНржнржгрж┐

### рзз. рж╕рзНржерж╛ржирзАржпрж╝ ржПржХрж╛ржЙржирзНржЯ ржХрзА рж╕рзГрж╖рзНржЯрж┐ ржХрз░ржХ

ACME ржПржХрж╛ржЙржирзНржЯ ржХрзА рж╕рзГрж╖рзНржЯрж┐ ржЖрз░рзБ ржкрз░рж┐ржЪрж╛рж▓ржирж╛ ржХрз░рж╛рз░ ржжрзБржЯрж╛ ржЙржкрж╛ржпрж╝ ржЖржЫрзЗ:

**ржмрж┐ржХрж▓рзНржк A: Account рж╢рзНрз░рзЗржгрзАрз░ рж╕рзИрждрзЗ ржмрж┐ржжрзНржпржорж╛ржи ржХрзА ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐**

```php
<?php
require_once 'vendor/autoload.php';

use ALAPI\Acme\Accounts\Account;

// Create account from existing private key string
$privateKeyPem = '-----BEGIN PRIVATE KEY-----...-----END PRIVATE KEY-----';
$account = new Account($privateKeyPem);

// Or create account with both private and public keys
$publicKeyPem = '-----BEGIN PUBLIC KEY-----...-----END PUBLIC KEY-----';
$account = new Account($privateKeyPem, $publicKeyPem);

// Or create account from private key only (public key will be extracted)
$account = Account::fromPrivateKey($privateKeyPem);
```

**ржмрж┐ржХрж▓рзНржк B: AccountStorage ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ ржлрж╛ржЗрж▓-ржнрж┐рждрзНрждрж┐ржХ ржЪрж╛ржмрж┐ ржкрз░рж┐ржЪрж╛рж▓ржирж╛**

```php
<?php
require_once 'vendor/autoload.php';

use ALAPI\Acme\Utils\AccountStorage;

// Create new ECC account and save to files (recommended)
$account = AccountStorage::createAndSave(
    directory: 'storage',
    name: 'my-account',
    keyType: 'ECC',
    keySize: 'P-384'
);

// Or create RSA account and save to files
$rsaAccount = AccountStorage::createAndSave(
    directory: 'storage', 
    name: 'my-rsa-account',
    keyType: 'RSA',
    keySize: 4096
);

echo "Account keys created and saved successfully!\n";
```

### 2. ACME ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржЖрз░ржорзНржн ржХрз░ржХ

```php
<?php
require_once 'vendor/autoload.php';

use ALAPI\Acme\AcmeClient;
use ALAPI\Acme\Accounts\Account;
use ALAPI\Acme\Utils\AccountStorage;
use ALAPI\Acme\Http\Clients\ClientFactory;

// Option A: Load account from files
$account = AccountStorage::loadFromFiles('storage', 'my-account');

// Option B: Create account from existing keys
$privateKey = '-----BEGIN PRIVATE KEY-----...-----END PRIVATE KEY-----';
$account = new Account($privateKey);

// Create HTTP client with optional proxy
$httpClient = ClientFactory::create(timeout: 30, options: [
    // 'proxy' => 'http://proxy.example.com:8080'
]);

// Initialize client for Let's Encrypt production
$acmeClient = new AcmeClient(
    staging: false, // Set to true for testing
    localAccount: $account,
    httpClient: $httpClient
);

// Or use ZeroSSL
$zeroSslClient = new AcmeClient(
    localAccount: $account,
    httpClient: $httpClient,
    baseUrl: 'https://acme.zerossl.com/v2/DV90/directory'
);
```

### рзй. ACME ржПржХрж╛ржЙржгрзНржЯ рз░рзЗржЬрж┐рж╖рзНржЯрж╛рз░ ржХрз░ржХ

Let's Encrypt-рз░ ржмрж╛ржмрзЗ (EAB ржкрзНрз░рзЯрзЛржЬржи ржирж╣рзЯ):

```php
try {
    // Register account with Let's Encrypt
    $accountData = $acmeClient->account()->create(
        contacts: ['mailto:admin@example.com']
    );
    
    echo "Account registered successfully!\n";
    echo "Account URL: " . $accountData->url . "\n";
} catch (Exception $e) {
    echo "Registration failed: " . $e->getMessage() . "\n";
}
```
ржЬрж┐рз░'ржПржЫржПржЫржПрж▓рз░ ржмрж╛ржмрзЗ (EAB ржЖрз▒рж╢рзНржпржХ):


```php
try {
    // Get EAB credentials from ZeroSSL dashboard
    $eabKid = 'your-eab-kid';
    $eabHmacKey = 'your-eab-hmac-key';
    
    $accountData = $zeroSslClient->account()->create(
        eabKid: $eabKid,
        eabHmacKey: $eabHmacKey,
        contacts: ['mailto:admin@example.com']
    );
    
    echo "ZeroSSL account registered successfully!\n";
} catch (Exception $e) {
    echo "Registration failed: " . $e->getMessage() . "\n";
}
```

### 4. ржЪрж╛рз░рзНржЯрж┐ржлрж┐ржХрзЗржЯ ржЕржирзБрз░рзЛржз ржХрз░ржХ

```php
<?php
use ALAPI\Acme\Enums\AuthorizationChallengeEnum;

try {
    // Get account data
    $accountData = $acmeClient->account()->get();
    
    // Create new order for domains
    $domains = ['example.com', 'www.example.com'];
    $order = $acmeClient->order()->new($accountData, $domains);
    
    echo "Order created: " . $order->url . "\n";
    echo "Status: " . $order->status . "\n";
    
    // Check domain validations
    $validations = $acmeClient->domainValidation()->status($order);
    
    foreach ($validations as $validation) {
        $domain = $validation->identifier['value'];
        echo "Domain: $domain - Status: " . $validation->status . "\n";
        
        if ($validation->isPending()) {
            // Get validation data for HTTP-01 challenge
            $challenges = $acmeClient->domainValidation()->getValidationData(
                [$validation], 
                AuthorizationChallengeEnum::HTTP
            );
            
            foreach ($challenges as $challenge) {
                echo "HTTP Challenge for $domain:\n";
                echo "  File: " . $challenge['filename'] . "\n";
                echo "  Content: " . $challenge['content'] . "\n";
                echo "  Place it at: http://$domain/.well-known/acme-challenge/" . $challenge['filename'] . "\n\n";
            }
        }
    }
} catch (Exception $e) {
    echo "Error: " . $e->getMessage() . "\n";
}
```

### рзл. рж╕ржорзНржкрзВрз░рзНржг ржбрзЛржорзЗржЗржи ржнрзЗрж▓рж┐ржбрзЗржЪржи

ржЖржкрзЛржирж╛рз░ рз▒рзЗржм ржЫрж╛рз░рзНржнрж╛рз░ржд ржЪрзЗрж▓рзЗржЮрзНржЬ ржлрж╛ржЗрж▓рж╕ржорзВрж╣ рж╕рзНржерж╛ржкржи ржХрз░рж╛рз░ ржкрж┐ржЫржд:

```php
try {
    // Trigger validation for each domain
    foreach ($validations as $validation) {
        if ($validation->isPending()) {
            $response = $acmeClient->domainValidation()->validate(
                $accountData,
                $validation,
                AuthorizationChallengeEnum::HTTP,
                localTest: true // Performs local validation first
            );
            
            echo "Validation triggered for: " . $validation->identifier['value'] . "\n";
        }
    }
    
    // Wait for validation to complete
    $maxAttempts = 10;
    $attempt = 0;
    
    do {
        sleep(5);
        $attempt++;
        
        // Check order status
        $currentOrder = $acmeClient->order()->get($accountData, $order->url);
        echo "Order status: " . $currentOrder->status . "\n";
        
        if ($currentOrder->status === 'ready') {
            echo "All validations completed successfully!\n";
            break;
        }
        
        if ($currentOrder->status === 'invalid') {
            echo "Order validation failed!\n";
            break;
        }
        
    } while ($attempt < $maxAttempts);
    
} catch (Exception $e) {
    echo "Validation error: " . $e->getMessage() . "\n";
}
```

### 6. CSR рж╕рзГрж╖рзНржЯрж┐ ржХрз░ржХ ржЖрз░рзБ ржЬржорж╛ ржХрз░ржХ

```php
use ALAPI\Acme\Security\Cryptography\OpenSsl;

try {
    if ($currentOrder->status === 'ready') {
        // Generate Certificate private key
        $certificatePrivateKey = OpenSsl::generatePrivateKey('RSA', 2048);
        
        // Generate Certificate Signing Request (CSR) using OpenSsl helper
        $csrString = OpenSsl::generateCsr($domains, $certificatePrivateKey);
        
        // Export private key for saving
        $privateKeyString = OpenSsl::openSslKeyToString($certificatePrivateKey);
        
        // Submit CSR to finalize order
        $finalizedOrder = $acmeClient->order()->finalize(
            $accountData,
            $currentOrder,
            $csrString
        );
        
        echo "Order finalized successfully!\n";
        echo "Certificate URL: " . $finalizedOrder->certificateUrl . "\n";
        
        // Download certificate bundle
        $certificateBundle = $acmeClient->certificate()->get(
            $accountData,
            $finalizedOrder->certificateUrl
        );
        
        // Save certificate and private key
        file_put_contents('certificate.pem', $certificateBundle->certificate);
        file_put_contents('fullchain.pem', $certificateBundle->fullchain);
        file_put_contents('private-key.pem', $privateKeyString);
        
        echo "Certificate saved to certificate.pem\n";
        echo "Fullchain certificate saved to fullchain.pem\n";
        echo "Private key saved to private-key.pem\n";
    }
    
} catch (Exception $e) {
    echo "Certificate generation error: " . $e->getMessage() . "\n";
}
```

## ржЙржирзНржиржд ржмрзНржпрз▒рж╣рж╛рз░

### DNS-01 ржЪрзЗрж▓рзЗржЮрзНржЬ

рз▒рж╛ржЗрж▓рзНржбржХрж╛рз░рзНржб ржЪрж╛рз░рзНржЯрж┐ржлрж┐ржХрзЗржЯрж╕ржорзВрж╣рз░ ржмрж╛ржмрзЗ ржЕржержмрж╛ HTTP ржкрзНрз░ржорж╛ржгрзАржХрз░ржг рж╕ржорзНржнрз▒ ржирж╣'рж▓рзЗ:

```php
// Get DNS challenge data
$dnsChallenge = $acmeClient->domainValidation()->getValidationData(
    [$validation],
    AuthorizationChallengeEnum::DNS
);

foreach ($dnsChallenge as $challenge) {
    echo "DNS Challenge for " . $challenge['domain'] . ":\n";
    echo "  Record Name: " . $challenge['domain'] . "\n";
    echo "  Record Type: TXT\n";
    echo "  Record Value: " . $challenge['digest'] . "\n\n";
}

// After adding DNS records, trigger validation
$response = $acmeClient->domainValidation()->validate(
    $accountData,
    $validation,
    AuthorizationChallengeEnum::DNS,
    localTest: true
);
```

### ARIрз░ рж╕рзИрждрзЗ ржкрзНрз░ржорж╛ржгржкрждрзНрз░ ржиржмрзАржХрз░ржг

```php
use ALAPI\Acme\Management\RenewalManager;

// Load existing certificate
$certificatePem = file_get_contents('certificate.pem');

// Create renewal manager
$renewalManager = $acmeClient->renewalManager(defaultRenewalDays: 30);

// Check if renewal is needed
if ($renewalManager->shouldRenew($certificatePem)) {
    echo "Certificate needs renewal\n";
    
    // Get ARI information if supported
    if ($acmeClient->directory()->supportsARI()) {
        $renewalInfo = $acmeClient->renewalInfo()->getFromCertificate($certificatePem);
        
        echo "Suggested renewal window:\n";
        echo "  Start: " . $renewalInfo->suggestedWindow['start'] . "\n";
        echo "  End: " . $renewalInfo->suggestedWindow['end'] . "\n";
        
        if ($renewalInfo->shouldRenewNow()) {
            echo "ARI recommends renewing now\n";
            // Proceed with renewal...
        }
    }
} else {
    echo "Certificate renewal not needed yet\n";
}
```

### ржкрзНрз░ржорж╛ржгржкрждрзНрз░ рз░ржж ржХрз░рж╛

```php
try {
    // Load certificate to revoke
    $certificatePem = file_get_contents('certificate.pem');
    
    // Revoke certificate
    $success = $acmeClient->certificate()->revoke(
        $certificatePem,
        reason: 1 // 0=unspecified, 1=keyCompromise, 2=cACompromise, 3=affiliationChanged, 4=superseded, 5=cessationOfOperation
    );
    
    if ($success) {
        echo "Certificate revoked successfully\n";
    } else {
        echo "Certificate revocation failed\n";
    }
    
} catch (Exception $e) {
    echo "Revocation error: " . $e->getMessage() . "\n";
}
```

### ржПржХрж╛ржзрж┐ржХ ржкрзНрз░ржорж╛ржгржкрждрзНрз░ ржХрз░рзНрждрзГржкржХрзНрж╖

```php
// Let's Encrypt
$letsEncrypt = new AcmeClient(
    staging: false,
    localAccount: $account,
    httpClient: $httpClient
);

// ZeroSSL
$zeroSSL = new AcmeClient(
    localAccount: $account,
    httpClient: $httpClient,
    baseUrl: 'https://acme.zerossl.com/v2/DV90/directory'
);

// Google Trust Services
$googleCA = new AcmeClient(
    localAccount: $account,
    httpClient: $httpClient,
    baseUrl: 'https://dv.acme-v02.api.pki.goog/directory'
);
```

### ржХрж╛рж╖рзНржЯржо HTTP ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржХржиржлрж┐ржЧрж╛рз░рзЗржЪржи

```php
use ALAPI\Acme\Http\Clients\ClientFactory;

$httpClient = ClientFactory::create(30, [
    'proxy' => 'http://proxy.example.com:8080',
    'verify' => true, // SSL verification
    'timeout' => 30,
    'connect_timeout' => 10,
    'headers' => [
        'User-Agent' => 'MyApp ACME Client 1.0'
    ]
]);
```

### рж▓ржЧрж┐ржВ

```php
use Monolog\Logger;
use Monolog\Handler\StreamHandler;

// Create logger
$logger = new Logger('acme');
$logger->pushHandler(new StreamHandler('acme.log', Logger::INFO));

// Set logger on client
$acmeClient->setLogger($logger);
```

## ржХржиржлрж┐ржЧрж╛рз░рзЗрж╢рзНржмржи

### ржПржХрж╛ржЙржгрзНржЯ ржкрз░рж┐ржЪрж╛рж▓ржи ржмрж┐ржХрж▓рзНржкрж╕ржорзВрж╣

**AccountStorage ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж┐ ржлрж╛ржЗрж▓-ржнрж┐рждрзНрждрж┐ржХ ржкрз░рж┐ржЪрж╛рж▓ржирж╛ржГ**

```php
use ALAPI\Acme\Utils\AccountStorage;

// Check if account files exist
if (AccountStorage::exists('storage', 'my-account')) {
    $account = AccountStorage::loadFromFiles('storage', 'my-account');
} else {
    $account = AccountStorage::createAndSave('storage', 'my-account');
}

// Load or create account automatically
$account = AccountStorage::loadOrCreate(
    directory: 'storage',
    name: 'my-account',
    keyType: 'ECC',
    keySize: 'P-384'
);
```

**ржЕрз▒рж╕рзНржерж┐ржд ржЪрж╛ржмрж┐рз░ ржмрж╛ржмрзЗ Account рж╢рзНрз░рзЗржгрзА ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░рж╛ рж╣рзИржЫрзЗ:**

```php
use ALAPI\Acme\Accounts\Account;

// From existing private key
$privateKey = file_get_contents('/path/to/private.key');
$account = new Account($privateKey);

// With both private and public keys
$privateKey = file_get_contents('/path/to/private.key');
$publicKey = file_get_contents('/path/to/public.key');
$account = new Account($privateKey, $publicKey);

// Create new account with specific key type
$account = Account::createECC('P-384');  // or 'P-256', 'P-384'
$account = Account::createRSA(4096);     // or 2048, 3072

// Get account information
echo "Key Type: " . $account->getKeyType() . "\n";
echo "Key Size: " . $account->getKeySize() . "\n";
```

## рждрзНрз░рзБржЯрж┐ ржкрз░рж┐ржЪрж╛рж▓ржирж╛

```php
use ALAPI\Acme\Exceptions\AcmeException;
use ALAPI\Acme\Exceptions\AcmeAccountException;
use ALAPI\Acme\Exceptions\DomainValidationException;
use ALAPI\Acme\Exceptions\AcmeCertificateException;

try {
    // ACME operations here
} catch (AcmeAccountException $e) {
    echo "Account error: " . $e->getMessage() . "\n";
    echo "Detail: " . $e->getDetail() . "\n";
    echo "Type: " . $e->getAcmeType() . "\n";
} catch (DomainValidationException $e) {
    echo "Validation error: " . $e->getMessage() . "\n";
} catch (AcmeCertificateException $e) {
    echo "Certificate error: " . $e->getMessage() . "\n";
} catch (AcmeException $e) {
    echo "ACME error: " . $e->getMessage() . "\n";
} catch (Exception $e) {
    echo "General error: " . $e->getMessage() . "\n";
}
```

## ржкрз░рзАржХрзНрж╖ржг

ржЯрзЗрж╖рзНржЯ ржЫрзБржЯржЯрзЛ ржЪрж▓рж╛ржУ:

```bash
composer test
```

рж╕рзНржерж┐рз░ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржЪрж▓рж╛ржУ:

```bash
composer analyse
```

ржХрзЛржб рж╢рзИрж▓рзА ржарж┐ржХ ржХрз░ржХ:

```bash
composer cs-fix
```

## рж╕рзБрз░ржХрзНрж╖рж╛ ржкрз░рзНржпрж╛рж▓рзЛржЪржирж╛

1. **ржмрзНржпржХрзНрждрж┐ржЧржд ржЪрж╛ржмрж┐**: ржмрзНржпржХрзНрждрж┐ржЧржд ржЪрж╛ржмрж┐ рж╕рзБрз░ржХрзНрж╖рж┐рждржнрж╛рз▒рзЗ рж╕ржВрз░ржХрзНрж╖ржг ржХрз░ржХ, ржпржерж╛ржпрже ржлрж╛ржЗрж▓ ржЕржирзБржорждрж┐ (600) рж╕рж╣
2. **ржЕрзНржпрж╛ржХрж╛ржЙржгрзНржЯ ржЪрж╛ржмрж┐**: ржЕрзНржпрж╛ржХрж╛ржЙржгрзНржЯ ржЪрж╛ржмрж┐ ржЪрж╛рз░рзНржЯрж┐ржлрж┐ржХрзЗржЯ ржЪрж╛ржмрж┐рз░ ржкрз░рж╛ ржкрзГржержХ ржХрз░рж┐ рз░рж╛ржЦржХ
3. **рж╕рзНржЯрзЗржЬрж┐ржВ ржкрз░рж┐ржмрзЗрж╢**: ржкрз░рзАржХрзНрж╖рж╛рз░ ржмрж╛ржмрзЗ рж╕рзНржЯрзЗржЬрж┐ржВ ржкрз░рж┐ржмрзЗрж╢ ржмрзНржпрз▒рж╣рж╛рз░ ржХрз░ржХ
4. **рз░рзЗржЯ рж╕рзАржорж╛**: CA рз░рзЗржЯ рж╕рзАржорж╛рз░ ржмрж┐рж╖рзЯрзЗ ржЕрз▒ржЧржд ржерж╛ржХржХ
5. **ржпрж╛ржЪрж╛ржЗ**: рж╕ржжрж╛рзЯ рж╕рзНржерж╛ржирзАржпрж╝ржнрж╛рз▒рзЗ ржЪрзЗрж▓рзЗржЮрзНржЬ ржпрж╛ржЪрж╛ржЗ ржХрз░ржХ, рждрж╛рз░ржкрж┐ржЫрждрзЗржЗ ACME ржпрж╛ржЪрж╛ржЗржХрз░ржг ржЖрз░ржорзНржн ржХрз░ржХ

## ржЕрз▒ржжрж╛ржи

1. рз░рзЗржк'ржЬрж┐ржЯ'рз░рж┐ржЯрзЛ ржлрж░рзНржХ ржХрз░ржХ
2. ржПржЯрж╛ ржлрж┐ржЪрж╛рз░ рж╢рж╛ржЦрж╛ рж╕рзГрж╖рзНржЯрж┐ ржХрз░ржХ
3. ржЖржкрзЛржирж╛рз░ ржкрз░рж┐рз▒рж░рзНрждржи ржХрз░ржХ
4. ржирждрзБржи ржХрж╛рз░рзНржпржХрзНрж╖ржорждрж╛рз░ ржмрж╛ржмрзЗ ржкрз░рзАржХрзНрж╖рж╛ ржпрзЛржЧ ржХрз░ржХ
5. ржкрз░рзАржХрзНрж╖рж╛ ржЪрзБржЯ ржЪрж▓рж╛ржУржХ
6. ржПржЯрж╛ ржкрзБрж▓ ржЕржирзБрз░рзЛржз ржЬржорж╛ ржжрж┐ржпрж╝ржХ

## рж▓рж╛ржЗржЪрзЗржЮрзНржЪ

ржПржЗ ржкрзНрз░ржХрж▓рзНржк MIT рж▓рж╛ржЗржЪрзЗржЮрзНржЪрз░ ржЕржзрзАржиржд рж▓рж╛ржЗржЪрзЗржЮрзНржЪ ржХрз░рж╛ рж╣рзИржЫрзЗ - ржЕржзрж┐ржХ рждржерзНржпрз░ ржмрж╛ржмрзЗ [LICENSE](LICENSE) ржлрж╛ржЗрж▓ржЯрзЛ ржЪрж╛ржУржХред

## рж▓рж┐ржВржХрж╕ржорзВрж╣

- [Let's Encrypt Documentation](https://letsencrypt.org/docs/)
- [ACME Specification RFC 8555](https://tools.ietf.org/html/rfc8555)
- [ZeroSSL ACME Guide](https://zerossl.com/documentation/acme/)

## рж╕рж╣рж╛ржпрж╝

ржпржжрж┐ ржЖржкрзБржирж┐ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ ржкрж╛ржпрж╝ ржмрж╛ ржкрзНрз░рж╢рзНржи ржерж╛ржХрзЗ:

1. [ржбржХрзБржорзЗржирзНржЯрзЗрж╢рзНржмржи](#quick-start) ржЪрж╛ржУржХ
2. ржмрж┐ржжрзНржпржорж╛ржи [рж╕ржорж╕рзНржпрж╛рж╕ржорзВрж╣](https://github.com/anhao/acme-client/issues)ржд рж╕ржирзНржзрж╛ржи ржХрз░ржХ
3. ржкрзНрз░рзЯрзЛржЬржи рж╣рж▓рзЗ ржПржЯрж╛ [ржирждрзБржи рж╕ржорж╕рзНржпрж╛](https://github.com/anhao/acme-client/issues/new) рж╕рзГрж╖рзНржЯрж┐ ржХрз░ржХ


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-08-15

---