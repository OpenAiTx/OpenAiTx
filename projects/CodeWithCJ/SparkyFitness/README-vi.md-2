{
  "id": 2,
  "origin": "    docker compose pull\n    docker compose up -d\n    ```\n\n3.  **Access the Application:**\n    Once the services are up and running, access SparkyFitness in your web browser at:\n    ```\n    http://localhost:3000\n    ```\n\n4.  **AI Chatbot - Optional Configuration:**\n    To enable the AI Chatbot's full functionality, including secure API key storage and database access, follow these steps:\n\n    *   **Configure `AI_API_ENCRYPTION_KEY`:** Generate a secret in \"Supabase -> Edge Functions\" -> \"Environment Variables\". This key is used for encrypting your AI keys when it is stored within Supabase.\n\n    *   **Generate `SUPABASE_ACCESS_TOKEN`:**\n        1.  Access your Docker console.\n        2.  Run `supabase login` and authenticate using the provided URL.\n        3.  Retrieve the access token by running `cat ~/.supabase/access-token`.\n        4.  Update your `docker-compose.yml` or Portainer configuration with this token to redeploy.\n        5.  After redeployment, log in to SparkyFitness and configure the AI service with your preferred provider.\n     \n\n### Manul Deployment of DB & Functions to Supabase\n**Method 1:  \n**If you don't have IPV6 network connection enabled, DB migration will fail as Supabase's free verssion doesn't support IPV4 direct connection.\n\n   1. Download latest release and unzip to your PC.\n   2. Navigate to the project folder. Docker needs to be up & running.\n   3. Run below commands. (functions deploy is needed only for AI configuration. If you don't need ChatBOT, you can skip it)\n``\n      supabase login  \n      supabase link  \n      supabase db push  \n      supabase functions deploy chat   \n``\nRe-run Docker compose. Front end App will start working.\n\n**Method 2:  \n   1. Download latest release and unzip to your PC.  \n   2. Navigate to the project folder.  \n   3. Go to supabase/migrations. Copy the SQL statements and run them in Supabase-->Project-->SQL Editor one by one in ASC order.  \n   4. [Optional] Do the same for supabase/functions/chat  if you require AI ChatBOT. Copy index.js and run it in Supabase-->Project-->Edge Function-->Deploy new function.  \n\n\n",
  "origin_sha": "r6znWWj0ns4QLCEd2ocJVOflhPH5rNgzKE0nMQYJP/c=",
  "translate": "```markdown\n    docker compose pull\n    docker compose up -d\n    ```\n\n3.  **Truy cập Ứng dụng:**\n    Sau khi các dịch vụ đã khởi động, truy cập SparkyFitness trên trình duyệt web tại:\n    ```\n    http://localhost:3000\n    ```\n\n4.  **Cấu hình Tuỳ chọn cho AI Chatbot:**\n    Để bật đầy đủ chức năng của AI Chatbot, bao gồm lưu trữ khóa API an toàn và truy cập cơ sở dữ liệu, hãy làm theo các bước sau:\n\n    *   **Cấu hình `AI_API_ENCRYPTION_KEY`:** Tạo một secret trong \"Supabase -> Edge Functions\" -> \"Environment Variables\". Khóa này dùng để mã hóa các khóa AI của bạn khi lưu trữ trong Supabase.\n\n    *   **Tạo `SUPABASE_ACCESS_TOKEN`:**\n        1.  Truy cập vào bảng điều khiển Docker của bạn.\n        2.  Chạy `supabase login` và xác thực bằng URL được cung cấp.\n        3.  Lấy access token bằng cách chạy `cat ~/.supabase/access-token`.\n        4.  Cập nhật tệp `docker-compose.yml` hoặc cấu hình Portainer với token này để triển khai lại.\n        5.  Sau khi triển khai lại, đăng nhập vào SparkyFitness và cấu hình dịch vụ AI với nhà cung cấp bạn muốn.\n     \n\n### Triển khai Thủ công DB & Functions lên Supabase\n**Phương pháp 1:  \n**Nếu bạn chưa bật kết nối mạng IPV6, việc di chuyển DB sẽ thất bại vì phiên bản miễn phí của Supabase không hỗ trợ kết nối trực tiếp IPV4.\n\n   1. Tải xuống bản phát hành mới nhất và giải nén vào máy tính của bạn.\n   2. Di chuyển tới thư mục dự án. Docker cần phải được khởi động sẵn.\n   3. Chạy các lệnh bên dưới. (Triển khai functions chỉ cần thiết cho cấu hình AI. Nếu bạn không dùng ChatBOT, có thể bỏ qua bước này)\n``\n      supabase login  \n      supabase link  \n      supabase db push  \n      supabase functions deploy chat   \n``\nChạy lại Docker compose. Ứng dụng giao diện sẽ bắt đầu hoạt động.\n\n**Phương pháp 2:  \n   1. Tải xuống bản phát hành mới nhất và giải nén vào máy tính của bạn.  \n   2. Di chuyển tới thư mục dự án.  \n   3. Truy cập vào supabase/migrations. Sao chép các câu lệnh SQL và chạy từng câu một trong Supabase-->Project-->SQL Editor theo thứ tự tăng dần ASC.  \n   4. [Tuỳ chọn] Làm tương tự với supabase/functions/chat nếu bạn cần AI ChatBOT. Sao chép file index.js và chạy nó trong Supabase-->Project-->Edge Function-->Deploy new function.  \n```",
  "status": "ok"
}