
<div align="right">
  <details>
    <summary >üåê –Ø–∑—ã–∫</summary>
    <div>
      <div align="center">
        <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=en">English</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=zh-TW">ÁπÅÈ´î‰∏≠Êñá</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ja">Êó•Êú¨Ë™û</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ko">ÌïúÍµ≠Ïñ¥</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=th">‡πÑ‡∏ó‡∏¢</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=fr">Fran√ßais</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=de">Deutsch</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=es">Espa√±ol</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=it">Itapano</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ru">–†—É—Å—Å–∫–∏–π</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=pt">Portugu√™s</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=nl">Nederlands</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=pl">Polski</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=fa">ŸÅÿßÿ±ÿ≥€å</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=tr">T√ºrk√ße</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=vi">Ti·∫øng Vi·ªát</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=id">Bahasa Indonesia</a>
      </div>
    </div>
  </details>
</div>

<div align="center">

# s3 - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é RL
***–í–∞–º –Ω–µ –Ω—É–∂–Ω–æ —Ç–∞–∫ –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞***

<p align="center">

  <a href="https://arxiv.org/abs/2505.14146">
    <img src="https://img.shields.io/badge/arXiv-2505.14146-b31b1b.svg" alt="arXiv">
  </a>
</p>
</div>

**–û–±–∑–æ—Ä –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

<img src="https://raw.githubusercontent.com/pat-jj/s3/main/images/performance_overview.png" alt="performance_overview" width="800">



## –ß—Ç–æ —Ç–∞–∫–æ–µ s3?

<div align="center">
<img src="https://raw.githubusercontent.com/pat-jj/s3/main/images/framework.png" alt="framework" width="800">

**–§—Ä–µ–π–º–≤–æ—Ä–∫ s3**
</div>

`s3` ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –º–æ—â–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –≤ retrieval-augmented generation (RAG). –û–Ω –æ–±—É—á–∞–µ—Ç —è–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –ø–æ–∏—Å–∫ ‚Äî –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–∞–º–æ–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ. –§–æ–∫—É—Å–∏—Ä—É—è—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–æ–∏—Å–∫–æ–≤–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π, `s3` –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ QA-–∑–∞–¥–∞—á–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É—è –ª–∏—à—å –º–∞–ª—É—é —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏. –≠—Ç–æ –º–æ–¥—É–ª—å–Ω–æ–µ, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª—é–±—ã–º "—á–µ—Ä–Ω—ã–º —è—â–∏–∫–æ–º" LLM.



## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-installation)
- [üí° –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞](#-preparation)
- [üèãÔ∏è –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è](https://github.com/pat-jj/s3?tab=readme-ov-file#%EF%B8%8F-run-training)
- [üîç –ó–∞–ø—É—Å–∫ –ø–æ–∏—Å–∫–∞/–∏–∑–≤–ª–µ—á–µ–Ω–∏—è](https://github.com/pat-jj/s3?tab=readme-ov-file#-run-searchretrieval)
- [üìà –ó–∞–ø—É—Å–∫ –æ—Ü–µ–Ω–∫–∏](#-run-evaluation)

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

**–û–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è Searcher & Generator**
```bash
conda create -n s3 python=3.9
# install torch [or you can skip this step and let vllm to install the correct version for you]
pip install torch==2.4.0 --index-url https://download.pytorch.org/whl/cu121
# install vllm
pip3 install vllm==0.6.3 # or you can install 0.5.4, 0.4.2 and 0.3.1
pip3 install ray

# verl
# cd code
pip install -e .

# flash attention 2
pip3 install flash-attn --no-build-isolation

# we use pyserini for efficient retrieval and evaluation
pip install pyserini    # the version we used is 0.22.1

# quality of life
pip install wandb IPython matplotlib huggingface_hub
```
**–°—Ä–µ–¥–∞ Retriever**

```bash
conda create -n ret python=3.10
conda activate ret

conda install pytorch==2.4.0 torchvision==0.19.0 torchaudio==2.4.0 pytorch-cuda=12.1 -c pytorch -c nvidia
pip install transformers datasets pyserini
conda install -c pytorch -c nvidia faiss-gpu=1.8.0
pip install uvicorn fastapi
```
## üí° –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
***–°–∫–∞—á–∞—Ç—å –∏–Ω–¥–µ–∫—Å –∏ –∫–æ—Ä–ø—É—Å***



```bash
python scripts/download.py --save_path $save_path
cat $save_path/part_* > $save_path/e5_Flat.index
gzip -d $save_path/wiki-18.jsonl.gz
```

***–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –Ω–∞–∏–≤–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ RAG*** (–∏–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞—á–∞—Ç—å –Ω–∞—à–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–¥–µ—Å—å: [huggingface](https://huggingface.co/datasets/pat-jj/s3_processed_data))

```bash
# deploy retriever
bash scripts/deploy_retriever/retrieval_launch.sh # or scripts/deploy_retriever/retrieval_launch_mirage.sh for MedCorp corpus.
# deploy generator
bash generator_llms/host.sh # modify tensor-parallel-size to the number of GPUs you use
# run precompute
bash scripts/precompute.sh # this step will take a while, as it will precompute the na√Øve RAG Cache for training
```
## üèãÔ∏è –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è
***–≠—Ç–æ—Ç —à–∞–≥ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è S3***



```bash
# deploy retriever
bash scripts/deploy_retriever/retrieval_launch.sh 
# deploy generator
bash generator_llms/host.sh
# run training
bash scripts/train/train_s3.sh
```
## üîç –ó–∞–ø—É—Å–∫ –ø–æ–∏—Å–∫–∞/–∏–∑–≤–ª–µ—á–µ–Ω–∏—è
***–≠—Ç–æ—Ç —à–∞–≥ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ s3 / –±–∞–∑–æ–≤—ã—Ö –ª–∏–Ω–∏–π***

**s3**


```bash
# deploy retriever
bash scripts/deploy_retriever/retrieval_launch.sh 
# run s3 inference
bash scripts/s3_inference/evaluate-8-3-3.sh
```
<details>
<summary>–ë–∞–∑–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏</summary>

**RAG**

```bash
bash scripts/deploy_retriever/retrieval_launch.sh # or retrieval_launch_bm25.sh # deploy retriever
bash scripts/baselines/rag.sh # run RAG 
```
**DeepRetrieval**
**–ì–ª—É–±–æ–∫–æ–µ–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**
```bash
bash retrieval_launch_bm25.sh # deploy BM25 Model
bash generator_llms/deepretrieval.sh # deploy DeepRetrieval Model
bash scripts/baselines/deepretrieval.sh # run DeepRetrieval Query Rewriting + Retrieval
```
**–ü–æ–∏—Å–∫-R1**

```bash
bash retrieval_launch.sh # deploy e5 retriever
bash scripts/baselines/search_r1.sh # run Search-R1
```
**IRCoT**
**IRCoT**
```bash
bash retrieval_launch.sh # deploy e5 retriever
python scripts/baselines/ircot.py
```
**–ü–æ–∏—Å–∫-o1**

```bash
bash retrieval_launch.sh # deploy e5 retriever
bash scripts/baselines/search_o1.sh # run Search-o1
```
</details>


## üìà –ó–∞–ø—É—Å–∫ –æ—Ü–µ–Ω–∫–∏
***–≠—Ç–æ—Ç —à–∞–≥ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ—Ü–µ–Ω–∫–∏ s3 / –±–∞–∑–æ–≤—ã—Ö –ª–∏–Ω–∏–π***



```bash
bash scripts/evaluation/run.sh
```

## –í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ?
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å s3 –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –∫–æ—Ä–ø—É—Å–µ/–¥–∞—Ç–∞—Å–µ—Ç–µ, –≤—ã –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —ç—Ç–æ–º—É –∫–æ–º–º–∏—Ç—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞: [commit 8420538](https://github.com/pat-jj/s3/commit/8420538836febbe59d5bcbe41187f16908c9c36c)

### –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤?
–ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —É–∂–µ —É—Å–ø–µ—à–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–ª–∏ –Ω–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å [–æ—Ç–∫—Ä—ã—Ç—å issue](https://github.com/pat-jj/s3/issues) ‚Äî –º—ã —Ä–∞–¥—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É (—Å–º. [—ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä](https://github.com/pat-jj/s3/issues/20)).

–•–æ—Ç—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º–æ–¥–µ–ª—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ ‚Äî –∏ –º—ã –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ **—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ–±—É—á–µ–Ω–∏–µ —Å –Ω—É–ª—è**, —Ç–∞–∫ –∫–∞–∫ –æ—Ü–µ–Ω–∫–∞ –∑–∞—á–∞—Å—Ç—É—é –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —á–µ–º –æ–±—É—á–µ–Ω–∏–µ ‚Äî –º—ã —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Ç–æ—á–∫—É: [s3-8-3-3-20steps](https://huggingface.co/pat-jj/s3-8-3-3-20steps), –æ–±—É—á–µ–Ω–Ω—É—é –ø—Ä–∏–º–µ—Ä–Ω–æ –∑–∞ —á–∞—Å.



## –¶–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bibtex
@article{jiang2025s3,
  title={s3: You Don't Need That Much Data to Train a Search Agent via RL},
  author={Jiang, Pengcheng and Xu, Xueqiang and Lin, Jiacheng and Xiao, Jinfeng and Wang, Zifeng and Sun, Jimeng and Han, Jiawei},
  journal={arXiv preprint arXiv:2505.14146},
  year={2025}
}
```
–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å –∫ –Ω–∞—à–µ–π —Ä–∞–±–æ—Ç–µ!






---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-12-30

---