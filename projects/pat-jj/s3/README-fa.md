<div align="right">
  <details>
    <summary >ğŸŒ Ø²Ø¨Ø§Ù†</summary>
    <div>
      <div align="center">
        <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=en">Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=zh-CN">ç®€ä½“ä¸­æ–‡</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=zh-TW">ç¹é«”ä¸­æ–‡</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ja">Ú˜Ø§Ù¾Ù†ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ko">Ú©Ø±Ù‡â€ŒØ§ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=hi">Ù‡Ù†Ø¯ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=th">ØªØ§ÛŒÙ„Ù†Ø¯ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=fr">ÙØ±Ø§Ù†Ø³ÙˆÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=de">Ø¢Ù„Ù…Ø§Ù†ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=es">Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=it">Ø§ÛŒØªØ§Ù„ÛŒØ§ÛŒÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ru">Ø±ÙˆØ³ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=pt">Ù¾Ø±ØªØºØ§Ù„ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=nl">Ù‡Ù„Ù†Ø¯ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=pl">Ù„Ù‡Ø³ØªØ§Ù†ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ar">Ø¹Ø±Ø¨ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=fa">ÙØ§Ø±Ø³ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=tr">ØªØ±Ú©ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=vi">ÙˆÛŒØªÙ†Ø§Ù…ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=id">Ø§Ù†Ø¯ÙˆÙ†Ø²ÛŒØ§ÛŒÛŒ</a>
      </div>
    </div>
  </details>
</div>

<div align="center">

# s3 - Ø¢Ù…ÙˆØ²Ø´ Ø¹Ø§Ù…Ù„ Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¢Ù…Ø¯ Ø§Ù…Ø§ Ù…Ø¤Ø«Ø± Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ ØªÙ‚ÙˆÛŒØªÛŒ
***Ø¨Ø±Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ ÛŒÚ© Ø¹Ø§Ù…Ù„ Ø¬Ø³ØªØ¬Ùˆ Ø¨Ù‡ Ø§ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø§Ø¯Ù‡ Ù†ÛŒØ§Ø² Ù†Ø¯Ø§Ø±ÛŒØ¯***

<p align="center">

  <a href="https://arxiv.org/abs/2505.14146">
    <img src="https://img.shields.io/badge/arXiv-2505.14146-b31b1b.svg" alt="arXiv">

  </a>
</p>
</div>

**Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯:**

<img src="https://raw.githubusercontent.com/pat-jj/s3/main/images/performance_overview.png" alt="performance_overview" width="800">



## s3 Ú†ÛŒØ³ØªØŸ

<div align="center">
<img src="https://raw.githubusercontent.com/pat-jj/s3/main/images/framework.png" alt="framework" width="800">

**Ú†Ø§Ø±Ú†ÙˆØ¨ s3**
</div>

`s3` ÛŒÚ© Ú†Ø§Ø±Ú†ÙˆØ¨ Ø³Ø§Ø¯Ù‡ Ø§Ù…Ø§ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ Ø¨Ø±Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ Ø¹Ø§Ù…Ù„â€ŒÙ‡Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ ØªÙ‚ÙˆÛŒØªâ€ŒØ´Ø¯Ù‡ Ø¨Ø§ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ (RAG) Ø§Ø³Øª. Ø§ÛŒÙ† Ú†Ø§Ø±Ú†ÙˆØ¨ Ø¨Ù‡ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø²Ø¨Ø§Ù†ÛŒ Ø¢Ù…ÙˆØ²Ø´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ ØªØ§ Ù…Ø¤Ø«Ø±ØªØ± Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†Ù†Ø¯â€”Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¯Ø± Ø®ÙˆØ¯ Ù…ÙˆÙ„Ø¯. Ø¨Ø§ ØªÙ…Ø±Ú©Ø² ØµØ±ÙØ§Ù‹ Ø¨Ø± Ù…Ø¤Ù„ÙÙ‡ Ø¬Ø³ØªØ¬ÙˆØŒ `s3` Ø¨Ø§ ØªÙ†Ù‡Ø§ Ú©Ø³Ø±ÛŒ Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒØŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ù‚ÙˆÛŒ Ø¯Ø± ÙˆØ¸Ø§ÛŒÙ Ù¾Ø±Ø³Ø´ Ùˆ Ù¾Ø§Ø³Ø® Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. Ø§ÛŒÙ† Ú†Ø§Ø±Ú†ÙˆØ¨ Ù…Ø§Ú˜ÙˆÙ„Ø§Ø±ØŒ Ú©Ø§Ø±Ø¢Ù…Ø¯ Ùˆ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø± Ø¨ÛŒâ€ŒÙ†Ù‚Øµ Ø¨Ø§ Ù‡Ø± LLM Ø¬Ø¹Ø¨Ù‡â€ŒØ³ÛŒØ§Ù‡ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.



## ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

- [ğŸ“¦ Ù†ØµØ¨](#-installation)
- [ğŸ’¡ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ](#-preparation)
- [ğŸ‹ï¸ Ø§Ø¬Ø±Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´](https://github.com/pat-jj/s3?tab=readme-ov-file#%EF%B8%8F-run-training)
- [ğŸ” Ø§Ø¬Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ/Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ](https://github.com/pat-jj/s3?tab=readme-ov-file#-run-searchretrieval)
- [ğŸ“ˆ Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ](#-run-evaluation)

## ğŸ“¦ Ù†ØµØ¨

**Ù…Ø­ÛŒØ· Ø¬Ø³ØªØ¬ÙˆÚ¯Ø± Ùˆ Ù…ÙˆÙ„Ø¯**
```bash
conda create -n s3 python=3.9
# install torch [or you can skip this step and let vllm to install the correct version for you]
pip install torch==2.4.0 --index-url https://download.pytorch.org/whl/cu121
# install vllm
pip3 install vllm==0.6.3 # or you can install 0.5.4, 0.4.2 and 0.3.1
pip3 install ray

# verl
# cd code
pip install -e .

# flash attention 2
pip3 install flash-attn --no-build-isolation

# we use pyserini for efficient retrieval and evaluation
pip install pyserini    # the version we used is 0.22.1

# quality of life
pip install wandb IPython matplotlib huggingface_hub
```
**Ù…Ø­ÛŒØ· Ø¨Ø§Ø²ÛŒØ§Ø¨**

```bash
conda create -n ret python=3.10
conda activate ret

conda install pytorch==2.4.0 torchvision==0.19.0 torchaudio==2.4.0 pytorch-cuda=12.1 -c pytorch -c nvidia
pip install transformers datasets pyserini
conda install -c pytorch -c nvidia faiss-gpu=1.8.0
pip install uvicorn fastapi
```
## ğŸ’¡ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ
***Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ùˆ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡***



```bash
python scripts/download.py --save_path $save_path
cat $save_path/part_* > $save_path/e5_Flat.index
gzip -d $save_path/wiki-18.jsonl.gz
```

***Ù¾ÛŒØ´â€ŒÙ¾Ø±Ø¯Ø§Ø²Ø´ Ø§ÙˆÙ„ÛŒÙ‡ RAG Ø¨Ù‡ Ø±ÙˆØ´ Ø³Ø§Ø¯Ù‡*** (ÛŒØ§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´â€ŒØ´Ø¯Ù‡ Ù…Ø§ Ø±Ø§ Ø§Ø² Ø§ÛŒÙ†Ø¬Ø§ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯: [huggingface](https://huggingface.co/datasets/pat-jj/s3_processed_data))

```bash
# deploy retriever
bash scripts/deploy_retriever/retrieval_launch.sh # or scripts/deploy_retriever/retrieval_launch_mirage.sh for MedCorp corpus.
# deploy generator
bash generator_llms/host.sh # modify tensor-parallel-size to the number of GPUs you use
# run precompute
bash scripts/precompute.sh # this step will take a while, as it will precompute the naÃ¯ve RAG Cache for training
```
## ğŸ‹ï¸ Ø§Ø¬Ø±Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´
***Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø±Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ S3 Ø§Ø³Øª***



```bash
# deploy retriever
bash scripts/deploy_retriever/retrieval_launch.sh 
# deploy generator
bash generator_llms/host.sh
# run training
bash scripts/train/train_s3.sh
```
## ğŸ” Ø§Ø¬Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ/Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ
***Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø±Ø§ÛŒ Ú¯Ø±Ø¯Ø¢ÙˆØ±ÛŒ Ø²Ù…ÛŒÙ†Ù‡ s3 / Ø®Ø·ÙˆØ· Ù¾Ø§ÛŒÙ‡ Ø§Ø³Øª***

**s3**


```bash
# deploy retriever
bash scripts/deploy_retriever/retrieval_launch.sh 
# run s3 inference
bash scripts/s3_inference/evaluate-8-3-3.sh
```
<details>
<summary>Ù…Ø¨Ø§Ù†ÛŒ</summary>

**RAG**

```bash
bash scripts/deploy_retriever/retrieval_launch.sh # or retrieval_launch_bm25.sh # deploy retriever
bash scripts/baselines/rag.sh # run RAG 
```
**Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¹Ù…ÛŒÙ‚**

```bash
bash retrieval_launch_bm25.sh # deploy BM25 Model
bash generator_llms/deepretrieval.sh # deploy DeepRetrieval Model
bash scripts/baselines/deepretrieval.sh # run DeepRetrieval Query Rewriting + Retrieval
```
**Ø¬Ø³ØªØ¬Ùˆ-R1**

```bash
bash retrieval_launch.sh # deploy e5 retriever
bash scripts/baselines/search_r1.sh # run Search-R1
```
**IRCoT**
**Ø¢ÛŒâ€ŒØ¢Ø±Ú©Ø§Øª**
```bash
bash retrieval_launch.sh # deploy e5 retriever
python scripts/baselines/ircot.py
```
**Ø¬Ø³ØªØ¬Ùˆ-o1**

```bash
bash retrieval_launch.sh # deploy e5 retriever
bash scripts/baselines/search_o1.sh # run Search-o1
```
</details>


## ğŸ“ˆ Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ
***Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ s3 / Ø®Ø·ÙˆØ· Ù¾Ø§ÛŒÙ‡ Ø§Ø³Øª***



```bash
bash scripts/evaluation/run.sh
```

## Ù¾Ø±Ø³Ø´ Ùˆ Ù¾Ø§Ø³Ø®
### Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒØŸ
Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ s3 Ø±Ø§ Ø±ÙˆÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¯Ø§Ø¯Ù‡/Ù…ØªÙ† Ø®ÙˆØ¯ Ø¢Ø²Ù…Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ø§Ù…ÛŒØª Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯ ØªØ§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª Ø®Ø· Ù„ÙˆÙ„Ù‡ Ø®ÙˆØ¯ Ú†Ù‡ Ú©Ø§Ø±ÛŒ Ø¨Ø§ÛŒØ¯ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯: [commit 8420538](https://github.com/pat-jj/s3/commit/8420538836febbe59d5bcbe41187f16908c9c36c)

### Ø¨Ø§Ø²ØªÙˆÙ„ÛŒØ¯ Ù†ØªØ§ÛŒØ¬ØŸ
Ú†Ù†Ø¯ÛŒÙ† ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ù†ØªØ§ÛŒØ¬ Ù…Ø§ Ø±Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø²ØªÙˆÙ„ÛŒØ¯ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù†Ø¯. Ø§Ú¯Ø± Ø³ÙˆØ§Ù„ÛŒ Ø¯Ø§Ø±ÛŒØ¯ ÛŒØ§ Ø¨Ø§ Ù…Ø´Ú©Ù„ÛŒ Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯ÛŒØ¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ [ÛŒÚ© issue Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯](https://github.com/pat-jj/s3/issues) â€” Ø®ÙˆØ´Ø­Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÛŒÙ… Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ø¹Ù…Ù„ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ù‡ÛŒÙ… (Ø¨Ù‡ [Ø§ÛŒÙ† Ù…Ø«Ø§Ù„](https://github.com/pat-jj/s3/issues/20) Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯).

Ø§Ú¯Ø±Ú†Ù‡ Ø¨Ø§Ø²ØªÙˆÙ„ÛŒØ¯ Ù…Ø¯Ù„ ØªÙˆØ³Ø· Ø®ÙˆØ¯ØªØ§Ù† Ø³Ø§Ø¯Ù‡ Ø§Ø³Øª â€” Ùˆ Ù…Ø§ Ø¯Ø± ÙˆØ§Ù‚Ø¹ **ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ø§Ø² Ø§Ø¨ØªØ¯Ø§ Ø¢Ù…ÙˆØ²Ø´ Ø¯Ù‡ÛŒØ¯**ØŒ Ø²ÛŒØ±Ø§ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ø§ØºÙ„Ø¨ Ø¨Ø³ÛŒØ§Ø± Ø²Ù…Ø§Ù†â€ŒØ¨Ø±ØªØ± Ø§Ø² Ø¢Ù…ÙˆØ²Ø´ Ø§Ø³Øª â€” Ù…Ø§ ÛŒÚ© Ú†Ú©â€ŒÙ¾ÙˆÛŒÙ†Øª Ù…Ø±Ø¬Ø¹ Ù†ÛŒØ² Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒÙ…: [s3-8-3-3-20steps](https://huggingface.co/pat-jj/s3-8-3-3-20steps)ØŒ Ú©Ù‡ Ø¯Ø± Ø­Ø¯ÙˆØ¯ ÛŒÚ© Ø³Ø§Ø¹Øª Ø¢Ù…ÙˆØ²Ø´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª.



## Ù‚Ø¯Ø±Ø¯Ø§Ù†ÛŒ
Ù…Ø§ÛŒÙ„ÛŒÙ… Ø§Ø² Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± ØªØ´Ú©Ø± Ú©Ù†ÛŒÙ…:
[verl](https://github.com/volcengine/verl)ØŒ [RAGEN](https://github.com/RAGEN-AI/RAGEN)ØŒ [Search-R1](https://github.com/PeterGriffinJin/Search-R1)ØŒ [DeepRetrieval](https://github.com/pat-jj/DeepRetrieval)ØŒ [PySerini](https://github.com/castorini/pySerini).
 

## Ø§Ø±Ø¬Ø§Ø¹
```bibtex
@article{jiang2025s3,
  title={s3: You Don't Need That Much Data to Train a Search Agent via RL},
  author={Jiang, Pengcheng and Xu, Xueqiang and Lin, Jiacheng and Xiao, Jinfeng and Wang, Zifeng and Sun, Jimeng and Han, Jiawei},
  journal={arXiv preprint arXiv:2505.14146},
  year={2025}
}
```
Ø¨Ø§ ØªØ´Ú©Ø± Ø§Ø² Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒ Ø´Ù…Ø§ Ø¨Ù‡ Ú©Ø§Ø± Ù…Ø§!






---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-10-06

---