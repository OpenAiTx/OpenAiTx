<div align="right">
  <details>
    <summary >ğŸŒ Ø§Ù„Ù„ØºØ©</summary>
    <div>
      <div align="center">
        <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=en">English</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=zh-CN">ç®€ä½“ä¸­æ–‡</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=zh-TW">ç¹é«”ä¸­æ–‡</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ja">æ—¥æœ¬èª</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ko">í•œêµ­ì–´</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=th">à¹„à¸—à¸¢</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=fr">FranÃ§ais</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=de">Deutsch</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=es">EspaÃ±ol</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=it">Itapano</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=pt">PortuguÃªs</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=nl">Nederlands</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=pl">Polski</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=fa">ÙØ§Ø±Ø³ÛŒ</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=tr">TÃ¼rkÃ§e</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=vi">Tiáº¿ng Viá»‡t</a>
        | <a href="https://openaitx.github.io/view.html?user=pat-jj&project=s3&lang=id">Bahasa Indonesia</a>
      </div>
    </div>
  </details>
</div>

<div align="center">

# s3 - ØªØ¯Ø±ÙŠØ¨ ÙˆÙƒÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¨ÙƒÙØ§Ø¡Ø© ÙˆÙØ¹Ø§Ù„ÙŠØ© Ø¹Ø¨Ø± Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø¹Ø²Ø²
***Ù„Ø³Øª Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆÙƒÙŠÙ„ Ø¨Ø­Ø«***

<p align="center">

  <a href="https://arxiv.org/abs/2505.14146">
    <img src="https://img.shields.io/badge/arXiv-2505.14146-b31b1b.svg" alt="arXiv">

  </a>
</p>
</div>

**Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯Ø§Ø¡:**

<img src="https://raw.githubusercontent.com/pat-jj/s3/main/images/performance_overview.png" alt="performance_overview" width="800">



## Ù…Ø§ Ù‡Ùˆ s3ØŸ

<div align="center">
<img src="https://raw.githubusercontent.com/pat-jj/s3/main/images/framework.png" alt="framework" width="800">

**Ø¥Ø·Ø§Ø± Ø¹Ù…Ù„ s3**
</div>

` s3 ` Ù‡Ùˆ Ø¥Ø·Ø§Ø± Ø¹Ù…Ù„ Ø¨Ø³ÙŠØ· ÙˆÙ„ÙƒÙ†Ù‡ Ù‚ÙˆÙŠ Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ (RAG). ÙŠØ¹Ù„Ù… Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù„ØºØ© ÙƒÙŠÙÙŠØ© Ø§Ù„Ø¨Ø­Ø« Ø¨Ø´ÙƒÙ„ Ø£ÙƒØ«Ø± ÙØ¹Ø§Ù„ÙŠØ© - Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± ÙˆØ­Ø¯Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ù†ÙØ³Ù‡Ø§. Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ±ÙƒÙŠØ² ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø¹Ù†ØµØ± Ø§Ù„Ø¨Ø­Ø«ØŒ ÙŠØ­Ù‚Ù‚ ` s3 ` Ø£Ø¯Ø§Ø¡Ù‹ Ù‚ÙˆÙŠÙ‹Ø§ Ø¹Ø¨Ø± Ù…Ù‡Ø§Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ø£Ø¬ÙˆØ¨Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¬Ø²Ø¡ Ø¨Ø³ÙŠØ· ÙÙ‚Ø· Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©. Ø¥Ù†Ù‡ Ù…Ø¹ÙŠØ§Ø±ÙŠØŒ ÙØ¹Ø§Ù„ØŒ ÙˆÙ…ØµÙ…Ù… Ù„Ù„Ø¹Ù…Ù„ Ø¨Ø³Ù„Ø§Ø³Ø© Ù…Ø¹ Ø£ÙŠ Ù†Ù…ÙˆØ°Ø¬ Ù„ØºØ© ÙƒØ¨ÙŠØ± Ù…ØºÙ„Ù‚ Ø§Ù„Ù…ØµØ¯Ø±.



## Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

- [ğŸ“¦ Ø§Ù„ØªØ«Ø¨ÙŠØª](#-installation)
- [ğŸ’¡ Ø§Ù„ØªØ­Ø¶ÙŠØ±](#-preparation)
- [ğŸ‹ï¸ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ¯Ø±ÙŠØ¨](https://github.com/pat-jj/s3?tab=readme-ov-file#%EF%B8%8F-run-training)
- [ğŸ” Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø­Ø«/Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹](https://github.com/pat-jj/s3?tab=readme-ov-file#-run-searchretrieval)
- [ğŸ“ˆ Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…](#-run-evaluation)

## ğŸ“¦ Ø§Ù„ØªØ«Ø¨ÙŠØª

**Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¨Ø§Ø­Ø« ÙˆØ§Ù„Ù…ÙÙˆÙ„Ù‘Ø¯**
```bash
conda create -n s3 python=3.9
# install torch [or you can skip this step and let vllm to install the correct version for you]
pip install torch==2.4.0 --index-url https://download.pytorch.org/whl/cu121
# install vllm
pip3 install vllm==0.6.3 # or you can install 0.5.4, 0.4.2 and 0.3.1
pip3 install ray

# verl
# cd code
pip install -e .

# flash attention 2
pip3 install flash-attn --no-build-isolation

# we use pyserini for efficient retrieval and evaluation
pip install pyserini    # the version we used is 0.22.1

# quality of life
pip install wandb IPython matplotlib huggingface_hub
```
**Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹**

```bash
conda create -n ret python=3.10
conda activate ret

conda install pytorch==2.4.0 torchvision==0.19.0 torchaudio==2.4.0 pytorch-cuda=12.1 -c pytorch -c nvidia
pip install transformers datasets pyserini
conda install -c pytorch -c nvidia faiss-gpu=1.8.0
pip install uvicorn fastapi
```
## ğŸ’¡ Ø§Ù„ØªØ­Ø¶ÙŠØ±
***ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙÙ‡Ø±Ø³ ÙˆØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©***



```bash
python scripts/download.py --save_path $save_path
cat $save_path/part_* > $save_path/e5_Flat.index
gzip -d $save_path/wiki-18.jsonl.gz
```

***ØªÙ‡ÙŠØ¦Ø© RAG Ø§Ù„Ø¨Ø³ÙŠØ·Ø© Ù…Ø³Ø¨Ù‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨*** (Ø£Ùˆ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†Ø²ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù† Ù‡Ù†Ø§: [huggingface](https://huggingface.co/datasets/pat-jj/s3_processed_data))

```bash
# deploy retriever
bash scripts/deploy_retriever/retrieval_launch.sh # or scripts/deploy_retriever/retrieval_launch_mirage.sh for MedCorp corpus.
# deploy generator
bash generator_llms/host.sh # modify tensor-parallel-size to the number of GPUs you use
# run precompute
bash scripts/precompute.sh # this step will take a while, as it will precompute the naÃ¯ve RAG Cache for training
```
## ğŸ‹ï¸ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
***Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ© Ù…Ø®ØµØµØ© Ù„ØªØ¯Ø±ÙŠØ¨ S3***



```bash
# deploy retriever
bash scripts/deploy_retriever/retrieval_launch.sh 
# deploy generator
bash generator_llms/host.sh
# run training
bash scripts/train/train_s3.sh
```
## ğŸ” ØªÙ†ÙÙŠØ° Ø§Ù„Ø¨Ø­Ø«/Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹
***Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ© Ù…Ø®ØµØµØ© Ù„Ø¬Ù…Ø¹ Ø§Ù„Ø³ÙŠØ§Ù‚ Ù„Ù€ s3 / Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©***

**s3**


```bash
# deploy retriever
bash scripts/deploy_retriever/retrieval_launch.sh 
# run s3 inference
bash scripts/s3_inference/evaluate-8-3-3.sh
```
<details>
<summary>Ø®Ø·ÙˆØ· Ø§Ù„Ø£Ø³Ø§Ø³</summary>

**RAG**

```bash
bash scripts/deploy_retriever/retrieval_launch.sh # or retrieval_launch_bm25.sh # deploy retriever
bash scripts/baselines/rag.sh # run RAG 
```
**Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ‚**

```bash
bash retrieval_launch_bm25.sh # deploy BM25 Model
bash generator_llms/deepretrieval.sh # deploy DeepRetrieval Model
bash scripts/baselines/deepretrieval.sh # run DeepRetrieval Query Rewriting + Retrieval
```
**Ø¨Ø­Ø«-R1**

```bash
bash retrieval_launch.sh # deploy e5 retriever
bash scripts/baselines/search_r1.sh # run Search-R1
```
**Ø¢ÙŠ Ø¢Ø± ÙƒÙˆØª (IRCoT)**

```bash
bash retrieval_launch.sh # deploy e5 retriever
python scripts/baselines/ircot.py
```
**Ø¨Ø­Ø«-o1**

```bash
bash retrieval_launch.sh # deploy e5 retriever
bash scripts/baselines/search_o1.sh # run Search-o1
```
</details>


## ğŸ“ˆ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
***Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ© Ù…Ø®ØµØµØ© Ù„ØªÙ‚ÙŠÙŠÙ… s3 / Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©***



```bash
bash scripts/evaluation/run.sh
```

## Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ø£Ø¬ÙˆØ¨Ø©
### Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø®ØµØµØ©ØŸ
Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ±ØºØ¨ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± s3 Ø¹Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª/Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ù„Ù…Ø¹Ø±ÙØ© Ù…Ø§ ÙŠÙ„Ø²Ù…Ùƒ ÙØ¹Ù„Ù‡ Ù„Ø¨Ù†Ø§Ø¡ Ø®Ø· Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ: [commit 8420538](https://github.com/pat-jj/s3/commit/8420538836febbe59d5bcbe41187f16908c9c36c)

### Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ØŸ
ØªÙ…ÙƒÙ† Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ† Ø¨Ø§Ù„ÙØ¹Ù„ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†ØªØ§Ø¬ Ù†ØªØ§Ø¦Ø¬Ù†Ø§ Ø¨Ù†Ø¬Ø§Ø­. Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø£Ùˆ ÙˆØ§Ø¬Ù‡Øª Ù…Ø´ÙƒÙ„Ø§ØªØŒ Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ [ÙØªØ­ Ù‚Ø¶ÙŠØ©](https://github.com/pat-jj/s3/issues) â€” ÙŠØ³Ø¹Ø¯Ù†Ø§ ØªÙ‚Ø¯ÙŠÙ… Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø¹Ù…Ù„ÙŠØ© (Ø§Ù†Ø¸Ø± [Ù‡Ø°Ø§ Ø§Ù„Ù…Ø«Ø§Ù„](https://github.com/pat-jj/s3/issues/20)).

Ø¹Ù„Ù‰ Ø§Ù„Ø±ØºÙ… Ù…Ù† Ø£Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ù†ÙØ³Ùƒ Ø£Ù…Ø± Ø³Ù‡Ù„ â€” ÙˆÙ†ÙˆØµÙŠ ÙØ¹Ù„Ø§Ù‹ **Ø¨Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©**ØŒ Ù„Ø£Ù† Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ØºØ§Ù„Ø¨Ø§Ù‹ Ù…Ø§ ÙŠØ³ØªØºØ±Ù‚ ÙˆÙ‚ØªØ§Ù‹ Ø£Ø·ÙˆÙ„ Ø¨ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„ØªØ¯Ø±ÙŠØ¨ â€” ÙØ¥Ù†Ù†Ø§ Ù†ÙˆÙØ± Ø£ÙŠØ¶Ø§Ù‹ Ù†Ù‚Ø·Ø© Ù…Ø±Ø¬Ø¹ÙŠØ©: [s3-8-3-3-20steps](https://huggingface.co/pat-jj/s3-8-3-3-20steps)ØŒ ØªÙ… ØªØ¯Ø±ÙŠØ¨Ù‡Ø§ ÙÙŠ Ø­ÙˆØ§Ù„ÙŠ Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©.



## Ø§Ù„Ø´ÙƒØ± ÙˆØ§Ù„ØªÙ‚Ø¯ÙŠØ±
Ù†ÙˆØ¯ Ø£Ù† Ù†Ø´ÙƒØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØªØ§Ù„ÙŠØ©:
[verl](https://github.com/volcengine/verl)ØŒ [RAGEN](https://github.com/RAGEN-AI/RAGEN)ØŒ [Search-R1](https://github.com/PeterGriffinJin/Search-R1)ØŒ [DeepRetrieval](https://github.com/pat-jj/DeepRetrieval)ØŒ [PySerini](https://github.com/castorini/pySerini).
 

## Ø§Ù„Ø§Ù‚ØªØ¨Ø§Ø³
```bibtex
@article{jiang2025s3,
  title={s3: You Don't Need That Much Data to Train a Search Agent via RL},
  author={Jiang, Pengcheng and Xu, Xueqiang and Lin, Jiacheng and Xiao, Jinfeng and Wang, Zifeng and Sun, Jimeng and Han, Jiawei},
  journal={arXiv preprint arXiv:2505.14146},
  year={2025}
}
```
Ø´ÙƒØ±Ù‹Ø§ Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ùƒ Ø¨Ø¹Ù…Ù„Ù†Ø§!






---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-10-06

---