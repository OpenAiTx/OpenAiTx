# unused-task-warning
在使用依赖注入和 async-await 模式时，可能会遇到一个接口其方法返回 Task 的情况。如果该接口方法在同步方法中使用，很可能会错误地以“启动即忘”方式运行（这不会触发内置警告 CS4014）。在这种情况下，此分析器会生成警告。

两者都可以用作 Visual Studio 扩展，或者更好的是作为可从 NuGet 获取的项目分析器。

示例：

	using System.Threading.Tasks;

	namespace AsyncAwaitProblem
	{
		public interface ICallee
		{
			bool ProblemSolved { get; }
			Task SolveProblemAsync();
		}

		public class Callee : ICallee
		{
			public bool ProblemSolved { get; set; }

			public async Task SolveProblemAsync()
			{
				await Task.Delay(10);
				ProblemSolved = true;
			}
		}
		
		public class Caller
		{
			public bool DoCall()
			{
				ICallee xxx = new Callee();
	
				// 此分析器将在以下行发出警告
				xxx.SolveProblemAsync(); // 这很可能是一个不希望出现的启动即忘调用。
	
				return xxx.ProblemSolved; // 将返回 false —— 我们期望它返回 true
			}
		}
	}


请注意，该分析器当前仅检查已知的可等待类型（例如类型 `Task`、`ValueTask` 和 `ConfiguredTaskAwaitable`（使用 `ConfigureAwait` 方法时返回的类型））。如果返回了其他 ['Awaitable'](https://blogs.msdn.microsoft.com/pfxteam/2011/01/13/await-anything/) 类型，该分析器将不会发出警告。此问题可能会在未来版本中修复。

可从 NuGet 获取：https://www.nuget.org/packages/Lindhart.Analyser.MissingAwaitWarning/

可从 Visual Studio 市场获取：https://marketplace.visualstudio.com/items?itemName=Lindhart.missingAwaitWarning#overview

有关如何使用分析器的信息，请查看：https://docs.microsoft.com/en-us/visualstudio/code-quality/roslyn-analyzers-overview?view=vs-2019

## 更新日志

3.2.0 不再分析生成的代码文件（例如，包含 `<auto-generated>` 的文件现已被忽略）。

3.1.0 开始编写更新日志。将符号和源代码包含在包中。

---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2026-02-06

---