# ЁЯЦ╝я╕П HEIC рдЗрдореЗрдЬ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдЯреВрд▓реНрд╕

HEIC (рд╣рд╛рдИ рдПрдлрд┐рд╢рд┐рдПрдВрд╕реА рдЗрдореЗрдЬ рдХрдВрдЯреЗрдирд░) рдлрд╛рдЗрд▓реЛрдВ рдХреЗ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдкрд╛рдпрдерди рдЯреВрд▓реНрд╕ рдХрд╛ рд╕рдВрдЧреНрд░рд╣, рдЬрд┐рд╕рдореЗрдВ HDR рдХрдВрдЯреЗрдВрдЯ рдПрдХреНрд╕рдЯреНрд░реИрдХреНрд╢рди рдФрд░ EXR рдХрдиреНрд╡рд░реНрдЬрди рдкрд░ рд╡рд┐рд╢реЗрд╖ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

## ЁЯЫая╕П рдЯреВрд▓реНрд╕ рдХрд╛ рдЕрд╡рд▓реЛрдХрди

### 1. gain_map_extract.py
HEIC рдлрд╛рдЗрд▓реЛрдВ рд╕реЗ рд╕рднреА рдШрдЯрдХ рдирд┐рдХрд╛рд▓рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:
- рдмреЗрд╕ рдЗрдореЗрдЬреЗрдЬрд╝
- HDR рдЧреЗрди рдореИрдкреНрд╕
- рдбреЗрдкреНрде рдореИрдкреНрд╕
- рдкреВрд░реА рдореЗрдЯрд╛рдбреЗрдЯрд╛ (EXIF, XMP, ICC рдкреНрд░реЛрдлрд╛рдЗрд▓реНрд╕)

### 2. heic_to_exr.py
HEIC рдлрд╛рдЗрд▓реЛрдВ рдХреЛ OpenEXR рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рдХрдиреНрд╡рд░реНрдЯ рдХрд░рддрд╛ рд╣реИ:
- рдмреЗрд╕ рдЗрдореЗрдЬ рдФрд░ рдЧреЗрди рдореИрдк рдХреЛ HDR EXR рдореЗрдВ рдПрдкреНрдкрд▓ рдХреЗ рддрд░реАрдХреЗ рд╕реЗ рдорд┐рд▓рд╛рддрд╛ рд╣реИ
- рдкреВрд░реА рдбрд╛рдпрдирд╛рдорд┐рдХ рд░реЗрдВрдЬ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦрддрд╛ рд╣реИ
- рдЬрд╣рд╛рдВ рд╕рдВрднрд╡ рд╣реЛ, рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЛ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИ
- рдмреИрдЪ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХреЛ рд╕рдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИ
### 3. merge_to_exr.sh
рдмреИрдЪ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рд╢реЗрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ:
- HEIC рд╕реЗ EXR рд░реВрдкрд╛рдВрддрд░рдг рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рддрд╛ рд╣реИ
- рдХрдИ рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИ
- рдкреНрд░рдЧрддрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ
- рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИ

## ЁЯФз рд╕реНрдерд╛рдкрдирд╛

### рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ
- Python 3.8 рдпрд╛ рдЙрдЪреНрдЪрддрд░
- pip (Python рдкреИрдХреЗрдЬ рдкреНрд░рдмрдВрдзрдХ)
- Git (рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреНрд▓реЛрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП)

### macOS
```bash
# рдпрджрд┐ рдкрд╣рд▓реЗ рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдирд╣реАрдВ рд╣реИ рддреЛ Homebrew рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Python рдФрд░ OpenEXR рдирд┐рд░реНрднрд░рддрд╛рдПрдБ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ
brew install python3 openexr

# рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреНрд▓реЛрди рдХрд░реЗрдВ
git clone https://github.com/finnschi/heic-shenanigans.git
cd heic-shenanigans

# рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдмрдирд╛рдПрдВ рдФрд░ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ
python3 -m venv venv
source venv/bin/activate

# рдкрд╛рдпрдерди рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ
pip install -r requirements.txt
```

### рд▓рд┐рдирдХреНрд╕ (Ubuntu/Debian)
```bash
# рд╕рд┐рд╕реНрдЯрдо рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ
sudo apt-get update
sudo apt-get install python3 python3-pip python3-venv openexr libopenexr-dev

# рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреНрд▓реЛрди рдХрд░реЗрдВ
git clone https://github.com/finnschi/heic-shenanigans.git
cd heic-shenanigans

# рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдмрдирд╛рдПрдБ рдФрд░ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ
python3 -m venv venv
source venv/bin/activate

# Python рдирд┐рд░реНрднрд░рддрд╛рдПрдБ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ
pip install -r requirements.txt
```

### рд╡рд┐рдВрдбреЛрдЬрд╝
```powershell
# Python рдХреЛ https://www.python.org/downloads/ рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ
# Git рдХреЛ https://git-scm.com/download/win рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ

# рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреНрд▓реЛрди рдХрд░реЗрдВ
git clone https://github.com/finnschi/heic-shenanigans.git
cd heic-shenanigans

# рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдмрдирд╛рдПрдВ рдФрд░ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ
python -m venv venv
.\venv\Scripts\activate

# Python рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ
pip install -r requirements.txt
```

## ЁЯУЛ рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ
рд╕рднреА рдЖрд╡рд╢реНрдпрдХ Python рдкреИрдХреЗрдЬ requirements.txt рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рд╣реИрдВ:
- Pillow: рдЗрдореЗрдЬ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рд▓рд╛рдЗрдмреНрд░реЗрд░реА
- pillow-heif: HEIC рдлрд╛рдЗрд▓ рд╕рдкреЛрд░реНрдЯ
- numpy: рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рд╕рдВрдЪрд╛рд▓рди
- defusedxml: рд╕реБрд░рдХреНрд╖рд┐рдд XML рдкрд╛рд░реНрд╕рд┐рдВрдЧ

рд╕рд┐рд╕реНрдЯрдо рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ (рдкреИрдХреЗрдЬ рдореИрдиреЗрдЬрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓):
- OpenEXR рдФрд░ OpenImageIO (oiiotool) EXR рдлрд╛рдЗрд▓ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП

## ЁЯТ╗ рдЙрдкрдпреЛрдЧ
### рдЧреЗрди рдореИрдк рдПрдХреНрд╕рдЯреНрд░реИрдХреНрд╢рди
```bash
python gain_map_extract.py input.heic [--output-dir OUTPUT_DIR]
```

### HEIC рд╕реЗ EXR рд░реВрдкрд╛рдВрддрд░рдг
```bash
python heic_to_exr.py input.heic [--output-dir OUTPUT_DIR]
```

### рдмреИрдЪ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ
```bash
./merge_to_exr.sh input_directory output_directory
```

## ЁЯУБ рдЖрдЙрдЯрдкреБрдЯ рдлрд╛рдЗрд▓реЗрдВ

### gain_map_extract.py рдЖрдЙрдЯрдкреБрдЯ:
- рдмреЗрд╕ рдЗрдореЗрдЬ: `{filename}_base.tiff`
- рдЧреЗрди рдореИрдкреНрд╕: `{filename}_gain_map_{id}.tiff`
- рдбреЗрдкреНрде рдореИрдкреНрд╕: `{filename}_depth_{index}.tiff`
- рдореЗрдЯрд╛рдбреЗрдЯрд╛: `{filename}_metadata.json`
### heic_to_exr.py рдЖрдЙрдЯрдкреБрдЯ:
- HDR EXR рдлрд╝рд╛рдЗрд▓: `{filename}.exr`

## ЁЯФН рдЙрдиреНрдирдд рдЙрдкрдпреЛрдЧ

### рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╣реИрдВрдбрд▓рд┐рдВрдЧ
- рдмрд╛рдЗрдирд░реА рдбреЗрдЯрд╛ рдХреЛ base64 рдореЗрдВ рдПрдиреНрдХреЛрдб рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ
- ICC рдкреНрд░реЛрдлрд╛рдЗрд▓ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦреЗ рдЬрд╛рддреЗ рд╣реИрдВ
- EXIF рдбреЗрдЯрд╛ рдЬрд╣рд╛рдБ рд╕рдВрднрд╡ рд╣реЛ рд╕рдВрд░рдХреНрд╖рд┐рдд рд░рд╣рддрд╛ рд╣реИ

### HDR рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ
- рдЧреЗрди рдореИрдкреНрд╕ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕реНрдХреЗрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ
- рд▓реАрдирд┐рдпрд░ рдХрд▓рд░ рд╕реНрдкреЗрд╕ рдмрдирд╛рдП рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ
- EXR рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдкреВрд░реНрдг рдбрд╛рдпрдиреЗрдорд┐рдХ рд░реЗрдВрдЬ рд╕рдВрд░рдХреНрд╖рд┐рдд рд░рд╣рддреА рд╣реИ

## тЪая╕П рдЬреНрдЮрд╛рдд рд╕реАрдорд╛рдПрдБ
- рдХреБрдЫ HEIC рд╡реЗрд░рд┐рдПрдВрдЯреНрд╕ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ
- рдбреЗрдкреНрде рдореИрдк рдПрдХреНрд╕рдЯреНрд░реИрдХреНрд╢рди рдХреЗрд╡рд▓ рд╕рдорд░реНрдерд┐рдд рдбрд┐рд╡рд╛рдЗрд╕реЛрдВ рддрдХ рд╣реА рд╕реАрдорд┐рдд рд╣реИ
- Windows рдореЗрдВ OpenEXR рд╕рдкреЛрд░реНрдЯ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ
## ЁЯдЭ рдпреЛрдЧрджрд╛рди
рдпреЛрдЧрджрд╛рди рдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ! рдХреГрдкрдпрд╛ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рдПрдХ рдкреБрд▓ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред



---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-07-13

---