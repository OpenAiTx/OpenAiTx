[![svelte-preprocess-react](https://raw.githubusercontent.com/bfanger/svelte-preprocess-react/main/./static/svelte-preprocess-react.svg)](https://www.npmjs.com/package/svelte-preprocess-react)

# Svelte 预处理 React

在 Svelte 应用中无缝使用 React 组件

支持：

- 嵌套（Slot 和 Children）
- 上下文
- 服务端渲染（SSR）
- Hooks（[useStore](https://raw.githubusercontent.com/bfanger/svelte-preprocess-react/main/./docs/useStore.md) 和 [hooks](https://raw.githubusercontent.com/bfanger/svelte-preprocess-react/main/./docs/hooks.md)）

该项目曾在 [Svelte London - 2022 年 11 月聚会](https://www.youtube.com/live/DXQl1G54DJY?feature=share&t=2569) 中展示

> “拥抱、扩展并取代”

此预处理器旨在作为使用第三方 React 组件或迁移现有 React 代码库的解决方案。

## 在 Svelte 组件中使用 React

在 Svelte 模板中，在组件名称前加上 `react.` 前缀。

不是写 `<Button>`，而是写 `<react.Button>`

使用 React 生态系统中的库，例如 react-youtube：

```svelte
<script>
  import YouTube from "react-youtube";

  const react = sveltify({ YouTube }); // Optional step, but adds type-safety
</script>

<react.YouTube videoId="AdNJ3fydeao" />
```
上面的代码片段将生成：


```svelte
<!-- Generated by svelte-preprocess-react -->
<script>
  import ReactDOM from "react-dom/client";
  import { createPortal } from "react-dom";
  import { renderToString } from "react-dom/server";
  import { sveltify } from "svelte-preprocess-react";
  import YouTube from "react-youtube";

  const react = sveltify(
    { YouTube },
    { createPortal, ReactDOM, renderToString },
  );
</script>

<react.YouTube videoId="AdNJ3fydeao" />
```

## 设置 / 安装

```sh
npm install --save-dev svelte-preprocess-react react react-dom
```

在你的 svelte.config.js 中添加 `preprocessReact`：

```js
// svelte.config.js
import preprocessReact from "svelte-preprocess-react/preprocessReact";

export default {
  preprocess: preprocessReact(),
};
```

当使用其他处理器如 [@sveltejs/vite-plugin-svelte](https://github.com/sveltejs/vite-plugin-svelte/blob/main/docs/preprocess.md) 或 [svelte-preprocess](https://github.com/sveltejs/svelte-preprocess) 时，将 preprocessReact 预处理器作为最后一个处理器添加：

```js
// svelte.config.js
import { vitePreprocess } from "@sveltejs/vite-plugin-svelte";
import preprocessReact from "svelte-preprocess-react/preprocessReact";

export default {
  preprocess: [vitePreprocess(), preprocessReact()],
};
```

## 在 React 组件中使用 Svelte

一旦你将 React 组件转换为 Svelte，通常会想删除该 React 组件，但如果其他 React 组件依赖于该组件，你可以使用 `reactify` 将新的 Svelte 组件作为 React 组件使用。

```jsx
import { reactify } from "svelte-preprocess-react";
import Button from "../components/Button.svelte";

const svelte = reactify({ Button });

function MyComponent() {
  return (
    <svelte.Button onClick={() => console.log("clicked")}>
      Click me
    </svelte.Button>
  );
}
```
## 使用多个框架是不明智的

使用多个前端框架会增加负担，无论是在用户体验还是开发者体验上。

- 增加下载体积
- 变慢（每个框架边界都会增加开销）
- 上下文切换，记住 Svelte 和 React 的细节会减缓开发速度

使用第三方 React 组件时，注意寻找 Svelte 替代品，或发布你自己的组件。

作为迁移工具使用时（可用于从 React 迁移或迁移到 React），
目标应是停止编写新的 React 组件，并将现有 React 组件转换为 Svelte 组件。
所有组件转换完成后，应卸载该预处理器。

# 更多信息

- [reactify()](https://raw.githubusercontent.com/bfanger/svelte-preprocess-react/main/./docs/reactify.md) 将 Svelte 组件转换为 React 组件
- [hooks()](https://raw.githubusercontent.com/bfanger/svelte-preprocess-react/main/./docs/hooks.md) 在 Svelte 组件中使用 React hooks
- [useStore](https://raw.githubusercontent.com/bfanger/svelte-preprocess-react/main/./docs/useStore.md) 在 React 组件中使用 Svelte Store
- [注意事项](https://raw.githubusercontent.com/bfanger/svelte-preprocess-react/main/./docs/caveats.md) 限制和解决方法
- [react-router](https://raw.githubusercontent.com/bfanger/svelte-preprocess-react/main/./docs/react-router.md) 从 react-router 迁移到 SvelteKit
- [架构](https://raw.githubusercontent.com/bfanger/svelte-preprocess-react/main/./docs/architecture.md) svelte-preprocess-react 的 API 设计原则和系统架构



---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-09-28

---