## テレグラム用アンチスパム

元々はVastrik.Clubのチャットでスパマーの問題を解決するために開発されましたが、他のフォークのチャットや単に大規模なチャットでも使用可能です。

### 動作原理
- ボットが連携されたクラブのユーザーは自動的に信頼済みリストに追加されます
- 「ユーザーがチャットに参加した」イベントで簡単なキャプチャが表示されます
- ユーザーがすでに信頼済みならすべてのチェックをスキップします
- ユーザーが既知のスパマーリストにある場合は拒否します
- メッセージに絵文字が多すぎる場合は拒否します
- メッセージにロシア語に見えるが英字が混ざっている単語がある場合は拒否します。この点は主にロシア語圏のチャット向けに調整されており、キリル文字で書かれた他言語の正常な単語に誤反応する可能性がありますが、現在知られているケースはすべてテストに含まれています
- メッセージに「ネットで稼ぐ」などのストップワードが含まれている場合は拒否します
- その後、メッセージから絵文字、句読点、ダイアクリティカルマークを除去し、MLに渡します。MLがスパムと判断した場合は拒否します
- ユーザーが複数の正常なメッセージを送信した場合、信頼済みに追加されます。スパマーは滅多に「信頼を得る」ことがなく、通常は最初か2回目のメッセージで露呈します
- ボットは自動的にメッセージのみ削除し、ユーザーのBANは誤検知の被害を減らすため管理画面から手動で行います
- - ブラックリストの場合は即BANされますが、この機能は無効化可能です
- チャット内でボット以外が誰かをBANした場合、管理画面に通知が届き、スパムを見逃した可能性があるためデータセットに追加することが推奨されます

### 管理コマンド
すべてのコマンドは他のメッセージへのリプライで呼び出します
- /spam - メッセージをスパムデータセットに追加します
- /ham - メッセージを非スパムデータセットに追加します
- /check - メッセージを全チェックにかけます

### 設定
チャット管理グループを作成し、IDを記録します。
環境変数:
- DOORMAN_BOT_API: テレグラムボットのトークン。必須
- DOORMAN_ADMIN_CHAT: 管理チャットのID。必須
- DOORMAN_CLUB_SERVICE_TOKEN: クラブ用サービストークン。https://vas3k.club/apps/ で作成します。設定しない場合はクラブのユーザーの自動承認がスキップされます
- DOORMAN_CLUB_URL: クラブフォークのベースURL。例 https://rationalanswer.club/
- DOORMAN_BLACKLIST_AUTOBAN_DISABLE: true または 1 に設定すると、ボットが即座に（クラブ外、未承認、ブラックリストユーザーを）BANしなくなります
- DOORMAN_LOW_CONFIDENCE_HAM_ENABLE: true または 1 に設定すると、低信頼度の非スパムメッセージを管理画面に送信します。スパマーがMLの強度を試すチャットに有用です
- DOORMAN_CHANNELS_AUTOBAN_DISABLE: true または 1 に設定すると、現在のグループに紐付いていないチャンネルのメッセージをボットがBANしなくなります
- DOORMAN_APPROVE_BUTTON: true または 1 に設定すると、削除されたメッセージに「これは知り合い、常連です」オプションが追加されます
- DOORMAN_LOOKALIKE_AUTOBAN_DISABLE: true または 1 に設定すると、ロシア語に似せた単語を含むメッセージをボットがBANしなくなります
- DOORMAN_BUTTON_AUTOBAN_DISABLE: true または 1 に設定すると、ボタンを含むメッセージをボットがBANしなくなります
- DOORMAN_HIGH_CONFIDENCE_AUTOBAN_DISABLE: true または 1 に設定すると、ML分類器がスパムと高確信しているメッセージをボットがBANしなくなります
- DOORMAN_CHANNEL_AUTOBAN_EXCLUSION: カンマ区切りでチャンネルBANを除外するグループリスト

#### ありがとう
- スパマー対策とバンリスト用APIのために https://lols.bot/
- いくつかのアイデアとデータセットの4分の3のために https://github.com/umputun/tg-spam/

### 翻訳について
このボットのすべてのテキストを他言語に翻訳するという大仕事を引き受ける場合は、PRを作成する前にまずご連絡ください。



---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-10-02

---