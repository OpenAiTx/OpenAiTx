<center>
  <h1>ChinaTravel: B·ªô ti√™u chu·∫©n th·ª±c t·∫ø cho T√°c nh√¢n Ng√¥n ng·ªØ trong L·∫≠p k·∫ø ho·∫°ch Du l·ªãch Trung Qu·ªëc
</h1>
</center>

M√£ ngu·ªìn ch√≠nh th·ª©c cho b√†i b√°o "ChinaTravel: B·ªô ti√™u chu·∫©n th·ª±c t·∫ø cho T√°c nh√¢n Ng√¥n ng·ªØ trong L·∫≠p k·∫ø ho·∫°ch Du l·ªãch Trung Qu·ªëc".

<!-- | [Trang web](https://www.lamda.nju.edu.cn/shaojj/chinatravel/) | [B√†i b√°o](https://arxiv.org/abs/2412.13682) | [B·ªô d·ªØ li·ªáu (Huggingface)](https://huggingface.co/datasets/LAMDA-NeSy/ChinaTravel)| -->

[![Trang web](https://img.shields.io/badge/Webpage-Visit-blue)](https://www.lamda.nju.edu.cn/shaojj/chinatravel/)
[![B√†i b√°o](https://img.shields.io/badge/Paper-View-red)](https://arxiv.org/abs/2412.13682)
[![B·ªô d·ªØ li·ªáu (Huggingface)](https://img.shields.io/badge/Dataset-Huggingface-yellow)](https://huggingface.co/datasets/LAMDA-NeSy/ChinaTravel)
[![Cu·ªôc thi (TPC@IJCAI2025)](https://img.shields.io/badge/IJCAI%20Competition-TPC@IJCAI2025-green)](https://chinatravel-competition.github.io/IJCAI2025/)
[![Cu·ªôc thi (TPC@AIC2025)](https://img.shields.io/badge/AIC%20Competition-TPC@AIC2025-green)](TPC@AIC2025/readme.md)


<!-- 
![T·ªïng quan](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/images/overview.png) -->

## üèÜ Th·ª≠ th√°ch L·∫≠p k·∫ø ho·∫°ch Du l·ªãch IJCAI 2025 (TPC@IJCAI)

Ch√∫ng t√¥i t·ª± h√†o th√¥ng b√°o r·∫±ng ChinaTravel ƒë√£ ƒë∆∞·ª£c ch·ªçn l√† b·ªô ti√™u chu·∫©n ch√≠nh th·ª©c cho **Th·ª≠ th√°ch L·∫≠p k·∫ø ho·∫°ch Du l·ªãch (TPC) @ IJCAI 2025**!

**Trang web Cu·ªôc thi Ch√≠nh th·ª©c**:
[https://chinatravel-competition.github.io/IJCAI2025/](https://chinatravel-competition.github.io/IJCAI2025/)

Ch√∫ng t√¥i m·ªùi c√°c th√≠ sinh ph√°t tri·ªÉn c√°c t√°c nh√¢n m·ªõi c√≥ th·ªÉ gi·∫£i quy·∫øt c√°c t√¨nh hu·ªëng l·∫≠p k·∫ø ho·∫°ch du l·ªãch th·ª±c t·∫ø v·ªõi c√°c r√†ng bu·ªôc ph·ª©c t·∫°p. Cu·ªôc thi n√†y s·∫Ω tr√¨nh di·ªÖn c√°c ph∆∞∆°ng ph√°p nghi√™n c·ª©u t√°c nh√¢n ng√¥n ng·ªØ ti√™n ti·∫øn nh·∫•t.

## üìù Nh·∫≠t k√Ω thay ƒë·ªïi

### 2025.09
1. ƒêƒÉng t·∫£i gi·∫£i ph√°p v√¥ ƒë·ªãch c·ªßa TPC@IJCAI2025 ·ªü nh√°nh DSL. C·∫£m ∆°n [@evergreenee](https://github.com/evergreenee) v√¨ nh·ªØng ƒë√≥ng g√≥p c·ªßa h·ªç.  


### 2025.06

1. S·ª≠a l·ªói thu th·∫≠p trong m√£ ƒë√°nh gi√° ki·∫øn th·ª©c th∆∞·ªùng th·ª©c.
2. S·ª≠a quy tr√¨nh c·ªßa t√°c nh√¢n thu·∫ßn th·∫ßn kinh.
3. S·ª≠a l·ªói load_datasets t·ª´ huggingface.
4. C·∫≠p nh·∫≠t x·ª≠ l√Ω ngo·∫°i l·ªá khi x√°c minh c√∫ ph√°p.


### 2025.05

1. C·∫≠p nh·∫≠t nh·∫≠t k√Ω cho phi√™n b·∫£n m·ªõi nh·∫•t.
2. Cung c·∫•p m√£ ƒë√°nh gi√° cho TPC.

### 2025.04

1. Th√™m b·ªô t·∫£i d·ªØ li·ªáu c·ª•c b·ªô. Ng∆∞·ªùi d√πng hi·ªán c√≥ th·ªÉ t·∫£i c√°c truy v·∫•n t√πy ch·ªânh t·∫°i ch·ªó. Khi ch·ªâ ƒë·ªãnh gi√° tr·ªã splits_name kh√¥ng m·∫∑c ƒë·ªãnh (v√≠ d·ª•: "abc") cho "run_exp.py", h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông t·∫£i c√°c t·ªáp t∆∞∆°ng ·ª©ng t·ª´ evaluation/default_splits/abc.txt, trong ƒë√≥ t·ªáp TXT ch·ª©a t√™n t·ªáp truy v·∫•n m·ª•c ti√™u.
2. Ph√¢n lo·∫°i r√†ng bu·ªôc chi ti·∫øt. Xem t√†i li·ªáu chi ti·∫øt t·∫°i [Evaluation README](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/chinatravel/symbol_verification/readme.md)
3. Gi·ªõi thi·ªáu ph∆∞∆°ng ph√°p LLM-modulo c∆° b·∫£n
   Tri·ªÉn khai quy tr√¨nh LLM-modulo v·ªõi b·ªô x√°c minh bi·ªÉu t∆∞·ª£ng chu·∫©n.
   D·ª±a tr√™n ph∆∞∆°ng ph√°p t·ª´:
   B√†i b√°o: Robust Planning with Compound LLM Architectures: An LLM-Modulo Approach
   M√£ ngu·ªìn: https://github.com/Atharva-Gundawar/LLM-Modulo-prompts
4. H·ªó tr·ª£ suy lu·∫≠n LLM c·ª•c b·ªô v·ªõi Qwen3-8B/4B.

## üöÄ B·∫Øt ƒë·∫ßu nhanh

### ‚öôÔ∏è C√†i ƒë·∫∑t

1. T·∫°o m√¥i tr∆∞·ªùng conda v√† c√†i ƒë·∫∑t c√°c ph·ª• thu·ªôc:

```bash
conda create -n chinatravel python=3.9  
conda activate chinatravel  
pip install -r requirements.txt  
```

2. T·∫£i xu·ªëng c∆° s·ªü d·ªØ li·ªáu v√† gi·∫£i n√©n v√†o th∆∞ m·ª•c "chinatravel/environment/"

Li√™n k·∫øt t·∫£i xu·ªëng: [Google Drive](https://drive.google.com/drive/folders/1bJ7jA5cfExO_NKxKfi9qgcxEbkYeSdAU), [NJU Drive](https://box.nju.edu.cn/d/dd83e5a4a9e242ed8eb4/)

3. T·∫£i xu·ªëng c√°c m√¥ h√¨nh LLM m√£ ngu·ªìn m·ªü (t√πy ch·ªçn).

```bash
bash download_llm.sh
```

4. T·∫£i xu·ªëng c√°c b·ªô t√°ch t·ª´.

```bash
wget https://cdn.deepseek.com/api-docs/deepseek_v3_tokenizer.zip -P chinatravel/local_llm/
unzip chinatravel/local_llm/deepseek_v3_tokenizer.zip -d chinatravel/local_llm/
```

### ‚ñ∂Ô∏è Ch·∫°y

Ch√∫ng t√¥i h·ªó tr·ª£ deepseek (API ch√≠nh th·ª©c t·ª´ deepseek), gpt-4o (chatgpt-4o-latest), glm4-plus, v√† suy lu·∫≠n c·ª•c b·ªô v·ªõi Qwen (Qwen3-8B), llama, mistral (Mistral-7B-Instruct-v0.3), v.v.

```bash
export OPENAI_API_KEY=""

python run_exp.py --splits easy --agent LLMNeSy --llm deepseek --oracle_translation
python run_exp.py --splits medium --agent LLMNeSy --llm deepseek --oracle_translation
python run_exp.py --splits human --agent LLMNeSy --llm deepseek --oracle_translation

python run_exp.py --splits human --agent LLMNeSy --llm Qwen3-8B --oracle_translation


python run_exp.py --splits human --agent LLMNeSy --llm deepseek 
python run_exp.py --splits human --agent LLMNeSy --llm Qwen3-8B 


python run_exp.py --splits human --agent LLM-modulo --llm deepseek --refine_steps 10 --oracle_translation
python run_exp.py --splits human --agent LLM-modulo --llm Qwen3-8B --refine_steps 10 --oracle_translation
```

**L∆∞u √Ω**:

- C·ªù `--oracle_translation` cho ph√©p truy c·∫≠p v√†o d·ªØ li·ªáu th·ª±c t·∫ø ƒë√£ ƒë∆∞·ª£c ch√∫ th√≠ch bao g·ªìm:

  - `hard_logic_py`: M√£ DSL x√°c minh c√≥ th·ªÉ th·ª±c thi
  - `hard_logic_nl`: M√¥ t·∫£ c√°c r√†ng bu·ªôc t∆∞∆°ng ·ª©ng
  - C·∫•u tr√∫c ch√∫ th√≠ch v√≠ d·ª•:

  ```python
  {
    "hard_logic_py": [
      "
      total_cost=0 
      for activity in allactivities(plan):
          total_cost+=activity_cost(activity)
              total_cost += innercity_transport_cost(activity_transports(activity))
      result=(total_cost<=1000)
      ", 
      "
      innercity_transport_set=set()
      for activity in allactivities(plan):
          if activity_transports(activity)!=[]:              
              innercity_transport_set.add(innercity_transport_type(activity_transports(activity)))
      result=(innercity_transport_set<={'taxi'})
      "
    ], 
    "hard_logic_nl": ["ÊÄªÈ¢ÑÁÆó‰∏∫1800ÂÖÉ", "Â∏ÇÂÜÖ‰∫§ÈÄöÈÄâÊã©taxi"], 
  }
  ```
- Ph∆∞∆°ng ph√°p LLM-modulo **y√™u c·∫ßu** ch·∫ø ƒë·ªô oracle_translation cho qu√° tr√¨nh tinh ch·ªânh bi·ªÉu t∆∞·ª£ng c·ªßa n√≥

### üìä ƒê√°nh gi√°

```bash
python eval_exp.py --splits human --method LLMNeSy_deepseek_oracletranslation
python eval_exp.py --splits human --method LLMNeSy_deepseek
python eval_exp.py --splits human --method LLM-modulo_deepseek_10steps_oracletranslation
python eval_exp.py --splits human --method LLM-modulo_Qwen3-8B_10steps_oracletranslation

```

Trong TPC@IJCAI2025, m√£ ƒë√°nh gi√° ƒë∆∞·ª£c cung c·∫•p trong t·ªáp `eval_tpc.py`. B·∫°n c√≥ th·ªÉ ch·∫°y m√£ ƒë√°nh gi√° nh∆∞ sau:

```bash
python eval_tpc.py --splits tpc_phase1 --method YOUR_METHOD_NAME
```

## üìö T√†i li·ªáu

[M√¥i tr∆∞·ªùng](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/chinatravel/environment/readme.md)
[R√†ng bu·ªôc](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/chinatravel/symbol_verification/readme.md)

## üõ†Ô∏è Ph√°t tri·ªÉn n√¢ng cao

### 1. Ph√°t tri·ªÉn thu·∫≠t to√°n Agent ri√™ng c·ªßa b·∫°n

ƒê·ªÉ ph√°t tri·ªÉn thu·∫≠t to√°n agent c·ªßa ri√™ng b·∫°n, b·∫°n c·∫ßn k·∫ø th·ª´a l·ªõp `BaseAgent` t·ª´ `chinatravel/agent/base.py` v√† th√™m logic cho thu·∫≠t to√°n c·ªßa m√¨nh v√†o h√†m `init_agent` trong `chinatravel/agent/load_model.py`. Ch√∫ng t√¥i cung c·∫•p m·ªôt v√≠ d·ª• agent tr·ªëng c√≥ t√™n l√† `TPCAgent`.

C√°c b∆∞·ªõc:

- **K·∫ø th·ª´a l·ªõp `BaseAgent`**: T·∫°o m·ªôt file Python m·ªõi trong th∆∞ m·ª•c `chinatravel/agent` v√† ƒë·ªãnh nghƒ©a l·ªõp agent c·ªßa ri√™ng b·∫°n, k·∫ø th·ª´a t·ª´ `BaseAgent`.

```python:chinatravel/agent/your_agent.py
from .base import BaseAgent

class YourAgent(BaseAgent):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        # Initialization logic

    def act(self, observation):
        # Implement the decision - making logic of the agent
        pass
```

- **Th√™m m√£ v√†o h√†m init_agent**: M·ªü t·ªáp chinatravel/agent/load_model.py v√† th√™m h·ªó tr·ª£ cho t√°c nh√¢n m·ªõi c·ªßa b·∫°n trong h√†m init_agent.

```python:
def init_agent(kwargs):
    # ... existing code ...
    elif kwargs["method"] == "YourMethodName":
        agent = YourAgent(
            **kwargs
        )
    # ... existing code ...
    return agent
```

### 2. Ph√°t tri·ªÉn LLM c·ª•c b·ªô c·ªßa ri√™ng b·∫°n

ƒê·ªÉ ph√°t tri·ªÉn m√¥ h√¨nh ng√¥n ng·ªØ l·ªõn (LLM) c·ª•c b·ªô c·ªßa ri√™ng b·∫°n, b·∫°n c·∫ßn k·∫ø th·ª´a l·ªõp AbstractLLM t·ª´ chinatravel/agent/llms.py v√† th√™m m√£ suy lu·∫≠n LLM c·ª•c b·ªô t∆∞∆°ng ·ª©ng v√†o llms.py. Ch√∫ng t√¥i cung c·∫•p m·ªôt v√≠ d·ª• LLM tr·ªëng c√≥ t√™n TPCLLM.
C√°c b∆∞·ªõc th·ª±c hi·ªán:

- **K·∫ø th·ª´a l·ªõp AbstractLLM**: ƒê·ªãnh nghƒ©a l·ªõp LLM c·ªßa ri√™ng b·∫°n trong t·ªáp chinatravel/agent/llms.py, k·∫ø th·ª´a t·ª´ AbstractLLM.

```python
class YourLLM(AbstractLLM):
    def __init__(self):
        super().__init__()
        # Initialization logic
        self.name = "YourLLMName"

    def _get_response(self, messages, one_line, json_mode):
        # Implement the response logic of the LLM
        response = "Your LLM response"
        if json_mode:
            # Handle JSON mode
            pass
        elif one_line:
            # Handle one - line mode
            response = response.split("\n")[0]
        return response
```

- **Th√™m m√£ v√†o h√†m init_agent**: M·ªü t·ªáp chinatravel/agent/load_model.py v√† th√™m h·ªó tr·ª£ cho llm m·ªõi c·ªßa b·∫°n trong h√†m init_llm.

```python:
def init_llm(kwargs):
    # ... existing code ...
    elif llm_name == "glm4-plus":
        llm = YourLLM()
    # ... existing code ...
    return llm
```

### 3. Ch·∫°y M√£ c·ªßa B·∫°n B·∫±ng C√°c Script Th√≠ Nghi·ªám

Sau khi ho√†n th√†nh ph√°t tri·ªÉn ·ªü tr√™n, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c script th√≠ nghi·ªám ƒë·ªÉ ch·∫°y m√£ c·ªßa m√¨nh.

V√≠ d·ª• v·ªÅ c√°ch ch·∫°y:

```bash
python run_tpc.py --splits easy --agent TPCAgent --llm TPCLLM
python run_exp.py --splits easy --agent YourMethodName --llm YourLLMName
```

K·∫øt qu·∫£ s·∫Ω ƒë∆∞·ª£c l∆∞u trong th∆∞ m·ª•c `results/YourMethodName_YourLLMName_xxx`, v√≠ d·ª•: `results/TPCAgent_TPCLLM`.

## ‚úâÔ∏è Li√™n h·ªá

N·∫øu b·∫°n g·∫∑p b·∫•t k·ª≥ v·∫•n ƒë·ªÅ n√†o, vui l√≤ng li√™n h·ªá [Thi·ªáu Gi·ªõi K√¨nh](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/shaojj@lamda.nju.edu.cn), [Tr∆∞∆°ng B√° VƒÉn](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/221900200@smail.nju.edu.cn), [D∆∞∆°ng Ti√™u VƒÉn](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/yangxw@lamda.nju.edu.cn).

## üìå Tr√≠ch d·∫´n

N·∫øu b√†i b√°o ho·∫∑c c√°c t√†i nguy√™n li√™n quan c·ªßa ch√∫ng t√¥i c√≥ gi√° tr·ªã ƒë·ªëi v·ªõi nghi√™n c·ª©u c·ªßa b·∫°n, xin vui l√≤ng tr√≠ch d·∫´n.

```
@misc{shao2024chinatravelrealworldbenchmarklanguage,
      title={ChinaTravel: A Real-World Benchmark for Language Agents in Chinese Travel Planning}, 
      author={Jie-Jing Shao and Xiao-Wen Yang and Bo-Wen Zhang and Baizhi Chen and Wen-Da Wei and Guohao Cai and Zhenhua Dong and Lan-Zhe Guo and Yu-feng Li},
      year={2024},
      eprint={2412.13682},
      archivePrefix={arXiv},
      primaryClass={cs.AI},
      url={https://arxiv.org/abs/2412.13682}, 
}
```
[English](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=en) | [ÁÆÄ‰Ωì‰∏≠Êñá](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=zh-CN) | [ÁπÅÈ´î‰∏≠Êñá](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=zh-TW) | [Êó•Êú¨Ë™û](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=ja) | [ÌïúÍµ≠Ïñ¥](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=ko) | [‡§π‡§ø‡§®‡•ç‡§¶‡•Ä](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=hi) | [‡πÑ‡∏ó‡∏¢](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=th) | [Fran√ßais](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=fr) | [Deutsch](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=de) | [Espa√±ol](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=es) | [Italiano](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=it) | [–†—É—Å—Å–∫–∏–π](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=ru) | [Portugu√™s](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=pt) | [Nederlands](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=nl) | [Polski](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=pl) | [ÿßŸÑÿπÿ±ÿ®Ÿäÿ©](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=ar) | [ŸÅÿßÿ±ÿ≥€å](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=fa) | [T√ºrk√ße](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=tr) | [Ti·∫øng Vi·ªát](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=vi) | [Bahasa Indonesia](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=id) | [‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=as)


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-10-11

---