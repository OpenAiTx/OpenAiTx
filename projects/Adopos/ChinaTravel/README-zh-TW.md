<center>
  <h1>ChinaTravelï¼šä¸­æ–‡æ—…éŠè¦åŠƒèªè¨€ä»£ç†ä¹‹çœŸå¯¦ä¸–ç•ŒåŸºæº–è³‡æ–™é›†
</h1>
</center>

æœ¬æ–‡ç‚ºè«–æ–‡ "ChinaTravel: A Real-World Benchmark for Language Agents in Chinese Travel Planning" çš„å®˜æ–¹ä»£ç¢¼åº«ã€‚

<!-- | [ç¶²é ](https://www.lamda.nju.edu.cn/shaojj/chinatravel/) | [è«–æ–‡](https://arxiv.org/abs/2412.13682) | [è³‡æ–™é›†(Huggingface)](https://huggingface.co/datasets/LAMDA-NeSy/ChinaTravel)| -->

[![ç¶²é ](https://img.shields.io/badge/Webpage-Visit-blue)](https://www.lamda.nju.edu.cn/shaojj/chinatravel/)
[![è«–æ–‡](https://img.shields.io/badge/Paper-View-red)](https://arxiv.org/abs/2412.13682)
[![è³‡æ–™é›†(Huggingface)](https://img.shields.io/badge/Dataset-Huggingface-yellow)](https://huggingface.co/datasets/LAMDA-NeSy/ChinaTravel)
[![ç«¶è³½(TPC@IJCAI2025)](https://img.shields.io/badge/IJCAI%20Competition-TPC@IJCAI2025-green)](https://chinatravel-competition.github.io/IJCAI2025/)
[![ç«¶è³½(TPC@AIC2025)](https://img.shields.io/badge/AIC%20Competition-TPC@AIC2025-green)](TPC@AIC2025/readme.md)


<!-- 
![ç¸½è¦½](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/images/overview.png) -->

## ğŸ† IJCAI 2025 æ—…éŠè¦åŠƒæŒ‘æˆ°è³½ (TPC@IJCAI)

æˆ‘å€‘å¾ˆæ¦®å¹¸å®£ä½ˆ ChinaTravel è¢«é¸ç‚º **IJCAI 2025 æ—…éŠè¦åŠƒæŒ‘æˆ°è³½ (TPC) å®˜æ–¹åŸºæº–è³‡æ–™é›†**ï¼

**å®˜æ–¹ç«¶è³½ç¶²ç«™**ï¼š
[https://chinatravel-competition.github.io/IJCAI2025/](https://chinatravel-competition.github.io/IJCAI2025/)

æ­¡è¿åƒè³½è€…é–‹ç™¼èƒ½åœ¨è¤‡é›œç´„æŸä¸‹è™•ç†çœŸå¯¦ä¸–ç•Œæ—…éŠè¦åŠƒæƒ…å¢ƒçš„æ–°å‹ä»£ç†ã€‚æ­¤æ¬¡ç«¶è³½å°‡å±•ç¾èªè¨€ä»£ç†é ˜åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœã€‚

## ğŸ“ æ›´æ–°æ—¥èªŒ

### 2025.09
1. ä¸Šå‚³ TPC@IJCAI2025 DSL è³½é“å† è»æ–¹æ¡ˆï¼Œæ„Ÿè¬ [@evergreenee](https://github.com/evergreenee) çš„è²¢ç»ã€‚  


### 2025.06

1. ä¿®æ­£å¸¸è­˜è©•ä¼°ä»£ç¢¼ä¸­çš„éŒ¯èª¤æ”¶é›†ã€‚
2. ä¿®æ­£ç´”ç¥ç¶“ä»£ç†çš„æµç¨‹ã€‚
3. ä¿®æ­£å¾ huggingface åŠ è¼‰è³‡æ–™é›†ã€‚
4. æ›´æ–°èªæ³•é©—è­‰ä¸­çš„ç•°å¸¸è™•ç†ã€‚


### 2025.05

1. æœ€æ–°ç‰ˆæœ¬çš„æ›´æ–°æ—¥èªŒã€‚
2. æä¾› TPC çš„è©•ä¼°ç¨‹å¼ç¢¼ã€‚

### 2025.04

1. æ–°å¢æœ¬åœ°è³‡æ–™è¼‰å…¥å™¨ã€‚ä½¿ç”¨è€…ç¾åœ¨å¯åœ¨æœ¬åœ°è¼‰å…¥è‡ªè¨‚æŸ¥è©¢ã€‚ç•¶åœ¨ "run_exp.py" æŒ‡å®šéé è¨­ splits_name å€¼ï¼ˆå¦‚ "abc"ï¼‰æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•å¾ evaluation/default_splits/abc.txt è¼‰å…¥å°æ‡‰æª”æ¡ˆï¼Œå…¶ä¸­ TXT æª”åŒ…å«ç›®æ¨™æŸ¥è©¢æª”åã€‚
2. è©³ç´°ç´„æŸåˆ†é¡ã€‚è«‹åƒé–± [Evaluation README](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/chinatravel/symbol_verification/readme.md) çš„è©³ç´°æ–‡ä»¶ã€‚
3. å¼•å…¥ LLM-modulo åŸºç·š
   ä»¥çœŸå¯¦ç¬¦è™Ÿé©—è­‰å™¨å¯¦ç¾ LLM-modulo æµç¨‹ã€‚
   æ–¹æ³•åƒè€ƒï¼š
   è«–æ–‡ï¼šRobust Planning with Compound LLM Architectures: An LLM-Modulo Approach
   åŸå§‹ç¢¼ï¼š https://github.com/Atharva-Gundawar/LLM-Modulo-prompts
4. æ”¯æ´ Qwen3-8B/4B æœ¬åœ° LLM æ¨è«–ã€‚

## ğŸš€ å¿«é€Ÿé–‹å§‹

### âš™ï¸ ç’°å¢ƒè¨­ç½®

1. å»ºç«‹ conda ç’°å¢ƒä¸¦å®‰è£ä¾è³´ï¼š

```bash
conda create -n chinatravel python=3.9  
conda activate chinatravel  
pip install -r requirements.txt  
```

2. ä¸‹è¼‰è³‡æ–™åº«ä¸¦å°‡å…¶è§£å£“ç¸®åˆ° "chinatravel/environment/" ç›®éŒ„

ä¸‹è¼‰é€£çµï¼š[Google é›²ç«¯ç¡¬ç¢Ÿ](https://drive.google.com/drive/folders/1bJ7jA5cfExO_NKxKfi9qgcxEbkYeSdAU), [å—äº¬å¤§å­¸é›²ç›¤](https://box.nju.edu.cn/d/dd83e5a4a9e242ed8eb4/)

3. ä¸‹è¼‰é–‹æºå¤§å‹èªè¨€æ¨¡å‹ï¼ˆå¯é¸ï¼‰ã€‚

```bash
bash download_llm.sh
```

4. ä¸‹è¼‰åˆ†è©å™¨ã€‚

```bash
wget https://cdn.deepseek.com/api-docs/deepseek_v3_tokenizer.zip -P chinatravel/local_llm/
unzip chinatravel/local_llm/deepseek_v3_tokenizer.zip -d chinatravel/local_llm/
```

### â–¶ï¸ åŸ·è¡Œ

æˆ‘å€‘æ”¯æ´ deepseekï¼ˆä¾†è‡ª deepseek çš„å®˜æ–¹ APIï¼‰ã€gpt-4oï¼ˆchatgpt-4o-latestï¼‰ã€glm4-plusï¼Œä»¥åŠæœ¬åœ°æ¨è«–ï¼ŒåŒ…æ‹¬ Qwenï¼ˆQwen3-8Bï¼‰ã€llamaã€mistralï¼ˆMistral-7B-Instruct-v0.3ï¼‰ç­‰ã€‚

```bash
export OPENAI_API_KEY=""

python run_exp.py --splits easy --agent LLMNeSy --llm deepseek --oracle_translation
python run_exp.py --splits medium --agent LLMNeSy --llm deepseek --oracle_translation
python run_exp.py --splits human --agent LLMNeSy --llm deepseek --oracle_translation

python run_exp.py --splits human --agent LLMNeSy --llm Qwen3-8B --oracle_translation


python run_exp.py --splits human --agent LLMNeSy --llm deepseek 
python run_exp.py --splits human --agent LLMNeSy --llm Qwen3-8B 


python run_exp.py --splits human --agent LLM-modulo --llm deepseek --refine_steps 10 --oracle_translation
python run_exp.py --splits human --agent LLM-modulo --llm Qwen3-8B --refine_steps 10 --oracle_translation
```

**æ³¨æ„**ï¼š

- `--oracle_translation` æ¨™èªŒå•Ÿç”¨å°è¨»é‡‹éçš„çœŸå¯¦è³‡æ–™çš„è¨ªå•ï¼ŒåŒ…æ‹¬ï¼š

  - `hard_logic_py`: å¯åŸ·è¡Œçš„é©—è­‰ DSL ç¨‹å¼ç¢¼
  - `hard_logic_nl`: ç›¸æ‡‰çš„ç´„æŸæè¿°
  - ç¯„ä¾‹è¨»é‡‹çµæ§‹ï¼š

  ```python
  {
    "hard_logic_py": [
      "
      total_cost=0 
      for activity in allactivities(plan):
          total_cost+=activity_cost(activity)
              total_cost += innercity_transport_cost(activity_transports(activity))
      result=(total_cost<=1000)
      ", 
      "
      innercity_transport_set=set()
      for activity in allactivities(plan):
          if activity_transports(activity)!=[]:              
              innercity_transport_set.add(innercity_transport_type(activity_transports(activity)))
      result=(innercity_transport_set<={'taxi'})
      "
    ], 
    "hard_logic_nl": ["æ€»é¢„ç®—ä¸º1800å…ƒ", "å¸‚å†…äº¤é€šé€‰æ‹©taxi"], 
  }
  ```
- LLM-modulo æ–¹æ³•åœ¨å…¶ç¬¦è™Ÿç²¾ç…‰éç¨‹ä¸­**éœ€è¦** oracle_translation æ¨¡å¼

### ğŸ“Š è©•ä¼°

```bash
python eval_exp.py --splits human --method LLMNeSy_deepseek_oracletranslation
python eval_exp.py --splits human --method LLMNeSy_deepseek
python eval_exp.py --splits human --method LLM-modulo_deepseek_10steps_oracletranslation
python eval_exp.py --splits human --method LLM-modulo_Qwen3-8B_10steps_oracletranslation

```
åœ¨ TPC@IJCAI2025 ä¸­ï¼Œè©•ä¼°ç¨‹å¼ç¢¼åŒ…å«æ–¼ `eval_tpc.py` æª”æ¡ˆã€‚æ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼åŸ·è¡Œè©•ä¼°ç¨‹å¼ç¢¼ï¼š


```bash
python eval_tpc.py --splits tpc_phase1 --method YOUR_METHOD_NAME
```

## ğŸ“š æ–‡ä»¶

[ç’°å¢ƒ](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/chinatravel/environment/readme.md)
[ç´„æŸæ¢ä»¶](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/chinatravel/symbol_verification/readme.md)

## ğŸ› ï¸ é€²éšé–‹ç™¼

### 1. é–‹ç™¼æ‚¨è‡ªå·±çš„ä»£ç†æ¼”ç®—æ³•

è¦é–‹ç™¼æ‚¨è‡ªå·±çš„ä»£ç†æ¼”ç®—æ³•ï¼Œæ‚¨éœ€è¦ç¹¼æ‰¿ `chinatravel/agent/base.py` ä¸­çš„ `BaseAgent` é¡ï¼Œä¸¦å°‡æ‚¨çš„æ¼”ç®—æ³•é‚è¼¯åŠ å…¥åˆ° `chinatravel/agent/load_model.py` ä¸­çš„ `init_agent` å‡½å¼ã€‚æˆ‘å€‘æä¾›äº†ä¸€å€‹åç‚º `TPCAgent` çš„ç©ºä»£ç†ç¯„ä¾‹ã€‚

æ­¥é©Ÿï¼š

- **ç¹¼æ‰¿ `BaseAgent` é¡**ï¼šåœ¨ `chinatravel/agent` ç›®éŒ„ä¸‹å»ºç«‹æ–°çš„ Python æª”æ¡ˆï¼Œä¸¦å®šç¾©æ‚¨è‡ªå·±çš„ä»£ç†é¡åˆ¥ï¼Œç¹¼æ‰¿è‡ª `BaseAgent`ã€‚

```python:chinatravel/agent/your_agent.py
from .base import BaseAgent

class YourAgent(BaseAgent):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        # Initialization logic

    def act(self, observation):
        # Implement the decision - making logic of the agent
        pass
```

- **åœ¨ init_agent å‡½æ•¸ä¸­æ–°å¢ç¨‹å¼ç¢¼**ï¼šæ‰“é–‹ chinatravel/agent/load_model.py æª”æ¡ˆï¼Œä¸¦åœ¨ init_agent å‡½æ•¸ä¸­æ–°å¢å°æ‚¨æ–°ä»£ç†çš„æ”¯æ´ã€‚

```python:
def init_agent(kwargs):
    # ... existing code ...
    elif kwargs["method"] == "YourMethodName":
        agent = YourAgent(
            **kwargs
        )
    # ... existing code ...
    return agent
```

### 2. é–‹ç™¼æ‚¨è‡ªå·±çš„æœ¬åœ°å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰

è¦é–‹ç™¼æ‚¨è‡ªå·±çš„æœ¬åœ°å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œæ‚¨éœ€è¦å¾ chinatravel/agent/llms.py ç¹¼æ‰¿ AbstractLLM é¡ï¼Œä¸¦åœ¨ llms.py ä¸­æ·»åŠ ç›¸æ‡‰çš„æœ¬åœ° LLM æ¨ç†ç¨‹å¼ç¢¼ã€‚æˆ‘å€‘æä¾›äº†ä¸€å€‹åç‚º TPCLLM çš„ç©ºç™½ LLM ç¯„ä¾‹ã€‚
æ­¥é©Ÿï¼š

- **ç¹¼æ‰¿ AbstractLLM é¡åˆ¥**ï¼šåœ¨ chinatravel/agent/llms.py æª”æ¡ˆä¸­å®šç¾©æ‚¨è‡ªå·±çš„ LLM é¡åˆ¥ï¼Œä¸¦å¾ AbstractLLM ç¹¼æ‰¿ã€‚

```python
class YourLLM(AbstractLLM):
    def __init__(self):
        super().__init__()
        # Initialization logic
        self.name = "YourLLMName"

    def _get_response(self, messages, one_line, json_mode):
        # Implement the response logic of the LLM
        response = "Your LLM response"
        if json_mode:
            # Handle JSON mode
            pass
        elif one_line:
            # Handle one - line mode
            response = response.split("\n")[0]
        return response
```

- **åœ¨ init_agent å‡½æ•¸ä¸­æ–°å¢ç¨‹å¼ç¢¼**ï¼šæ‰“é–‹ chinatravel/agent/load_model.py æª”æ¡ˆï¼Œä¸¦åœ¨ init_llm å‡½æ•¸ä¸­æ–°å¢å°æ‚¨çš„æ–° llm çš„æ”¯æ´ã€‚

```python:
def init_llm(kwargs):
    # ... existing code ...
    elif llm_name == "glm4-plus":
        llm = YourLLM()
    # ... existing code ...
    return llm
```

### 3. ä½¿ç”¨å¯¦é©—è…³æœ¬é‹è¡Œæ‚¨çš„ç¨‹å¼ç¢¼

å®Œæˆä¸Šè¿°é–‹ç™¼å¾Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¯¦é©—è…³æœ¬ä¾†é‹è¡Œæ‚¨çš„ç¨‹å¼ç¢¼ã€‚

é‹è¡Œç¯„ä¾‹ï¼š

```bash
python run_tpc.py --splits easy --agent TPCAgent --llm TPCLLM
python run_exp.py --splits easy --agent YourMethodName --llm YourLLMName
```

çµæœå°‡æœƒè¢«å„²å­˜åœ¨ `results/YourMethodName_YourLLMName_xxx` ç›®éŒ„ä¸­ï¼Œä¾‹å¦‚ï¼š`results/TPCAgent_TPCLLM`ã€‚

## âœ‰ï¸ è¯çµ¡æ–¹å¼

å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹è¯çµ¡ [é‚µæ·é–](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/shaojj@lamda.nju.edu.cn)ã€[å¼µåšæ–‡](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/221900200@smail.nju.edu.cn)ã€[æ¥Šæ›‰é›¯](https://raw.githubusercontent.com/Adopos/ChinaTravel/main/yangxw@lamda.nju.edu.cn)ã€‚

## ğŸ“Œ å¼•ç”¨

è‹¥æœ¬è«–æ–‡æˆ–ç›¸é—œè³‡æºå°æ‚¨çš„ç ”ç©¶æœ‰æ‰€å¹«åŠ©ï¼Œæ•¬è«‹å¼•ç”¨ã€‚

```
@misc{shao2024chinatravelrealworldbenchmarklanguage,
      title={ChinaTravel: A Real-World Benchmark for Language Agents in Chinese Travel Planning}, 
      author={Jie-Jing Shao and Xiao-Wen Yang and Bo-Wen Zhang and Baizhi Chen and Wen-Da Wei and Guohao Cai and Zhenhua Dong and Lan-Zhe Guo and Yu-feng Li},
      year={2024},
      eprint={2412.13682},
      archivePrefix={arXiv},
      primaryClass={cs.AI},
      url={https://arxiv.org/abs/2412.13682}, 
}
```
[English](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=en) | [ç®€ä½“ä¸­æ–‡](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=zh-CN) | [ç¹é«”ä¸­æ–‡](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=zh-TW) | [æ—¥æœ¬èª](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=ja) | [í•œêµ­ì–´](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=ko) | [à¤¹à¤¿à¤¨à¥à¤¦à¥€](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=hi) | [à¹„à¸—à¸¢](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=th) | [FranÃ§ais](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=fr) | [Deutsch](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=de) | [EspaÃ±ol](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=es) | [Italiano](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=it) | [Ğ ÑƒÑÑĞºĞ¸Ğ¹](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=ru) | [PortuguÃªs](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=pt) | [Nederlands](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=nl) | [Polski](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=pl) | [Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=ar) | [ÙØ§Ø±Ø³ÛŒ](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=fa) | [TÃ¼rkÃ§e](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=tr) | [Tiáº¿ng Viá»‡t](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=vi) | [Bahasa Indonesia](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=id) | [à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾](https://openaitx.github.io/#/view?user=Adopos&project=ChinaTravel&lang=as)


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-10-12

---