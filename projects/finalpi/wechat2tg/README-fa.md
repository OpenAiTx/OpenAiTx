# wechat2tg-mac

بر اساس پروتکل WeChat Mac، ارسال و دریافت پیام‌های WeChat در تلگرام، سرویس wx2tg-server به دلایل امنیتی متن باز نیست.

## گروه تلگرام: [@Wx2TgUserGroup](https://t.me/+AD02MEZa-og3ZGY1)

## قابلیت‌های اصلی

1. دریافت پیام‌های چت خصوصی ویچت، پیام‌های گروهی، پیام‌های حساب رسمی و پیام‌های ویچت سازمانی
2. ارسال پیام از تلگرام به کاربر مشخص، گروه، یا حساب رسمی ویچت
3. فیلتر پیام‌های گروه‌های مشخص

## انواع پیام‌های پشتیبانی‌شده

### لیست پیام‌های پشتیبانی‌شده ویچت

+ [x] پیام متنی
+ [x] پیام ویچت سازمانی
+ [x] استیکرهای ویچت
+ [x] پیام تصویری
+ [x] پیام ویدیویی
+ [x] تماس صوتی/تصویری (فقط اعلان پیام)
+ [x] پیام فایل
+ [x] پیام لینک
+ [x] پیام گروهی
+ [x] پیام @ در گروه (‏@همه و @شما به @شما در تلگرام تبدیل می‌شود)
+ [x] پیام حساب رسمی
+ [x] ایموجی
+ [x] پیام موقعیت مکانی
+ [x] پیام بازپس‌گیری‌شده
+ [x] پیام صوتی
+ [ ] پیام هدیه (فقط اعلان، محتوای هدیه قابل دریافت نیست)
+ [ ] پیام برنامه کوچک

### لیست پیام‌های پشتیبانی‌شده تلگرام

+ [x] پیام متنی
+ [x] استیکر
+ [x] پیام تصویری
+ [x] پیام ویدیویی
+ [x] پیام فایل
+ [x] پیام صوتی

## نکات مهم

1. این پروژه فقط برای تحقیق و یادگیری فنی است و نباید برای مقاصد غیرقانونی استفاده شود.
2. در صورت بروز هرگونه مشکل، خوشحال می‌شویم issue ثبت کنید.

## نصب و راه‌اندازی

ابتدا یک نسخه از `.env.example` به عنوان فایل `.env` کپی کرده و متغیرهای محیطی داخل آن را تنظیم کنید.

فایل `app.conf.example` را به عنوان `app.conf` به پوشه `conf` پروژه کپی کرده و آدرس Redis را به آدرس Redis خودتان تغییر دهید.

### docker-compose

فایل `docker-compose.yml` را ایجاد کنید:

```yaml
version: '3'

services:
  wx2tg-mac:
    image: finalpi/wechat2tg-mac:latest
    container_name: wx2tg-mac
    volumes:
      - ./config:/app/storage
      - ./save-files:/app/save-files # پس از اتصال این پوشه، دیگر نیازی به تبدیل مجدد فایل استیکر نیست
    env_file: ".env"
    restart: unless-stopped

  wx2tg-server:
    image: finalpi/wx2tg-server:latest # دریافت تصویر
    container_name: wx2tg-server
    ports:
      - "8058:8058"
    volumes:
      - ./conf:/usr/wic-go/conf
    restart: unless-stopped

  wx2tg-redis:
    image: redis:7.2
    container_name: wx2tg-redis
    ports:
      - "16379:6379"
    volumes:
      - ./redis-data:/data
    command: ["redis-server", "--appendonly", "yes"]
    restart: unless-stopped
```

#### اجرا

```shell
docker-compose up -d
```

#### غیرفعال‌کردن حالت خصوصی ربات

حالت خصوصی ربات را خاموش کنید. BotFather را باز کنید و دستور `/mybots` را وارد کنید، ربات خود را انتخاب کنید. روی `Bot Settings` - `Group Privacy` - `Turn off` کلیک کنید؛ اگر پیام `Privacy mode is disabled for xxx` نمایش داده شد یعنی موفق بوده‌اید.

## راهنمای استفاده

### دستورات BOT

- `/login` : دریافت کد QR ورود؛ اولین فردی که پس از راه‌اندازی دستور `/login` را ارسال کند مالک BOT خواهد شد.

- `/flogin` : دریافت کد QR ورود دستیار انتقال فایل، پشتیبانی از دریافت ویدیو و فایل

- `/update` : بروزرسانی آواتار و اطلاعات نام گروه

- `/message` : فعال/غیرفعال کردن دریافت پیام گروه

- `/forward` : فعال/غیرفعال کردن فوروارد پیام اعضای دیگر یا ربات در گروه

- `/user` : دریافت لیست کاربران ویچت؛ با کلیک بر روی دکمه، می‌توانید گروه جدید ایجاد یا کاربر را متصل کنید (قابل جستجو با نام یا یادداشت؛ مثال: `/user 张` برای جستجوی کاربران ویچت شامل "张")

- `/room` : دریافت لیست گروه‌های ویچت؛ با کلیک بر روی دکمه، می‌توانید گروه جدید ایجاد یا گروه ویچت را متصل کنید (قابل جستجو با نام یا یادداشت؛ مثال: `/room 外卖` برای جستجوی گروه‌های ویچت شامل "外卖")

- `/settings` : تنظیمات برنامه

- `/unbind` : جدا کردن گروه یا کاربر ویچت (فقط در گروه‌ها پشتیبانی می‌شود)

### توضیح متغیرهای محیطی

|نام| اجباری | توضیحات                                                         |
|--|------|-------------------------------------------------------------|
|`BOT_TOKEN`| بله  | توکن ربات تلگرام، از طریق [BotFather](https://t.me/BotFather) ایجاد کنید |
|`API_ID`| بله  | API ID تلگرام                                             |
|`API_HASH`| بله  | API HASH تلگرام                                           |
|`BASE_API`| بله  | آدرس API سرور wx2tg-server باید به صورت کامل وارد شود                 |
|`PROXY_PROTOCOL`| خیر  | نوع پراکسی (socks5,http,https)                               |
|`PROXY_HOST`| خیر  | آدرس پراکسی                                                |
|`PROXY_PORT`| خیر  | پورت پراکسی                                                |
|`PROXY_USERNAME`| خیر  | نام کاربری پراکسی                                            |
|`PROXY_PASSWORD`| خیر  | رمز عبور پراکسی                                             |
|`ROOM_MESSAGE`| خیر  | فرمت نمایش پیام گروه ویچت در BOT                                 |
|`OFFICIAL_MESSAGE`| خیر  | فرمت نمایش پیام حساب رسمی ویچت در BOT                              |
|`CONTACT_MESSAGE`| خیر  | فرمت نمایش پیام کاربر ویچت در BOT                                 |
|`ROOM_MESSAGE_GROUP`| خیر  | فرمت نمایش پیام گروه ویچت در گروه                                 |
|`CONTACT_MESSAGE_GROUP`| خیر  | فرمت نمایش پیام کاربر ویچت در گروه                                 |
|`OFFICIAL_MESSAGE_GROUP`| خیر  | فرمت نمایش پیام حساب رسمی ویچت در گروه                              |
|`CREATE_ROOM_NAME`| خیر  | فرمت نام گروه هنگام ایجاد خودکار گروه ویچت                            |
|`CREATE_CONTACT_NAME`| خیر  | فرمت نام گروه هنگام ایجاد خودکار گروه برای کاربر ویچت                      |
|`MESSAGE_DISPLAY`| خیر  | فرمت نمایش پیام متنی                                         |

---

### توضیح دستور `/settings`

1. نمایش ایموجی ویچت به صورت لینک تصویری: اگر فعال باشد، ایموجی‌های دوست شما به صورت لینک تصویر نمایش داده می‌شود.

2. همگام‌سازی اطلاعات گروه هنگام راه‌اندازی: اگر فعال باشد، پس از راه‌اندازی برنامه، اطلاعات همه افراد همگام‌سازی و نام و عکس گروه بروزرسانی می‌شود.

---

### تبدیل صدا به متن

1. مقادیر `TENCENT_SECRET_ID` و `TENCENT_SECRET_KEY` را تنظیم کنید؛ می‌توانید از [کنسول تشخیص گفتار Tencent](https://console.cloud.tencent.com/asr) دریافت کنید. استفاده رایگان دارد.
2. قابلیت تبدیل خودکار صدا به متن را در `/settings` فعال کنید.

---

### دریافت `API_ID` و `API_HASH`

1. وارد [telegram account](https://my.telegram.org/) شوید.

2. روی "API development tools" کلیک کنید و مشخصات برنامه را وارد کنید (فقط عنوان و نام کوتاه کافی است).

3. در پایان روی "Create application" کلیک کنید.

---

### قالب سفارشی پیام

اگر می‌خواهید فرمت پیام ارسالی را تغییر دهید، می‌توانید متغیر محیطی Docker یا فایل `.env` را ویرایش کنید.

متغیرهای قالب سفارشی پیام:

`#[alias]` : یادداشت مخاطب

`#[name]` : نام مخاطب

`#[topic]` : نام گروه

`#[alias_first]` : اولویت با یادداشت، اگر یادداشت نبود نام مخاطب

`#[identity]` : متن اطلاعات هویتی

`#[body]` : متن پیام

`#[br]` : خط جدید

### چگونه @همه کنیم

ارسال پیام با شروع `@all` همه اعضا را @ می‌کند. فقط پیام متنی پشتیبانی می‌شود.

---

## سوالات متداول


## مشارکت در توسعه

1. پروژه را fork کنید و به شاخه `wx2tg-mac-dev` بروید یا شاخه جدید بسازید. لطفاً مستقیم روی شاخه اصلی commit نکنید.
2. Pull Request را به شاخه `wx2tg-mac-dev` ارسال کنید.

## لایسنس

[MIT](LICENSE)

## تشکر

سپاس از Jetbrains بابت حمایت از این پروژه

[<img src="https://resources.jetbrains.com/storage/products/company/brand/logos/jetbrains.png" width="200">](https://www.jetbrains.com)

---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-07

---