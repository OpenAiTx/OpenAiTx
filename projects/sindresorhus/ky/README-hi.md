<div align="center">
	<br>
	<div>
		<img width="600" height="600" src="https://raw.githubusercontent.com/sindresorhus/ky/main/media/logo.svg" alt="ky">
	</div>
	<br>
	<br>
	<br>
</div>

> Ky рдПрдХ рдЫреЛрдЯрд╛ рдФрд░ рдЖрдХрд░реНрд╖рдХ HTTP рдХреНрд▓рд╛рдЗрдВрдЯ рд╣реИ рдЬреЛ [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch) рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ

[![Coverage Status](https://codecov.io/gh/sindresorhus/ky/branch/main/graph/badge.svg)](https://codecov.io/gh/sindresorhus/ky)
[![](https://badgen.net/bundlephobia/minzip/ky)](https://bundlephobia.com/result?p=ky)

Ky [рдЖрдзреБрдирд┐рдХ рдмреНрд░рд╛рдЙрдЬрд╝рд░](#browser-support), Node.js, Bun, рдФрд░ Deno рдХреЛ рдЯрд╛рд░реНрдЧреЗрдЯ рдХрд░рддрд╛ рд╣реИред

рдпрд╣ рдХреЗрд╡рд▓ рдПрдХ рдЫреЛрдЯрд╛ рдкреИрдХреЗрдЬ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХреЛрдИ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдирд╣реАрдВ рд╣реИред

## рд╕рд╛рдорд╛рдиреНрдп `fetch` рдХреЗ рдореБрдХрд╛рдмрд▓реЗ рдлрд╛рдпрджреЗ

- рд╕рд░рд▓ API
- рдореЗрдердб рд╢реЙрд░реНрдЯрдХрдЯреНрд╕ (`ky.post()`)
- рдЧреИрд░-2xx рд╕реНрдЯреЗрдЯрд╕ рдХреЛрдбреНрд╕ рдХреЛ (рд░рд┐рдбрд╛рдпрд░реЗрдХреНрдЯреНрд╕ рдХреЗ рдмрд╛рдж) рдПрд░рд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЯреНрд░реАрдЯ рдХрд░рддрд╛ рд╣реИ
- рдЕрд╕рдлрд▓ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИ (Retries)
- JSON рд╡рд┐рдХрд▓реНрдк
- рдЯрд╛рдЗрдордЖрдЙрдЯ рд╕рдкреЛрд░реНрдЯ
- URL рдкреНрд░реАрдлрд┐рдХреНрд╕ рд╡рд┐рдХрд▓реНрдк
- рдХрд╕реНрдЯрдо рдбрд┐рдлреЙрд▓реНрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдЗрдВрд╕реНрдЯреЗрдВрд╕
- рд╣реБрдХреНрд╕
- TypeScript рд╕реБрд╡рд┐рдзрд╛рдПрдБ (рдЬреИрд╕реЗ `.json()` рдЬрдирд░рд┐рдХреНрд╕ рдХреЛ рд╕рдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдбрд┐рдлреЙрд▓реНрдЯ `unknown` рд╣реЛрддрд╛ рд╣реИ, `any` рдирд╣реАрдВ)

## рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ

```sh
npm install ky
```

###### CDN

- [jsdelivr](https://cdn.jsdelivr.net/npm/ky/+esm)
- [unpkg](https://unpkg.com/ky)
- [esm.sh](https://esm.sh/ky)

## рдЙрдкрдпреЛрдЧ

```js
import ky from 'ky';

const json = await ky.post('https://example.com', {json: {foo: true}}).json();

console.log(json);
//=> {data: 'ЁЯжД'}
```

рд╕рд╛рдзрд╛рд░рдг `fetch` рдХреЗ рд╕рд╛рде рдпрд╣ рдРрд╕рд╛ рд╣реЛрдЧрд╛:

```js
class HTTPError extends Error {}

const response = await fetch('https://example.com', {
	method: 'POST',
	body: JSON.stringify({foo: true}),
	headers: {
		'content-type': 'application/json'
	}
});

if (!response.ok) {
	throw new HTTPError(`Fetch error: ${response.statusText}`);
}

const json = await response.json();

console.log(json);
//=> {data: 'ЁЯжД'}
```

рдпрджрд┐ рдЖрдк [Deno](https://github.com/denoland/deno) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ Ky рдХреЛ рдХрд┐рд╕реА URL рд╕реЗ рдЗрдореНрдкреЛрд░реНрдЯ рдХрд░реЗрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, CDN рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп:

```js
import ky from 'https://esm.sh/ky';
```

## API

### ky(input, options?)

`input` рдФрд░ `options` [`fetch`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch) рдХреЗ рд╕рдорд╛рди рд╣реИрдВ, рд╕рд╛рде рд╣реА рдЕрддрд┐рд░рд┐рдХреНрдд `options` рднреА рдЙрдкрд▓рдмреНрдз рд╣реИрдВ (рдиреАрдЪреЗ рджреЗрдЦреЗрдВ)ред

рдпрд╣ рдПрдХ [`Response` рдСрдмреНрдЬреЗрдХреНрдЯ](https://developer.mozilla.org/en-US/docs/Web/API/Response) рд▓реМрдЯрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ [`Body` рдореЗрдердбреНрд╕](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#body) рдХреЛ рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП рдЖрдк, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `ky.get(input).json()` рдХреЛ рд╕реАрдзреЗ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдмрд┐рдирд╛ рдкрд╣рд▓реЗ `Response` рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд┐рдПред рдЬрдм рдРрд╕реЗ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрдкрдпреБрдХреНрдд `Accept` рд╣реЗрдбрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬреЛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдмреЙрдбреА рдореЗрдердб рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░реЗрдЧрд╛ред `window.Fetch` рдХреЗ `Body` рдореЗрдердбреНрд╕ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдпрджрд┐ рд░рд┐рд╕реНрдкреЙрдиреНрд╕ рд╕реНрдЯреЗрдЯрд╕ `200...299` рдХреА рд░реЗрдВрдЬ рдореЗрдВ рдирд╣реАрдВ рд╣реИ рддреЛ рдпреЗ рдПрдХ `HTTPError` рдереНрд░реЛ рдХрд░реЗрдВрдЧреЗред рд╕рд╛рде рд╣реА, рдЕрдЧрд░ рдмреЙрдбреА рдЦрд╛рд▓реА рд╣реИ рдпрд╛ рд░рд┐рд╕реНрдкреЙрдиреНрд╕ рд╕реНрдЯреЗрдЯрд╕ `204` рд╣реИ рддреЛ `.json()` рдПрдХ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рд▓реМрдЯрд╛рдПрдЧрд╛, рдЦрд╛рд▓реА рдмреЙрдбреА рдХреЗ рдХрд╛рд░рдг рдкрд╛рд░реНрд╕ рдПрд░рд░ рдереНрд░реЛ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдпред

```js
import ky from 'ky';

const user = await ky('/api/user').json();

console.log(user);
```

тМия╕П **TypeScript:** рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ [рдЯрд╛рдЗрдк рдкреИрд░рд╛рдореАрдЯрд░](https://www.typescriptlang.org/docs/handbook/2/generics.html) рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдбрд┐рдлреЙрд▓реНрдЯ рд░реВрдк рд╕реЗ [`unknown`](https://www.typescriptlang.org/docs/handbook/2/functions.html#unknown) рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдпрд╣ `.json()` рдХреА рд░рд┐рдЯрд░реНрди рдЯрд╛рдЗрдк рдореЗрдВ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

```ts
import ky from 'ky';

// user1 рдЕрдЬреНрдЮрд╛рдд (unknown) рд╣реИ
const user1 = await ky('/api/users/1').json();
// user2 рдПрдХ User рд╣реИ
const user2 = await ky<User>('/api/users/2').json();
// user3 рдПрдХ User рд╣реИ
const user3 = await ky('/api/users/3').json<User>();

console.log([user1, user2, user3]);
```

### ky.get(input, options?)
### ky.post(input, options?)
### ky.put(input, options?)
### ky.patch(input, options?)
### ky.head(input, options?)
### ky.delete(input, options?)

`options.method` рдХреЛ рдореЗрдердб рдирд╛рдо рдкрд░ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред

тМия╕П **TypeScript:** JSON рд░рд┐рд╕реНрдкреЙрдиреНрд╕ рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рдЯрд╛рдЗрдк рдкреИрд░рд╛рдореАрдЯрд░ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ (рджреЗрдЦреЗрдВ [`ky()`](#kyinput-options))ред

#### input

рдкреНрд░рдХрд╛рд░: `string` | `URL` | `Request`

[`fetch` рдЗрдирдкреБрдЯ](https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#input) рдХреЗ рд╕рдорд╛рдиред

рдЬрдм [`Request`](https://developer.mozilla.org/en-US/docs/Web/API/Request) рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ `input` рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХреЛрдИ рднреА URL рдмрджрд▓рдиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рдХрд▓реНрдк (рдЬреИрд╕реЗ рдХрд┐ `prefixUrl`) рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

#### options

рдкреНрд░рдХрд╛рд░: `object`

[`fetch` рд╡рд┐рдХрд▓реНрдк](https://developer.mozilla.org/en-US/docs/Web/API/fetch#options) рдХреЗ рд╕рдорд╛рди, рд╕рд╛рде рд╣реА рдирд┐рдореНрди рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд┐рдХрд▓реНрдк:

##### method

рдкреНрд░рдХрд╛рд░: `string`\
рдбрд┐рдлреЙрд▓реНрдЯ: `'get'`

рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА HTTP рдореЗрдердбред

рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ, рдорд╛рдирдХ рдореЗрдердбреНрд╕ (`GET`, `POST`, `PUT`, `PATCH`, `HEAD` рдФрд░ `DELETE`) рдХреЛ рдЕрдкрд░рдХреЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдХреЗрд╕ рд╕реЗрдВрд╕рд┐рдЯрд┐рд╡рд┐рдЯреА рдХреЗ рдХрд╛рд░рдг рд╕рд░реНрд╡рд░ рдПрд░рд░ рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХреЗред

##### json

рдкреНрд░рдХрд╛рд░: `object` рдФрд░ рдХреЛрдИ рднреА рдЕрдиреНрдп рдорд╛рди рдЬрд┐рд╕реЗ [`JSON.stringify()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify) рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ

JSON рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд╢реЙрд░реНрдЯрдХрдЯред рдЗрд╕реЗ `body` рд╡рд┐рдХрд▓реНрдк рдХреЗ рдмрдЬрд╛рдп рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред рдХреЛрдИ рднреА рд╕рд╛рдорд╛рдиреНрдп рдСрдмреНрдЬреЗрдХреНрдЯ рдпрд╛ рдорд╛рди рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ `JSON.stringify()` рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рд╕рд╣реА рд╣реЗрдбрд░ рдХреЗ рд╕рд╛рде рдмреЙрдбреА рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛ред

##### searchParams

рдкреНрд░рдХрд╛рд░: `string | object<string, string | number | boolean> | Array<Array<string | number | boolean>> | URLSearchParams`\
рдбрд┐рдлреЙрд▓реНрдЯ: `''`

рдЕрдиреБрд░реЛрдз URL рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░реНрдЪ рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ред рдЗрд╕реЗ рд╕реЗрдЯ рдХрд░рдиреЗ рд╕реЗ рдЗрдирдкреБрдЯ URL рдореЗрдВ рдореМрдЬреВрдж рд╕рднреА рд╕рд░реНрдЪ рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рдУрд╡рд░рд░рд╛рдЗрдб рд╣реЛ рдЬрд╛рдПрдВрдЧреЗред

рдХреЛрдИ рднреА рдорд╛рди рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ [`URLSearchParams()`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/URLSearchParams) рд╕рдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИред

##### prefixUrl

рдкреНрд░рдХрд╛рд░: `string | URL`

рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╕рдордп `input` URL рд╕реЗ рдкрд╣рд▓реЗ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░реАрдлрд┐рдХреНрд╕ред рдпрд╣ рдХреЛрдИ рднреА рд╡реИрдз URL рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЪрд╛рд╣реЗ рд░рд┐рд▓реЗрдЯрд┐рд╡ рд╣реЛ рдпрд╛ рдПрдмреНрд╕реЛрд▓реНрдпреВрдЯред рдПрдХ рдЯреНрд░реЗрд▓рд┐рдВрдЧ рд╕реНрд▓реИрд╢ `/` рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИ рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реБрдЖ рддреЛ рд╕реНрд╡рддрдГ рдЬреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрдм рдЗрд╕реЗ `input` рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ред рдХреЗрд╡рд▓ рддрднреА рдкреНрд░рднрд╛рд╡реА рд╣реЛрддрд╛ рд╣реИ рдЬрдм `input` рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЛред рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп `input` рдЖрд░реНрдЧреНрдпреБрдореЗрдВрдЯ рд╕реНрд▓реИрд╢ `/` рд╕реЗ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ред

[`ky.extend()`](#kyextenddefaultoptions) рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рдпрд╣ рдЦрд╛рд╕ Ky-рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрдЬрд╝ рдмрдирд╛рдиреЗ рдореЗрдВ рдЙрдкрдпреЛрдЧреА рд╣реИред

```js
import ky from 'ky';

// https://example.com рдкрд░

const response = await ky('unicorn', {prefixUrl: '/api'});
//=> 'https://example.com/api/unicorn'

const response2 = await ky('unicorn', {prefixUrl: 'https://cats.com'});
//=> 'https://cats.com/unicorn'
```

рдиреЛрдЯреНрд╕:
 - `prefixUrl` рдФрд░ `input` рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдкрд░рд┐рдгрд╛рдо рдкреЗрдЬ рдХреЗ [base URL](https://developer.mozilla.org/en-US/docs/Web/API/Node/baseURI) рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд░реЗрдЬрд╝реЙрд▓реНрд╡ рд╣реЛрддрд╛ рд╣реИ (рдпрджрд┐ рдХреЛрдИ рд╣реИ)ред
 - рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдЗрдирдкреБрдЯ рдореЗрдВ рд▓реАрдбрд┐рдВрдЧ рд╕реНрд▓реИрд╢ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИ рддрд╛рдХрд┐ рдирд┐рд░рдВрддрд░рддрд╛ рдмрдиреА рд░рд╣реЗ рдФрд░ рднреНрд░рдо рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХреЗ рдХрд┐ `input` URL рдХреИрд╕реЗ рд╣реИрдВрдбрд▓ рд╣реЛрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ `prefixUrl` рдЙрдкрдпреЛрдЧ рд╣реЛрдиреЗ рдкрд░ рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп URL рд░реЗрдЬрд╝реЙрд▓реНрдпреВрд╢рди рдирд┐рдпрдореЛрдВ рдХрд╛ рдкрд╛рд▓рди рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рд▓реАрдбрд┐рдВрдЧ рд╕реНрд▓реИрд╢ рдХрд╛ рдЕрд░реНрде рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИред

##### retry

рдкреНрд░рдХрд╛рд░: `object | number`\
рдбрд┐рдлреЙрд▓реНрдЯ:
- `limit`: `2`
- `methods`: `get` `put` `head` `delete` `options` `trace`
- `statusCodes`: [`408`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/408) [`413`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413) [`429`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429) [`500`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500) [`502`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502) [`503`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503) [`504`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504)
- `afterStatusCodes`: [`413`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413), [`429`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429), [`503`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503)
- `maxRetryAfter`: `undefined`
- `backoffLimit`: `undefined`
- `delay`: `attemptCount => 0.3 * (2 ** (attemptCount - 1)) * 1000`
`limit`, `methods`, `statusCodes`, `afterStatusCodes`, рдФрд░ `maxRetryAfter` рдлрд╝реАрд▓реНрдб рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рдиреЗ рд╡рд╛рд▓реА рдПрдХ рд╡рд╕реНрддреБ, рдЕрдзрд┐рдХрддрдо рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдЧрдгрдирд╛, рдЕрдиреБрдордд рд╡рд┐рдзрд┐рдпрд╛рдБ, рдЕрдиреБрдордд рд╕реНрдерд┐рддрд┐ рдХреЛрдб, [`Retry-After`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After) рд╕рдордп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдордд рд╕реНрдерд┐рддрд┐ рдХреЛрдб, рдФрд░ рдЕрдзрд┐рдХрддрдо [`Retry-After`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After) рд╕рдордп рдХреЗ рд▓рд┐рдПред

рдпрджрд┐ `retry` рдПрдХ рд╕рдВрдЦреНрдпрд╛ рд╣реИ, рддреЛ рдЗрд╕реЗ `limit` рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЕрдиреНрдп рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реИрд╕реЗ рд╣реА рд░рд╣реЗрдВрдЧреЗред

рдпрджрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ `afterStatusCodes` рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХреЛрдИ HTTP рд╕реНрдерд┐рддрд┐ рдХреЛрдб рд╣реИ, рддреЛ Ky [`Retry-After`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After) рд╣реЗрдбрд░ рдореЗрдВ рджрд┐рдП рдЧрдП рджрд┐рдирд╛рдВрдХ, рдЯрд╛рдЗрдордЖрдЙрдЯ, рдпрд╛ рдЯрд╛рдЗрдорд╕реНрдЯреИрдореНрдк рдХреЗ рдмреАрддрдиреЗ рддрдХ рдЕрдиреБрд░реЛрдз рдХреЛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдЧрд╛ред рдпрджрд┐ `Retry-After` рдЕрдиреБрдкрд╕реНрдерд┐рдд рд╣реИ, рддреЛ рдЙрд╕рдХреЗ рд╕реНрдерд╛рди рдкрд░ рдЧреИрд░-рдорд╛рдирдХ [`RateLimit-Reset`](https://www.ietf.org/archive/id/draft-polli-ratelimit-headers-05.html#section-3.3) рд╣реЗрдбрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрджрд┐ рдкреНрд░рджрддреНрдд рд╕реНрдерд┐рддрд┐ рдХреЛрдб рд╕реВрдЪреА рдореЗрдВ рдирд╣реАрдВ рд╣реИ, рддреЛ [`Retry-After`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After) рд╣реЗрдбрд░ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

рдпрджрд┐ `maxRetryAfter` рдХреЛ `undefined` рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдпрд╣ `options.timeout` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред рдпрджрд┐ [`Retry-After`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After) рд╣реЗрдбрд░ `maxRetryAfter` рд╕реЗ рдЕрдзрд┐рдХ рд╣реИ, рддреЛ рдпрд╣ `maxRetryAfter` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред

`backoffLimit` рд╡рд┐рдХрд▓реНрдк рдкреНрд░рддрд┐ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рджреЗрд░реА рдХреА рдКрдкрд░реА рд╕реАрдорд╛ (рдорд┐рд▓реАрд╕реЗрдХрдВрдб рдореЗрдВ) рд╣реИред
рджреЗрд░реА рдХреЛ рдХреНрд▓реИрдВрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, `backoffLimit` рдХреЛ 1000 рдкрд░ рд╕реЗрдЯ рдХрд░реЗрдВред
рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рджреЗрд░реА рдХреА рдЧрдгрдирд╛ `0.3 * (2 ** (attemptCount - 1)) * 1000` рдХреЗ рд╕рд╛рде рдХреА рдЬрд╛рддреА рд╣реИред рджреЗрд░реА рдШрд╛рддреАрдп рд░реВрдк рд╕реЗ рдмрдврд╝рддреА рд╣реИред

`delay` рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдпрд╣ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреЗ рдмреАрдЪ рдХреА рджреЗрд░реА рдХреИрд╕реЗ рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИред рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ, рдкреНрд░рдпрд╛рд╕ рдЧрдгрдирд╛, рдЬреЛ `1` рд╕реЗ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИред

[timeout](#timeout) рдХреЗ рдмрд╛рдж рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдЯреНрд░рд┐рдЧрд░ рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред

```js
import ky from 'ky';

const json = await ky('https://example.com', {
	retry: {
		limit: 10,
		methods: ['get'],
		statusCodes: [413],
		backoffLimit: 3000
	}
}).json();
```

##### timeout

рдкреНрд░рдХрд╛рд░: `number | false`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `10000`

рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдорд┐рд▓реАрд╕реЗрдХрдВрдб рдореЗрдВ рдЯрд╛рдЗрдордЖрдЙрдЯ, рдЬрд┐рд╕рдореЗрдВ рдХреЛрдИ рднреА рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рд╢рд╛рдорд┐рд▓ рд╣реИред рдпрд╣ 2147483647 рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ред
рдпрджрд┐ `false` рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдХреЛрдИ рдЯрд╛рдЗрдордЖрдЙрдЯ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред

##### hooks

рдкреНрд░рдХрд╛рд░: `object<string, Function[]>`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `{beforeRequest: [], beforeRetry: [], afterResponse: []}`

Hooks рдЕрдиреБрд░реЛрдз рдЬреАрд╡рдирдЪрдХреНрд░ рдХреЗ рджреМрд░рд╛рди рд╕рдВрд╢реЛрдзрди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред Hook рдлрд╝рдВрдХреНрд╢рди async рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдЪрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

###### hooks.beforeRequest

рдкреНрд░рдХрд╛рд░: `Function[]`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `[]`

рдпрд╣ hook рдЖрдкрдХреЛ рдЕрдиреБрд░реЛрдз рднреЗрдЬреЗ рдЬрд╛рдиреЗ рд╕реЗ рдареАрдХ рдкрд╣рд▓реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдмрд╛рдж Ky рдЕрдиреБрд░реЛрдз рдореЗрдВ рдХреЛрдИ рдФрд░ рдмрджрд▓рд╛рд╡ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред Hook рдлрд╝рдВрдХреНрд╢рди рдХреЛ `request` рдФрд░ `options` рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдпрд╣рд╛рдВ `request.headers` рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

Hook рдПрдХ [`Request`](https://developer.mozilla.org/en-US/docs/Web/API/Request) рдХреЛ рд▓реМрдЯрд╛рдХрд░ рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рдЕрдиреБрд░реЛрдз рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдпрд╛ рдПрдХ [`Response`](https://developer.mozilla.org/en-US/docs/Web/API/Response) рдХреЛ рд▓реМрдЯрд╛рдХрд░ HTTP рдЕрдиреБрд░реЛрдз рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЯрд╛рд▓ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрдиреБрд░реЛрдз рдХреЛ рдирдХрд▓реА (mock) рдХрд░рдиреЗ, рдЖрдВрддрд░рд┐рдХ рдХреИрд╢ рдХреА рдЬрд╛рдВрдЪ, рдЖрджрд┐ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред **рдорд╣рддреНрд╡рдкреВрд░реНрдг** рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдпрджрд┐ рдЖрдк рдЗрд╕ hook рд╕реЗ рдХреЛрдИ рдЕрдиреБрд░реЛрдз рдпрд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд▓реМрдЯрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╢реЗрд╖ рд╕рднреА `beforeRequest` hooks рдЫреЛрдбрд╝ рджрд┐рдП рдЬрд╛рдПрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рдЖрдк рдХреЗрд╡рд▓ рдЕрдВрддрд┐рдо hook рд╕реЗ рд╣реА рдЙрдиреНрд╣реЗрдВ рд▓реМрдЯрд╛рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗред

```js
import ky from 'ky';

const api = ky.extend({
	hooks: {
		beforeRequest: [
			request => {
				request.headers.set('X-Requested-With', 'ky');
			}
		]
	}
});

const response = await api.get('https://example.com/api/users');
```

###### hooks.beforeRetry

рдкреНрд░рдХрд╛рд░: `Function[]`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `[]`

рдпрд╣ hook рдЖрдкрдХреЛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рд╕реЗ рдареАрдХ рдкрд╣рд▓реЗ рдЕрдиреБрд░реЛрдз рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдмрд╛рдж Ky рдЕрдиреБрд░реЛрдз рдореЗрдВ рдХреЛрдИ рдФрд░ рдмрджрд▓рд╛рд╡ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред Hook рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╕рд╛рдорд╛рдиреНрдпреАрдХреГрдд рдЕрдиреБрд░реЛрдз рдФрд░ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ, рдПрдХ рддреНрд░реБрдЯрд┐ рдЙрджрд╛рд╣рд░рдг, рдФрд░ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдЧрдгрдирд╛ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдпрд╣рд╛рдВ `request.headers` рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдпрджрд┐ рдЕрдиреБрд░реЛрдз рдХреЛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рд╛рдкреНрдд рд╣реБрдИ, рддреЛ рддреНрд░реБрдЯрд┐ рдХрд╛ рдкреНрд░рдХрд╛рд░ `HTTPError` рд╣реЛрдЧрд╛ рдФрд░ `Response` рдСрдмреНрдЬреЗрдХреНрдЯ `error.response` рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реЛрдЧрд╛ред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреА рддреНрд░реБрдЯрд┐рдпрд╛рдБ, рдЬреИрд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рддреНрд░реБрдЯрд┐рдпрд╛рдБ, рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рди рдорд┐рд▓рдиреЗ рдХрд╛ рдЕрд░реНрде рд░рдЦрддреА рд╣реИрдВред рдРрд╕реЗ рдореЗрдВ, рддреНрд░реБрдЯрд┐ `HTTPError` рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдирд╣реАрдВ рд╣реЛрдЧреАред

рдЖрдк рддреНрд░реБрдЯрд┐ рдлреЗрдВрдХрдХрд░ Ky рдХреЛ рдЕрдиреБрд░реЛрдз рдХреЛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХ рд╕рдХрддреЗ рд╣реИрдВред Ky рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рд╕рдВрднрд╛рд▓реЗрдЧрд╛ рдирд╣реАрдВ рдФрд░ рддреНрд░реБрдЯрд┐ рдЕрдиреБрд░реЛрдз рдЖрд░рдВрднрдХрд░реНрддрд╛ рддрдХ рдкрд╣реБрдБрдЪ рдЬрд╛рдПрдЧреАред рд╢реЗрд╖ рд╕рднреА `beforeRetry` hooks рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдирд╣реАрдВ рдЪрд▓реЗрдВрдЧреЗред рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, рдЖрдк [`ky.stop`](#kystop) рдкреНрд░рддреАрдХ рдХреЛ рд▓реМрдЯрд╛рдХрд░ рднреА рдпрд╣реА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдмрд┐рдирд╛ рддреНрд░реБрдЯрд┐ рдлреИрд▓рд╛рдП (рдЗрд╕рдореЗрдВ рдХреБрдЫ рд╕реАрдорд╛рдПрдБ рд╣реИрдВ, рд╡рд┐рд╡рд░рдг рдХреЗ рд▓рд┐рдП `ky.stop` рдбреЙрдХреНрд╕ рджреЗрдЦреЗрдВ)ред

```js
import ky from 'ky';

const response = await ky('https://example.com', {
	hooks: {
		beforeRetry: [
			async ({request, options, error, retryCount}) => {
				const token = await ky('https://example.com/refresh-token');
				request.headers.set('Authorization', `token ${token}`);
			}
		]
	}
});
```

###### hooks.beforeError

рдкреНрд░рдХрд╛рд░: `Function[]`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `[]`

рдпрд╣ hook рдЖрдкрдХреЛ `HTTPError` рдХреЛ рдлреЗрдВрдХрдиреЗ рд╕реЗ рдареАрдХ рдкрд╣рд▓реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред Hook рдлрд╝рдВрдХреНрд╢рди рдХреЛ `HTTPError` рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЙрд╕реЗ `HTTPError` рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд▓реМрдЯрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред

```js
import ky from 'ky';

await ky('https://example.com', {
	hooks: {
		beforeError: [
			error => {
				const {response} = error;
				if (response && response.body) {
					error.name = 'GitHubError';
					error.message = `${response.body.message} (${response.status})`;
				}

				return error;
			}
		]
	}
});
```

###### hooks.afterResponse

рдкреНрд░рдХрд╛рд░: `Function[]`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `[]`

рдпрд╣ hook рдЖрдкрдХреЛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкрдврд╝рдиреЗ рдФрд░ рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред Hook рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╕рд╛рдорд╛рдиреНрдпреАрдХреГрдд рдЕрдиреБрд░реЛрдз, рд╡рд┐рдХрд▓реНрдк, рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдПрдХ рдХреНрд▓реЛрди рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИред рдпрджрд┐ hook рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рд▓реМрдЯрд╛рдпрд╛ рдЧрдпрд╛ рдорд╛рди [`Response`](https://developer.mozilla.org/en-US/docs/Web/API/Response) рдХрд╛ рдЙрджрд╛рд╣рд░рдг рд╣реИ, рддреЛ Ky рдЗрд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред

```js
import ky from 'ky';

const response = await ky('https://example.com', {
	hooks: {
		afterResponse: [
			(_request, _options, response) => {
				// рдЖрдк рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╛рде рдХреБрдЫ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рд▓реЙрдЧрд┐рдВрдЧред
				log(response);

				// рдпрд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `Response` рдЙрджрд╛рд╣рд░рдг рд▓реМрдЯрд╛рдПрдБред
				return new Response('A different response', {status: 200});
			},

			// рдпрд╛ 403 рддреНрд░реБрдЯрд┐ рдкрд░ рдирдпрд╛ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ
			async (request, options, response) => {
				if (response.status === 403) {
					// рдирдпрд╛ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
					const token = await ky('https://example.com/token').text();

					// рдЯреЛрдХрди рдХреЗ рд╕рд╛рде рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ
					request.headers.set('Authorization', `token ${token}`);

					return ky(request);
				}
			}
		]
	}
});
```

##### throwHttpErrors

рдкреНрд░рдХрд╛рд░: `boolean`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `true`

рдпрджрд┐, рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЧреИрд░-2xx рд╕реНрдерд┐рддрд┐ рдХреЛрдб рд╣реИ, рддреЛ `HTTPError` рдлреЗрдВрдХреЗред рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рднреА рддреНрд░реБрдЯрд┐ рдлреЗрдВрдХрдиреЗ рдХреЗ рд▓рд┐рдП, рдмрдЬрд╛рдп рдЙрдирдХрд╛ рдкрд╛рд▓рди рдХрд░рдиреЗ рдХреЗ, [`redirect`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters) рд╡рд┐рдХрд▓реНрдк рдХреЛ `'manual'` рдкрд░ рд╕реЗрдЯ рдХрд░реЗрдВред

рдЗрд╕реЗ `false` рдкрд░ рд╕реЗрдЯ рдХрд░рдирд╛ рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдпрджрд┐ рдЖрдк рд╕рдВрд╕рд╛рдзрди рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рддреНрд░реБрдЯрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдПрдБ рдЕрдкреЗрдХреНрд╖рд┐рдд рд╣реИрдВред

рдиреЛрдЯ: рдпрджрд┐ `false`, рддреЛ рддреНрд░реБрдЯрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд╕рдлрд▓ рдорд╛рдирд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЕрдиреБрд░реЛрдз рдХреЛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

##### onDownloadProgress

рдкреНрд░рдХрд╛рд░: `Function`

рдбрд╛рдЙрдирд▓реЛрдб рдкреНрд░рдЧрддрд┐ рдИрд╡реЗрдВрдЯ рд╣реИрдВрдбрд▓рд░ред

рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдирд┐рдореНрди рддрд░реНрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ:
- `progress` рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдпреЗ рдЧреБрдг рд╣реЛрддреЗ рд╣реИрдВ:
- - `percent` 0 рдФрд░ 1 рдХреЗ рдмреАрдЪ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рд╣реИ, рдЬреЛ рдкреНрд░рдЧрддрд┐ рдкреНрд░рддрд┐рд╢рдд рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИред
- - `transferredBytes` рдЕрдм рддрдХ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдмрд╛рдЗрдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИред
- - `totalBytes` рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдХреБрд▓ рдмрд╛рдЗрдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИред рдпрд╣ рдПрдХ рдЕрдиреБрдорд╛рди рд╣реИ рдФрд░ рдпрджрд┐ рдХреБрд▓ рдЖрдХрд╛рд░ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддреЛ рдпрд╣ 0 рд╣реЛ рд╕рдХрддрд╛ рд╣реИред
- `chunk` `Uint8Array` рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ рдЬрд┐рд╕рдореЗрдВ рднреЗрдЬрд╛ рдЧрдпрд╛ рдбреЗрдЯрд╛ рд╣реЛрддрд╛ рд╣реИред рдиреЛрдЯ: рдпрд╣ рдкрд╣рд▓реЗ рдХреЙрд▓ рдХреЗ рд▓рд┐рдП рдЦрд╛рд▓реА рд╣реЛрддрд╛ рд╣реИред

```js
import ky from 'ky';

const response = await ky('https://example.com', {
	onDownloadProgress: (progress, chunk) => {
		// рдЙрджрд╛рд╣рд░рдг рдЖрдЙрдЯрдкреБрдЯ:
		// `0% - 0 of 1271 bytes`
		// `100% - 1271 of 1271 bytes`
		console.log(`${progress.percent * 100}% - ${progress.transferredBytes} of ${progress.totalBytes} bytes`);
	}
});
```

##### onUploadProgress

рдкреНрд░рдХрд╛рд░: `Function`
рдЕрдкрд▓реЛрдб рдкреНрд░рдЧрддрд┐ рдЗрд╡реЗрдВрдЯ рд╣реИрдВрдбрд▓рд░ред

рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдпреЗ рдЖрд░реНрдЧреБрдореЗрдВрдЯреНрд╕ рдорд┐рд▓рддреЗ рд╣реИрдВ:
- `progress` рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдпреЗ рдкреНрд░реЙрдкрд░реНрдЯреАрдЬрд╝ рд╣реЛрддреА рд╣реИрдВ:
- - `percent` рдПрдХ рдирдВрдмрд░ рд╣реИ рдЬреЛ 0 рдФрд░ 1 рдХреЗ рдмреАрдЪ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдкреНрд░рдЧрддрд┐ рдкреНрд░рддрд┐рд╢рдд рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред
- - `transferredBytes` рдЕрдм рддрдХ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХрд┐рдП рдЧрдП рдмрд╛рдЗрдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИред
- - `totalBytes` рдХреБрд▓ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдмрд╛рдЗрдЯреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИред рдпрд╣ рдПрдХ рдЕрдиреБрдорд╛рди рд╣реИ рдФрд░ рдпрджрд┐ рдХреБрд▓ рдЖрдХрд╛рд░ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддреЛ рдпрд╣ 0 рд╣реЛ рд╕рдХрддрд╛ рд╣реИред
- `chunk` `Uint8Array` рдХрд╛ рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рднреЗрдЬрд╛ рдЧрдпрд╛ рдбреЗрдЯрд╛ рд╣реЛрддрд╛ рд╣реИред рдиреЛрдЯ: рдЕрдВрддрд┐рдо рдХреЙрд▓ рдХреЗ рд▓рд┐рдП рдпрд╣ рдЦрд╛рд▓реА рд╣реЛрддрд╛ рд╣реИред

```js
import ky from 'ky';

const response = await ky.post('https://example.com/upload', {
	body: largeFile,
	onUploadProgress: (progress, chunk) => {
		// рдЙрджрд╛рд╣рд░рдг рдЖрдЙрдЯрдкреБрдЯ:
		// `0% - 0 of 1271 bytes`
		// `100% - 1271 of 1271 bytes`
		console.log(`${progress.percent * 100}% - ${progress.transferredBytes} of ${progress.totalBytes} bytes`);
	}
});
```

##### parseJson

рдкреНрд░рдХрд╛рд░: `Function`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `JSON.parse()`

рдпреВрдЬрд╝рд░-рдкрд░рд┐рднрд╛рд╖рд┐рдд JSON-рдкрд╛рд░реНрд╕рд┐рдВрдЧ рдлрд╝рдВрдХреНрд╢рдиред

рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:
1. [`bourne` рдкреИрдХреЗрдЬ](https://github.com/hapijs/bourne) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ JSON рдкрд╛рд░реНрд╕ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдкреЙрд▓реНрдпреВрд╢рди рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХреЗред
2. [`JSON.parse()` рдХреЗ `reviver` рд╡рд┐рдХрд▓реНрдк](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse) рдХреЗ рд╕рд╛рде JSON рдкрд╛рд░реНрд╕ рдХрд░реЗрдВред

```js
import ky from 'ky';
import bourne from '@hapijs/bourne';

const json = await ky('https://example.com', {
	parseJson: text => bourne(text)
}).json();
```

##### stringifyJson

рдкреНрд░рдХрд╛рд░: `Function`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `JSON.stringify()`

рдпреВрдЬрд╝рд░-рдкрд░рд┐рднрд╛рд╖рд┐рдд JSON-рд╕реНрдЯреНрд░рд┐рдВрдЧрд┐рдлрд╛рдЗрдВрдЧ рдлрд╝рдВрдХреНрд╢рдиред

рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:
1. рдХрд╕реНрдЯрдо `replacer` рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде JSON рдХреЛ рд╕реНрдЯреНрд░рд┐рдВрдЧрд┐рдлрд╛рдИ рдХрд░реЗрдВред

```js
import ky from 'ky';
import {DateTime} from 'luxon';

const json = await ky('https://example.com', {
	stringifyJson: data => JSON.stringify(data, (key, value) => {
		if (key.endsWith('_at')) {
			return DateTime.fromISO(value).toSeconds();
		}

		return value;
	})
}).json();
```

##### fetch

рдкреНрд░рдХрд╛рд░: `Function`\
рдбрд┐рдлрд╝реЙрд▓реНрдЯ: `fetch`

рдпреВрдЬрд╝рд░-рдкрд░рд┐рднрд╛рд╖рд┐рдд `fetch` рдлрд╝рдВрдХреНрд╢рдиред
рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) рдорд╛рдирдХ рдХреЗ рдЕрдиреБрдХреВрд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред

рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:
1. [`isomorphic-unfetch`](https://www.npmjs.com/package/isomorphic-unfetch) рдЬреИрд╕реА рдХрд╕реНрдЯрдо `fetch` рдЗрдореНрдкреНрд▓реАрдореЗрдВрдЯреЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
2. рдЙрди рдлреНрд░реЗрдорд╡рд░реНрдХреНрд╕ рджреНрд╡рд╛рд░рд╛ рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рдП рдЧрдП `fetch` рд░реИрдкрд░ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬреЛ рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рд░реЗрдВрдбрд░рд┐рдВрдЧ (SSR) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред

```js
import ky from 'ky';
import fetch from 'isomorphic-unfetch';

const json = await ky('https://example.com', {fetch}).json();
```

### ky.extend(defaultOptions)

рдХреБрдЫ рдбрд┐рдлрд╝реЙрд▓реНрдЯреНрд╕ рдХреЛ рдЕрдкрдиреА рдкрд╕рдВрдж рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рдХреЗ рдПрдХ рдирдпрд╛ `ky` рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдмрдирд╛рдПрдБред

`ky.create()` рдХреЗ рд╡рд┐рдкрд░реАрдд, `ky.extend()` рдЕрдкрдиреЗ рдкреИрд░реЗрдВрдЯ рд╕реЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯреНрд╕ рдХреЛ рдЗрдирд╣реЗрд░рд┐рдЯ рдХрд░рддрд╛ рд╣реИред

рдЖрдк рд╣реЗрдбрд░реНрд╕ рдХреЛ `Headers` рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдпрд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

рдЖрдк `.extend()` рдХреЗ рд╕рд╛рде рдХрд┐рд╕реА рд╣реЗрдбрд░ рдХреЛ `undefined` рдорд╛рди рджреЗрдХрд░ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВред
`undefined` рдХреЛ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд╕ рдХрд░рдиреЗ рдкрд░ рд╣реЗрдбрд░ рдХреЗрд╡рд▓ рддрднреА рд╣рдЯрддрд╛ рд╣реИ рдЬрдм рд╡рд╣ `Headers` рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╕реЗ рдЖрддрд╛ рд╣реИред

рдЗрд╕реА рддрд░рд╣, рдЖрдк рдореМрдЬреВрджрд╛ `hooks` рдПрдВрдЯреНрд░реАрдЬрд╝ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ `undefined` рдХреЗ рд╕рд╛рде рдПрдХреНрд╕рдЯреЗрдВрдб рдХрд░рдХреЗ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВред

```js
import ky from 'ky';

const url = 'https://sindresorhus.com';

const original = ky.create({
	headers: {
		rainbow: 'rainbow',
		unicorn: 'unicorn'
	},
	hooks: {
		beforeRequest: [ () => console.log('before 1') ],
		afterResponse: [ () => console.log('after 1') ],
	},
});

const extended = original.extend({
	headers: {
		rainbow: undefined
	},
	hooks: {
		beforeRequest: undefined,
		afterResponse: [ () => console.log('after 2') ],
	}
});

const response = await extended(url).json();
//=> after 1
//=> after 2

console.log('rainbow' in response);
//=> false

console.log('unicorn' in response);
//=> true
```

рдЖрдк `.extend()` рдХреЛ рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рджрд╛рди рдХрд░рдХреЗ рдкреИрд░реЗрдВрдЯ рдбрд┐рдлрд╝реЙрд▓реНрдЯреНрд╕ рдХрд╛ рднреА рд╕рдВрджрд░реНрдн рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВред

```js
import ky from 'ky';

const api = ky.create({prefixUrl: 'https://example.com/api'});

const usersApi = api.extend((options) => ({prefixUrl: `${options.prefixUrl}/users`}));

const response = await usersApi.get('123');
//=> 'https://example.com/api/users/123'

const response = await api.get('version');
//=> 'https://example.com/api/version'
```

### ky.create(defaultOptions)

рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдирдП рдбрд┐рдлрд╝реЙрд▓реНрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рдирдпрд╛ Ky рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдмрдирд╛рдПрдБред

```js
import ky from 'ky';

// On https://my-site.com

const api = ky.create({prefixUrl: 'https://example.com/api'});

const response = await api.get('users/123');
//=> 'https://example.com/api/users/123'

const response = await api.get('/status', {prefixUrl: ''});
//=> 'https://my-site.com/status'
```

#### defaultOptions

рдкреНрд░рдХрд╛рд░: `object`

### ky.stop

рдПрдХ `Symbol` рдЬрд┐рд╕реЗ `beforeRetry` рд╣реБрдХ рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рд░рд┐рдЯреНрд░рд╛рдИ рдХреЛ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХреЗред рдпрд╣ рд╢реЗрд╖ рдмрдЪреЗ `beforeRetry` рд╣реБрдХреНрд╕ рдХреЛ рднреА рд╢реЙрд░реНрдЯ рд╕рд░реНрдХрд┐рдЯ рдХрд░ рджреЗрдЧрд╛ред

рдиреЛрдЯ: рдЗрд╕ рд╕рд┐рдВрдмрд▓ рдХреЛ рд▓реМрдЯрд╛рдиреЗ рд╕реЗ Ky рд░рджреНрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдПрдХ `undefined` рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╛рде рд▓реМрдЯрддрд╛ рд╣реИред рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдХрд┐рд╕реА рднреА рдкреНрд░реЙрдкрд░реНрдЯреА рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдЬрд╛рдБрдЪ рдХрд░рдирд╛ рдпрд╛ [optional chaining](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред рдпрд╣ рдмреЙрдбреА рдореЗрдердбреНрд╕, рдЬреИрд╕реЗ `.json()` рдпрд╛ `.text()` рдХреЗ рд╕рд╛рде рдЕрд╕рдВрдЧрдд рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡рд╣рд╛рдБ рдХреЛрдИ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рд╣реЛрддреАред рд╕рд╛рдорд╛рдиреНрдпрддрдГ, рд╣рдо рдЗрд╕ рд╕рд┐рдВрдмрд▓ рдХреЛ рд▓реМрдЯрд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдПрдХ рддреНрд░реБрдЯрд┐ рдлреЗрдВрдХрдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рд╕реЗ Ky рд░рджреНрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рддреНрд░реБрдЯрд┐ рдлреЗрдВрдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЗрди рд╕реАрдорд╛рдУрдВ рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

`ky.stop` рдХрд╛ рдПрдХ рдЙрдкрдпреБрдХреНрдд рдЙрдкрдпреЛрдЧ-рд╡реГрддреНрддрд╛рдВрдд рддрдм рд╣реИ рдЬрдм рд╕рд╛рдЗрдб рдЗрдлреЗрдХреНрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдБ рд░рд┐рдЯрд░реНрди рдбреЗрдЯрд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реЛрддрд╛ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреНрд▓рд╛рдЗрдВрдЯ рдЧрддрд┐рд╡рд┐рдзрд┐ рдХреЛ рд╕рд░реНрд╡рд░ рдкрд░ рд▓реЙрдЧ рдХрд░рдирд╛ред

```js
import ky from 'ky';

const options = {
	hooks: {
		beforeRetry: [
			async ({request, options, error, retryCount}) => {
				const shouldStopRetry = await ky('https://example.com/api');
				if (shouldStopRetry) {
					return ky.stop;
				}
			}
		]
	}
};
```
```markdown
// рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ `ky.stop` рд╡рд╛рдкрд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рддреЛ response `undefined` рд╣реЛрдЧрд╛ред
const response = await ky.post('https://example.com', options);

// `.text()` рдпрд╛ рдЕрдиреНрдп рдмреЙрдбреА рдореЗрдердбреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИред
const text = await ky('https://example.com', options).text();
```

### HTTPError

`instanceof` рдЬрд╛рдВрдЪ рдХреЗ рд▓рд┐рдП рдПрдХреНрд╕рдкреЛрдЬрд╝ рдХрд┐рдпрд╛ рдЧрдпрд╛ред рдЗрд╕ рддреНрд░реБрдЯрд┐ рдореЗрдВ рдПрдХ `response` рдкреНрд░реЙрдкрд░реНрдЯреА рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ [`Response` рдСрдмреНрдЬреЗрдХреНрдЯ](https://developer.mozilla.org/en-US/docs/Web/API/Response), рдПрдХ `request` рдкреНрд░реЙрдкрд░реНрдЯреА рдЬрд┐рд╕рдореЗрдВ [`Request` рдСрдмреНрдЬреЗрдХреНрдЯ](https://developer.mozilla.org/en-US/docs/Web/API/Request), рдФрд░ рдПрдХ `options` рдкреНрд░реЙрдкрд░реНрдЯреА рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕рд╛рдорд╛рдиреНрдпреАрдХреГрдд рд╡рд┐рдХрд▓реНрдк рд╣реЛрддреЗ рд╣реИрдВ (рдпрд╛ рддреЛ `ky.create()` рдХреЗ рд╕рд╛рде рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдмрдирд╛рддреЗ рд╕рдордп рдпрд╛ рд╕реАрдзреЗ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╕рдордп рдкрд╛рд╕ рдХрд┐рдП рдЧрдП)ред

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреА рддреНрд░реБрдЯрд┐рдпреЛрдВ, рдЬреИрд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рддреНрд░реБрдЯрд┐рдпрд╛рдБ, рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдЗрд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рд╣реБрдИред рдРрд╕реЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рддреНрд░реБрдЯрд┐ HTTPError рдХрд╛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдирд╣реАрдВ рд╣реЛрдЧреА рдФрд░ рдЙрд╕рдореЗрдВ `response` рдкреНрд░реЙрдкрд░реНрдЯреА рдирд╣реАрдВ рд╣реЛрдЧреАред

рдпрджрд┐ рдЖрдкрдХреЛ HTTPError рд╣реЛрдиреЗ рдкрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкрдврд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ response рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд░ рд╕рдВрдмрдВрдзрд┐рдд рдкрд╛рд░реНрд╕рд░ рдореЗрдердб рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:

```js
try {
	await ky('https://example.com').json();
} catch (error) {
	if (error.name === 'HTTPError') {
		const errorJson = await error.response.json();
	}
}
```

тМия╕П **TypeScript:** рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ [type parameter](https://www.typescriptlang.org/docs/handbook/2/generics.html) рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ [`unknown`](https://www.typescriptlang.org/docs/handbook/2/functions.html#unknown) рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕реЗ `error.response.json()` рдХреЗ рд░рд┐рдЯрд░реНрди рдЯрд╛рдЗрдк рдореЗрдВ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

### TimeoutError

рд╡рд╣ рддреНрд░реБрдЯрд┐ рдЬреЛ рдЕрдиреБрд░реЛрдз рдХреЗ рд╕рдордп рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рдкрд░ рдлреЗрдВрдХреА рдЬрд╛рддреА рд╣реИред рдЗрд╕рдореЗрдВ [`Request` рдСрдмреНрдЬреЗрдХреНрдЯ](https://developer.mozilla.org/en-US/docs/Web/API/Request) рдХреЗ рд╕рд╛рде рдПрдХ `request` рдкреНрд░реЙрдкрд░реНрдЯреА рд╣реЛрддреА рд╣реИред

## рдЯрд┐рдкреНрд╕

### рдлреЙрд░реНрдо рдбреЗрдЯрд╛ рднреЗрдЬрдирд╛

Ky рдореЗрдВ рдлреЙрд░реНрдо рдбреЗрдЯрд╛ рднреЗрдЬрдирд╛ `fetch` рдХреЗ рд╕рдорд╛рди рд╣реИред рдмрд╕ [`FormData`](https://developer.mozilla.org/en-US/docs/Web/API/FormData) рдХреА рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ `body` рд╡рд┐рдХрд▓реНрдк рдореЗрдВ рдкрд╛рд╕ рдХрд░реЗрдВред `Content-Type` рд╣реИрдбрд░ рд╕реНрд╡рддрдГ `multipart/form-data` рдкрд░ рд╕реЗрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред

```js
import ky from 'ky';

// `multipart/form-data`
const formData = new FormData();
formData.append('food', 'fries');
formData.append('drink', 'icetea');

const response = await ky.post(url, {body: formData});
```

рдпрджрд┐ рдЖрдк рдбреЗрдЯрд╛ рдХреЛ `application/x-www-form-urlencoded` рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рднреЗрдЬрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдбреЗрдЯрд╛ рдХреЛ [`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams) рдХреЗ рд╕рд╛рде рдПрдиреНрдХреЛрдб рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред

```js
import ky from 'ky';

// `application/x-www-form-urlencoded`
const searchParams = new URLSearchParams();
searchParams.set('food', 'fries');
searchParams.set('drink', 'icetea');

const response = await ky.post(url, {body: searchParams});
```

### рдХрд╕реНрдЯрдо `Content-Type` рд╕реЗрдЯ рдХрд░рдирд╛

Ky рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрд░реЛрдз рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдмреЙрдбреА рдХреЗ рдбреЗрдЯрд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЙрдкрдпреБрдХреНрдд [`Content-Type`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type) рд╣реИрдбрд░ рд╕реНрд╡рддрдГ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдХреБрдЫ API рдХреЛ рдХрд╕реНрдЯрдо, рдЧреИрд░-рдорд╛рдирдХ рдХрдВрдЯреЗрдВрдЯ рдЯрд╛рдЗрдк рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ `application/x-amz-json-1.1`ред `headers` рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдХрдВрдЯреЗрдВрдЯ рдЯрд╛рдЗрдк рдХреЛ рдореИрдиреНрдпреБрдЕрд▓реА рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

```js
import ky from 'ky';

const json = await ky.post('https://example.com', {
	headers: {
		'content-type': 'application/json'
	},
	json: {
		foo: true
	},
}).json();

console.log(json);
//=> {data: 'ЁЯжД'}
```

### рдЕрдиреБрд░реЛрдз рд░рджреНрдж рдХрд░рдирд╛

Fetch (рдФрд░ рдЗрд╕рд▓рд┐рдП Ky) рдореЗрдВ [`AbortController` API](https://developer.mozilla.org/en-US/docs/Web/API/AbortController) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдиреБрд░реЛрдз рд░рджреНрдж рдХрд░рдиреЗ рдХрд╛ рдЗрдирдмрд┐рд▓реНрдЯ рд╕рдорд░реНрдерди рд╣реИред [рдФрд░ рдкрдврд╝реЗрдВред](https://developers.google.com/web/updates/2017/09/abortable-fetch)

рдЙрджрд╛рд╣рд░рдг:

```js
import ky from 'ky';

const controller = new AbortController();
const {signal} = controller;

setTimeout(() => {
	controller.abort();
}, 5000);

try {
	console.log(await ky(url, {signal}).text());
} catch (error) {
	if (error.name === 'AbortError') {
		console.log('Fetch aborted');
	} else {
		console.error('Fetch error:', error);
	}
}
```

## рдЕрдХреНрд╕рд░ рдкреВрдЫреЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рд╢реНрди (FAQ)

#### рдореИрдВ рдЗрд╕реЗ Node.js рдореЗрдВ рдХреИрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░реВрдВ?

Node.js 18 рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж fetch рдХреЛ рдиреЗрдЯрд┐рд╡ рд░реВрдк рд╕реЗ рд╕рдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдк рдЗрд╕ рдкреИрдХреЗрдЬ рдХрд╛ рд╕реАрдзреЗ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

#### рдореИрдВ рдЗрд╕реЗ рд╡реЗрдм рдРрдк (React, Vue.js, рдЖрджрд┐) рдореЗрдВ рдХреИрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░реВрдВ рдЬрд┐рд╕рдореЗрдВ рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рд░реЗрдВрдбрд░рд┐рдВрдЧ (SSR) рд╣реЛ?

рдКрдкрд░ рдЬреИрд╕рд╛ рд╣реАред

#### рдореИрдВ рдЙрд╕ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХреИрд╕реЗ рдХрд░реВрдВ рдЬреЛ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИ?

рдпрд╛ рддреЛ Mocha рдЬреИрд╕реЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдЯреЗрд╕реНрдЯ рд░рдирд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдпрд╛ [AVA](https://avajs.dev) рдХреЛ `ky-universal` рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред [рдФрд░ рдкрдврд╝реЗрдВред](https://github.com/sindresorhus/ky-universal#faq)

#### рдореИрдВ рдЗрд╕реЗ Webpack рдЬреИрд╕реЗ рдмрдВрдбрд▓рд░ рдХреЗ рдмрд┐рдирд╛ рдХреИрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░реВрдВ?

рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХрд╛ рдХреЛрдб рдПрдХ JavaScript рдореЙрдбреНрдпреВрд▓ (ESM) рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ HTML рдбреЙрдХреНрдпреБрдореЗрдВрдЯ рдореЗрдВ `<script type="module">` рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред рддрдм Ky рдХреЛ рдЙрд╕ рдореЙрдбреНрдпреВрд▓ рджреНрд╡рд╛рд░рд╛ рдмрд┐рдирд╛ рдХрд┐рд╕реА рдмрдВрдбрд▓рд░ рдпрд╛ рдЕрдиреНрдп рдЯреВрд▓реНрд╕ рдХреЗ рд╕реАрдзреЗ рдЖрдпрд╛рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

```html
<script type="module">
import ky from 'https://unpkg.com/ky/distribution/index.js';

const json = await ky('https://jsonplaceholder.typicode.com/todos/1').json();

console.log(json.title);
//=> 'delectus aut autem'
</script>
```

#### рдпрд╣ [`got`](https://github.com/sindresorhus/got) рд╕реЗ рдХреИрд╕реЗ рдЕрд▓рдЧ рд╣реИ?

рдореЗрд░рд╛ рдЙрддреНрддрд░ [рдпрд╣рд╛рдБ](https://twitter.com/sindresorhus/status/1037406558945042432) рджреЗрдЦреЗрдВред Got рдХреЛ Ky рдХреЗ рд╕рдорд╛рди рд╣реА рд▓реЛрдЧ рдореЗрдВрдЯреЗрди рдХрд░рддреЗ рд╣реИрдВред

#### рдпрд╣ [`axios`](https://github.com/axios/axios) рд╕реЗ рдХреИрд╕реЗ рдЕрд▓рдЧ рд╣реИ?

рдореЗрд░рд╛ рдЙрддреНрддрд░ [рдпрд╣рд╛рдБ](https://twitter.com/sindresorhus/status/1037763588826398720) рджреЗрдЦреЗрдВред

#### рдпрд╣ [`r2`](https://github.com/mikeal/r2) рд╕реЗ рдХреИрд╕реЗ рдЕрд▓рдЧ рд╣реИ?

[#10](https://github.com/sindresorhus/ky/issues/10) рдореЗрдВ рдореЗрд░рд╛ рдЙрддреНрддрд░ рджреЗрдЦреЗрдВред

#### `ky` рдХрд╛ рдХреНрдпрд╛ рдЕрд░реНрде рд╣реИ?

рдпрд╣ рд╕рд┐рд░реНрдл рдПрдХ рд░реИрдВрдбрдо рдЫреЛрдЯрд╛ npm рдкреИрдХреЗрдЬ рдирд╛рдо рд╣реИ рдЬреЛ рдореБрдЭреЗ рдорд┐рд▓ рдЧрдпрд╛ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕рдХрд╛ рдЬрд╛рдкрд╛рдиреА рдореЗрдВ рдПрдХ рдЕрд░реНрде рд╣реИ:

> рдЯреЗрдХреНрд╕реНрдЯ рдпреЛрдЧреНрдп рд╕реНрд▓реИрдВрдЧ рдХрд╛ рдПрдХ рд░реВрдк, KY рдХрд╛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд░реВрдк рд╣реИ чй║ц░ЧшкнуВБуБкуБД (kuuki yomenai), рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ тАЬрд╣рд╡рд╛ рдирд╣реАрдВ рдкрдврд╝ рд╕рдХрддрд╛редтАЭ рдпрд╣ рдЙрд╕ рд╡реНрдпрдХреНрддрд┐ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдирд┐рд╣рд┐рдд рдЕрд░реНрде рдирд╣реАрдВ рд╕рдордЭрддрд╛ рд╣реИред

## рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд╕рдорд░реНрдерди

Chrome, Firefox, рдФрд░ Safari рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдгред

## Node.js рд╕рдорд░реНрдерди

Node.js 18 рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рдХреЗ рд╕рдВрд╕реНрдХрд░рдгред

## рд╕рдВрдмрдВрдзрд┐рдд

- [fetch-extras](https://github.com/sindresorhus/fetch-extras) - Fetch рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рдпреВрдЯрд┐рд▓рд┐рдЯреАрдЬ
- [ky-hooks-change-case](https://github.com/alice-health/ky-hooks-change-case) - рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЗ рдЕрдиреБрд░реЛрдз рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдкрд░ рдХреЗрд╕ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП Ky hooks

## рдореЗрдВрдЯреЗрдирд░

- [Sindre Sorhus](https://github.com/sindresorhus)
- [Seth Holladay](https://github.com/sholladay)
- [Szymon Marczak](https://github.com/szmarczak)
```


---

Tranlated By [Open Ai Tx](https://github.com/OpenAiTx/OpenAiTx) | Last indexed: 2025-06-11

---