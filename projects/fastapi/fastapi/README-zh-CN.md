<p align="center">
  <a href="https://fastapi.tiangolo.com"><img src="https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png" alt="FastAPI"></a>
</p>
<p align="center">
    <em>FastAPI æ¡†æ¶ï¼Œé«˜æ€§èƒ½ï¼Œæ˜“å­¦ï¼Œå¼€å‘è¿…é€Ÿï¼Œéšæ—¶å¯ç”¨äºç”Ÿäº§ç¯å¢ƒ</em>
</p>
<p align="center">
<a href="https://github.com/fastapi/fastapi/actions?query=workflow%3ATest+event%3Apush+branch%3Amaster" target="_blank">
    <img src="https://github.com/fastapi/fastapi/actions/workflows/test.yml/badge.svg?event=push&branch=master" alt="Test">
</a>
<a href="https://coverage-badge.samuelcolvin.workers.dev/redirect/fastapi/fastapi" target="_blank">
    <img src="https://coverage-badge.samuelcolvin.workers.dev/fastapi/fastapi.svg" alt="Coverage">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://img.shields.io/pypi/v/fastapi?color=%2334D058&label=pypi%20package" alt="Package version">
</a>
<a href="https://pypi.org/project/fastapi" target="_blank">
    <img src="https://img.shields.io/pypi/pyversions/fastapi.svg?color=%2334D058" alt="Supported Python versions">
</a>
</p>

---

**æ–‡æ¡£**ï¼š<a href="https://fastapi.tiangolo.com" target="_blank">https://fastapi.tiangolo.com</a>

**æºç **ï¼š<a href="https://github.com/fastapi/fastapi" target="_blank">https://github.com/fastapi/fastapi</a>

---

FastAPI æ˜¯ä¸€ä¸ªç°ä»£ã€å¿«é€Ÿï¼ˆé«˜æ€§èƒ½ï¼‰çš„ Web æ¡†æ¶ï¼Œç”¨äºåŸºäºæ ‡å‡† Python ç±»å‹æç¤ºæ„å»º Python APIã€‚

ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼š

* **å¿«**ï¼šæ€§èƒ½éå¸¸é«˜ï¼Œå¯ä¸ **NodeJS** å’Œ **Go** ç›¸åª²ç¾ï¼ˆå½’åŠŸäº Starlette å’Œ Pydanticï¼‰ã€‚[æ˜¯ç°æœ‰æœ€å¿«çš„ Python æ¡†æ¶ä¹‹ä¸€](#performance)ã€‚
* **å¼€å‘å¿«**ï¼šå¼€å‘æ–°åŠŸèƒ½çš„é€Ÿåº¦æå‡çº¦ 200% åˆ° 300%ã€‚*
* **æ›´å°‘çš„ Bug**ï¼šäººä¸ºï¼ˆå¼€å‘è€…ï¼‰é”™è¯¯çº¦å‡å°‘ 40%ã€‚*
* **ç›´è§‚**ï¼šä¼˜ç§€çš„ç¼–è¾‘å™¨æ”¯æŒã€‚<abbr title="ä¹Ÿç§°ä¸ºè‡ªåŠ¨è¡¥å…¨ã€è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ã€IntelliSense">å…¨ç¨‹è¡¥å…¨</abbr>ã€‚è°ƒè¯•æ—¶é—´æ›´å°‘ã€‚
* **ç®€å•**ï¼šè®¾è®¡æ˜“ç”¨æ˜“å­¦ã€‚å‡å°‘æŸ¥é˜…æ–‡æ¡£æ—¶é—´ã€‚
* **ç®€æ´**ï¼šæœ€å°åŒ–ä»£ç é‡å¤ã€‚æ¯ä¸ªå‚æ•°å£°æ˜å¯è·å¾—å¤šç§åŠŸèƒ½ã€‚æ›´å°‘ Bugã€‚
* **å¥å£®**ï¼šè·å¾—å¯ç”¨äºç”Ÿäº§çš„ä»£ç ã€‚è‡ªå¸¦è‡ªåŠ¨äº¤äº’å¼æ–‡æ¡£ã€‚
* **åŸºäºæ ‡å‡†**ï¼šåŸºäºï¼ˆå¹¶å®Œå…¨å…¼å®¹ï¼‰API çš„å¼€æ”¾æ ‡å‡†ï¼š<a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a>ï¼ˆå‰ç§° Swaggerï¼‰å’Œ <a href="https://json-schema.org/" class="external-link" target="_blank">JSON Schema</a>ã€‚

<small>* åŸºäºå†…éƒ¨å¼€å‘å›¢é˜Ÿæ„å»ºç”Ÿäº§åº”ç”¨çš„æµ‹è¯•ä¼°ç®—ã€‚</small>

## èµåŠ©å•†

<!-- sponsors -->

<a href="https://blockbee.io?ref=fastapi" target="_blank" title="BlockBee Cryptocurrency Payment Gateway"><img src="https://fastapi.tiangolo.com/img/sponsors/blockbee.png"></a>
<a href="https://platform.sh/try-it-now/?utm_source=fastapi-signup&utm_medium=banner&utm_campaign=FastAPI-signup-June-2023" target="_blank" title="Build, run and scale your apps on a modern, reliable, and secure PaaS."><img src="https://fastapi.tiangolo.com/img/sponsors/platform-sh.png"></a>
<a href="https://www.porter.run" target="_blank" title="Deploy FastAPI on AWS with a few clicks"><img src="https://fastapi.tiangolo.com/img/sponsors/porter.png"></a>
<a href="https://github.com/scalar/scalar/?utm_source=fastapi&utm_medium=website&utm_campaign=main-badge" target="_blank" title="Scalar: Beautiful Open-Source API References from Swagger/OpenAPI files"><img src="https://fastapi.tiangolo.com/img/sponsors/scalar.svg"></a>
<a href="https://www.propelauth.com/?utm_source=fastapi&utm_campaign=1223&utm_medium=mainbadge" target="_blank" title="Auth, user management and more for your B2B product"><img src="https://fastapi.tiangolo.com/img/sponsors/propelauth.png"></a>
<a href="https://zuplo.link/fastapi-gh" target="_blank" title="Zuplo: Deploy, Secure, Document, and Monetize your FastAPI"><img src="https://fastapi.tiangolo.com/img/sponsors/zuplo.png"></a>
<a href="https://liblab.com?utm_source=fastapi" target="_blank" title="liblab - Generate SDKs from FastAPI"><img src="https://fastapi.tiangolo.com/img/sponsors/liblab.png"></a>
<a href="https://docs.render.com/deploy-fastapi?utm_source=deploydoc&utm_medium=referral&utm_campaign=fastapi" target="_blank" title="Deploy & scale any full-stack web app on Render. Focus on building apps, not infra."><img src="https://fastapi.tiangolo.com/img/sponsors/render.svg"></a>
<a href="https://www.coderabbit.ai/?utm_source=fastapi&utm_medium=badge&utm_campaign=fastapi" target="_blank" title="Cut Code Review Time & Bugs in Half with CodeRabbit"><img src="https://fastapi.tiangolo.com/img/sponsors/coderabbit.png"></a>
<a href="https://subtotal.com/?utm_source=fastapi&utm_medium=sponsorship&utm_campaign=open-source" target="_blank" title="The Gold Standard in Retail Account Linking"><img src="https://fastapi.tiangolo.com/img/sponsors/subtotal.svg"></a>
<a href="https://databento.com/" target="_blank" title="Pay as you go for market data"><img src="https://fastapi.tiangolo.com/img/sponsors/databento.svg"></a>
<a href="https://speakeasy.com?utm_source=fastapi+repo&utm_medium=github+sponsorship" target="_blank" title="SDKs for your API | Speakeasy"><img src="https://fastapi.tiangolo.com/img/sponsors/speakeasy.png"></a>
<a href="https://www.svix.com/" target="_blank" title="Svix - Webhooks as a service"><img src="https://fastapi.tiangolo.com/img/sponsors/svix.svg"></a>
<a href="https://www.stainlessapi.com/?utm_source=fastapi&utm_medium=referral" target="_blank" title="Stainless | Generate best-in-class SDKs"><img src="https://fastapi.tiangolo.com/img/sponsors/stainless.png"></a>
<a href="https://www.permit.io/blog/implement-authorization-in-fastapi?utm_source=github&utm_medium=referral&utm_campaign=fastapi" target="_blank" title="Fine-Grained Authorization for FastAPI"><img src="https://fastapi.tiangolo.com/img/sponsors/permit.png"></a>
<a href="https://www.interviewpal.com/?utm_source=fastapi&utm_medium=open-source&utm_campaign=dev-hiring" target="_blank" title="InterviewPal - AI Interview Coach for Engineers and Devs"><img src="https://fastapi.tiangolo.com/img/sponsors/interviewpal.png"></a>
<a href="https://dribia.com/en/" target="_blank" title="Dribia - Data Science within your reach"><img src="https://fastapi.tiangolo.com/img/sponsors/dribia.png"></a>

<!-- /sponsors -->

<a href="https://fastapi.tiangolo.com/fastapi-people/#sponsors" class="external-link" target="_blank">æ›´å¤šèµåŠ©å•†</a>

## ç”¨æˆ·è¯„ä»·

â€œ_[...] æˆ‘æœ€è¿‘å¤§é‡ä½¿ç”¨ **FastAPI**ã€‚[...] å®é™…ä¸Šæˆ‘æ‰“ç®—å°†å®ƒç”¨äºæˆ‘åœ¨å¾®è½¯å›¢é˜Ÿçš„æ‰€æœ‰ **æœºå™¨å­¦ä¹ æœåŠ¡**ã€‚æœ‰äº›æœåŠ¡ä¼šé›†æˆè¿›æ ¸å¿ƒ **Windows** äº§å“ï¼Œè¿˜æœ‰ä¸€äº›é›†æˆåˆ° **Office** äº§å“ä¸­ã€‚_â€

<div style="text-align: right; margin-right: 10%;">Kabir Khan - <strong>å¾®è½¯ï¼ˆMicrosoftï¼‰</strong> <a href="https://github.com/fastapi/fastapi/pull/26" target="_blank"><small>(å¼•ç”¨)</small></a></div>

---

â€œ_æˆ‘ä»¬é‡‡ç”¨äº† **FastAPI** åº“æ¥ç”Ÿæˆä¸€ä¸ª **REST** æœåŠ¡å™¨ï¼Œå¯ç”¨äºè·å¾— **é¢„æµ‹ç»“æœ**ã€‚[ç”¨äº Ludwig]_â€

<div style="text-align: right; margin-right: 10%;">Piero Molinoã€Yaroslav Dudin å’Œ Sai Sumanth Miryala - <strong>Uber</strong> <a href="https://eng.uber.com/ludwig-v0-2/" target="_blank"><small>(å¼•ç”¨)</small></a></div>

---

â€œ_**Netflix** å¾ˆé«˜å…´å®£å¸ƒæˆ‘ä»¬å‘å¸ƒäº†å¼€æºçš„ **å±æœºç®¡ç†** åè°ƒæ¡†æ¶ï¼š**Dispatch**ï¼[åŸºäº **FastAPI** æ„å»º]_â€

<div style="text-align: right; margin-right: 10%;">Kevin Glissonã€Marc Vilanovaã€Forest Monsen - <strong>Netflix</strong> <a href="https://netflixtechblog.com/introducing-dispatch-da4b8a2a8072" target="_blank"><small>(å¼•ç”¨)</small></a></div>

---

â€œ_æˆ‘å¯¹ **FastAPI** æ„Ÿåˆ°æ— æ¯”å…´å¥‹ã€‚çœŸçš„å¾ˆæœ‰è¶£ï¼_â€

<div style="text-align: right; margin-right: 10%;">Brian Okken - <strong><a href="https://pythonbytes.fm/episodes/show/123/time-to-right-the-py-wrongs?time_in_sec=855" target="_blank">Python Bytes</a> æ’­å®¢ä¸»æŒäºº</strong> <a href="https://twitter.com/brianokken/status/1112220079972728832" target="_blank"><small>(å¼•ç”¨)</small></a></div>

---

â€œ_è¯´å®è¯ï¼Œä½ åšå¾—å¾ˆæ‰å®ä¸”ç²¾è‡´ã€‚åœ¨å¾ˆå¤šæ–¹é¢ï¼Œè¿™å°±æ˜¯æˆ‘å¸Œæœ› **Hug** æˆä¸ºçš„æ ·å­â€”â€”çœ‹åˆ°æœ‰äººèƒ½å®ç°å‡ºæ¥çœŸçš„å¾ˆé¼“èˆäººå¿ƒã€‚_â€

<div style="text-align: right; margin-right: 10%;">Timothy Crosley - <strong><a href="https://github.com/hugapi/hug" target="_blank">Hug</a> åˆ›å§‹äºº</strong> <a href="https://news.ycombinator.com/item?id=19455465" target="_blank"><small>(å¼•ç”¨)</small></a></div>

---

â€œ_å¦‚æœä½ æƒ³å­¦ä¹ ä¸€ä¸ªç”¨äºæ„å»º REST API çš„**ç°ä»£æ¡†æ¶**ï¼Œè¯·è¯•è¯• **FastAPI** [...] å®ƒå¿«é€Ÿã€æ˜“ç”¨ä¸”æ˜“å­¦ [...]_â€

â€œ_æˆ‘ä»¬å·²ç»å°†æˆ‘ä»¬çš„ **API** åˆ‡æ¢åˆ° **FastAPI** [...] æˆ‘è§‰å¾—ä½ ä¼šå–œæ¬¢å®ƒ [...]_â€

<div style="text-align: right; margin-right: 10%;">Ines Montani - Matthew Honnibal - <strong><a href="https://explosion.ai" target="_blank">Explosion AI</a> åˆ›å§‹äºº - <a href="https://spacy.io" target="_blank">spaCy</a> åˆ›ä½œè€…</strong> <a href="https://twitter.com/_inesmontani/status/1144173225322143744" target="_blank"><small>(å¼•ç”¨)</small></a> - <a href="https://twitter.com/honnibal/status/1144031421859655680" target="_blank"><small>(å¼•ç”¨)</small></a></div>

---

â€œ_å¦‚æœæœ‰äººæ‰“ç®—æ„å»ºç”Ÿäº§çº§çš„ Python APIï¼Œæˆ‘ä¼šå¼ºçƒˆæ¨è **FastAPI**ã€‚å®ƒ**è®¾è®¡ä¼˜é›…**ï¼Œ**ä½¿ç”¨ç®€å•**ä¸”**é«˜åº¦å¯æ‰©å±•**ï¼Œå·²ç»æˆä¸ºæˆ‘ä»¬ API ä¼˜å…ˆå¼€å‘ç­–ç•¥çš„**å…³é”®ç»„ä»¶**ï¼Œå¹¶é©±åŠ¨äº†è®¸å¤šè‡ªåŠ¨åŒ–å’ŒæœåŠ¡ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„è™šæ‹Ÿ TAC å·¥ç¨‹å¸ˆã€‚_â€

<div style="text-align: right; margin-right: 10%;">Deon Pillsbury - <strong>Cisco</strong> <a href="https://www.linkedin.com/posts/deonpillsbury_cisco-cx-python-activity-6963242628536487936-trAp/" target="_blank"><small>(å¼•ç”¨)</small></a></div>

---

## **Typer**ï¼šå‘½ä»¤è¡Œç•Œé¢çš„ FastAPI

<a href="https://typer.tiangolo.com" target="_blank"><img src="https://typer.tiangolo.com/img/logo-margin/logo-margin-vector.svg" style="width: 20%;"></a>

å¦‚æœä½ è¦æ„å»ºä¸€ä¸ªåœ¨ç»ˆç«¯ä½¿ç”¨çš„ <abbr title="å‘½ä»¤è¡Œç•Œé¢">CLI</abbr> åº”ç”¨ï¼Œè€Œä¸æ˜¯ Web APIï¼Œå¯ä»¥çœ‹çœ‹ <a href="https://typer.tiangolo.com/" class="external-link" target="_blank">**Typer**</a>ã€‚

**Typer** æ˜¯ FastAPI çš„â€œå°å…„å¼Ÿâ€ã€‚å®ƒæ—¨åœ¨æˆä¸º**å‘½ä»¤è¡Œç•Œé¢çš„ FastAPI**ã€‚âŒ¨ï¸ ğŸš€

## ä¾èµ–è¦æ±‚

FastAPI åŸºäºä»¥ä¸‹â€œå·¨äººä¹‹è‚©â€ï¼š

* <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a> â€”â€” Web ç›¸å…³éƒ¨åˆ†ã€‚
* <a href="https://docs.pydantic.dev/" class="external-link" target="_blank">Pydantic</a> â€”â€” æ•°æ®ç›¸å…³éƒ¨åˆ†ã€‚

## å®‰è£…

åˆ›å»ºå¹¶æ¿€æ´»ä¸€ä¸ª<a href="https://fastapi.tiangolo.com/virtual-environments/" class="external-link" target="_blank">è™šæ‹Ÿç¯å¢ƒ</a>ï¼Œç„¶åå®‰è£… FastAPIï¼š

<div class="termy">

```console
$ pip install "fastapi[standard]"

---> 100%
```

</div>

**æ³¨æ„**ï¼šè¯·ç¡®ä¿å°† `"fastapi[standard]"` ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œä»¥ä¿è¯åœ¨æ‰€æœ‰ç»ˆç«¯éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

## ç¤ºä¾‹

### åˆ›å»º

åˆ›å»ºæ–‡ä»¶ `main.py`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```Python
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

<details markdown="1">
<summary>æˆ–ä½¿ç”¨ <code>async def</code>...</summary>

å¦‚æœä½ çš„ä»£ç ç”¨åˆ°äº† `async` / `await`ï¼Œè¯·ä½¿ç”¨ `async def`ï¼š

```Python hl_lines="9  14"
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
async def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

**æ³¨æ„**ï¼š

å¦‚æœä½ ä¸äº†è§£ï¼Œè¯·æŸ¥é˜…æ–‡æ¡£ä¸­<a href="https://fastapi.tiangolo.com/async/#in-a-hurry" target="_blank">å…³äº `async` å’Œ `await` çš„â€œèµ¶æ—¶é—´ï¼Ÿâ€ç« èŠ‚</a>ã€‚

</details>

### è¿è¡Œ

ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨ï¼š

<div class="termy">

```console
$ fastapi dev main.py

 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FastAPI CLI - Development mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚                                                     â”‚
 â”‚  Serving at: http://127.0.0.1:8000                  â”‚
 â”‚                                                     â”‚
 â”‚  API docs: http://127.0.0.1:8000/docs               â”‚
 â”‚                                                     â”‚
 â”‚  Running in development mode, for production use:   â”‚
 â”‚                                                     â”‚
 â”‚  fastapi run                                        â”‚
 â”‚                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

INFO:     Will watch for changes in these directories: ['/home/user/code/awesomeapp']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [2248755] using WatchFiles
INFO:     Started server process [2248757]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

</div>

<details markdown="1">
<summary>å…³äºå‘½ä»¤ <code>fastapi dev main.py</code>...</summary>

å‘½ä»¤ `fastapi dev` ä¼šè¯»å–ä½ çš„ `main.py` æ–‡ä»¶ï¼Œæ£€æµ‹å…¶ä¸­çš„ **FastAPI** åº”ç”¨ï¼Œå¹¶ä½¿ç”¨ <a href="https://www.uvicorn.org" class="external-link" target="_blank">Uvicorn</a> å¯åŠ¨æœåŠ¡å™¨ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`fastapi dev` ä¼šè‡ªåŠ¨å¼€å¯æœ¬åœ°å¼€å‘çš„è‡ªåŠ¨é‡è½½ã€‚

ä½ å¯ä»¥åœ¨ <a href="https://fastapi.tiangolo.com/fastapi-cli/" target="_blank">FastAPI CLI æ–‡æ¡£</a> ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚

</details>

### è®¿é—®

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <a href="http://127.0.0.1:8000/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1:8000/items/5?q=somequery</a>ã€‚

ä½ ä¼šçœ‹åˆ°å¦‚ä¸‹ JSON å“åº”ï¼š

```JSON
{"item_id": 5, "q": "somequery"}
```

ä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ª APIï¼Œå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š

* åœ¨è·¯å¾„ `/` å’Œ `/items/{item_id}` æ¥æ”¶ HTTP è¯·æ±‚ã€‚
* ä¸¤ä¸ªè·¯å¾„éƒ½æ”¯æŒ `GET` <em>æ“ä½œ</em>ï¼ˆä¹Ÿç§° HTTP _æ–¹æ³•_ï¼‰ã€‚
* è·¯å¾„ `/items/{item_id}` æœ‰ä¸€ä¸ªè·¯å¾„å‚æ•° `item_id`ï¼Œç±»å‹ä¸º `int`ã€‚
* è·¯å¾„ `/items/{item_id}` æœ‰ä¸€ä¸ªå¯é€‰çš„å­—ç¬¦ä¸²ç±»å‹æŸ¥è¯¢å‚æ•° `q`ã€‚

### äº¤äº’å¼ API æ–‡æ¡£

ç°åœ¨è®¿é—® <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>ã€‚

ä½ ä¼šçœ‹åˆ°è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼ API æ–‡æ¡£ï¼ˆç”± <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a> æä¾›ï¼‰ï¼š

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### æ›¿ä»£ API æ–‡æ¡£

å†è®¿é—® <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>ã€‚

ä½ ä¼šçœ‹åˆ°å¦ä¸€ç§è‡ªåŠ¨æ–‡æ¡£ç•Œé¢ï¼ˆç”± <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a> æä¾›ï¼‰ï¼š

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## ç¤ºä¾‹å‡çº§

ç°åœ¨å°† `main.py` æ–‡ä»¶ä¿®æ”¹ä¸ºæ¥æ”¶ `PUT` è¯·æ±‚çš„è¯·æ±‚ä½“ã€‚

é€šè¿‡ Pydanticï¼Œä½¿ç”¨æ ‡å‡† Python ç±»å‹å£°æ˜è¯·æ±‚ä½“ã€‚

```Python hl_lines="4  9-12  25-27"
from typing import Union

from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()


class Item(BaseModel):
    name: str
    price: float
    is_offer: Union[bool, None] = None


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}


@app.put("/items/{item_id}")
def update_item(item_id: int, item: Item):
    return {"item_name": item.name, "item_id": item_id}
```

`fastapi dev` æœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡è½½ã€‚

### äº¤äº’å¼ API æ–‡æ¡£å‡çº§

å†æ¬¡è®¿é—® <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>ã€‚

* äº¤äº’å¼ API æ–‡æ¡£ä¼šè‡ªåŠ¨æ›´æ–°ï¼ŒåŒ…æ‹¬æ–°çš„è¯·æ±‚ä½“ï¼š

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-03-swagger-02.png)

* ç‚¹å‡» "Try it out" æŒ‰é’®ï¼Œå¯ä»¥å¡«å†™å‚æ•°å¹¶ç›´æ¥ä¸ API äº¤äº’ï¼š

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-04-swagger-03.png)

* ç„¶åç‚¹å‡» "Execute" æŒ‰é’®ï¼Œç•Œé¢ä¼šä¸ API é€šä¿¡ï¼Œå‘é€å‚æ•°ï¼Œè·å–ç»“æœå¹¶æ˜¾ç¤ºå‡ºæ¥ï¼š

![Swagger UI interaction](https://fastapi.tiangolo.com/img/index/index-05-swagger-04.png)

### æ›¿ä»£ API æ–‡æ¡£å‡çº§

å†è®¿é—® <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>ã€‚

* æ›¿ä»£æ–‡æ¡£ä¹Ÿä¼šåæ˜ æ–°çš„æŸ¥è¯¢å‚æ•°å’Œè¯·æ±‚ä½“ï¼š

![ReDoc](https://fastapi.tiangolo.com/img/index/index-06-redoc-02.png)

### æ€»ç»“

æ€»ä¹‹ï¼Œä½ åªéœ€**ä¸€æ¬¡æ€§**å£°æ˜å‚æ•°ã€è¯·æ±‚ä½“ç­‰çš„ç±»å‹ï¼ˆä½œä¸ºå‡½æ•°å‚æ•°ï¼‰ã€‚

è¿™äº›éƒ½æ˜¯æ ‡å‡†çš„ç°ä»£ Python ç±»å‹ã€‚

ä½ æ— éœ€å­¦ä¹ æ–°è¯­æ³•ã€ç‰¹å®šåº“çš„æ–¹æ³•æˆ–ç±»ç­‰ã€‚

åªç”¨æ ‡å‡†çš„ **Python**ã€‚

ä¾‹å¦‚ï¼Œä¸€ä¸ª `int` ç±»å‹ï¼š

```Python
item_id: int
```

æˆ–æ›´å¤æ‚çš„ `Item` æ¨¡å‹ï¼š

```Python
item: Item
```

...é€šè¿‡è¿™å”¯ä¸€çš„å£°æ˜ï¼Œä½ å°±èƒ½è·å¾—ï¼š

* ç¼–è¾‘å™¨æ”¯æŒï¼ŒåŒ…æ‹¬ï¼š
    * è‡ªåŠ¨è¡¥å…¨ã€‚
    * ç±»å‹æ£€æŸ¥ã€‚
* æ•°æ®éªŒè¯ï¼š
    * å½“æ•°æ®æ— æ•ˆæ—¶è‡ªåŠ¨ä¸”æ¸…æ™°çš„é”™è¯¯æç¤ºã€‚
    * å¯¹æ·±å±‚åµŒå¥— JSON å¯¹è±¡çš„éªŒè¯ã€‚
* è¾“å…¥æ•°æ®<abbr title="ä¹Ÿç§°ä¸ºï¼šåºåˆ—åŒ–ã€è§£æã€å°é€">è½¬æ¢</abbr>ï¼šä»ç½‘ç»œåˆ° Python æ•°æ®å’Œç±»å‹ã€‚æ”¯æŒè¯»å–ï¼š
    * JSON
    * è·¯å¾„å‚æ•°
    * æŸ¥è¯¢å‚æ•°
    * Cookies
    * Headers
    * è¡¨å•
    * æ–‡ä»¶
* è¾“å‡ºæ•°æ®<abbr title="ä¹Ÿç§°ä¸ºï¼šåºåˆ—åŒ–ã€è§£æã€å°é€">è½¬æ¢</abbr>ï¼šä» Python æ•°æ®ç±»å‹è½¬æ¢ä¸ºç½‘ç»œæ•°æ®ï¼ˆå¦‚ JSONï¼‰ï¼š
    * æ”¯æŒ Python ç±»å‹ï¼ˆ`str`ã€`int`ã€`float`ã€`bool`ã€`list` ç­‰ï¼‰ã€‚
    * `datetime` å¯¹è±¡ã€‚
    * `UUID` å¯¹è±¡ã€‚
    * æ•°æ®åº“æ¨¡å‹ã€‚
    * ...ä»¥åŠæ›´å¤šç±»å‹ã€‚
* è‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼ API æ–‡æ¡£ï¼ŒåŒ…æ‹¬ä¸¤ç§ç”¨æˆ·ç•Œé¢ï¼š
    * Swagger UI
    * ReDoc

---

å›åˆ°å‰é¢çš„ç¤ºä¾‹ä»£ç ï¼Œ**FastAPI** ä¼šï¼š

* æ ¡éªŒ `GET` å’Œ `PUT` è¯·æ±‚è·¯å¾„ä¸­æ˜¯å¦æœ‰ `item_id`ã€‚
* æ ¡éªŒ `GET` å’Œ `PUT` è¯·æ±‚çš„ `item_id` ç±»å‹æ˜¯å¦ä¸º `int`ã€‚
    * è‹¥ä¸æ˜¯ï¼Œå®¢æˆ·ç«¯ä¼šçœ‹åˆ°æœ‰ç”¨ä¸”æ¸…æ™°çš„é”™è¯¯æç¤ºã€‚
* æ£€æŸ¥ `GET` è¯·æ±‚æ˜¯å¦æœ‰åä¸º `q` çš„å¯é€‰æŸ¥è¯¢å‚æ•°ï¼ˆå¦‚ `http://127.0.0.1:8000/items/foo?q=somequery`ï¼‰ã€‚
    * å› ä¸ºå‚æ•° `q` è¢«å£°æ˜ä¸º `= None`ï¼Œæ‰€ä»¥æ˜¯å¯é€‰çš„ã€‚
    * è‹¥æ²¡æœ‰ `None`ï¼Œåˆ™ä¸ºå¿…å¡«é¡¹ï¼ˆå¦‚ `PUT` è¯·æ±‚ä½“ï¼‰ã€‚
* å¯¹äº `/items/{item_id}` çš„ `PUT` è¯·æ±‚ï¼Œå°†è¯·æ±‚ä½“è§£æä¸º JSONï¼š
    * æ£€æŸ¥å¿…é¡»æœ‰ `name` å±æ€§ä¸”ç±»å‹ä¸º `str`ã€‚
    * æ£€æŸ¥å¿…é¡»æœ‰ `price` å±æ€§ä¸”ä¸º `float` ç±»å‹ã€‚
    * æ£€æŸ¥å¯é€‰å±æ€§ `is_offer`ï¼Œè‹¥å­˜åœ¨åˆ™åº”ä¸º `bool`ã€‚
    * è¿™äº›ä¹Ÿé€‚ç”¨äºæ·±åº¦åµŒå¥—çš„ JSONã€‚
* è‡ªåŠ¨è¿›è¡Œ JSON çš„è½¬æ¢ã€‚
* ç”¨ OpenAPI æ ‡å‡†è®°å½•æ‰€æœ‰ä¿¡æ¯ï¼Œå¯ä¾›ï¼š
    * äº¤äº’å¼æ–‡æ¡£ç³»ç»Ÿä½¿ç”¨
    * å¤šè¯­è¨€è‡ªåŠ¨ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç 
* ç›´æ¥æä¾›ä¸¤ç§äº¤äº’å¼æ–‡æ¡£ç•Œé¢ã€‚

---

è¿™åªæ˜¯å†°å±±ä¸€è§’ï¼Œä½†ä½ å·²ç»äº†è§£å…¶æ•´ä½“å·¥ä½œæ–¹å¼ã€‚

è¯•ç€å°†è¿™è¡Œä»£ç ï¼š

```Python
    return {"item_name": item.name, "item_id": item_id}
```

...ä»ï¼š

```Python
        ... "item_name": item.name ...
```

...æ”¹ä¸ºï¼š

```Python
        ... "item_price": item.price ...
```

...ä½ ä¼šå‘ç°ç¼–è¾‘å™¨è‡ªåŠ¨è¡¥å…¨å±æ€§å¹¶çŸ¥æ™“å…¶ç±»å‹ï¼š

![editor support](https://fastapi.tiangolo.com/img/vscode-completion.png)

å¦‚éœ€åŒ…å«æ›´å¤šåŠŸèƒ½çš„å®Œæ•´ç¤ºä¾‹ï¼Œè¯·å‚è€ƒ <a href="https://fastapi.tiangolo.com/tutorial/">æ•™ç¨‹ - ç”¨æˆ·æŒ‡å—</a>ã€‚

**å‰§é€æç¤º**ï¼šæ•™ç¨‹-ç”¨æˆ·æŒ‡å—å†…å®¹åŒ…æ‹¬ï¼š

* ä»**headers**ã€**cookies**ã€**è¡¨å•å­—æ®µ**å’Œ**æ–‡ä»¶**ç­‰ä¸åŒä½ç½®å£°æ˜**å‚æ•°**ã€‚
* å¦‚ä½•è®¾ç½®å¦‚ `maximum_length` æˆ– `regex` ç­‰**éªŒè¯çº¦æŸ**ã€‚
* å¼ºå¤§ä¸”æ˜“ç”¨çš„ **<abbr title="åˆç§°ä¸ºç»„ä»¶ã€èµ„æºã€æä¾›è€…ã€æœåŠ¡ã€å¯æ³¨å…¥é¡¹">ä¾èµ–æ³¨å…¥</abbr>** ç³»ç»Ÿã€‚
* å®‰å…¨ä¸è®¤è¯ï¼Œæ”¯æŒ **OAuth2**ï¼ˆå« **JWT token**ï¼‰å’Œ **HTTP Basic** è®¤è¯ã€‚
* æ›´é«˜çº§ï¼ˆä½†åŒæ ·ç®€å•ï¼‰çš„å£°æ˜**æ·±åº¦åµŒå¥— JSON æ¨¡å‹**ï¼ˆå¾—ç›Šäº Pydanticï¼‰ã€‚
* ä¸ <a href="https://strawberry.rocks" class="external-link" target="_blank">Strawberry</a> ç­‰åº“é›†æˆçš„ **GraphQL**ã€‚
* è®¸å¤šé¢å¤–åŠŸèƒ½ï¼ˆå½’åŠŸäº Starletteï¼‰ï¼Œå¦‚ï¼š
    * **WebSockets**
    * åŸºäº HTTPX å’Œ `pytest` çš„æç®€æµ‹è¯•
    * **CORS**
    * **Cookie ä¼šè¯**
    * ...ä»¥åŠæ›´å¤šã€‚

## æ€§èƒ½

ç‹¬ç«‹ TechEmpower åŸºå‡†æµ‹è¯•æ˜¾ç¤ºï¼Œ**FastAPI** åº”ç”¨åœ¨ Uvicorn ä¸‹è¿è¡Œæ—¶ä¸º<a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">ç°æœ‰æœ€å¿«çš„ Python æ¡†æ¶ä¹‹ä¸€</a>ï¼Œä»…æ¬¡äº Starlette å’Œ Uvicornï¼ˆFastAPI å†…éƒ¨ä½¿ç”¨ï¼‰ã€‚(*)

æƒ³äº†è§£æ›´å¤šï¼Œè¯·é˜…è¯» <a href="https://fastapi.tiangolo.com/benchmarks/" class="internal-link" target="_blank">æ€§èƒ½åŸºå‡†</a>ç« èŠ‚ã€‚

## ä¾èµ–

FastAPI ä¾èµ– Pydantic å’Œ Starletteã€‚

### `standard` ä¾èµ–

é€šè¿‡ `pip install "fastapi[standard]"` å®‰è£… FastAPI æ—¶ï¼Œä¼šåŒ…å« `standard` å¯é€‰ä¾èµ–ç»„ï¼š

Pydantic ç”¨åˆ°ï¼š

* <a href="https://github.com/JoshData/python-email-validator" target="_blank"><code>email-validator</code></a> â€”â€” ç”¨äºé‚®ç®±éªŒè¯ã€‚

Starlette ç”¨åˆ°ï¼š

* <a href="https://www.python-httpx.org" target="_blank"><code>httpx</code></a> â€”â€” å¦‚æœè¦ä½¿ç”¨ `TestClient`ï¼Œåˆ™å¿…éœ€ã€‚
* <a href="https://jinja.palletsprojects.com" target="_blank"><code>jinja2</code></a> â€”â€” å¦‚æœè¦ä½¿ç”¨é»˜è®¤æ¨¡æ¿é…ç½®ï¼Œåˆ™å¿…éœ€ã€‚
* <a href="https://github.com/Kludex/python-multipart" target="_blank"><code>python-multipart</code></a> â€”â€” å¦‚æœè¦æ”¯æŒè¡¨å• <abbr title="å°† HTTP è¯·æ±‚ä¸­çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º Python æ•°æ®">"è§£æ"</abbr>ï¼Œå³ç”¨ `request.form()`ï¼Œåˆ™å¿…éœ€ã€‚

FastAPI / Starlette ç”¨åˆ°ï¼š

* <a href="https://www.uvicorn.org" target="_blank"><code>uvicorn</code></a> â€”â€” ç”¨äºåŠ è½½å’ŒæœåŠ¡ä½ çš„åº”ç”¨çš„æœåŠ¡å™¨ã€‚åŒ…å« `uvicorn[standard]`ï¼Œå…¶ä¸­åŒ…æ‹¬éƒ¨åˆ†é«˜æ€§èƒ½æ‰€éœ€ä¾èµ–ï¼ˆå¦‚ `uvloop`ï¼‰ã€‚
* `fastapi-cli` â€”â€” æä¾› `fastapi` å‘½ä»¤è¡Œå·¥å…·ã€‚

### ä¸å¸¦ `standard` ä¾èµ–

å¦‚æœä¸æƒ³åŒ…å« `standard` å¯é€‰ä¾èµ–ï¼Œå¯ç”¨ `pip install fastapi` æ›¿ä»£ `pip install "fastapi[standard]"`ã€‚

### å…¶ä»–å¯é€‰ä¾èµ–

ä½ å¯èƒ½è¿˜æƒ³å®‰è£…ä¸€äº›é™„åŠ ä¾èµ–ã€‚

Pydantic é¢å¤–å¯é€‰ä¾èµ–ï¼š

* <a href="https://docs.pydantic.dev/latest/usage/pydantic_settings/" target="_blank"><code>pydantic-settings</code></a> â€”â€” ç”¨äºé…ç½®ç®¡ç†ã€‚
* <a href="https://docs.pydantic.dev/latest/usage/types/extra_types/extra_types/" target="_blank"><code>pydantic-extra-types</code></a> â€”â€” æä¾› Pydantic å¯ç”¨çš„é¢å¤–ç±»å‹ã€‚

FastAPI é™„åŠ å¯é€‰ä¾èµ–ï¼š

* <a href="https://github.com/ijl/orjson" target="_blank"><code>orjson</code></a> â€”â€” è‹¥éœ€è¦ç”¨ `ORJSONResponse`ï¼Œåˆ™å¿…éœ€ã€‚
* <a href="https://github.com/esnme/ultrajson" target="_blank"><code>ujson</code></a> â€”â€” è‹¥éœ€è¦ç”¨ `UJSONResponse`ï¼Œåˆ™å¿…éœ€ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å‘å¸ƒã€‚

---

[Powered By OpenAiTx](https://github.com/OpenAiTx/OpenAiTx)

---